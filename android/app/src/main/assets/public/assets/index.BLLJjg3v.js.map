{"version":3,"mappings":"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","names":["f","require$$0","k","l","m","n","p","q","c","a","g","b","d","e","h","reactJsxRuntime_production_min","jsxRuntimeModule","createRoot","defaultAttributes","toKebabCase","string","createLucideIcon","iconName","iconNode","Component","forwardRef","color","size","strokeWidth","absoluteStrokeWidth","children","rest","ref","createElement","tag","attrs","AlertCircle","AlertTriangle","ArrowLeft","ArrowRight","BarChart","Bell","BookMarked","Calendar","Camera","CheckCircle","Check","ChevronLeft","ChevronRight","Clock","Crown","ExternalLink","EyeOff","Eye","Filter","Globe","Home","Image","LayoutGrid","LayoutList","Link","Loader2","Lock","Mail","MapPin","Menu","MessageCircle","MessageSquare","Moon","Pen","Pencil","Plus","RefreshCw","Save","Search","Send","Settings","Share2","Shield","Smile","Sun","Trash2","Trophy","Upload","UserPlus","User","Users","XCircle","X","supabaseUrl","supabaseAnonKey","supabase","createClient","testConnection","data","error","dbError","saveSettings","settings","user","profile_photo_url","fileExt","filePath","uploadError","publicUrl","photo_file","settingsToSave","ProfilesContext","createContext","useProfiles","context","useContext","ProfilesProvider","profiles","setProfiles","useState","friendsProfiles","setFriendsProfiles","loading","setLoading","setError","friendshipCache","setFriendshipCache","allProfiles","useEffect","mounted","subscription","event","session","fetchAllProfiles","err","errorMessage","authError","fetchFriendshipCache","fetchOwnProfiles","fetchFriendsProfiles","userId","friendships","friendshipsError","granterUserIds","userSettings","userSettingsError","friendshipData","friendship","userSetting","us","profilesData","profilesError","formattedProfiles","profile","_a","sport","administratorFriendships","adminUserIds","friendProfilesData","friendProfilesError","formattedFriendsProfiles","getProfile","id","profileError","isOwnProfile","ownerName","ownerPhoto","addProfile","newProfile","sportsError","updateProfile","deleteProfile","jsx","Sidebar","onClose","navigate","useNavigate","navigation","LinkIcon","handleChildClick","childId","jsxs","item","NavLink","isActive","subItem","child","AppContext","useApp","AppProvider","childrenData","platformsData","generateEvents","now","year","month","events","i","isGame","startTime","endTime","platform","upcomingEvents","value","ThemeContext","useTheme","ThemeProvider","theme","setTheme","toggleTheme","prevTheme","NotificationCenter","onOpenChat","notifications","setNotifications","subscriptionRef","useRef","fetchNotifications","payload","newNotification","prev","updatedNotification","deletedId","status","userError","notificationsData","notificationsError","handleNotificationClick","notification","markAsRead","handleFriendRequestAction","action","friendRequestId","requestData","updateError","friendshipError","deleteNotification","notificationId","markAllAsRead","clearAllNotifications","getNotificationIcon","type","getTimeAgo","dateString","date","diffInMinutes","diffInHours","unreadCount","Fragment","MarkAsRead","ChatModal","friend","messages","setMessages","newMessage","setNewMessage","sending","setSending","conversation","setConversation","currentUserId","setCurrentUserId","currentUserInfo","setCurrentUserInfo","showEmoticons","setShowEmoticons","messagesEndRef","messagesContainerRef","inputRef","emoticonRef","emoticons","scrollToBottom","behavior","forceScrollToBottom","initializeChat","handleClickOutside","senderSettings","messageWithSender","msg","newMessages","markMessageAsRead","updatedMessage","conversationData","findOrCreateConversation","loadMessages","markConversationAsRead","friendId","participant1","participant2","existingConversation","findError","newConversation","createError","refetchError","conversationId","messagesData","messagesWithSenders","message","sendMessage","messageContent","insertedMessage","addEmoticon","emoticon","messageId","handleKeyPress","formatTime","index","isCurrentUser","showAvatar","_b","category","emojis","emoji","Header","notificationsOpen","setNotificationsOpen","userMenuOpen","setUserMenuOpen","friendsOpen","setFriendsOpen","notificationCount","setNotificationCount","friends","setFriends","filteredFriends","setFilteredFriends","friendSearchQuery","setFriendSearchQuery","loadingFriends","setLoadingFriends","selectedFriend","setSelectedFriend","toggleNotifications","toggleUserMenu","toggleFriends","fetchFriends","fetchNotificationCount","notificationsSubscription","messagesSubscription","query","sorted","nameA","nameB","count","countError","friendsData","friendsError","friendIds","friendUsers","settingsError","s","friendsWithUnreadCounts","u","lastMessageAt","handleSignOut","handleFriendClick","handleManageFriends","handleOpenChatFromNotification","friendInfo","getRoleIcon","role","getRoleLabel","total","Layout","sidebarOpen","setSidebarOpen","toggleSidebar","Outlet","_typeof","o","toPrimitive","t","r","toPropertyKey","_defineProperty","getDefaultExportFromCjs$1","x","invariant_1","hasRequiredInvariant","requireInvariant","invariant","condition","format","args","argIndex","invariantExports","MapContext","useGoogleMap","map","reduce","obj","fn","acc","newAcc","key","forEach","applyUpdaterToNextProps","updaterMap","prevProps","nextProps","instance","iter","nextValue","registerEvents","props","eventMap","registeredList","googleEventName","onEventName","unregisterEvent","registered","unregisterEvents","applyUpdatersToPropsAndRegisterEvents","_ref","registeredEvents","eventMap$i","updaterMap$i","extra","it","center","clickable","heading","mapTypeId","options","streetView","tilt","zoom","GoogleMapFunctional","mapContainerStyle","mapContainerClassName","onClick","onDblClick","onDrag","onDragEnd","onDragStart","onMouseMove","onMouseOut","onMouseOver","onMouseDown","onMouseUp","onRightClick","onCenterChanged","onLoad","onUnmount","setMap","centerChangedListener","setCenterChangedListener","dblclickListener","setDblclickListener","dragendListener","setDragendListener","dragstartListener","setDragstartListener","mousedownListener","setMousedownListener","mousemoveListener","setMousemoveListener","mouseoutListener","setMouseoutListener","mouseoverListener","setMouseoverListener","mouseupListener","setMouseupListener","rightclickListener","setRightclickListener","clickListener","setClickListener","dragListener","setDragListener","memo","GoogleMap","PureComponent","latLng","asyncGeneratorStep","_asyncToGenerator","_next","_throw","makeLoadScriptUrl","googleMapsApiKey","googleMapsClientId","version","language","region","libraries","channel","mapIds","authReferrerPolicy","params","isBrowser","injectScript","url","nonce","resolve","reject","existingScript","windowWithGoogleMap","dataStateAttribute","originalInitMap","originalErrorCallback","script","isGoogleFontStyle","element","href","preventGoogleFonts","head","trueInsertBefore","newElement","referenceElement","trueAppend","textNode","cleaningUp","DefaultLoadingElement","defaultLoadScriptProps","LoadScript","promiseCallback","timer","link","style","injectScriptOptions","el","timeoutCallback","_objectWithoutPropertiesLoose","_objectWithoutProperties","previouslyLoadedUrl","useLoadScript","preventGoogleFontsLoading","isMounted","isLoaded","setLoaded","loadError","setLoadError","setLoadedIfMounted","prevLibraries","_excluded$1","defaultLoadingElement","LoadScriptNext","loadingElement","onError","hookOptions","LoaderStatus","ownKeys$f","_objectSpread$f","eventMap$h","updaterMap$h","TrafficLayerFunctional","setInstance","trafficLayer","TrafficLayer","BicyclingLayerFunctional","bicyclingLayer","BicyclingLayer","TransitLayerFunctional","transitLayer","TransitLayer","ownKeys$e","_objectSpread$e","eventMap$g","updaterMap$g","drawingMode","DrawingManagerFunctional","onCircleComplete","onMarkerComplete","onOverlayComplete","onPolygonComplete","onPolylineComplete","onRectangleComplete","circlecompleteListener","setCircleCompleteListener","markercompleteListener","setMarkerCompleteListener","overlaycompleteListener","setOverlayCompleteListener","polygoncompleteListener","setPolygonCompleteListener","polylinecompleteListener","setPolylineCompleteListener","rectanglecompleteListener","setRectangleCompleteListener","drawingManager","DrawingManager","ownKeys$d","_objectSpread$d","eventMap$f","updaterMap$f","animation","cursor","draggable","icon","label","opacity","position","shape","title","visible","zIndex","defaultOptions$5","MarkerFunctional","clusterer","noClustererRedraw","onClickableChanged","onCursorChanged","onAnimationChanged","onDraggableChanged","onFlatChanged","onIconChanged","onPositionChanged","onShapeChanged","onTitleChanged","onVisibleChanged","onZindexChanged","clickableChangedListener","setClickableChangedListener","cursorChangedListener","setCursorChangedListener","animationChangedListener","setAnimationChangedListener","draggableChangedListener","setDraggableChangedListener","flatChangedListener","setFlatChangedListener","iconChangedListener","setIconChangedListener","positionChangedListener","setPositionChangedListener","shapeChangedListener","setShapeChangedListener","titleChangedListener","setTitleChangedListener","visibleChangedListener","setVisibleChangedListener","zIndexChangedListener","setZindexChangedListener","markerOptions","marker","chx","useMemo","Children","isValidElement","elementChild","cloneElement","Marker","_this","ClusterIcon","cluster","styles","markerClusterer_1","maxZoom_1","bounds_1","pos","_c","_d","_e","_f","divTitle","bp","spriteH","spriteV","img","textElm","sums","latlng","Cluster$1","Cluster","markerClusterer","bounds","markers","_i","markers_1","length_1","mCount","maxZoom","markerElement","CALCULATOR","numStyles","numberOfDigits","BATCH_SIZE","BATCH_SIZE_IE","IMAGE_PATH","IMAGE_EXTENSION","IMAGE_SIZES","CLUSTERER_CLASS","Clusterer","optMarkers","optOptions","listener","gridSize","minimumClusterSize","zoomOnClick","averageCenter","ignoreHidden","enableRetinaIcons","imageExtension","imagePath","imageSizes","calculator","batchSizeIE","clusterClass","optNoDraw","removed","markers_2","oldClusters","oldClusters_1","oldCluster","projection","trPix","blPix","point1","point2","optHide","p1","p2","R","dLat","dLon","distance","clusterToAddTo","clusterElement","iFirst","mapBounds","extendedMapBounds","iLast","obj1","obj2","object","property","prop","ownKeys$c","_objectSpread$c","eventMap$e","updaterMap$e","defaultOptions$4","MarkerClustererFunctional","onClusteringBegin","onClusteringEnd","clusteringBeginListener","setClusteringBeginListener","clusteringEndListener","setClusteringEndListener","clustererOptions","ClustererComponent","cancelHandler","InfoBox","ignoreHandler","panes","bw","events_1","event_1","disablePan","xOffset","yOffset","mapDiv","mapWidth","mapHeight","iwOffsetX","iwOffsetY","iwWidth","iwHeight","padX","padY","pixPosition","boxStyle","ownerDocument","computedStyle","currentStyle","content","isVisible","anchor","eventListener","_excluded","_excluded2","ownKeys$b","_objectSpread$b","eventMap$d","updaterMap$d","defaultOptions$3","InfoBoxFunctional","onCloseClick","onDomReady","onContentChanged","closeClickListener","setCloseClickListener","domReadyClickListener","setDomReadyClickListener","contentChangedClickListener","setContentChangedClickListener","positionChangedClickListener","setPositionChangedClickListener","zIndexChangedClickListener","setZindexChangedClickListener","containerElementRef","positionLatLng","_ref2","_position","infoBoxOptions","infoBox","createPortal","InfoBoxComponent","_ref3","fastDeepEqual","hasRequiredFastDeepEqual","requireFastDeepEqual","equal","length","keys","fastDeepEqualExports","ARRAY_TYPES","VERSION","HEADER_SIZE","KDBush","magic","versionAndType","ArrayType","nodeSize","numItems","arrayTypeIndex","coordsByteSize","idsByteSize","padCoords","y","numAdded","sort","minX","minY","maxX","maxY","ids","coords","stack","result","axis","right","left","_x","_y","qx","qy","r2","sqDist","select","z","sd","newLeft","newRight","j","swapItem","swap","arr","tmp","ax","ay","bx","by","dx","dy","defaultOptions$2","fround","OFFSET_ZOOM","OFFSET_ID","OFFSET_PARENT","OFFSET_NUM","OFFSET_PROP","Supercluster","points","log","minZoom","timerId","lng","lat","lngX","latY","tree","bbox","minLng","minLat","maxLng","maxLat","easternHem","westernHem","clusters","getClusterJSON","clusterId","originId","originZoom","errorMsg","limit","offset","leaves","z2","extent","radius","top","bottom","tile","expansionZoom","skipped","isCluster","tags","px","py","getClusterProperties","minPoints","nextData","stride","neighborIds","numPointsOrigin","numPoints","neighborId","wx","wy","clusterProperties","clusterPropIndex","_neighborId","_k","numPoints2","_neighborId2","_k2","_j","clone","original","clusterProps","xLng","yLat","abbrev","propIndex","properties","sin","y2","__rest","MarkerUtils","AbstractAlgorithm","_ref4","_ref5","noop$1","SuperClusterAlgorithm","input","changed","state","coordinates","_ref10","feature","_ref11","leaf","ClusterStats","clusterMarkerCounts","clusterMarkerSum","DefaultRenderer","_ref14","stats","svg","parser","svgEl","_clusterOptions","clusterOptions","extend","type1","type2","OverlayViewSafe","MarkerClustererEvents","defaultOnClusterClickHandler","_","MarkerClusterer","_ref15","algorithmOptions","algorithm","renderer","onClusterClick","noDraw","singleMarker","groupMarkers","_cluster2","ownKeys$a","_objectSpread$a","useGoogleMarkerClusterer","setMarkerClusterer","markerCluster","GoogleMarkerClusterer","eventMap$c","updaterMap$c","InfoWindowFunctional","closeclickListener","domreadyclickListener","contentchangedclickListener","positionchangedclickListener","zindexchangedclickListener","infoWindow","InfoWindow","ownKeys$9","_objectSpread$9","eventMap$b","updaterMap$b","editable","path","defaultOptions$1","PolylineFunctional","polyline","Polyline","ownKeys$8","_objectSpread$8","eventMap$a","updaterMap$a","paths","PolygonFunctional","onEdit","polygon","Polygon","polygonOptions","ownKeys$7","_objectSpread$7","eventMap$9","updaterMap$9","RectangleFunctional","onBoundsChanged","rightClickListener","setRightClickListener","boundsChangedListener","setBoundsChangedListener","rectangle","Rectangle","ownKeys$6","_objectSpread$6","eventMap$8","updaterMap$8","defaultOptions","CircleFunctional","onRadiusChanged","radiusChangedListener","setRadiusChangedListener","circle","Circle","_this$state$circle","ownKeys$5","_objectSpread$5","eventMap$7","updaterMap$7","geojson","callback","controlPosition","controls","mode","DataFunctional","onAddFeature","onRemoveFeature","onRemoveProperty","onSetGeometry","onSetProperty","addFeatureListener","setAddFeatureListener","removeFeatureListener","setRemoveFeatureListener","removePropertyListener","setRemovePropertyListener","setGeometryListener","setSetGeometryListener","setPropertyListener","setSetPropertyListener","Data","ownKeys$4","_objectSpread$4","eventMap$6","updaterMap$6","KmlLayer","kmlLayer","getOffsetOverride","containerElement","getPixelPositionOffset","createLatLng","inst","Type","createLatLngBounds","ensureOfType","factory","ensureOfTypeBounds","getLayoutStylesByBounds","mapCanvasProjection","ne","sw","getLayoutStylesByPosition","point","getLayoutStyles","arePositionsEqual","currentPosition","previousPosition","ownKeys$3","_objectSpread$3","createOverlay","container","pane","Overlay","_this$getPanes","layoutStyles","ownKeys$2","_objectSpread$2","convertToLatLngString","latLngLike","convertToLatLngBoundsString","latLngBoundsLike","latLngBounds","OverlayViewFunctional","mapPaneName","div","overlay","ReactDOM.createPortal","OverlayView","mapPanes","_this$props$onLoad","_this$props","_layoutStyles$top","_layoutStyles$left","_layoutStyles$width","_layoutStyles$height","_this$props$onUnmount","_this$props2","createRef","overlayView","prevPositionString","positionString","prevBoundsString","boundsString","paneEl","noop","ownKeys$1","_objectSpread$1","eventMap$5","updaterMap$5","GroundOverlayFunctional","imageBounds","groundOverlay","newBounds","GroundOverlay","ownKeys","_objectSpread","eventMap$4","updaterMap$4","HeatmapLayerFunctional","heatmapLayer","HeatmapLayer","eventMap$3","updaterMap$3","provider","links","motionTracking","pano","pov","StreetViewPanorama","_this$context$getStre","_this$context","streetViewPanorama","StreetViewService","streetViewService","eventMap$2","updaterMap$2","directions","panel","routeIndex","DirectionsRenderer","directionsRenderer","eventMap$1","updaterMap$1","StandaloneSearchBox","searchBox","restrictions","fields","types","Autocomplete","_this$containerElemen","autocomplete","EventModal","showShareModal","setShowShareModal","shareEmail","setShareEmail","isSharing","setIsSharing","shareError","setShareError","mapCenter","setMapCenter","React","results","handleShare","ShareModal","EventCard","showModal","setShowModal","ChildActivitySummary","ConnectedPlatform","Dashboard","setEvents","friendsEvents","setFriendsEvents","platforms","CalendarIcon","profileIds","fetchOwnEvents","useCallback","eventData","formattedEvents","fetchFriendsEvents","friendUserIds","userSettingsResult","friendProfilesResult","friendProfiles","transformedFriendProfiles","friendProfileIds","friendEventData","eventsError","formattedFriendEvents","allEvents","profilesWithEventCounts","CalendarHeader","view","days","day","MonthView","currentDate","selectedEvent","setSelectedEvent","getDaysInMonth","getFirstDayOfMonth","today","daysInMonth","firstDayOfMonth","prevMonth","prevMonthYear","daysInPrevMonth","calendarDays","remainingDays","nextMonth","nextMonthYear","eventsByDate","dateKey","dayEvents","isToday","eventIndex","WeekView","startOfWeek","diff","weekDays","timeSlots","hour","dayIndex","startHour","duration","DayView","eventDate","AgendaView","startOfMonth","endOfMonth","monthEvents","dateKeys","setCurrentDate","setView","filterOpen","setFilterOpen","selectedProfiles","setSelectedProfiles","selectedPlatforms","setSelectedPlatforms","selectedTypes","setSelectedTypes","showFriendsEvents","setShowFriendsEvents","allAvailableProfiles","navigatePrevious","newDate","navigateNext","navigateToday","renderTitle","endOfWeek","renderView","filteredEvents","Connections","location","useLocation","setPlatforms","connecting","setConnecting","connectionStep","setConnectionStep","showSuccessMessage","setShowSuccessMessage","availablePlatforms","connectedPlatformsData","uniquePlatforms","connectedPlatforms","handleConnect","platformId","handleDisconnect","handleRefresh","nextStep","getPlatformBenefits","platformName","getConnectionStatus","renderConnectionDialog","benefit","__viteBrowserExternal","root","module","this","CryptoJS","Math","undefined","crypto","global","require","cryptoSecureRandomInt","create","F","subtype","C","C_lib","Base","overrides","propertyName","WordArray","words","sigBytes","encoder","Hex","wordArray","thisWords","thatWords","thisSigBytes","thatSigBytes","thatByte","nBytes","C_enc","hexChars","bite","hexStr","hexStrLength","Latin1","latin1Chars","latin1Str","latin1StrLength","Utf8","utf8Str","BufferedBlockAlgorithm","doFlush","processedWords","dataWords","dataSigBytes","blockSize","blockSizeBytes","nBlocksReady","nWordsReady","nBytesReady","cfg","messageUpdate","hash","hasher","C_algo","superInit","subInit","typedArray","typedArrayByteLength","Hasher","H","K","isPrime","sqrtN","factor","getFractionalBits","nPrime","W","SHA256","M","gamma0x","gamma0","gamma1x","gamma1","ch","maj","sigma0","sigma1","t1","t2","nBitsTotal","nBitsLeft","urlSafe","base64Chars","byte1","byte2","byte3","triplet","paddingChar","base64Str","base64StrLength","reverseMap","paddingIndex","parseLoop","bits1","bits2","bitsCombined","$d415641d0cfd8c85$var$toBytesInt32","num","$d415641d0cfd8c85$var$getRandomValues","randoms","$fU9C9$cryptojslibtypedarrays","randoms1byte","word","fourByteWord","$d415641d0cfd8c85$var$random","mask","randomUints","randomIndex","$d415641d0cfd8c85$var$generateVerifier","$d415641d0cfd8c85$export$6a61b14641fe7480","code_verifier","$fU9C9$cryptojssha256","$fU9C9$cryptojsencbase64url","$d415641d0cfd8c85$export$2e2bcd8739ae039","verifier","challenge","TEAMSNAP_AUTH_URL","TEAMSNAP_TOKEN_URL","TEAMSNAP_API_URL","TeamSnapService","config","__publicField","pkceChallenge","authUrl","code","body","tokenResponse","errorData","tokenData","accessToken","refreshToken","endpoint","response","errorText","meResponse","idField","field","userItem","teamsResponse","teams","teamObj","teamId","eventsResponse","eventObj","activeTeams","team","platformTeam","teamError","profileId","teamEvents","eventsToInsert","profileMappings","mappingError","totalEvents","mapping","eventCount","TeamSnapConnection","isConnecting","setIsConnecting","isConnected","setIsConnected","setTeams","success","setSuccess","editingTeam","setEditingTeam","editingName","setEditingName","showMappingModal","setShowMappingModal","refreshingTeam","setRefreshingTeam","teamSnap","features","checkConnectionStatus","teamsData","teamsError","fetchTeams","teamsWithMappings","profileTeams","eventError","mapped_profiles","pt","deleteError","handleDelete","handleEditTeamName","currentName","handleSaveTeamName","handleCancelEdit","handleOpenMapping","handleSaveMapping","syncError","handleCancelMapping","toggleProfileSelection","Edit2","TeamSnapCallback","searchParams","useSearchParams","setStatus","Playmetrics","icsUrl","setIcsUrl","submitting","setSubmitting","validateIcsUrl","parsedUrl","handleSubmit","sessionError","teamName","syncResult","Profiles","showAddForm","setShowAddForm","selectedSports","setSelectedSports","photoFile","setPhotoFile","photoPreview","setPhotoPreview","formData","setFormData","colorOptions","availableSports","handlePhotoChange","file","reader","photoUrl","fileName","uploadData","sportData","handleViewProfile","handleInputChange","name","FriendsManager","incomingRequests","setIncomingRequests","outgoingRequests","setOutgoingRequests","searchEmail","setSearchEmail","searchResults","setSearchResults","requestMessage","setRequestMessage","searching","setSearching","searchDebugInfo","setSearchDebugInfo","editingFriend","setEditingFriend","editingRole","setEditingRole","searchUsers","searchTerm","existingFriendIds","pendingIncomingIds","pendingOutgoingIds","filteredUsers","isExistingFriend","hasPendingIncoming","hasPendingOutgoing","shouldInclude","transformedUsers","fetchFriendsData","timeoutId","transformedFriends","incomingData","incomingError","requesterIds","requesterUsers","requesterId","transformedIncoming","request","outgoingData","outgoingError","requestedIds","requestedUsers","requestedId","transformedOutgoing","sendFriendRequest","existingRequest","checkError","innerError","respondToRequest","requestId","removeFriend","friendshipId","fetchError","cancelRequest","updateFriendRole","newRole","startEditingRole","currentRole","cancelEditingRole","getAccessLevelDescription","Friends","createCapacitorPlatforms","win","defaultPlatformMap","capPlatforms","addPlatform","setPlatform","initPlatforms","CapacitorPlatforms","ExceptionCode","CapacitorException","getPlatformId","createCapacitor","capCustomPlatform","cap","Plugins","defaultGetPlatform","getPlatform","defaultIsNativePlatform","isNativePlatform","defaultIsPluginAvailable","pluginName","plugin","registeredPlugins","getPluginHeader","isPluginAvailable","defaultGetPluginHeader","handleError","pluginMethodNoop","_target","defaultRegisterPlugin","jsImplementations","registeredPlugin","pluginHeader","jsImplementation","loadPluginImplementation","createPluginMethod","impl","methodHeader","createPluginMethodWrapper","remove","wrapper","addListener","removeListener","addListenerNative","eventName","call","callbackId","proxy","registerPlugin","initCapacitorGlobal","Capacitor","WebPlugin","listenerFunc","windowListener","listeners","windowEventName","pluginEventName","handle","encode","str","decode","CapacitorCookiesPluginWeb","cookies","cookieMap","cookie","encodedKey","encodedValue","expires","domain","readBlobAsBase64","blob","base64String","normalizeHttpHeaders","headers","originalKeys","buildUrlParams","shouldEncode","accumulator","entry","buildRequestInit","output","form","CapacitorHttpPluginWeb","requestInit","urlParams","contentType","responseType","App","__vitePreload","Style","Animation","StatusBar","SplashScreen","KeyboardStyle","KeyboardResize","Keyboard","useCapacitor","isNative","setIsNative","native","currentPlatform","canGoBack","info","CameraSource","CameraDirection","CameraResultType","useCamera","isLoading","setIsLoading","MobilePhotoUpload","currentPhotoUrl","onPhotoChange","takePhoto","selectFromGallery","showOptions","setShowOptions","handleTakePhoto","photoDataUrl","handleSelectFromGallery","handleWebUpload","ProfilePhotoUpload","fileInputRef","previewUrl","setPreviewUrl","handleFileChange","handleMobilePhotoChange","fileOrDataUrl","defaultSettings","additionalEmails","setAdditionalEmails","newEmail","setNewEmail","hasUnsavedChanges","setHasUnsavedChanges","userEmail","setUserEmail","setSettings","isSaving","setIsSaving","checkAuth","loadUserData","settingsData","email","addEmail","removeEmail","handleSave","AddEventModal","onEventAdded","sports","autocompleteRef","onPlaceSelected","place","startDateTime","endDateTime","TeamMapping","selectedTeams","setSelectedTeams","saving","setSaving","syncing","setSyncing","platformTeams","platformError","toggleTeam","groupedTeams","ChildProfile","useParams","setChild","showAddEventModal","setShowAddEventModal","showDeleteModal","setShowDeleteModal","showEditModal","setShowEditModal","showTeamMapping","setShowTeamMapping","handleEventAdded","handleEdit","handleEditSubmit","updatedProfile","renderCalendarView","isFriendProfile","NotFound","testSupabaseConnection","timeoutPromise","connectionPromise","authData","SignIn","returnTo","connectionStatus","setConnectionStatus","Auth","ThemeSupa","SignUp","ForgotPassword","setEmail","redirectUrl","ResetPassword","password","setPassword","confirmPassword","setConfirmPassword","showPassword","setShowPassword","showConfirmPassword","setShowConfirmPassword","validatePassword","pwd","passwordError","AuthCallback","PushNotifications","usePushNotifications","token","setToken","isRegistered","setIsRegistered","LocalNotifications","MobileOptimizations","isIOS","isAndroid","viewport","useAuth","setUser","_event","LoadingSpinner","ErrorBoundary","hasError","setHasError","setErrorMessage","ProtectedRoute","Navigate","AppContent","initialized","setInitialized","Router","Routes","Route","Suspense","reactRoot","StrictMode"],"ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,67,81,82,83,84,85,93,94,95,96,97,98,99,101,102,117],"sources":["../../node_modules/react/cjs/react-jsx-runtime.production.min.js","../../node_modules/react/jsx-runtime.js","../../node_modules/react-dom/client.js","../../node_modules/lucide-react/dist/esm/defaultAttributes.js","../../node_modules/lucide-react/dist/esm/createLucideIcon.js","../../node_modules/lucide-react/dist/esm/icons/alert-circle.js","../../node_modules/lucide-react/dist/esm/icons/alert-triangle.js","../../node_modules/lucide-react/dist/esm/icons/arrow-left.js","../../node_modules/lucide-react/dist/esm/icons/arrow-right.js","../../node_modules/lucide-react/dist/esm/icons/bar-chart.js","../../node_modules/lucide-react/dist/esm/icons/bell.js","../../node_modules/lucide-react/dist/esm/icons/book-marked.js","../../node_modules/lucide-react/dist/esm/icons/calendar.js","../../node_modules/lucide-react/dist/esm/icons/camera.js","../../node_modules/lucide-react/dist/esm/icons/check-circle.js","../../node_modules/lucide-react/dist/esm/icons/check.js","../../node_modules/lucide-react/dist/esm/icons/chevron-left.js","../../node_modules/lucide-react/dist/esm/icons/chevron-right.js","../../node_modules/lucide-react/dist/esm/icons/clock.js","../../node_modules/lucide-react/dist/esm/icons/crown.js","../../node_modules/lucide-react/dist/esm/icons/external-link.js","../../node_modules/lucide-react/dist/esm/icons/eye-off.js","../../node_modules/lucide-react/dist/esm/icons/eye.js","../../node_modules/lucide-react/dist/esm/icons/filter.js","../../node_modules/lucide-react/dist/esm/icons/globe.js","../../node_modules/lucide-react/dist/esm/icons/home.js","../../node_modules/lucide-react/dist/esm/icons/image.js","../../node_modules/lucide-react/dist/esm/icons/layout-grid.js","../../node_modules/lucide-react/dist/esm/icons/layout-list.js","../../node_modules/lucide-react/dist/esm/icons/link.js","../../node_modules/lucide-react/dist/esm/icons/loader-2.js","../../node_modules/lucide-react/dist/esm/icons/lock.js","../../node_modules/lucide-react/dist/esm/icons/mail.js","../../node_modules/lucide-react/dist/esm/icons/map-pin.js","../../node_modules/lucide-react/dist/esm/icons/menu.js","../../node_modules/lucide-react/dist/esm/icons/message-circle.js","../../node_modules/lucide-react/dist/esm/icons/message-square.js","../../node_modules/lucide-react/dist/esm/icons/moon.js","../../node_modules/lucide-react/dist/esm/icons/pen.js","../../node_modules/lucide-react/dist/esm/icons/pencil.js","../../node_modules/lucide-react/dist/esm/icons/plus.js","../../node_modules/lucide-react/dist/esm/icons/refresh-cw.js","../../node_modules/lucide-react/dist/esm/icons/save.js","../../node_modules/lucide-react/dist/esm/icons/search.js","../../node_modules/lucide-react/dist/esm/icons/send.js","../../node_modules/lucide-react/dist/esm/icons/settings.js","../../node_modules/lucide-react/dist/esm/icons/share-2.js","../../node_modules/lucide-react/dist/esm/icons/shield.js","../../node_modules/lucide-react/dist/esm/icons/smile.js","../../node_modules/lucide-react/dist/esm/icons/sun.js","../../node_modules/lucide-react/dist/esm/icons/trash-2.js","../../node_modules/lucide-react/dist/esm/icons/trophy.js","../../node_modules/lucide-react/dist/esm/icons/upload.js","../../node_modules/lucide-react/dist/esm/icons/user-plus.js","../../node_modules/lucide-react/dist/esm/icons/user.js","../../node_modules/lucide-react/dist/esm/icons/users.js","../../node_modules/lucide-react/dist/esm/icons/x-circle.js","../../node_modules/lucide-react/dist/esm/icons/x.js","../../src/lib/supabase.ts","../../src/context/ProfilesContext.tsx","../../src/components/layout/Sidebar.tsx","../../src/context/AppContext.tsx","../../src/context/ThemeContext.tsx","../../src/components/notifications/NotificationCenter.tsx","../../src/components/chat/ChatModal.tsx","../../src/components/layout/Header.tsx","../../src/components/layout/Layout.tsx","../../node_modules/@react-google-maps/api/dist/esm.js","../../src/components/events/EventModal.tsx","../../src/components/events/EventCard.tsx","../../src/components/dashboard/ChildActivitySummary.tsx","../../src/components/dashboard/ConnectedPlatform.tsx","../../src/pages/Dashboard.tsx","../../src/components/calendar/CalendarHeader.tsx","../../src/components/calendar/MonthView.tsx","../../src/components/calendar/WeekView.tsx","../../src/components/calendar/DayView.tsx","../../src/components/calendar/AgendaView.tsx","../../src/pages/Calendar.tsx","../../src/pages/Connections.tsx","../../__vite-browser-external","../../node_modules/crypto-js/core.js","../../node_modules/crypto-js/lib-typedarrays.js","../../node_modules/crypto-js/sha256.js","../../node_modules/crypto-js/enc-base64url.js","../../node_modules/pkce-challenge/dist/module.js","../../src/services/teamsnap.ts","../../src/pages/connections/TeamSnapConnection.tsx","../../src/pages/connections/TeamSnapCallback.tsx","../../src/pages/connections/Playmetrics.tsx","../../src/pages/Profiles.tsx","../../src/components/friends/FriendsManager.tsx","../../src/pages/Friends.tsx","../../node_modules/@capacitor/core/dist/index.js","../../node_modules/@capacitor/app/dist/esm/index.js","../../node_modules/@capacitor/status-bar/dist/esm/definitions.js","../../node_modules/@capacitor/status-bar/dist/esm/index.js","../../node_modules/@capacitor/splash-screen/dist/esm/index.js","../../node_modules/@capacitor/keyboard/dist/esm/definitions.js","../../node_modules/@capacitor/keyboard/dist/esm/index.js","../../src/hooks/useCapacitor.ts","../../node_modules/@capacitor/camera/dist/esm/definitions.js","../../node_modules/@capacitor/camera/dist/esm/index.js","../../src/hooks/useCamera.ts","../../src/components/mobile/MobilePhotoUpload.tsx","../../src/components/ProfilePhotoUpload.tsx","../../src/pages/Settings.tsx","../../src/components/events/AddEventModal.tsx","../../src/components/teams/TeamMapping.tsx","../../src/pages/ChildProfile.tsx","../../src/pages/NotFound.tsx","../../src/lib/testConnection.ts","../../src/pages/auth/SignIn.tsx","../../src/pages/auth/SignUp.tsx","../../src/pages/auth/ForgotPassword.tsx","../../src/pages/auth/ResetPassword.tsx","../../src/pages/auth/AuthCallback.tsx","../../node_modules/@capacitor/push-notifications/dist/esm/index.js","../../src/hooks/usePushNotifications.ts","../../src/components/mobile/MobileOptimizations.tsx","../../src/hooks/useAuth.ts","../../src/App.tsx","../../src/main.tsx"],"sourcesContent":["/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","/**\n * lucide-react v0.292.0 - ISC\n */\n\nvar defaultAttributes = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: 24,\n  height: 24,\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: 2,\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\"\n};\n\nexport { defaultAttributes as default };\n//# sourceMappingURL=defaultAttributes.js.map\n","/**\n * lucide-react v0.292.0 - ISC\n */\n\nimport { forwardRef, createElement } from 'react';\nimport defaultAttributes from './defaultAttributes.js';\n\nconst toKebabCase = (string) => string.replace(/([a-z0-9])([A-Z])/g, \"$1-$2\").toLowerCase();\nconst createLucideIcon = (iconName, iconNode) => {\n  const Component = forwardRef(\n    ({ color = \"currentColor\", size = 24, strokeWidth = 2, absoluteStrokeWidth, children, ...rest }, ref) => createElement(\n      \"svg\",\n      {\n        ref,\n        ...defaultAttributes,\n        width: size,\n        height: size,\n        stroke: color,\n        strokeWidth: absoluteStrokeWidth ? Number(strokeWidth) * 24 / Number(size) : strokeWidth,\n        className: `lucide lucide-${toKebabCase(iconName)}`,\n        ...rest\n      },\n      [\n        ...iconNode.map(([tag, attrs]) => createElement(tag, attrs)),\n        ...(Array.isArray(children) ? children : [children]) || []\n      ]\n    )\n  );\n  Component.displayName = `${iconName}`;\n  return Component;\n};\n\nexport { createLucideIcon as default, toKebabCase };\n//# sourceMappingURL=createLucideIcon.js.map\n","/**\n * lucide-react v0.292.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst AlertCircle = createLucideIcon(\"AlertCircle\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"8\", y2: \"12\", key: \"1pkeuh\" }],\n  [\"line\", { x1: \"12\", x2: \"12.01\", y1: \"16\", y2: \"16\", key: \"4dfq90\" }]\n]);\n\nexport { AlertCircle as default };\n//# sourceMappingURL=alert-circle.js.map\n","/**\n * lucide-react v0.292.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst AlertTriangle = createLucideIcon(\"AlertTriangle\", [\n  [\n    \"path\",\n    {\n      d: \"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z\",\n      key: \"c3ski4\"\n    }\n  ],\n  [\"path\", { d: \"M12 9v4\", key: \"juzpu7\" }],\n  [\"path\", { d: \"M12 17h.01\", key: \"p32p05\" }]\n]);\n\nexport { AlertTriangle as default };\n//# sourceMappingURL=alert-triangle.js.map\n","/**\n * lucide-react v0.292.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ArrowLeft = createLucideIcon(\"ArrowLeft\", [\n  [\"path\", { d: \"m12 19-7-7 7-7\", key: \"1l729n\" }],\n  [\"path\", { d: \"M19 12H5\", key: \"x3x0zl\" }]\n]);\n\nexport { ArrowLeft as default };\n//# sourceMappingURL=arrow-left.js.map\n","/**\n * lucide-react v0.292.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ArrowRight = createLucideIcon(\"ArrowRight\", [\n  [\"path\", { d: \"M5 12h14\", key: \"1ays0h\" }],\n  [\"path\", { d: \"m12 5 7 7-7 7\", key: \"xquz4c\" }]\n]);\n\nexport { ArrowRight as default };\n//# sourceMappingURL=arrow-right.js.map\n","/**\n * lucide-react v0.292.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst BarChart = createLucideIcon(\"BarChart\", [\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"20\", y2: \"10\", key: \"1vz5eb\" }],\n  [\"line\", { x1: \"18\", x2: \"18\", y1: \"20\", y2: \"4\", key: \"cun8e5\" }],\n  [\"line\", { x1: \"6\", x2: \"6\", y1: \"20\", y2: \"16\", key: \"hq0ia6\" }]\n]);\n\nexport { BarChart as default };\n//# sourceMappingURL=bar-chart.js.map\n","/**\n * lucide-react v0.292.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Bell = createLucideIcon(\"Bell\", [\n  [\"path\", { d: \"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9\", key: \"1qo2s2\" }],\n  [\"path\", { d: \"M10.3 21a1.94 1.94 0 0 0 3.4 0\", key: \"qgo35s\" }]\n]);\n\nexport { Bell as default };\n//# sourceMappingURL=bell.js.map\n","/**\n * lucide-react v0.292.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst BookMarked = createLucideIcon(\"BookMarked\", [\n  [\n    \"path\",\n    {\n      d: \"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20\",\n      key: \"t4utmx\"\n    }\n  ],\n  [\"polyline\", { points: \"10 2 10 10 13 7 16 10 16 2\", key: \"13o6vz\" }]\n]);\n\nexport { BookMarked as default };\n//# sourceMappingURL=book-marked.js.map\n","/**\n * lucide-react v0.292.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Calendar = createLucideIcon(\"Calendar\", [\n  [\n    \"rect\",\n    {\n      width: \"18\",\n      height: \"18\",\n      x: \"3\",\n      y: \"4\",\n      rx: \"2\",\n      ry: \"2\",\n      key: \"eu3xkr\"\n    }\n  ],\n  [\"line\", { x1: \"16\", x2: \"16\", y1: \"2\", y2: \"6\", key: \"m3sa8f\" }],\n  [\"line\", { x1: \"8\", x2: \"8\", y1: \"2\", y2: \"6\", key: \"18kwsl\" }],\n  [\"line\", { x1: \"3\", x2: \"21\", y1: \"10\", y2: \"10\", key: \"xt86sb\" }]\n]);\n\nexport { Calendar as default };\n//# sourceMappingURL=calendar.js.map\n","/**\n * lucide-react v0.292.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Camera = createLucideIcon(\"Camera\", [\n  [\n    \"path\",\n    {\n      d: \"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z\",\n      key: \"1tc9qg\"\n    }\n  ],\n  [\"circle\", { cx: \"12\", cy: \"13\", r: \"3\", key: \"1vg3eu\" }]\n]);\n\nexport { Camera as default };\n//# sourceMappingURL=camera.js.map\n","/**\n * lucide-react v0.292.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst CheckCircle = createLucideIcon(\"CheckCircle\", [\n  [\"path\", { d: \"M22 11.08V12a10 10 0 1 1-5.93-9.14\", key: \"g774vq\" }],\n  [\"path\", { d: \"m9 11 3 3L22 4\", key: \"1pflzl\" }]\n]);\n\nexport { CheckCircle as default };\n//# sourceMappingURL=check-circle.js.map\n","/**\n * lucide-react v0.292.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Check = createLucideIcon(\"Check\", [\n  [\"path\", { d: \"M20 6 9 17l-5-5\", key: \"1gmf2c\" }]\n]);\n\nexport { Check as default };\n//# sourceMappingURL=check.js.map\n","/**\n * lucide-react v0.292.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ChevronLeft = createLucideIcon(\"ChevronLeft\", [\n  [\"path\", { d: \"m15 18-6-6 6-6\", key: \"1wnfg3\" }]\n]);\n\nexport { ChevronLeft as default };\n//# sourceMappingURL=chevron-left.js.map\n","/**\n * lucide-react v0.292.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ChevronRight = createLucideIcon(\"ChevronRight\", [\n  [\"path\", { d: \"m9 18 6-6-6-6\", key: \"mthhwq\" }]\n]);\n\nexport { ChevronRight as default };\n//# sourceMappingURL=chevron-right.js.map\n","/**\n * lucide-react v0.292.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Clock = createLucideIcon(\"Clock\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"polyline\", { points: \"12 6 12 12 16 14\", key: \"68esgv\" }]\n]);\n\nexport { Clock as default };\n//# sourceMappingURL=clock.js.map\n","/**\n * lucide-react v0.292.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Crown = createLucideIcon(\"Crown\", [\n  [\"path\", { d: \"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14\", key: \"zkxr6b\" }]\n]);\n\nexport { Crown as default };\n//# sourceMappingURL=crown.js.map\n","/**\n * lucide-react v0.292.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ExternalLink = createLucideIcon(\"ExternalLink\", [\n  [\n    \"path\",\n    {\n      d: \"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6\",\n      key: \"a6xqqp\"\n    }\n  ],\n  [\"polyline\", { points: \"15 3 21 3 21 9\", key: \"mznyad\" }],\n  [\"line\", { x1: \"10\", x2: \"21\", y1: \"14\", y2: \"3\", key: \"18c3s4\" }]\n]);\n\nexport { ExternalLink as default };\n//# sourceMappingURL=external-link.js.map\n","/**\n * lucide-react v0.292.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst EyeOff = createLucideIcon(\"EyeOff\", [\n  [\"path\", { d: \"M9.88 9.88a3 3 0 1 0 4.24 4.24\", key: \"1jxqfv\" }],\n  [\n    \"path\",\n    {\n      d: \"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68\",\n      key: \"9wicm4\"\n    }\n  ],\n  [\n    \"path\",\n    {\n      d: \"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61\",\n      key: \"1jreej\"\n    }\n  ],\n  [\"line\", { x1: \"2\", x2: \"22\", y1: \"2\", y2: \"22\", key: \"a6p6uj\" }]\n]);\n\nexport { EyeOff as default };\n//# sourceMappingURL=eye-off.js.map\n","/**\n * lucide-react v0.292.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Eye = createLucideIcon(\"Eye\", [\n  [\n    \"path\",\n    { d: \"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z\", key: \"rwhkz3\" }\n  ],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"3\", key: \"1v7zrd\" }]\n]);\n\nexport { Eye as default };\n//# sourceMappingURL=eye.js.map\n","/**\n * lucide-react v0.292.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Filter = createLucideIcon(\"Filter\", [\n  [\n    \"polygon\",\n    { points: \"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3\", key: \"1yg77f\" }\n  ]\n]);\n\nexport { Filter as default };\n//# sourceMappingURL=filter.js.map\n","/**\n * lucide-react v0.292.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Globe = createLucideIcon(\"Globe\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\n    \"path\",\n    { d: \"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20\", key: \"13o1zl\" }\n  ],\n  [\"path\", { d: \"M2 12h20\", key: \"9i4pu4\" }]\n]);\n\nexport { Globe as default };\n//# sourceMappingURL=globe.js.map\n","/**\n * lucide-react v0.292.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Home = createLucideIcon(\"Home\", [\n  [\n    \"path\",\n    { d: \"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z\", key: \"y5dka4\" }\n  ],\n  [\"polyline\", { points: \"9 22 9 12 15 12 15 22\", key: \"e2us08\" }]\n]);\n\nexport { Home as default };\n//# sourceMappingURL=home.js.map\n","/**\n * lucide-react v0.292.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Image = createLucideIcon(\"Image\", [\n  [\n    \"rect\",\n    {\n      width: \"18\",\n      height: \"18\",\n      x: \"3\",\n      y: \"3\",\n      rx: \"2\",\n      ry: \"2\",\n      key: \"1m3agn\"\n    }\n  ],\n  [\"circle\", { cx: \"9\", cy: \"9\", r: \"2\", key: \"af1f0g\" }],\n  [\"path\", { d: \"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21\", key: \"1xmnt7\" }]\n]);\n\nexport { Image as default };\n//# sourceMappingURL=image.js.map\n","/**\n * lucide-react v0.292.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst LayoutGrid = createLucideIcon(\"LayoutGrid\", [\n  [\"rect\", { width: \"7\", height: \"7\", x: \"3\", y: \"3\", rx: \"1\", key: \"1g98yp\" }],\n  [\n    \"rect\",\n    { width: \"7\", height: \"7\", x: \"14\", y: \"3\", rx: \"1\", key: \"6d4xhi\" }\n  ],\n  [\n    \"rect\",\n    { width: \"7\", height: \"7\", x: \"14\", y: \"14\", rx: \"1\", key: \"nxv5o0\" }\n  ],\n  [\n    \"rect\",\n    { width: \"7\", height: \"7\", x: \"3\", y: \"14\", rx: \"1\", key: \"1bb6yr\" }\n  ]\n]);\n\nexport { LayoutGrid as default };\n//# sourceMappingURL=layout-grid.js.map\n","/**\n * lucide-react v0.292.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst LayoutList = createLucideIcon(\"LayoutList\", [\n  [\"rect\", { width: \"7\", height: \"7\", x: \"3\", y: \"3\", rx: \"1\", key: \"1g98yp\" }],\n  [\n    \"rect\",\n    { width: \"7\", height: \"7\", x: \"3\", y: \"14\", rx: \"1\", key: \"1bb6yr\" }\n  ],\n  [\"path\", { d: \"M14 4h7\", key: \"3xa0d5\" }],\n  [\"path\", { d: \"M14 9h7\", key: \"1icrd9\" }],\n  [\"path\", { d: \"M14 15h7\", key: \"1mj8o2\" }],\n  [\"path\", { d: \"M14 20h7\", key: \"11slyb\" }]\n]);\n\nexport { LayoutList as default };\n//# sourceMappingURL=layout-list.js.map\n","/**\n * lucide-react v0.292.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Link = createLucideIcon(\"Link\", [\n  [\n    \"path\",\n    {\n      d: \"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71\",\n      key: \"1cjeqo\"\n    }\n  ],\n  [\n    \"path\",\n    {\n      d: \"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71\",\n      key: \"19qd67\"\n    }\n  ]\n]);\n\nexport { Link as default };\n//# sourceMappingURL=link.js.map\n","/**\n * lucide-react v0.292.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Loader2 = createLucideIcon(\"Loader2\", [\n  [\"path\", { d: \"M21 12a9 9 0 1 1-6.219-8.56\", key: \"13zald\" }]\n]);\n\nexport { Loader2 as default };\n//# sourceMappingURL=loader-2.js.map\n","/**\n * lucide-react v0.292.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Lock = createLucideIcon(\"Lock\", [\n  [\n    \"rect\",\n    {\n      width: \"18\",\n      height: \"11\",\n      x: \"3\",\n      y: \"11\",\n      rx: \"2\",\n      ry: \"2\",\n      key: \"1w4ew1\"\n    }\n  ],\n  [\"path\", { d: \"M7 11V7a5 5 0 0 1 10 0v4\", key: \"fwvmzm\" }]\n]);\n\nexport { Lock as default };\n//# sourceMappingURL=lock.js.map\n","/**\n * lucide-react v0.292.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Mail = createLucideIcon(\"Mail\", [\n  [\n    \"rect\",\n    { width: \"20\", height: \"16\", x: \"2\", y: \"4\", rx: \"2\", key: \"18n3k1\" }\n  ],\n  [\"path\", { d: \"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7\", key: \"1ocrg3\" }]\n]);\n\nexport { Mail as default };\n//# sourceMappingURL=mail.js.map\n","/**\n * lucide-react v0.292.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst MapPin = createLucideIcon(\"MapPin\", [\n  [\n    \"path\",\n    { d: \"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z\", key: \"2oe9fu\" }\n  ],\n  [\"circle\", { cx: \"12\", cy: \"10\", r: \"3\", key: \"ilqhr7\" }]\n]);\n\nexport { MapPin as default };\n//# sourceMappingURL=map-pin.js.map\n","/**\n * lucide-react v0.292.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Menu = createLucideIcon(\"Menu\", [\n  [\"line\", { x1: \"4\", x2: \"20\", y1: \"12\", y2: \"12\", key: \"1e0a9i\" }],\n  [\"line\", { x1: \"4\", x2: \"20\", y1: \"6\", y2: \"6\", key: \"1owob3\" }],\n  [\"line\", { x1: \"4\", x2: \"20\", y1: \"18\", y2: \"18\", key: \"yk5zj1\" }]\n]);\n\nexport { Menu as default };\n//# sourceMappingURL=menu.js.map\n","/**\n * lucide-react v0.292.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst MessageCircle = createLucideIcon(\"MessageCircle\", [\n  [\"path\", { d: \"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z\", key: \"v2veuj\" }]\n]);\n\nexport { MessageCircle as default };\n//# sourceMappingURL=message-circle.js.map\n","/**\n * lucide-react v0.292.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst MessageSquare = createLucideIcon(\"MessageSquare\", [\n  [\n    \"path\",\n    {\n      d: \"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z\",\n      key: \"1lielz\"\n    }\n  ]\n]);\n\nexport { MessageSquare as default };\n//# sourceMappingURL=message-square.js.map\n","/**\n * lucide-react v0.292.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Moon = createLucideIcon(\"Moon\", [\n  [\"path\", { d: \"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z\", key: \"a7tn18\" }]\n]);\n\nexport { Moon as default };\n//# sourceMappingURL=moon.js.map\n","/**\n * lucide-react v0.292.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Pen = createLucideIcon(\"Pen\", [\n  [\n    \"path\",\n    { d: \"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z\", key: \"5qss01\" }\n  ]\n]);\n\nexport { Pen as default };\n//# sourceMappingURL=pen.js.map\n","/**\n * lucide-react v0.292.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Pencil = createLucideIcon(\"Pencil\", [\n  [\n    \"path\",\n    { d: \"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z\", key: \"5qss01\" }\n  ],\n  [\"path\", { d: \"m15 5 4 4\", key: \"1mk7zo\" }]\n]);\n\nexport { Pencil as default };\n//# sourceMappingURL=pencil.js.map\n","/**\n * lucide-react v0.292.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Plus = createLucideIcon(\"Plus\", [\n  [\"path\", { d: \"M5 12h14\", key: \"1ays0h\" }],\n  [\"path\", { d: \"M12 5v14\", key: \"s699le\" }]\n]);\n\nexport { Plus as default };\n//# sourceMappingURL=plus.js.map\n","/**\n * lucide-react v0.292.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst RefreshCw = createLucideIcon(\"RefreshCw\", [\n  [\n    \"path\",\n    { d: \"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8\", key: \"v9h5vc\" }\n  ],\n  [\"path\", { d: \"M21 3v5h-5\", key: \"1q7to0\" }],\n  [\n    \"path\",\n    { d: \"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16\", key: \"3uifl3\" }\n  ],\n  [\"path\", { d: \"M8 16H3v5\", key: \"1cv678\" }]\n]);\n\nexport { RefreshCw as default };\n//# sourceMappingURL=refresh-cw.js.map\n","/**\n * lucide-react v0.292.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Save = createLucideIcon(\"Save\", [\n  [\n    \"path\",\n    {\n      d: \"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z\",\n      key: \"1owoqh\"\n    }\n  ],\n  [\"polyline\", { points: \"17 21 17 13 7 13 7 21\", key: \"1md35c\" }],\n  [\"polyline\", { points: \"7 3 7 8 15 8\", key: \"8nz8an\" }]\n]);\n\nexport { Save as default };\n//# sourceMappingURL=save.js.map\n","/**\n * lucide-react v0.292.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Search = createLucideIcon(\"Search\", [\n  [\"circle\", { cx: \"11\", cy: \"11\", r: \"8\", key: \"4ej97u\" }],\n  [\"path\", { d: \"m21 21-4.3-4.3\", key: \"1qie3q\" }]\n]);\n\nexport { Search as default };\n//# sourceMappingURL=search.js.map\n","/**\n * lucide-react v0.292.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Send = createLucideIcon(\"Send\", [\n  [\"path\", { d: \"m22 2-7 20-4-9-9-4Z\", key: \"1q3vgg\" }],\n  [\"path\", { d: \"M22 2 11 13\", key: \"nzbqef\" }]\n]);\n\nexport { Send as default };\n//# sourceMappingURL=send.js.map\n","/**\n * lucide-react v0.292.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Settings = createLucideIcon(\"Settings\", [\n  [\n    \"path\",\n    {\n      d: \"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z\",\n      key: \"1qme2f\"\n    }\n  ],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"3\", key: \"1v7zrd\" }]\n]);\n\nexport { Settings as default };\n//# sourceMappingURL=settings.js.map\n","/**\n * lucide-react v0.292.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Share2 = createLucideIcon(\"Share2\", [\n  [\"circle\", { cx: \"18\", cy: \"5\", r: \"3\", key: \"gq8acd\" }],\n  [\"circle\", { cx: \"6\", cy: \"12\", r: \"3\", key: \"w7nqdw\" }],\n  [\"circle\", { cx: \"18\", cy: \"19\", r: \"3\", key: \"1xt0gg\" }],\n  [\n    \"line\",\n    { x1: \"8.59\", x2: \"15.42\", y1: \"13.51\", y2: \"17.49\", key: \"47mynk\" }\n  ],\n  [\"line\", { x1: \"15.41\", x2: \"8.59\", y1: \"6.51\", y2: \"10.49\", key: \"1n3mei\" }]\n]);\n\nexport { Share2 as default };\n//# sourceMappingURL=share-2.js.map\n","/**\n * lucide-react v0.292.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Shield = createLucideIcon(\"Shield\", [\n  [\"path\", { d: \"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10\", key: \"1irkt0\" }]\n]);\n\nexport { Shield as default };\n//# sourceMappingURL=shield.js.map\n","/**\n * lucide-react v0.292.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Smile = createLucideIcon(\"Smile\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"M8 14s1.5 2 4 2 4-2 4-2\", key: \"1y1vjs\" }],\n  [\"line\", { x1: \"9\", x2: \"9.01\", y1: \"9\", y2: \"9\", key: \"yxxnd0\" }],\n  [\"line\", { x1: \"15\", x2: \"15.01\", y1: \"9\", y2: \"9\", key: \"1p4y9e\" }]\n]);\n\nexport { Smile as default };\n//# sourceMappingURL=smile.js.map\n","/**\n * lucide-react v0.292.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Sun = createLucideIcon(\"Sun\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"4\", key: \"4exip2\" }],\n  [\"path\", { d: \"M12 2v2\", key: \"tus03m\" }],\n  [\"path\", { d: \"M12 20v2\", key: \"1lh1kg\" }],\n  [\"path\", { d: \"m4.93 4.93 1.41 1.41\", key: \"149t6j\" }],\n  [\"path\", { d: \"m17.66 17.66 1.41 1.41\", key: \"ptbguv\" }],\n  [\"path\", { d: \"M2 12h2\", key: \"1t8f8n\" }],\n  [\"path\", { d: \"M20 12h2\", key: \"1q8mjw\" }],\n  [\"path\", { d: \"m6.34 17.66-1.41 1.41\", key: \"1m8zz5\" }],\n  [\"path\", { d: \"m19.07 4.93-1.41 1.41\", key: \"1shlcs\" }]\n]);\n\nexport { Sun as default };\n//# sourceMappingURL=sun.js.map\n","/**\n * lucide-react v0.292.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Trash2 = createLucideIcon(\"Trash2\", [\n  [\"path\", { d: \"M3 6h18\", key: \"d0wm0j\" }],\n  [\"path\", { d: \"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6\", key: \"4alrt4\" }],\n  [\"path\", { d: \"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2\", key: \"v07s0e\" }],\n  [\"line\", { x1: \"10\", x2: \"10\", y1: \"11\", y2: \"17\", key: \"1uufr5\" }],\n  [\"line\", { x1: \"14\", x2: \"14\", y1: \"11\", y2: \"17\", key: \"xtxkd\" }]\n]);\n\nexport { Trash2 as default };\n//# sourceMappingURL=trash-2.js.map\n","/**\n * lucide-react v0.292.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Trophy = createLucideIcon(\"Trophy\", [\n  [\"path\", { d: \"M6 9H4.5a2.5 2.5 0 0 1 0-5H6\", key: \"17hqa7\" }],\n  [\"path\", { d: \"M18 9h1.5a2.5 2.5 0 0 0 0-5H18\", key: \"lmptdp\" }],\n  [\"path\", { d: \"M4 22h16\", key: \"57wxv0\" }],\n  [\n    \"path\",\n    {\n      d: \"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22\",\n      key: \"1nw9bq\"\n    }\n  ],\n  [\n    \"path\",\n    {\n      d: \"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22\",\n      key: \"1np0yb\"\n    }\n  ],\n  [\"path\", { d: \"M18 2H6v7a6 6 0 0 0 12 0V2Z\", key: \"u46fv3\" }]\n]);\n\nexport { Trophy as default };\n//# sourceMappingURL=trophy.js.map\n","/**\n * lucide-react v0.292.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Upload = createLucideIcon(\"Upload\", [\n  [\"path\", { d: \"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\", key: \"ih7n3h\" }],\n  [\"polyline\", { points: \"17 8 12 3 7 8\", key: \"t8dd8p\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"3\", y2: \"15\", key: \"widbto\" }]\n]);\n\nexport { Upload as default };\n//# sourceMappingURL=upload.js.map\n","/**\n * lucide-react v0.292.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst UserPlus = createLucideIcon(\"UserPlus\", [\n  [\"path\", { d: \"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2\", key: \"1yyitq\" }],\n  [\"circle\", { cx: \"9\", cy: \"7\", r: \"4\", key: \"nufk8\" }],\n  [\"line\", { x1: \"19\", x2: \"19\", y1: \"8\", y2: \"14\", key: \"1bvyxn\" }],\n  [\"line\", { x1: \"22\", x2: \"16\", y1: \"11\", y2: \"11\", key: \"1shjgl\" }]\n]);\n\nexport { UserPlus as default };\n//# sourceMappingURL=user-plus.js.map\n","/**\n * lucide-react v0.292.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst User = createLucideIcon(\"User\", [\n  [\"path\", { d: \"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2\", key: \"975kel\" }],\n  [\"circle\", { cx: \"12\", cy: \"7\", r: \"4\", key: \"17ys0d\" }]\n]);\n\nexport { User as default };\n//# sourceMappingURL=user.js.map\n","/**\n * lucide-react v0.292.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Users = createLucideIcon(\"Users\", [\n  [\"path\", { d: \"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2\", key: \"1yyitq\" }],\n  [\"circle\", { cx: \"9\", cy: \"7\", r: \"4\", key: \"nufk8\" }],\n  [\"path\", { d: \"M22 21v-2a4 4 0 0 0-3-3.87\", key: \"kshegd\" }],\n  [\"path\", { d: \"M16 3.13a4 4 0 0 1 0 7.75\", key: \"1da9ce\" }]\n]);\n\nexport { Users as default };\n//# sourceMappingURL=users.js.map\n","/**\n * lucide-react v0.292.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst XCircle = createLucideIcon(\"XCircle\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"m15 9-6 6\", key: \"1uzhvr\" }],\n  [\"path\", { d: \"m9 9 6 6\", key: \"z0biqf\" }]\n]);\n\nexport { XCircle as default };\n//# sourceMappingURL=x-circle.js.map\n","/**\n * lucide-react v0.292.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst X = createLucideIcon(\"X\", [\n  [\"path\", { d: \"M18 6 6 18\", key: \"1bl5f8\" }],\n  [\"path\", { d: \"m6 6 12 12\", key: \"d8bk6v\" }]\n]);\n\nexport { X as default };\n//# sourceMappingURL=x.js.map\n","import { createClient } from '@supabase/supabase-js';\nimport type { UserSettings } from '../types';\n\nconst supabaseUrl = import.meta.env.VITE_SUPABASE_URL;\nconst supabaseAnonKey = import.meta.env.VITE_SUPABASE_ANON_KEY;\n\nif (!supabaseUrl || !supabaseAnonKey) {\n  throw new Error('Missing Supabase environment variables');\n}\n\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey, {\n  auth: {\n    persistSession: true,\n    autoRefreshToken: true,\n    detectSessionInUrl: true,\n    storageKey: 'supabase.auth.token',\n    flowType: 'pkce'\n  }\n});\n\n// Test connection\nexport async function testConnection() {\n  try {\n    const { data, error } = await supabase.auth.getSession();\n    \n    if (error) {\n      console.error('Auth initialization failed:', error.message);\n      return false;\n    }\n\n    const { error: dbError } = await supabase\n      .from('profiles')\n      .select('count')\n      .limit(0);\n\n    if (dbError) {\n      console.error('Database connection test failed:', dbError.message);\n      return false;\n    }\n\n    return true;\n  } catch (error) {\n    console.error('Supabase connection test failed:', error);\n    return false;\n  }\n}\n\nexport async function saveSettings(settings: Partial<UserSettings> & { photo_file?: File }) {\n  try {\n    const { data: { user } } = await supabase.auth.getUser();\n    if (!user) throw new Error('No user found');\n\n    let profile_photo_url = settings.profile_photo_url;\n\n    // Handle photo upload if a new file is provided\n    if (settings.photo_file) {\n      const fileExt = settings.photo_file.name.split('.').pop();\n      const fileName = `${user.id}-${Date.now()}.${fileExt}`;\n      const filePath = `profile-photos/${fileName}`;\n\n      const { error: uploadError, data } = await supabase.storage\n        .from('profile-photos')\n        .upload(filePath, settings.photo_file);\n\n      if (uploadError) {\n        throw uploadError;\n      }\n\n      const { data: { publicUrl } } = supabase.storage\n        .from('profile-photos')\n        .getPublicUrl(filePath);\n\n      profile_photo_url = publicUrl;\n    }\n\n    // Remove the photo_file from settings before database update\n    const { photo_file, ...settingsToSave } = settings;\n\n    const { data, error } = await supabase\n      .from('user_settings')\n      .upsert({\n        user_id: user.id,\n        ...settingsToSave,\n        profile_photo_url,\n        updated_at: new Date().toISOString()\n      })\n      .select()\n      .single();\n\n    if (error) throw error;\n    return { data, error: null };\n\n  } catch (error) {\n    console.error('Error saving settings:', error);\n    return { data: null, error };\n  }\n}","import React, { createContext, useContext, useState, useEffect, ReactNode } from 'react';\nimport { supabase, testConnection } from '../lib/supabase';\nimport { Child } from '../types';\n\ninterface ProfilesContextType {\n  profiles: Child[];\n  friendsProfiles: Child[];\n  allProfiles: Child[];\n  addProfile: (profile: Omit<Child, 'id'>) => Promise<void>;\n  updateProfile: (id: string, profile: Partial<Child>) => Promise<void>;\n  deleteProfile: (id: string) => Promise<void>;\n  getProfile: (id: string) => Promise<Child>;\n  loading: boolean;\n  error: string | null;\n}\n\nconst ProfilesContext = createContext<ProfilesContextType | undefined>(undefined);\n\nexport const useProfiles = () => {\n  const context = useContext(ProfilesContext);\n  if (!context) {\n    throw new Error('useProfiles must be used within a ProfilesProvider');\n  }\n  return context;\n};\n\ninterface ProfilesProviderProps {\n  children: ReactNode;\n}\n\ninterface FriendshipData {\n  friend_user_id: string;\n  role: 'none' | 'viewer' | 'administrator';\n  friend_name: string;\n}\n\nexport const ProfilesProvider: React.FC<ProfilesProviderProps> = ({ children }) => {\n  const [profiles, setProfiles] = useState<Child[]>([]);\n  const [friendsProfiles, setFriendsProfiles] = useState<Child[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [friendshipCache, setFriendshipCache] = useState<FriendshipData[]>([]);\n\n  // Combine own profiles and friends' profiles\n  const allProfiles = [...profiles, ...friendsProfiles];\n\n  useEffect(() => {\n    let mounted = true;\n\n    const initializeConnection = async () => {\n      try {\n        const isConnected = await testConnection();\n        if (!isConnected) {\n          throw new Error('Failed to establish connection with Supabase');\n        }\n        \n        if (mounted) {\n          const subscription = supabase.auth.onAuthStateChange((event, session) => {\n            if (event === 'SIGNED_IN' || event === 'INITIAL_SESSION') {\n              if (session?.user) {\n                fetchAllProfiles();\n              }\n            } else if (event === 'SIGNED_OUT') {\n              setProfiles([]);\n              setFriendsProfiles([]);\n              setFriendshipCache([]);\n            }\n          });\n\n          // Initial fetch only if we have a session\n          const { data: { session } } = await supabase.auth.getSession();\n          if (session?.user) {\n            await fetchAllProfiles();\n          }\n\n          return () => {\n            subscription.data.subscription.unsubscribe();\n          };\n        }\n      } catch (err) {\n        if (mounted) {\n          const errorMessage = err instanceof Error ? err.message : 'Failed to initialize Supabase connection';\n          setError(errorMessage);\n          console.error('Connection initialization error:', err);\n        }\n      } finally {\n        if (mounted) {\n          setLoading(false);\n        }\n      }\n    };\n\n    initializeConnection();\n\n    return () => {\n      mounted = false;\n    };\n  }, []);\n\n  const fetchAllProfiles = async () => {\n    try {\n      const { data: { user }, error: authError } = await supabase.auth.getUser();\n      if (authError) {\n        throw authError;\n      }\n      if (!user) {\n        setProfiles([]);\n        setFriendsProfiles([]);\n        setFriendshipCache([]);\n        return;\n      }\n\n      console.log('🔍 PROFILES: Fetching profiles for user:', user.id);\n\n      // First, fetch and cache all friendships where current user is the friend_id\n      // This tells us what access levels we have been granted by other users\n      await fetchFriendshipCache(user.id);\n\n      // Fetch own profiles\n      await fetchOwnProfiles(user.id);\n      \n      // Fetch friends' profiles where user has administrator access\n      await fetchFriendsProfiles(user.id);\n\n    } catch (err) {\n      const errorMessage = err instanceof Error ? err.message : 'Failed to fetch profiles';\n      setError(errorMessage);\n      console.error('Error fetching profiles:', err);\n      setProfiles([]);\n      setFriendsProfiles([]);\n      setFriendshipCache([]);\n    }\n  };\n\n  const fetchFriendshipCache = async (userId: string) => {\n    try {\n      console.log('🤝 PROFILES: Fetching friendship cache for user:', userId);\n      \n      // CORRECTED QUERY: Look for friendships where current user is the friend_id\n      // This shows what access levels we have been granted by other users\n      const { data: friendships, error: friendshipsError } = await supabase\n        .from('friendships')\n        .select(`\n          user_id,\n          role,\n          created_at,\n          updated_at\n        `)\n        .eq('friend_id', userId) // FIXED: Current user is the friend_id (we are someone's friend)\n        .order('updated_at', { ascending: false });\n\n      if (friendshipsError) {\n        console.error('❌ PROFILES: Error fetching friendships:', friendshipsError);\n        throw friendshipsError;\n      }\n\n      console.log('🤝 PROFILES: Found friendships where user is friend:', friendships?.length || 0);\n      console.log('🤝 PROFILES: Friendship details:', friendships);\n\n      if (!friendships || friendships.length === 0) {\n        console.log('❌ PROFILES: No friendships found where user is friend');\n        setFriendshipCache([]);\n        return;\n      }\n\n      // Get user details for the people who granted us access\n      const granterUserIds = friendships.map(f => f.user_id);\n      const { data: userSettings, error: userSettingsError } = await supabase\n        .from('user_settings')\n        .select('user_id, full_name')\n        .in('user_id', granterUserIds);\n\n      if (userSettingsError) {\n        console.error('❌ PROFILES: Error fetching user settings for friendship cache:', userSettingsError);\n        throw userSettingsError;\n      }\n\n      // Build friendship cache\n      const friendshipData: FriendshipData[] = friendships.map(friendship => {\n        const userSetting = userSettings?.find(us => us.user_id === friendship.user_id);\n        return {\n          friend_user_id: friendship.user_id, // The user who granted us access\n          role: friendship.role, // The role they granted us\n          friend_name: userSetting?.full_name || 'Friend'\n        };\n      });\n\n      console.log('✅ PROFILES: Built friendship cache:', friendshipData);\n      console.log('👑 PROFILES: Administrator access to users:', \n        friendshipData.filter(f => f.role === 'administrator').map(f => f.friend_name)\n      );\n      \n      setFriendshipCache(friendshipData);\n\n    } catch (err) {\n      console.error('💥 PROFILES: Error fetching friendship cache:', err);\n      setFriendshipCache([]);\n    }\n  };\n\n  const fetchOwnProfiles = async (userId: string) => {\n    console.log('📋 PROFILES: Fetching own profiles for user:', userId);\n    \n    const { data: profilesData, error: profilesError } = await supabase\n      .from('profiles')\n      .select(`\n        id,\n        name,\n        age,\n        color,\n        photo_url,\n        notes,\n        user_id,\n        profile_sports (\n          sport,\n          color\n        )\n      `)\n      .eq('user_id', userId);\n\n    if (profilesError) {\n      console.error('❌ PROFILES: Error fetching own profiles:', profilesError);\n      throw profilesError;\n    }\n\n    console.log('✅ PROFILES: Found own profiles:', profilesData?.length || 0);\n\n    const formattedProfiles: Child[] = profilesData?.map(profile => ({\n      id: profile.id,\n      name: profile.name,\n      age: profile.age,\n      color: profile.color,\n      photo_url: profile.photo_url,\n      notes: profile.notes,\n      sports: profile.profile_sports?.map(sport => ({\n        name: sport.sport,\n        color: sport.color\n      })) || [],\n      eventCount: 0,\n      isOwnProfile: true\n    })) || [];\n\n    setProfiles(formattedProfiles);\n  };\n\n  const fetchFriendsProfiles = async (userId: string) => {\n    try {\n      console.log('👥 PROFILES: Fetching friends profiles for user:', userId);\n      \n      // Filter friendship cache for administrator access only\n      const administratorFriendships = friendshipCache.filter(f => f.role === 'administrator');\n      \n      console.log('👑 PROFILES: Administrator friendships from cache:', administratorFriendships);\n\n      if (administratorFriendships.length === 0) {\n        console.log('❌ PROFILES: No administrator access found in friendship cache');\n        setFriendsProfiles([]);\n        return;\n      }\n\n      // Get user IDs where we have administrator access\n      const adminUserIds = administratorFriendships.map(f => f.friend_user_id);\n      console.log('👑 PROFILES: User IDs where we have admin access:', adminUserIds);\n\n      // Get all profiles for users where we have administrator access\n      const { data: friendProfilesData, error: friendProfilesError } = await supabase\n        .from('profiles')\n        .select(`\n          id,\n          name,\n          age,\n          color,\n          photo_url,\n          notes,\n          user_id,\n          profile_sports (\n            sport,\n            color\n          )\n        `)\n        .in('user_id', adminUserIds);\n\n      if (friendProfilesError) {\n        console.error('❌ PROFILES: Error fetching friend profiles:', friendProfilesError);\n        throw friendProfilesError;\n      }\n\n      console.log('✅ PROFILES: Found friend profiles:', friendProfilesData?.length || 0);\n      console.log('✅ PROFILES: Friend profiles data:', friendProfilesData);\n\n      const formattedFriendsProfiles: Child[] = friendProfilesData?.map(profile => {\n        const friendship = administratorFriendships.find(f => f.friend_user_id === profile.user_id);\n        \n        return {\n          id: profile.id,\n          name: profile.name,\n          age: profile.age,\n          color: profile.color,\n          photo_url: profile.photo_url,\n          notes: profile.notes,\n          sports: profile.profile_sports?.map(sport => ({\n            name: sport.sport,\n            color: sport.color\n          })) || [],\n          eventCount: 0,\n          isOwnProfile: false,\n          ownerName: friendship?.friend_name || 'Friend',\n          ownerPhoto: undefined, // We can add this later if needed\n          accessRole: friendship?.role\n        };\n      }) || [];\n\n      console.log('✅ PROFILES: Formatted friends profiles:', formattedFriendsProfiles);\n      setFriendsProfiles(formattedFriendsProfiles);\n    } catch (err) {\n      console.error('💥 PROFILES: Error fetching friends profiles:', err);\n      setFriendsProfiles([]);\n    }\n  };\n\n  const getProfile = async (id: string): Promise<Child> => {\n    try {\n      const { data: { user }, error: authError } = await supabase.auth.getUser();\n      if (authError) throw authError;\n      if (!user) throw new Error('No authenticated user');\n\n      const { data: profile, error: profileError } = await supabase\n        .from('profiles')\n        .select(`\n          id,\n          name,\n          age,\n          color,\n          photo_url,\n          notes,\n          user_id,\n          profile_sports (\n            sport,\n            color\n          )\n        `)\n        .eq('id', id)\n        .single();\n\n      if (profileError) throw profileError;\n      if (!profile) throw new Error('Profile not found');\n\n      // Check if this is a friend's profile\n      const isOwnProfile = profile.user_id === user.id;\n      let ownerName = undefined;\n      let ownerPhoto = undefined;\n\n      if (!isOwnProfile) {\n        // Check if we have access to this profile through friendship cache\n        const friendship = friendshipCache.find(f => f.friend_user_id === profile.user_id);\n        if (!friendship) {\n          throw new Error('Access denied: No friendship found');\n        }\n        \n        ownerName = friendship.friend_name;\n        // We can get owner photo from user_settings if needed\n      }\n\n      return {\n        id: profile.id,\n        name: profile.name,\n        age: profile.age,\n        color: profile.color,\n        photo_url: profile.photo_url,\n        notes: profile.notes,\n        sports: profile.profile_sports?.map(sport => ({\n          name: sport.sport,\n          color: sport.color\n        })) || [],\n        eventCount: 0,\n        isOwnProfile,\n        ownerName,\n        ownerPhoto\n      };\n    } catch (err) {\n      throw new Error(err instanceof Error ? err.message : 'Failed to fetch profile');\n    }\n  };\n\n  const addProfile = async (profile: Omit<Child, 'id'>) => {\n    try {\n      const { data: { user }, error: authError } = await supabase.auth.getUser();\n      if (authError) throw authError;\n      if (!user) throw new Error('No authenticated user');\n\n      // Insert profile\n      const { data: newProfile, error: profileError } = await supabase\n        .from('profiles')\n        .insert({\n          name: profile.name,\n          age: profile.age,\n          color: profile.color,\n          photo_url: profile.photo_url,\n          notes: profile.notes,\n          user_id: user.id\n        })\n        .select()\n        .single();\n\n      if (profileError) throw profileError;\n\n      // Insert sports\n      if (profile.sports?.length > 0) {\n        const { error: sportsError } = await supabase\n          .from('profile_sports')\n          .insert(\n            profile.sports.map(sport => ({\n              profile_id: newProfile.id,\n              sport: sport.name,\n              color: sport.color\n            }))\n          );\n\n        if (sportsError) throw sportsError;\n      }\n\n      await fetchAllProfiles();\n    } catch (err) {\n      const errorMessage = err instanceof Error ? err.message : 'Failed to add profile';\n      setError(errorMessage);\n      throw err;\n    }\n  };\n\n  const updateProfile = async (id: string, profile: Partial<Child>) => {\n    try {\n      const { data: { user }, error: authError } = await supabase.auth.getUser();\n      if (authError) throw authError;\n      if (!user) throw new Error('No authenticated user');\n\n      const { error: profileError } = await supabase\n        .from('profiles')\n        .update({\n          name: profile.name,\n          age: profile.age,\n          color: profile.color,\n          photo_url: profile.photo_url,\n          notes: profile.notes\n        })\n        .eq('id', id);\n\n      if (profileError) throw profileError;\n\n      if (profile.sports) {\n        // Delete existing sports\n        await supabase\n          .from('profile_sports')\n          .delete()\n          .eq('profile_id', id);\n\n        // Insert new sports\n        if (profile.sports.length > 0) {\n          const { error: sportsError } = await supabase\n            .from('profile_sports')\n            .insert(\n              profile.sports.map(sport => ({\n                profile_id: id,\n                sport: sport.name,\n                color: sport.color\n              }))\n            );\n\n          if (sportsError) throw sportsError;\n        }\n      }\n\n      await fetchAllProfiles();\n    } catch (err) {\n      const errorMessage = err instanceof Error ? err.message : 'Failed to update profile';\n      setError(errorMessage);\n      throw err;\n    }\n  };\n\n  const deleteProfile = async (id: string) => {\n    try {\n      const { data: { user }, error: authError } = await supabase.auth.getUser();\n      if (authError) throw authError;\n      if (!user) throw new Error('No authenticated user');\n\n      const { error } = await supabase\n        .from('profiles')\n        .delete()\n        .eq('id', id);\n\n      if (error) throw error;\n\n      // Update both own profiles and friends profiles\n      setProfiles(profiles.filter(p => p.id !== id));\n      setFriendsProfiles(friendsProfiles.filter(p => p.id !== id));\n    } catch (err) {\n      const errorMessage = err instanceof Error ? err.message : 'Failed to delete profile';\n      setError(errorMessage);\n      throw err;\n    }\n  };\n\n  return (\n    <ProfilesContext.Provider\n      value={{\n        profiles,\n        friendsProfiles,\n        allProfiles,\n        addProfile,\n        updateProfile,\n        deleteProfile,\n        getProfile,\n        loading,\n        error\n      }}\n    >\n      {children}\n    </ProfilesContext.Provider>\n  );\n};","import React from 'react';\nimport { NavLink, useNavigate } from 'react-router-dom';\nimport { \n  Home, \n  Calendar, \n  Link as LinkIcon, \n  Users, \n  Settings, \n  X,\n  BarChart,\n  UserPlus\n} from 'lucide-react';\nimport { useProfiles } from '../../context/ProfilesContext';\n\ninterface SidebarProps {\n  onClose: () => void;\n}\n\nconst Sidebar: React.FC<SidebarProps> = ({ onClose }) => {\n  const { profiles, friendsProfiles } = useProfiles();\n  const navigate = useNavigate();\n  \n  const navigation = [\n    { name: 'Dashboard', icon: Home, href: '/' },\n    { name: 'Calendar', icon: Calendar, href: '/calendar' },\n    { \n      name: 'Connections', \n      icon: LinkIcon, \n      href: '/connections',\n      subItems: [\n        { name: 'TeamSnap', href: '/connections/teamsnap' },\n        { name: 'Playmetrics', href: '/connections/playmetrics' }\n      ]\n    },\n    { name: 'Profiles', icon: Users, href: '/profiles' },\n    { name: 'Friends', icon: UserPlus, href: '/friends' },\n    { name: 'Settings', icon: Settings, href: '/settings' },\n  ];\n\n  const handleChildClick = (childId: string) => {\n    navigate(`/profiles/${childId}`);\n    onClose();\n  };\n\n  return (\n    <div className=\"flex h-full flex-col overflow-y-auto bg-white dark:bg-gray-800\">\n      <div className=\"flex items-center justify-between px-4 py-5\">\n        <div className=\"flex items-center\">\n          <div className=\"h-8 w-8 rounded-full bg-blue-600 flex items-center justify-center\">\n            <Calendar className=\"h-5 w-5 text-white\" />\n          </div>\n          <span className=\"ml-2 text-xl font-bold text-gray-900 dark:text-white\">TeamSync</span>\n        </div>\n        <button \n          type=\"button\" \n          className=\"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 lg:hidden\"\n          onClick={onClose}\n        >\n          <X className=\"h-6 w-6\" />\n        </button>\n      </div>\n      \n      <div className=\"mt-5 px-2 space-y-1\">\n        {navigation.map((item) => (\n          <div key={item.name}>\n            <NavLink\n              to={item.href}\n              className={({ isActive }) =>\n                `group flex items-center px-2 py-2 text-base font-medium rounded-md ${\n                  isActive\n                    ? 'bg-blue-50 dark:bg-blue-900/50 text-blue-600 dark:text-blue-400'\n                    : 'text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white'\n                }`\n              }\n              end={item.href === '/'}\n            >\n              <item.icon \n                className={({ isActive }: { isActive: boolean }) =>\n                  `mr-4 h-6 w-6 flex-shrink-0 ${\n                    isActive ? 'text-blue-600 dark:text-blue-400' : 'text-gray-400 dark:text-gray-500 group-hover:text-gray-500 dark:group-hover:text-gray-300'\n                  }`\n                }\n              />\n              {item.name}\n            </NavLink>\n            {item.subItems && (\n              <div className=\"ml-8 mt-1 space-y-1\">\n                {item.subItems.map((subItem) => (\n                  <NavLink\n                    key={subItem.name}\n                    to={subItem.href}\n                    className={({ isActive }) =>\n                      `block px-3 py-2 text-sm font-medium rounded-md ${\n                        isActive\n                          ? 'bg-blue-50 dark:bg-blue-900/50 text-blue-600 dark:text-blue-400'\n                          : 'text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white'\n                      }`\n                    }\n                  >\n                    {subItem.name}\n                  </NavLink>\n                ))}\n              </div>\n            )}\n          </div>\n        ))}\n      </div>\n      \n      {/* Own Children */}\n      {profiles.length > 0 && (\n        <div className=\"mt-8\">\n          <h3 className=\"px-3 text-sm font-medium text-gray-500 dark:text-gray-400\">Your Children</h3>\n          <div className=\"mt-1 space-y-1 px-3\">\n            {profiles.map((child) => (\n              <button \n                key={child.id} \n                onClick={() => handleChildClick(child.id)}\n                className=\"w-full group flex items-center rounded-md px-2 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white transition-colors\"\n              >\n                <div \n                  className=\"mr-3 h-6 w-6 rounded-full flex items-center justify-center text-white\"\n                  style={{ backgroundColor: child.color }}\n                >\n                  {child.photo_url ? (\n                    <img \n                      src={child.photo_url} \n                      alt={child.name}\n                      className=\"h-full w-full rounded-full object-cover\"\n                    />\n                  ) : (\n                    child.name.charAt(0)\n                  )}\n                </div>\n                {child.name}\n              </button>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Friends' Children (Administrator Access) */}\n      {friendsProfiles.length > 0 && (\n        <div className=\"mt-8\">\n          <h3 className=\"px-3 text-sm font-medium text-gray-500 dark:text-gray-400\">Friends' Children</h3>\n          <div className=\"mt-1 space-y-1 px-3\">\n            {friendsProfiles.map((child) => (\n              <button \n                key={child.id} \n                onClick={() => handleChildClick(child.id)}\n                className=\"w-full group flex items-center rounded-md px-2 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white transition-colors\"\n              >\n                <div \n                  className=\"mr-3 h-6 w-6 rounded-full flex items-center justify-center text-white relative\"\n                  style={{ backgroundColor: child.color }}\n                >\n                  {child.photo_url ? (\n                    <img \n                      src={child.photo_url} \n                      alt={child.name}\n                      className=\"h-full w-full rounded-full object-cover\"\n                    />\n                  ) : (\n                    child.name.charAt(0)\n                  )}\n                  {/* Administrator badge */}\n                  <div className=\"absolute -top-1 -right-1 w-3 h-3 bg-yellow-500 rounded-full flex items-center justify-center\">\n                    <span className=\"text-xs text-white\">👑</span>\n                  </div>\n                </div>\n                <div className=\"flex-1 text-left\">\n                  <div className=\"text-sm\">{child.name}</div>\n                  <div className=\"text-xs text-blue-600 dark:text-blue-400\">\n                    {child.ownerName}\n                  </div>\n                </div>\n              </button>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Sidebar;","import React, { createContext, useContext, useState, ReactNode } from 'react';\nimport { Calendar, Users, Link, BarChart } from 'lucide-react';\nimport { Child, Platform, Event } from '../types';\n\ninterface AppContextType {\n  user: {\n    name: string;\n    email: string;\n  };\n  children: Child[];\n  platforms: Platform[];\n  connectedPlatforms: Platform[];\n  events: Event[];\n  upcomingEvents: Event[];\n}\n\nconst AppContext = createContext<AppContextType | undefined>(undefined);\n\nexport const useApp = (): AppContextType => {\n  const context = useContext(AppContext);\n  if (!context) {\n    throw new Error('useApp must be used within an AppProvider');\n  }\n  return context;\n};\n\ninterface AppProviderProps {\n  children: ReactNode;\n}\n\nexport const AppProvider: React.FC<AppProviderProps> = ({ children }) => {\n  // Mock data for demonstration\n  const [user] = useState({\n    name: 'John Smith',\n    email: 'john.smith@example.com',\n  });\n\n  const [childrenData] = useState<Child[]>([\n    {\n      id: '1',\n      name: 'Emma',\n      age: 10,\n      color: '#3B82F6', // Blue\n      sports: [\n        { name: 'Soccer', color: '#10B981' }, // Green\n        { name: 'Swimming', color: '#3B82F6' }, // Blue\n      ],\n      eventCount: 5,\n    },\n    {\n      id: '2',\n      name: 'Jack',\n      age: 8,\n      color: '#EF4444', // Red\n      sports: [\n        { name: 'Baseball', color: '#F59E0B' }, // Yellow\n        { name: 'Basketball', color: '#EF4444' }, // Red\n      ],\n      eventCount: 3,\n    },\n    {\n      id: '3',\n      name: 'Sophia',\n      age: 12,\n      color: '#8B5CF6', // Purple\n      sports: [\n        { name: 'Volleyball', color: '#EC4899' }, // Pink\n        { name: 'Tennis', color: '#8B5CF6' }, // Purple\n      ],\n      eventCount: 4,\n    },\n  ]);\n\n  const [platformsData] = useState<Platform[]>([\n    {\n      id: 1,\n      name: 'SportsEngine',\n      icon: Calendar,\n      color: '#2563EB', // Blue\n      connected: true,\n      hasIssue: false,\n    },\n    {\n      id: 2,\n      name: 'TeamSnap',\n      icon: Users,\n      color: '#7C3AED', // Purple\n      connected: true,\n      hasIssue: false,\n    },\n    {\n      id: 3,\n      name: 'PlayMetrics',\n      icon: BarChart,\n      color: '#10B981', // Green\n      connected: false,\n      hasIssue: false,\n    },\n    {\n      id: 4,\n      name: 'GameChanger',\n      icon: Link,\n      color: '#F97316', // Orange\n      connected: true,\n      hasIssue: true,\n    },\n  ]);\n\n  // Generate mock events\n  const generateEvents = () => {\n    const now = new Date();\n    const year = now.getFullYear();\n    const month = now.getMonth();\n    \n    const events: Event[] = [];\n    \n    // Create events for each child\n    childrenData.forEach(child => {\n      child.sports.forEach(sport => {\n        // Generate some events for the current month\n        for (let i = 1; i <= 28; i++) {\n          // Only create events on certain days to avoid too many\n          if (i % 3 === 0 || i % 5 === 0) {\n            const isGame = i % 3 === 0;\n            const startTime = new Date(year, month, i, 16 + (i % 4), 0);\n            const endTime = new Date(startTime);\n            endTime.setHours(endTime.getHours() + (isGame ? 2 : 1.5));\n            \n            const platform = platformsData[Math.floor(Math.random() * platformsData.length)];\n            \n            events.push({\n              id: events.length + 1,\n              title: `${sport.name} ${isGame ? 'Game' : 'Practice'}`,\n              description: isGame \n                ? `${child.name}'s ${sport.name} game against ${['Tigers', 'Eagles', 'Warriors', 'Sharks'][i % 4]}`\n                : `Regular ${sport.name} practice session`,\n              startTime,\n              endTime,\n              location: isGame \n                ? `${['City Park', 'Memorial Field', 'Community Center', 'Sports Complex'][i % 4]}`\n                : `Training Center`,\n              sport: sport.name,\n              color: sport.color,\n              child,\n              platform: platform.name,\n              platformColor: platform.color,\n              platformIcon: platform.icon,\n              isToday: startTime.getDate() === now.getDate(),\n            });\n          }\n        }\n      });\n    });\n    \n    return events;\n  };\n\n  const [events] = useState<Event[]>(generateEvents());\n  \n  // Upcoming events (today and future)\n  const upcomingEvents = events\n    .filter(event => event.startTime >= new Date())\n    .sort((a, b) => a.startTime.getTime() - b.startTime.getTime());\n\n  const value = {\n    user,\n    children: childrenData,\n    platforms: platformsData,\n    connectedPlatforms: platformsData.filter(p => p.connected),\n    events,\n    upcomingEvents,\n  };\n\n  return <AppContext.Provider value={value}>{children}</AppContext.Provider>;\n};","import React, { createContext, useContext, useState, useEffect } from 'react';\n\ntype Theme = 'light' | 'dark';\n\ninterface ThemeContextType {\n  theme: Theme;\n  toggleTheme: () => void;\n}\n\nconst ThemeContext = createContext<ThemeContextType | undefined>(undefined);\n\nexport const useTheme = () => {\n  const context = useContext(ThemeContext);\n  if (!context) {\n    throw new Error('useTheme must be used within a ThemeProvider');\n  }\n  return context;\n};\n\nexport const ThemeProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n  const [theme, setTheme] = useState<Theme>(() => {\n    const savedTheme = localStorage.getItem('theme');\n    return (savedTheme as Theme) || 'light';\n  });\n\n  useEffect(() => {\n    localStorage.setItem('theme', theme);\n    if (theme === 'dark') {\n      document.documentElement.classList.add('dark');\n    } else {\n      document.documentElement.classList.remove('dark');\n    }\n  }, [theme]);\n\n  const toggleTheme = () => {\n    setTheme(prevTheme => prevTheme === 'light' ? 'dark' : 'light');\n  };\n\n  return (\n    <ThemeContext.Provider value={{ theme, toggleTheme }}>\n      {children}\n    </ThemeContext.Provider>\n  );\n};","import React, { useState, useEffect, useRef } from 'react';\nimport { Bell, X, Check, UserPlus, Calendar, MessageSquare, Clock, Trash2, BookMarked as MarkAsRead } from 'lucide-react';\nimport { supabase } from '../../lib/supabase';\n\ninterface Notification {\n  id: string;\n  user_id: string;\n  type: 'friend_request' | 'schedule_change' | 'new_event' | 'message';\n  title: string;\n  message: string;\n  read: boolean;\n  data: any;\n  created_at: string;\n  updated_at: string;\n}\n\ninterface NotificationCenterProps {\n  onClose: () => void;\n  onOpenChat?: (friendId: string, friendInfo: any) => void;\n}\n\nconst NotificationCenter: React.FC<NotificationCenterProps> = ({ onClose, onOpenChat }) => {\n  const [notifications, setNotifications] = useState<Notification[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const subscriptionRef = useRef<any>(null);\n\n  useEffect(() => {\n    fetchNotifications();\n    \n    // Clean up previous subscription\n    if (subscriptionRef.current) {\n      subscriptionRef.current.unsubscribe();\n    }\n\n    // Set up real-time subscription for notifications (excluding messages)\n    const setupSubscription = async () => {\n      const { data: { user } } = await supabase.auth.getUser();\n      \n      if (user) {\n        console.log('Setting up notifications subscription for user:', user.id);\n        \n        subscriptionRef.current = supabase\n          .channel(`notifications:user_id=eq.${user.id}`)\n          .on(\n            'postgres_changes',\n            {\n              event: '*',\n              schema: 'public',\n              table: 'notifications',\n              filter: `user_id=eq.${user.id}`\n            },\n            (payload) => {\n              console.log('Notification change received:', payload);\n              \n              // Only handle non-message notifications\n              if (payload.new && payload.new.type !== 'message') {\n                if (payload.eventType === 'INSERT') {\n                  // Add new notification to the top of the list\n                  const newNotification = payload.new as Notification;\n                  setNotifications(prev => [newNotification, ...prev]);\n                } else if (payload.eventType === 'UPDATE') {\n                  // Update existing notification\n                  const updatedNotification = payload.new as Notification;\n                  setNotifications(prev => \n                    prev.map(n => n.id === updatedNotification.id ? updatedNotification : n)\n                  );\n                }\n              } else if (payload.eventType === 'DELETE') {\n                // Remove deleted notification\n                const deletedId = payload.old.id;\n                setNotifications(prev => prev.filter(n => n.id !== deletedId));\n              }\n            }\n          )\n          .subscribe((status) => {\n            console.log('Notifications subscription status:', status);\n          });\n      }\n    };\n\n    setupSubscription();\n\n    return () => {\n      if (subscriptionRef.current) {\n        subscriptionRef.current.unsubscribe();\n      }\n    };\n  }, []);\n\n  const fetchNotifications = async () => {\n    try {\n      const { data: { user }, error: userError } = await supabase.auth.getUser();\n      if (userError) throw userError;\n      if (!user) return;\n\n      // Fetch notifications excluding message notifications\n      const { data: notificationsData, error: notificationsError } = await supabase\n        .from('notifications')\n        .select('*')\n        .eq('user_id', user.id)\n        .neq('type', 'message') // Exclude message notifications\n        .order('created_at', { ascending: false });\n\n      if (notificationsError) throw notificationsError;\n\n      setNotifications(notificationsData || []);\n    } catch (err) {\n      console.error('Error fetching notifications:', err);\n      setError('Failed to load notifications');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleNotificationClick = async (notification: Notification) => {\n    // Mark as read if not already read\n    if (!notification.read) {\n      await markAsRead(notification.id);\n    }\n\n    // Handle different notification types (excluding messages since they're not shown here)\n    // Message handling is removed since messages are not displayed in this component\n  };\n\n  const handleFriendRequestAction = async (notification: Notification, action: 'accept' | 'decline') => {\n    try {\n      if (notification.type !== 'friend_request') return;\n\n      const friendRequestId = notification.data.friend_request_id;\n\n      // Update the friend request status\n      const { data: requestData, error: updateError } = await supabase\n        .from('friend_requests')\n        .update({ status: action === 'accept' ? 'accepted' : 'declined' })\n        .eq('id', friendRequestId)\n        .select()\n        .single();\n\n      if (updateError) throw updateError;\n\n      if (action === 'accept') {\n        // Create friendship records for both users\n        const { data: { user } } = await supabase.auth.getUser();\n        if (!user) throw new Error('No authenticated user');\n\n        const { error: friendshipError } = await supabase\n          .from('friendships')\n          .insert([\n            {\n              user_id: user.id,\n              friend_id: requestData.requester_id,\n              role: 'none' // Default role for the friend\n            },\n            {\n              user_id: requestData.requester_id,\n              friend_id: user.id,\n              role: 'none' // Default role for the requester\n            }\n          ]);\n\n        if (friendshipError) throw friendshipError;\n      }\n\n      // Delete the notification after processing\n      await deleteNotification(notification.id);\n    } catch (err) {\n      console.error('Error handling friend request:', err);\n      setError('Failed to process friend request');\n    }\n  };\n\n  const markAsRead = async (notificationId: string) => {\n    try {\n      const { error } = await supabase\n        .from('notifications')\n        .update({ read: true })\n        .eq('id', notificationId);\n\n      if (error) throw error;\n\n      setNotifications(prev => \n        prev.map(n => \n          n.id === notificationId ? { ...n, read: true } : n\n        )\n      );\n    } catch (err) {\n      console.error('Error marking notification as read:', err);\n    }\n  };\n\n  const markAllAsRead = async () => {\n    try {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) return;\n\n      const { error } = await supabase\n        .from('notifications')\n        .update({ read: true })\n        .eq('user_id', user.id)\n        .eq('read', false)\n        .neq('type', 'message'); // Only mark non-message notifications as read\n\n      if (error) throw error;\n\n      setNotifications(prev => \n        prev.map(n => ({ ...n, read: true }))\n      );\n    } catch (err) {\n      console.error('Error marking all notifications as read:', err);\n    }\n  };\n\n  const deleteNotification = async (notificationId: string) => {\n    try {\n      const { error } = await supabase\n        .from('notifications')\n        .delete()\n        .eq('id', notificationId);\n\n      if (error) throw error;\n\n      setNotifications(prev => prev.filter(n => n.id !== notificationId));\n    } catch (err) {\n      console.error('Error deleting notification:', err);\n    }\n  };\n\n  const clearAllNotifications = async () => {\n    try {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) return;\n\n      const { error } = await supabase\n        .from('notifications')\n        .delete()\n        .eq('user_id', user.id)\n        .neq('type', 'message'); // Only clear non-message notifications\n\n      if (error) throw error;\n\n      setNotifications([]);\n    } catch (err) {\n      console.error('Error clearing all notifications:', err);\n    }\n  };\n\n  const getNotificationIcon = (type: string) => {\n    switch (type) {\n      case 'friend_request':\n        return <UserPlus className=\"h-5 w-5 text-blue-500\" />;\n      case 'new_event':\n        return <Calendar className=\"h-5 w-5 text-green-500\" />;\n      case 'schedule_change':\n        return <Clock className=\"h-5 w-5 text-orange-500\" />;\n      default:\n        return <Bell className=\"h-5 w-5 text-gray-500\" />;\n    }\n  };\n\n  const getTimeAgo = (dateString: string) => {\n    const now = new Date();\n    const date = new Date(dateString);\n    const diffInMinutes = Math.floor((now.getTime() - date.getTime()) / (1000 * 60));\n    \n    if (diffInMinutes < 1) return 'Just now';\n    if (diffInMinutes < 60) return `${diffInMinutes}m ago`;\n    \n    const diffInHours = Math.floor(diffInMinutes / 60);\n    if (diffInHours < 24) return `${diffInHours}h ago`;\n    \n    const diffInDays = Math.floor(diffInHours / 24);\n    return `${diffInDays}d ago`;\n  };\n\n  const unreadCount = notifications.filter(n => !n.read).length;\n\n  return (\n    <div className=\"absolute right-0 mt-2 w-96 origin-top-right rounded-md bg-white dark:bg-gray-800 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-50\">\n      {/* Header */}\n      <div className=\"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center\">\n        <div className=\"flex items-center\">\n          <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">Notifications</h3>\n          {unreadCount > 0 && (\n            <span className=\"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200\">\n              {unreadCount} new\n            </span>\n          )}\n        </div>\n        <div className=\"flex items-center space-x-2\">\n          {notifications.length > 0 && (\n            <>\n              <button\n                onClick={markAllAsRead}\n                className=\"text-sm text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300\"\n                title=\"Mark all as read\"\n              >\n                <MarkAsRead className=\"h-4 w-4\" />\n              </button>\n              <button\n                onClick={clearAllNotifications}\n                className=\"text-sm text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300\"\n                title=\"Clear all\"\n              >\n                <Trash2 className=\"h-4 w-4\" />\n              </button>\n            </>\n          )}\n          <button\n            onClick={onClose}\n            className=\"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300\"\n          >\n            <X className=\"h-5 w-5\" />\n          </button>\n        </div>\n      </div>\n\n      {/* Content */}\n      <div className=\"max-h-96 overflow-y-auto\">\n        {loading ? (\n          <div className=\"px-4 py-6 text-center\">\n            <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mx-auto\"></div>\n          </div>\n        ) : error ? (\n          <div className=\"px-4 py-6 text-center text-red-600 dark:text-red-400\">\n            {error}\n          </div>\n        ) : notifications.length > 0 ? (\n          notifications.map((notification) => (\n            <div \n              key={notification.id} \n              className={`px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700 border-b border-gray-100 dark:border-gray-600 last:border-b-0 cursor-pointer ${\n                !notification.read ? 'bg-blue-50 dark:bg-blue-900/20' : ''\n              }`}\n              onClick={() => handleNotificationClick(notification)}\n            >\n              <div className=\"flex items-start space-x-3\">\n                <div className=\"flex-shrink-0 pt-0.5\">\n                  {getNotificationIcon(notification.type)}\n                </div>\n                <div className=\"flex-1 min-w-0\">\n                  <div className=\"flex justify-between items-start\">\n                    <div className=\"flex-1\">\n                      <p className=\"text-sm font-medium text-gray-900 dark:text-white\">\n                        {notification.title}\n                      </p>\n                      <p className=\"text-sm text-gray-600 dark:text-gray-300 mt-1\">\n                        {notification.message}\n                      </p>\n                      <p className=\"text-xs text-gray-400 dark:text-gray-500 mt-1\">\n                        {getTimeAgo(notification.created_at)}\n                      </p>\n                    </div>\n                    <div className=\"flex items-center space-x-1 ml-2\">\n                      {!notification.read && (\n                        <div className=\"w-2 h-2 bg-blue-500 rounded-full\" title=\"Unread\"></div>\n                      )}\n                      <button\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          deleteNotification(notification.id);\n                        }}\n                        className=\"text-gray-400 hover:text-red-500 dark:text-gray-500 dark:hover:text-red-400\"\n                        title=\"Delete\"\n                      >\n                        <X className=\"h-4 w-4\" />\n                      </button>\n                    </div>\n                  </div>\n\n                  {/* Friend request actions */}\n                  {notification.type === 'friend_request' && (\n                    <div className=\"flex space-x-2 mt-3\">\n                      <button\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          handleFriendRequestAction(notification, 'accept');\n                        }}\n                        className=\"flex-1 px-3 py-1.5 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                      >\n                        Accept\n                      </button>\n                      <button\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          handleFriendRequestAction(notification, 'decline');\n                        }}\n                        className=\"flex-1 px-3 py-1.5 bg-gray-300 text-gray-700 text-sm rounded-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500 dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-500\"\n                      >\n                        Decline\n                      </button>\n                    </div>\n                  )}\n                </div>\n              </div>\n            </div>\n          ))\n        ) : (\n          <div className=\"px-4 py-8 text-center text-gray-500 dark:text-gray-400\">\n            <Bell className=\"h-8 w-8 mx-auto mb-2 opacity-50\" />\n            <p className=\"text-sm\">No notifications</p>\n            <p className=\"text-xs mt-1\">You're all caught up!</p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default NotificationCenter;","import React, { useState, useEffect, useRef } from 'react';\nimport { X, Send, MessageCircle, User, Smile } from 'lucide-react';\nimport { supabase } from '../../lib/supabase';\n\ninterface Friend {\n  id: string;\n  friend_id: string;\n  role: 'none' | 'viewer' | 'administrator';\n  friend: {\n    id: string;\n    full_name?: string;\n    profile_photo_url?: string;\n  };\n}\n\ninterface Message {\n  id: string;\n  conversation_id: string;\n  sender_id: string;\n  content: string;\n  read: boolean;\n  created_at: string;\n  sender?: {\n    full_name?: string;\n    profile_photo_url?: string;\n  };\n}\n\ninterface Conversation {\n  id: string;\n  participant_1_id: string;\n  participant_2_id: string;\n  last_message_at: string;\n}\n\ninterface ChatModalProps {\n  friend: Friend;\n  onClose: () => void;\n}\n\nconst ChatModal: React.FC<ChatModalProps> = ({ friend, onClose }) => {\n  const [messages, setMessages] = useState<Message[]>([]);\n  const [newMessage, setNewMessage] = useState('');\n  const [loading, setLoading] = useState(true);\n  const [sending, setSending] = useState(false);\n  const [conversation, setConversation] = useState<Conversation | null>(null);\n  const [currentUserId, setCurrentUserId] = useState<string | null>(null);\n  const [currentUserInfo, setCurrentUserInfo] = useState<any>(null);\n  const [showEmoticons, setShowEmoticons] = useState(false);\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n  const messagesContainerRef = useRef<HTMLDivElement>(null);\n  const inputRef = useRef<HTMLInputElement>(null);\n  const emoticonRef = useRef<HTMLDivElement>(null);\n  const subscriptionRef = useRef<any>(null);\n\n  // Popular emoticons organized by category\n  const emoticons = {\n    'Smileys': ['😀', '😃', '😄', '😁', '😆', '😅', '🤣', '😂', '🙂', '🙃', '😉', '😊', '😇', '🥰', '😍', '🤩', '😘', '😗', '😚', '😙'],\n    'Emotions': ['😋', '😛', '😜', '🤪', '😝', '🤑', '🤗', '🤭', '🤫', '🤔', '🤐', '🤨', '😐', '😑', '😶', '😏', '😒', '🙄', '😬', '🤥'],\n    'Reactions': ['😌', '😔', '😪', '🤤', '😴', '😷', '🤒', '🤕', '🤢', '🤮', '🤧', '🥵', '🥶', '🥴', '😵', '🤯', '🤠', '🥳', '😎', '🤓'],\n    'Gestures': ['👍', '👎', '👌', '🤌', '🤏', '✌️', '🤞', '🤟', '🤘', '🤙', '👈', '👉', '👆', '🖕', '👇', '☝️', '👋', '🤚', '🖐️', '✋'],\n    'Hearts': ['❤️', '🧡', '💛', '💚', '💙', '💜', '🖤', '🤍', '🤎', '💔', '❣️', '💕', '💞', '💓', '💗', '💖', '💘', '💝', '💟', '♥️'],\n    'Objects': ['🎉', '🎊', '🎈', '🎁', '🏆', '🥇', '🥈', '🥉', '⚽', '🏀', '🏈', '⚾', '🎾', '🏐', '🏉', '🎱', '🏓', '🏸', '🥅', '⛳']\n  };\n\n  // Auto-scroll to bottom function\n  const scrollToBottom = (behavior: 'smooth' | 'auto' = 'auto') => {\n    if (messagesContainerRef.current) {\n      messagesContainerRef.current.scrollTop = messagesContainerRef.current.scrollHeight;\n    }\n  };\n\n  // Force scroll to bottom (for initial load and new messages)\n  const forceScrollToBottom = () => {\n    setTimeout(() => {\n      scrollToBottom('auto');\n    }, 50);\n  };\n\n  useEffect(() => {\n    initializeChat();\n    \n    // Focus input when modal opens\n    setTimeout(() => {\n      inputRef.current?.focus();\n    }, 100);\n\n    // Close emoticon picker when clicking outside\n    const handleClickOutside = (event: MouseEvent) => {\n      if (emoticonRef.current && !emoticonRef.current.contains(event.target as Node)) {\n        setShowEmoticons(false);\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    \n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n      // Clean up subscription\n      if (subscriptionRef.current) {\n        subscriptionRef.current.unsubscribe();\n      }\n    };\n  }, [friend.friend_id]);\n\n  // Scroll to bottom whenever messages change\n  useEffect(() => {\n    if (messages.length > 0) {\n      forceScrollToBottom();\n    }\n  }, [messages]);\n\n  // Scroll to bottom when modal first opens and messages are loaded\n  useEffect(() => {\n    if (!loading && messages.length > 0) {\n      forceScrollToBottom();\n    }\n  }, [loading]);\n\n  useEffect(() => {\n    if (!conversation || !currentUserId) return;\n\n    // Clean up previous subscription\n    if (subscriptionRef.current) {\n      subscriptionRef.current.unsubscribe();\n    }\n\n    console.log('Setting up real-time subscription for conversation:', conversation.id);\n\n    // Set up real-time subscription for messages in this conversation\n    subscriptionRef.current = supabase\n      .channel(`messages:conversation_id=eq.${conversation.id}`)\n      .on(\n        'postgres_changes',\n        {\n          event: 'INSERT',\n          schema: 'public',\n          table: 'messages',\n          filter: `conversation_id=eq.${conversation.id}`\n        },\n        async (payload) => {\n          console.log('New message received via realtime:', payload);\n          const newMessage = payload.new as Message;\n          \n          // Get sender info\n          const { data: senderSettings } = await supabase\n            .from('user_settings')\n            .select('full_name, profile_photo_url')\n            .eq('user_id', newMessage.sender_id)\n            .single();\n\n          const messageWithSender = {\n            ...newMessage,\n            created_at: newMessage.created_at,\n            sender: senderSettings\n          };\n\n          setMessages(prev => {\n            // Check if message already exists to prevent duplicates\n            const exists = prev.some(msg => msg.id === newMessage.id);\n            if (exists) {\n              console.log('Message already exists, skipping duplicate');\n              return prev;\n            }\n            \n            console.log('Adding new message to state');\n            const newMessages = [...prev, messageWithSender];\n            \n            // Auto-scroll to bottom when new message arrives\n            setTimeout(() => forceScrollToBottom(), 50);\n            \n            return newMessages;\n          });\n\n          // Mark message as read if it's not from current user and modal is open\n          if (newMessage.sender_id !== currentUserId) {\n            await markMessageAsRead(newMessage.id);\n          }\n        }\n      )\n      .on(\n        'postgres_changes',\n        {\n          event: 'UPDATE',\n          schema: 'public',\n          table: 'messages',\n          filter: `conversation_id=eq.${conversation.id}`\n        },\n        async (payload) => {\n          console.log('Message updated via realtime:', payload);\n          const updatedMessage = payload.new as Message;\n          \n          // Get sender info\n          const { data: senderSettings } = await supabase\n            .from('user_settings')\n            .select('full_name, profile_photo_url')\n            .eq('user_id', updatedMessage.sender_id)\n            .single();\n\n          const messageWithSender = {\n            ...updatedMessage,\n            sender: senderSettings\n          };\n\n          setMessages(prev => \n            prev.map(msg => \n              msg.id === updatedMessage.id ? messageWithSender : msg\n            )\n          );\n        }\n      )\n      .subscribe((status) => {\n        console.log('Chat subscription status:', status);\n        if (status === 'SUBSCRIBED') {\n          console.log('Successfully subscribed to real-time messages for conversation:', conversation.id);\n        } else if (status === 'CHANNEL_ERROR') {\n          console.error('Error subscribing to real-time messages');\n        }\n      });\n\n    return () => {\n      if (subscriptionRef.current) {\n        subscriptionRef.current.unsubscribe();\n      }\n    };\n  }, [conversation, currentUserId]);\n\n  const initializeChat = async () => {\n    try {\n      const { data: { user }, error: userError } = await supabase.auth.getUser();\n      if (userError) throw userError;\n      if (!user) return;\n\n      setCurrentUserId(user.id);\n\n      // Get current user info\n      const { data: userSettings } = await supabase\n        .from('user_settings')\n        .select('full_name, profile_photo_url')\n        .eq('user_id', user.id)\n        .single();\n\n      setCurrentUserInfo(userSettings);\n\n      // Find or create conversation\n      let conversationData = await findOrCreateConversation(user.id, friend.friend_id);\n      setConversation(conversationData);\n\n      // Load messages\n      await loadMessages(conversationData.id);\n\n      // Mark all messages from friend as read\n      await markConversationAsRead(conversationData.id, user.id);\n    } catch (error) {\n      console.error('Error initializing chat:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const findOrCreateConversation = async (userId: string, friendId: string): Promise<Conversation> => {\n    // Always put participant IDs in canonical order (smaller UUID first)\n    const participant1 = userId < friendId ? userId : friendId;\n    const participant2 = userId < friendId ? friendId : userId;\n\n    // Try to find existing conversation using canonical ordering\n    const { data: existingConversation, error: findError } = await supabase\n      .from('conversations')\n      .select('*')\n      .eq('participant_1_id', participant1)\n      .eq('participant_2_id', participant2)\n      .maybeSingle();\n\n    if (findError) {\n      throw findError;\n    }\n\n    if (existingConversation) {\n      return existingConversation;\n    }\n\n    // Try to create new conversation\n    try {\n      const { data: newConversation, error: createError } = await supabase\n        .from('conversations')\n        .insert({\n          participant_1_id: participant1,\n          participant_2_id: participant2\n        })\n        .select()\n        .single();\n\n      if (createError) throw createError;\n\n      return newConversation;\n    } catch (createError: any) {\n      // Handle race condition: if conversation was created by another process\n      if (createError.code === '23505') {\n        // Duplicate key constraint violation - conversation was created concurrently\n        // Try to fetch it again\n        const { data: existingConversation, error: refetchError } = await supabase\n          .from('conversations')\n          .select('*')\n          .eq('participant_1_id', participant1)\n          .eq('participant_2_id', participant2)\n          .single();\n\n        if (refetchError) throw refetchError;\n        if (!existingConversation) throw new Error('Conversation not found after concurrent creation');\n\n        return existingConversation;\n      }\n      \n      // Re-throw other errors\n      throw createError;\n    }\n  };\n\n  const loadMessages = async (conversationId: string) => {\n    try {\n      const { data: messagesData, error } = await supabase\n        .from('messages')\n        .select('*')\n        .eq('conversation_id', conversationId)\n        .order('created_at', { ascending: true });\n\n      if (error) throw error;\n\n      // Get sender info for each message\n      const messagesWithSenders = await Promise.all(\n        (messagesData || []).map(async (message) => {\n          const { data: senderSettings } = await supabase\n            .from('user_settings')\n            .select('full_name, profile_photo_url')\n            .eq('user_id', message.sender_id)\n            .single();\n\n          return {\n            ...message,\n            sender: senderSettings\n          };\n        })\n      );\n\n      setMessages(messagesWithSenders);\n    } catch (error) {\n      console.error('Error loading messages:', error);\n    }\n  };\n\n  const sendMessage = async () => {\n    if (!newMessage.trim() || !conversation || !currentUserId || sending) return;\n\n    setSending(true);\n    const messageContent = newMessage.trim();\n    \n    // Clear input immediately for better UX\n    setNewMessage('');\n    setShowEmoticons(false);\n\n    try {\n      const { data: insertedMessage, error } = await supabase\n        .from('messages')\n        .insert({\n          conversation_id: conversation.id,\n          sender_id: currentUserId,\n          content: messageContent\n        })\n        .select()\n        .single();\n\n      if (error) throw error;\n\n      console.log('Message sent successfully:', insertedMessage);\n\n      // Add message optimistically for immediate feedback\n      const messageWithSender = {\n        ...insertedMessage,\n        sender: currentUserInfo\n      };\n\n      setMessages(prev => {\n        // Check if message already exists (from real-time subscription)\n        const exists = prev.some(msg => msg.id === insertedMessage.id);\n        if (exists) {\n          return prev;\n        }\n        const newMessages = [...prev, messageWithSender];\n        \n        // Auto-scroll to bottom when sending message\n        setTimeout(() => forceScrollToBottom(), 50);\n        \n        return newMessages;\n      });\n\n    } catch (error) {\n      console.error('Error sending message:', error);\n      // Restore input on error\n      setNewMessage(messageContent);\n    } finally {\n      setSending(false);\n    }\n  };\n\n  const addEmoticon = (emoticon: string) => {\n    setNewMessage(prev => prev + emoticon);\n    setShowEmoticons(false);\n    inputRef.current?.focus();\n  };\n\n  const markMessageAsRead = async (messageId: string) => {\n    try {\n      await supabase\n        .from('messages')\n        .update({ read: true })\n        .eq('id', messageId);\n    } catch (error) {\n      console.error('Error marking message as read:', error);\n    }\n  };\n\n  const markConversationAsRead = async (conversationId: string, userId: string) => {\n    try {\n      await supabase\n        .from('messages')\n        .update({ read: true })\n        .eq('conversation_id', conversationId)\n        .neq('sender_id', userId)\n        .eq('read', false);\n    } catch (error) {\n      console.error('Error marking conversation as read:', error);\n    }\n  };\n\n  const handleKeyPress = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      sendMessage();\n    }\n  };\n\n  const formatTime = (dateString: string) => {\n    const date = new Date(dateString);\n    const now = new Date();\n    const diffInHours = (now.getTime() - date.getTime()) / (1000 * 60 * 60);\n\n    if (diffInHours < 24) {\n      return date.toLocaleTimeString('en-US', { \n        hour: 'numeric', \n        minute: '2-digit',\n        hour12: true \n      });\n    } else if (diffInHours < 24 * 7) {\n      return date.toLocaleDateString('en-US', { \n        weekday: 'short',\n        hour: 'numeric', \n        minute: '2-digit',\n        hour12: true \n      });\n    } else {\n      return date.toLocaleDateString('en-US', { \n        month: 'short',\n        day: 'numeric',\n        hour: 'numeric', \n        minute: '2-digit',\n        hour12: true \n      });\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl h-[600px] flex flex-col\">\n        {/* Header */}\n        <div className=\"px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center\">\n          <div className=\"flex items-center space-x-3\">\n            <div className=\"w-10 h-10 rounded-full bg-gray-300 dark:bg-gray-500 flex items-center justify-center\">\n              {friend.friend.profile_photo_url ? (\n                <img \n                  src={friend.friend.profile_photo_url} \n                  alt=\"\" \n                  className=\"w-10 h-10 rounded-full object-cover\" \n                />\n              ) : (\n                <User className=\"h-6 w-6 text-gray-600 dark:text-gray-300\" />\n              )}\n            </div>\n            <div>\n              <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">\n                {friend.friend.full_name || 'Friend'}\n              </h3>\n              <div className=\"flex items-center text-sm text-gray-500 dark:text-gray-400\">\n                <MessageCircle className=\"h-4 w-4 mr-1\" />\n                Chat\n              </div>\n            </div>\n          </div>\n          <button\n            onClick={onClose}\n            className=\"text-gray-400 hover:text-gray-500 dark:text-gray-300 dark:hover:text-gray-200\"\n          >\n            <X className=\"h-6 w-6\" />\n          </button>\n        </div>\n\n        {/* Messages */}\n        <div \n          ref={messagesContainerRef}\n          className=\"flex-1 overflow-y-auto p-4 space-y-4\"\n          style={{ scrollBehavior: 'smooth' }}\n        >\n          {loading ? (\n            <div className=\"flex items-center justify-center h-full\">\n              <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n            </div>\n          ) : messages.length > 0 ? (\n            messages.map((message, index) => {\n              const isCurrentUser = message.sender_id === currentUserId;\n              const showAvatar = !isCurrentUser && (\n                index === 0 || \n                messages[index - 1].sender_id !== message.sender_id ||\n                new Date(message.created_at).getTime() - new Date(messages[index - 1].created_at).getTime() > 5 * 60 * 1000\n              );\n\n              return (\n                <div\n                  key={message.id}\n                  className={`flex ${isCurrentUser ? 'justify-end' : 'justify-start'} ${\n                    showAvatar ? 'mt-4' : 'mt-1'\n                  }`}\n                >\n                  {!isCurrentUser && showAvatar && (\n                    <div className=\"w-8 h-8 rounded-full bg-gray-300 dark:bg-gray-500 flex items-center justify-center mr-2 flex-shrink-0\">\n                      {message.sender?.profile_photo_url ? (\n                        <img \n                          src={message.sender.profile_photo_url} \n                          alt=\"\" \n                          className=\"w-8 h-8 rounded-full object-cover\" \n                        />\n                      ) : (\n                        <span className=\"text-sm font-medium text-gray-600 dark:text-gray-300\">\n                          {(message.sender?.full_name || 'F').charAt(0).toUpperCase()}\n                        </span>\n                      )}\n                    </div>\n                  )}\n                  {!isCurrentUser && !showAvatar && (\n                    <div className=\"w-8 mr-2 flex-shrink-0\"></div>\n                  )}\n                  \n                  <div className={`max-w-xs lg:max-w-md ${isCurrentUser ? 'order-1' : 'order-2'}`}>\n                    <div\n                      className={`px-4 py-2 rounded-lg ${\n                        isCurrentUser\n                          ? 'bg-blue-600 text-white'\n                          : 'bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-white'\n                      }`}\n                    >\n                      <p className=\"text-sm whitespace-pre-wrap break-words\">{message.content}</p>\n                    </div>\n                    <div className={`mt-1 text-xs text-gray-500 dark:text-gray-400 ${\n                      isCurrentUser ? 'text-right' : 'text-left'\n                    }`}>\n                      {formatTime(message.created_at)}\n                    </div>\n                  </div>\n                </div>\n              );\n            })\n          ) : (\n            <div className=\"flex flex-col items-center justify-center h-full text-gray-500 dark:text-gray-400\">\n              <MessageCircle className=\"h-12 w-12 mb-4 opacity-50\" />\n              <p className=\"text-lg font-medium\">Start a conversation</p>\n              <p className=\"text-sm\">Send a message to {friend.friend.full_name || 'your friend'}</p>\n            </div>\n          )}\n          <div ref={messagesEndRef} />\n        </div>\n\n        {/* Emoticon Picker */}\n        {showEmoticons && (\n          <div \n            ref={emoticonRef}\n            className=\"border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700 max-h-64 overflow-y-auto\"\n          >\n            <div className=\"p-4\">\n              {Object.entries(emoticons).map(([category, emojis]) => (\n                <div key={category} className=\"mb-4\">\n                  <h4 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                    {category}\n                  </h4>\n                  <div className=\"grid grid-cols-10 gap-2\">\n                    {emojis.map((emoji, index) => (\n                      <button\n                        key={index}\n                        onClick={() => addEmoticon(emoji)}\n                        className=\"text-xl hover:bg-gray-200 dark:hover:bg-gray-600 rounded p-1 transition-colors\"\n                        title={emoji}\n                      >\n                        {emoji}\n                      </button>\n                    ))}\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {/* Message Input */}\n        <div className=\"px-4 py-4 border-t border-gray-200 dark:border-gray-700\">\n          <div className=\"flex space-x-3\">\n            <button\n              onClick={() => setShowEmoticons(!showEmoticons)}\n              className={`p-2 rounded-full transition-colors ${\n                showEmoticons \n                  ? 'bg-blue-100 text-blue-600 dark:bg-blue-900 dark:text-blue-400' \n                  : 'text-gray-400 hover:text-gray-600 dark:hover:text-gray-300'\n              }`}\n              title=\"Add emoticon\"\n            >\n              <Smile className=\"h-5 w-5\" />\n            </button>\n            <input\n              ref={inputRef}\n              type=\"text\"\n              value={newMessage}\n              onChange={(e) => setNewMessage(e.target.value)}\n              onKeyPress={handleKeyPress}\n              placeholder=\"Type a message...\"\n              className=\"flex-1 rounded-full border border-gray-300 dark:border-gray-600 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white\"\n              disabled={sending}\n            />\n            <button\n              onClick={sendMessage}\n              disabled={!newMessage.trim() || sending}\n              className=\"bg-blue-600 text-white rounded-full p-2 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n            >\n              {sending ? (\n                <div className=\"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent\" />\n              ) : (\n                <Send className=\"h-5 w-5\" />\n              )}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ChatModal;","import React, { ReactNode, useState, useEffect } from 'react';\nimport { Bell, User, Search, Moon, Sun, LogOut, Users } from 'lucide-react';\nimport { useNavigate } from 'react-router-dom';\nimport { useApp } from '../../context/AppContext';\nimport { useTheme } from '../../context/ThemeContext';\nimport NotificationCenter from '../notifications/NotificationCenter';\nimport ChatModal from '../chat/ChatModal';\nimport { supabase } from '../../lib/supabase';\n\ninterface HeaderProps {\n  children?: ReactNode;\n}\n\ninterface Friend {\n  id: string;\n  friend_id: string;\n  role: 'none' | 'viewer' | 'administrator';\n  created_at: string;\n  friend: {\n    id: string;\n    full_name?: string;\n    profile_photo_url?: string;\n  };\n  unreadCount?: number;\n  lastMessageAt?: string;\n}\n\nconst Header: React.FC<HeaderProps> = ({ children }) => {\n  const { user } = useApp();\n  const { theme, toggleTheme } = useTheme();\n  const [notificationsOpen, setNotificationsOpen] = useState(false);\n  const [userMenuOpen, setUserMenuOpen] = useState(false);\n  const [friendsOpen, setFriendsOpen] = useState(false);\n  const [notificationCount, setNotificationCount] = useState(0);\n  const [friends, setFriends] = useState<Friend[]>([]);\n  const [filteredFriends, setFilteredFriends] = useState<Friend[]>([]);\n  const [friendSearchQuery, setFriendSearchQuery] = useState('');\n  const [loadingFriends, setLoadingFriends] = useState(false);\n  const [selectedFriend, setSelectedFriend] = useState<Friend | null>(null);\n  const navigate = useNavigate();\n  \n  const toggleNotifications = () => setNotificationsOpen(!notificationsOpen);\n  const toggleUserMenu = () => setUserMenuOpen(!userMenuOpen);\n  const toggleFriends = () => {\n    setFriendsOpen(!friendsOpen);\n    if (!friendsOpen && friends.length === 0) {\n      fetchFriends();\n    }\n    // Reset search when opening/closing\n    if (!friendsOpen) {\n      setFriendSearchQuery('');\n    }\n  };\n\n  useEffect(() => {\n    fetchNotificationCount();\n    \n    // Set up real-time subscription for notifications count (excluding messages)\n    const setupNotificationSubscription = async () => {\n      const { data: { user } } = await supabase.auth.getUser();\n      \n      if (user) {\n        const notificationsSubscription = supabase\n          .channel(`header-notifications:user_id=eq.${user.id}`)\n          .on(\n            'postgres_changes',\n            {\n              event: '*',\n              schema: 'public',\n              table: 'notifications',\n              filter: `user_id=eq.${user.id}`\n            },\n            () => {\n              fetchNotificationCount();\n            }\n          )\n          .subscribe();\n\n        return () => {\n          notificationsSubscription.unsubscribe();\n        };\n      }\n    };\n\n    setupNotificationSubscription();\n  }, []);\n\n  useEffect(() => {\n    // Set up real-time subscription for messages to update unread counts\n    const setupMessageSubscription = async () => {\n      const { data: { user } } = await supabase.auth.getUser();\n      \n      if (user) {\n        const messagesSubscription = supabase\n          .channel(`header-messages:user_id=eq.${user.id}`)\n          .on(\n            'postgres_changes',\n            {\n              event: '*',\n              schema: 'public',\n              table: 'messages'\n            },\n            () => {\n              // Refresh friends list to update unread counts\n              if (friends.length > 0) {\n                fetchFriends();\n              }\n            }\n          )\n          .subscribe();\n\n        return () => {\n          messagesSubscription.unsubscribe();\n        };\n      }\n    };\n\n    setupMessageSubscription();\n  }, [friends.length]);\n\n  // Filter friends based on search query and sort by unread messages\n  useEffect(() => {\n    if (!friendSearchQuery.trim()) {\n      // Sort friends: unread messages first, then by most recent message, then alphabetically\n      const sorted = [...friends].sort((a, b) => {\n        // First, sort by unread count (descending)\n        if ((a.unreadCount || 0) !== (b.unreadCount || 0)) {\n          return (b.unreadCount || 0) - (a.unreadCount || 0);\n        }\n        \n        // Then by last message time (most recent first)\n        if (a.lastMessageAt && b.lastMessageAt) {\n          return new Date(b.lastMessageAt).getTime() - new Date(a.lastMessageAt).getTime();\n        }\n        \n        // Finally alphabetically\n        const nameA = a.friend.full_name || 'No name set';\n        const nameB = b.friend.full_name || 'No name set';\n        return nameA.localeCompare(nameB);\n      });\n      \n      setFilteredFriends(sorted);\n    } else {\n      const query = friendSearchQuery.toLowerCase();\n      const filtered = friends.filter(friend => \n        (friend.friend.full_name || '').toLowerCase().includes(query)\n      );\n      \n      // Apply same sorting to filtered results\n      const sorted = filtered.sort((a, b) => {\n        if ((a.unreadCount || 0) !== (b.unreadCount || 0)) {\n          return (b.unreadCount || 0) - (a.unreadCount || 0);\n        }\n        \n        if (a.lastMessageAt && b.lastMessageAt) {\n          return new Date(b.lastMessageAt).getTime() - new Date(a.lastMessageAt).getTime();\n        }\n        \n        const nameA = a.friend.full_name || 'No name set';\n        const nameB = b.friend.full_name || 'No name set';\n        return nameA.localeCompare(nameB);\n      });\n      \n      setFilteredFriends(sorted);\n    }\n  }, [friends, friendSearchQuery]);\n\n  const fetchNotificationCount = async () => {\n    try {\n      const { data: { user }, error: userError } = await supabase.auth.getUser();\n      if (userError || !user) return;\n\n      // Count unread notifications excluding message notifications\n      const { count, error: countError } = await supabase\n        .from('notifications')\n        .select('*', { count: 'exact', head: true })\n        .eq('user_id', user.id)\n        .eq('read', false)\n        .neq('type', 'message'); // Exclude message notifications\n\n      if (!countError) {\n        setNotificationCount(count || 0);\n      }\n    } catch (error) {\n      console.error('Error fetching notification count:', error);\n    }\n  };\n\n  const fetchFriends = async () => {\n    try {\n      setLoadingFriends(true);\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) return;\n\n      // Fetch friends\n      const { data: friendsData, error: friendsError } = await supabase\n        .from('friendships')\n        .select('id, friend_id, role, created_at')\n        .eq('user_id', user.id);\n\n      if (friendsError) throw friendsError;\n\n      // Get user details for friends from user_settings table\n      const friendIds = friendsData?.map(f => f.friend_id) || [];\n      let friendUsers: any[] = [];\n      \n      if (friendIds.length > 0) {\n        const { data: userSettings, error: settingsError } = await supabase\n          .from('user_settings')\n          .select('user_id, full_name, profile_photo_url')\n          .in('user_id', friendIds);\n\n        if (settingsError) throw settingsError;\n\n        friendUsers = friendIds.map(friendId => {\n          const settings = userSettings?.find(s => s.user_id === friendId);\n          \n          return {\n            id: friendId,\n            full_name: settings?.full_name || 'No name set',\n            profile_photo_url: settings?.profile_photo_url\n          };\n        });\n      }\n\n      // Get unread message counts for each friend\n      const friendsWithUnreadCounts = await Promise.all(\n        (friendsData || []).map(async (friendship) => {\n          const friend = friendUsers.find(u => u.id === friendship.friend_id) || {\n            id: friendship.friend_id,\n            full_name: 'No name set',\n            profile_photo_url: undefined\n          };\n\n          // Get conversation with this friend\n          const { data: conversation } = await supabase\n            .from('conversations')\n            .select('id, last_message_at')\n            .or(`and(participant_1_id.eq.${user.id},participant_2_id.eq.${friendship.friend_id}),and(participant_1_id.eq.${friendship.friend_id},participant_2_id.eq.${user.id})`)\n            .maybeSingle();\n\n          let unreadCount = 0;\n          let lastMessageAt = null;\n\n          if (conversation) {\n            // Count unread messages from this friend\n            const { count } = await supabase\n              .from('messages')\n              .select('*', { count: 'exact', head: true })\n              .eq('conversation_id', conversation.id)\n              .eq('sender_id', friendship.friend_id)\n              .eq('read', false);\n\n            unreadCount = count || 0;\n            lastMessageAt = conversation.last_message_at;\n          }\n\n          return {\n            ...friendship,\n            friend,\n            unreadCount,\n            lastMessageAt\n          };\n        })\n      );\n\n      setFriends(friendsWithUnreadCounts);\n    } catch (error) {\n      console.error('Error fetching friends:', error);\n    } finally {\n      setLoadingFriends(false);\n    }\n  };\n\n  const handleSignOut = async () => {\n    await supabase.auth.signOut();\n    navigate('/auth/signin');\n  };\n\n  const handleFriendClick = (friend: Friend) => {\n    setSelectedFriend(friend);\n    setFriendsOpen(false);\n    setFriendSearchQuery(''); // Reset search when opening chat\n  };\n\n  const handleManageFriends = () => {\n    setFriendsOpen(false);\n    navigate('/friends');\n  };\n\n  const handleOpenChatFromNotification = (friendId: string, friendInfo: any) => {\n    setSelectedFriend(friendInfo);\n    setNotificationsOpen(false);\n  };\n\n  const getRoleIcon = (role: string) => {\n    return role === 'administrator' ? '👑' : role === 'viewer' ? '👁️' : '💬';\n  };\n\n  const getRoleLabel = (role: string) => {\n    return role === 'administrator' ? 'Admin' : role === 'viewer' ? 'Viewer' : 'Friend';\n  };\n\n  return (\n    <>\n      <header className=\"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 z-10\">\n        <div className=\"px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex h-16 items-center justify-between\">\n            <div className=\"flex items-center\">\n              {children}\n              <div className=\"ml-4 md:ml-6\">\n                <h1 className=\"text-xl font-semibold text-gray-900 dark:text-white\">TeamSync</h1>\n              </div>\n            </div>\n            \n            <div className=\"hidden md:block\">\n              <div className=\"relative mx-4 w-64\">\n                <div className=\"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3\">\n                  <Search className=\"h-5 w-5 text-gray-400\" />\n                </div>\n                <input\n                  type=\"text\"\n                  placeholder=\"Search events...\"\n                  className=\"block w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 py-2 pl-10 pr-3 text-sm placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500\"\n                />\n              </div>\n            </div>\n            \n            <div className=\"flex items-center space-x-4\">\n              <button\n                onClick={toggleTheme}\n                className=\"relative rounded-full p-1 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              >\n                {theme === 'dark' ? (\n                  <Sun className=\"h-6 w-6\" />\n                ) : (\n                  <Moon className=\"h-6 w-6\" />\n                )}\n              </button>\n\n              {/* Notifications */}\n              <div className=\"relative\">\n                <button\n                  type=\"button\"\n                  className=\"relative rounded-full bg-white dark:bg-gray-700 p-1 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  onClick={toggleNotifications}\n                >\n                  <span className=\"sr-only\">View notifications</span>\n                  <Bell className=\"h-6 w-6\" />\n                  {notificationCount > 0 && (\n                    <span className=\"absolute -top-1 -right-1 flex h-5 w-5 items-center justify-center rounded-full bg-red-500 text-xs text-white font-medium\">\n                      {notificationCount > 99 ? '99+' : notificationCount}\n                    </span>\n                  )}\n                </button>\n                \n                {notificationsOpen && (\n                  <NotificationCenter \n                    onClose={() => setNotificationsOpen(false)} \n                    onOpenChat={handleOpenChatFromNotification}\n                  />\n                )}\n              </div>\n\n              {/* Friends Dropdown */}\n              <div className=\"relative\">\n                <button\n                  type=\"button\"\n                  className=\"relative rounded-full bg-white dark:bg-gray-700 p-1 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  onClick={toggleFriends}\n                >\n                  <span className=\"sr-only\">View friends</span>\n                  <Users className=\"h-6 w-6\" />\n                  {/* Show total unread messages count */}\n                  {friends.some(f => (f.unreadCount || 0) > 0) && (\n                    <span className=\"absolute -top-1 -right-1 flex h-5 w-5 items-center justify-center rounded-full bg-blue-500 text-xs text-white font-medium\">\n                      {friends.reduce((total, f) => total + (f.unreadCount || 0), 0)}\n                    </span>\n                  )}\n                </button>\n                \n                {friendsOpen && (\n                  <div className=\"absolute right-0 mt-2 w-80 origin-top-right rounded-md bg-white dark:bg-gray-800 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none\">\n                    <div className=\"px-4 py-3 border-b border-gray-200 dark:border-gray-700\">\n                      <div className=\"flex justify-between items-center mb-3\">\n                        <h3 className=\"text-sm font-medium text-gray-900 dark:text-white\">Friends ({friends.length})</h3>\n                        <button\n                          onClick={handleManageFriends}\n                          className=\"text-sm text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300\"\n                        >\n                          Manage\n                        </button>\n                      </div>\n                      \n                      {/* Search Input */}\n                      {friends.length > 0 && (\n                        <div className=\"relative\">\n                          <div className=\"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3\">\n                            <Search className=\"h-4 w-4 text-gray-400\" />\n                          </div>\n                          <input\n                            type=\"text\"\n                            value={friendSearchQuery}\n                            onChange={(e) => setFriendSearchQuery(e.target.value)}\n                            placeholder=\"Search friends...\"\n                            className=\"block w-full pl-9 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white bg-white dark:bg-gray-700 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500\"\n                          />\n                        </div>\n                      )}\n                    </div>\n                    \n                    <div className=\"max-h-64 overflow-y-auto\">\n                      {loadingFriends ? (\n                        <div className=\"px-4 py-6 text-center\">\n                          <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mx-auto\"></div>\n                        </div>\n                      ) : filteredFriends.length > 0 ? (\n                        <>\n                          {friendSearchQuery && filteredFriends.length !== friends.length && (\n                            <div className=\"px-4 py-2 text-xs text-gray-500 dark:text-gray-400 bg-gray-50 dark:bg-gray-700\">\n                              {filteredFriends.length} of {friends.length} friends\n                            </div>\n                          )}\n                          {filteredFriends.map((friend) => (\n                            <button\n                              key={friend.id}\n                              onClick={() => handleFriendClick(friend)}\n                              className=\"w-full px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700 border-b border-gray-100 dark:border-gray-600 last:border-b-0 text-left\"\n                            >\n                              <div className=\"flex items-center\">\n                                <div className=\"w-8 h-8 rounded-full bg-gray-300 dark:bg-gray-500 flex items-center justify-center mr-3 relative\">\n                                  {friend.friend.profile_photo_url ? (\n                                    <img \n                                      src={friend.friend.profile_photo_url} \n                                      alt=\"\" \n                                      className=\"w-8 h-8 rounded-full object-cover\" \n                                    />\n                                  ) : (\n                                    <span className=\"text-sm font-medium text-gray-600 dark:text-gray-300\">\n                                      {(friend.friend.full_name || 'U').charAt(0).toUpperCase()}\n                                    </span>\n                                  )}\n                                  {/* Unread message indicator */}\n                                  {(friend.unreadCount || 0) > 0 && (\n                                    <span className=\"absolute -top-1 -right-1 flex h-4 w-4 items-center justify-center rounded-full bg-red-500 text-xs text-white font-medium\">\n                                      {friend.unreadCount! > 9 ? '9+' : friend.unreadCount}\n                                    </span>\n                                  )}\n                                </div>\n                                <div className=\"flex-1 min-w-0\">\n                                  <div className={`text-sm font-medium truncate ${\n                                    (friend.unreadCount || 0) > 0 \n                                      ? 'font-bold text-gray-900 dark:text-white' \n                                      : 'text-gray-900 dark:text-white'\n                                  }`}>\n                                    {friend.friend.full_name || 'No name set'}\n                                  </div>\n                                  <div className=\"text-xs text-gray-500 dark:text-gray-400 flex items-center\">\n                                    <span className=\"mr-1\">{getRoleIcon(friend.role)}</span>\n                                    {getRoleLabel(friend.role)}\n                                    {(friend.unreadCount || 0) > 0 && (\n                                      <span className=\"ml-2 text-blue-600 dark:text-blue-400 font-medium\">\n                                        {friend.unreadCount} new message{friend.unreadCount! > 1 ? 's' : ''}\n                                      </span>\n                                    )}\n                                  </div>\n                                </div>\n                              </div>\n                            </button>\n                          ))}\n                        </>\n                      ) : friends.length > 0 ? (\n                        <div className=\"px-4 py-6 text-center text-gray-500 dark:text-gray-400\">\n                          <Search className=\"h-8 w-8 mx-auto mb-2 opacity-50\" />\n                          <p className=\"text-sm\">No friends found</p>\n                          <p className=\"text-xs\">Try a different search term</p>\n                        </div>\n                      ) : (\n                        <div className=\"px-4 py-6 text-center text-gray-500 dark:text-gray-400\">\n                          <Users className=\"h-8 w-8 mx-auto mb-2 opacity-50\" />\n                          <p className=\"text-sm\">No friends added yet</p>\n                          <button\n                            onClick={handleManageFriends}\n                            className=\"mt-2 text-sm text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300\"\n                          >\n                            Add friends\n                          </button>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                )}\n              </div>\n              \n              <div className=\"relative\">\n                <button\n                  type=\"button\"\n                  className=\"flex rounded-full bg-white dark:bg-gray-700 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  onClick={toggleUserMenu}\n                >\n                  <span className=\"sr-only\">Open user menu</span>\n                  <div className=\"h-8 w-8 rounded-full bg-blue-500 flex items-center justify-center text-white\">\n                    <User className=\"h-5 w-5\" />\n                  </div>\n                </button>\n                \n                {userMenuOpen && (\n                  <div className=\"absolute right-0 mt-2 w-48 origin-top-right rounded-md bg-white dark:bg-gray-700 py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none\">\n                    <a href=\"/settings\" className=\"block px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-600\">Settings</a>\n                    <button\n                      onClick={handleSignOut}\n                      className=\"block w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-600\"\n                    >\n                      Sign out\n                    </button>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      </header>\n\n      {/* Chat Modal */}\n      {selectedFriend && (\n        <ChatModal \n          friend={selectedFriend} \n          onClose={() => setSelectedFriend(null)} \n        />\n      )}\n    </>\n  );\n};\n\nexport default Header;","import React, { useState } from 'react';\nimport { Outlet } from 'react-router-dom';\nimport Sidebar from './Sidebar';\nimport Header from './Header';\nimport { Menu } from 'lucide-react';\n\nconst Layout: React.FC = () => {\n  const [sidebarOpen, setSidebarOpen] = useState(false);\n\n  const toggleSidebar = () => setSidebarOpen(!sidebarOpen);\n\n  return (\n    <div className=\"flex h-screen w-full overflow-hidden bg-gray-50 dark:bg-gray-900\">\n      {/* Mobile sidebar */}\n      <div className={`fixed inset-0 z-40 lg:hidden ${sidebarOpen ? 'block' : 'hidden'}`}>\n        <div \n          className=\"fixed inset-0 bg-gray-600 bg-opacity-75 transition-opacity dark:bg-gray-900 dark:bg-opacity-75\" \n          onClick={toggleSidebar}\n        ></div>\n        <div className=\"fixed inset-y-0 left-0 flex w-full max-w-xs flex-col bg-white dark:bg-gray-800 shadow-xl\">\n          <Sidebar onClose={toggleSidebar} />\n        </div>\n      </div>\n\n      {/* Desktop sidebar */}\n      <div className=\"hidden lg:flex lg:w-64 lg:flex-shrink-0\">\n        <div className=\"flex h-full flex-col border-r border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800\">\n          <Sidebar onClose={() => {}} />\n        </div>\n      </div>\n\n      {/* Main content */}\n      <div className=\"flex flex-1 flex-col w-full overflow-hidden\">\n        <Header>\n          <button\n            type=\"button\"\n            className=\"text-gray-500 dark:text-gray-400 focus:outline-none lg:hidden\"\n            onClick={toggleSidebar}\n          >\n            <Menu size={24} />\n          </button>\n        </Header>\n        <main className=\"flex-1 overflow-auto bg-gray-50 dark:bg-gray-900 p-4 md:p-6\">\n          <div className=\"container mx-auto max-w-7xl\">\n            <Outlet />\n          </div>\n        </main>\n      </div>\n    </div>\n  );\n};\n\nexport default Layout;","import { jsx, jsxs, Fragment } from 'react/jsx-runtime';\nimport { createContext, useContext, memo, useState, useRef, useEffect, PureComponent, useMemo, Children, isValidElement, cloneElement, createRef } from 'react';\nimport * as ReactDOM from 'react-dom';\nimport { createPortal } from 'react-dom';\n\nfunction _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\n\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\n\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\n\nfunction _defineProperty(e, r, t) {\n  return (r = toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[r] = t, e;\n}\n\nfunction getDefaultExportFromCjs$1 (x) {\n\treturn x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n}\n\n/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\nvar invariant_1;\nvar hasRequiredInvariant;\nfunction requireInvariant() {\n  if (hasRequiredInvariant) return invariant_1;\n  hasRequiredInvariant = 1;\n\n  /**\n   * Use invariant() to assert state which your program assumes to be true.\n   *\n   * Provide sprintf-style format (only %s is supported) and arguments\n   * to provide information about what broke and what you were\n   * expecting.\n   *\n   * The invariant message will be stripped in production, but the invariant\n   * will remain to ensure logic does not differ in production.\n   */\n\n  var NODE_ENV = process.env.NODE_ENV;\n  var invariant = function invariant(condition, format, a, b, c, d, e, f) {\n    if (NODE_ENV !== 'production') {\n      if (format === undefined) {\n        throw new Error('invariant requires an error message argument');\n      }\n    }\n    if (!condition) {\n      var error;\n      if (format === undefined) {\n        error = new Error('Minified exception occurred; use the non-minified dev environment ' + 'for the full error message and additional helpful warnings.');\n      } else {\n        var args = [a, b, c, d, e, f];\n        var argIndex = 0;\n        error = new Error(format.replace(/%s/g, function () {\n          return args[argIndex++];\n        }));\n        error.name = 'Invariant Violation';\n      }\n      error.framesToPop = 1; // we don't care about invariant's own frame\n      throw error;\n    }\n  };\n  invariant_1 = invariant;\n  return invariant_1;\n}\n\nvar invariantExports = requireInvariant();\nvar invariant = /*@__PURE__*/getDefaultExportFromCjs$1(invariantExports);\n\nvar MapContext = createContext(null);\nfunction useGoogleMap() {\n  invariant(!!useContext, 'useGoogleMap is React hook and requires React version 16.8+');\n  var map = useContext(MapContext);\n  invariant(!!map, 'useGoogleMap needs a GoogleMap available up in the tree');\n  return map;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction reduce(obj, fn, acc) {\n  return Object.keys(obj).reduce(function reducer(newAcc, key) {\n    return fn(newAcc, obj[key], key);\n  }, acc);\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction forEach(obj, fn) {\n  Object.keys(obj).forEach(key => {\n    return fn(obj[key], key);\n  });\n}\n\n/* global google */\n/* eslint-disable filenames/match-regex */\nfunction applyUpdaterToNextProps(\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nupdaterMap,\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nprevProps,\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nnextProps,\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\ninstance\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\n) {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  var map = {};\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  var iter = (fn, key) => {\n    var nextValue = nextProps[key];\n    if (nextValue !== prevProps[key]) {\n      map[key] = nextValue;\n      fn(instance, nextValue);\n    }\n  };\n  forEach(updaterMap, iter);\n  return map;\n}\nfunction registerEvents(\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nprops,\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\ninstance, eventMap) {\n  var registeredList = reduce(eventMap, function reducer(acc, googleEventName,\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  onEventName) {\n    if (typeof props[onEventName] === 'function') {\n      acc.push(google.maps.event.addListener(instance, googleEventName, props[onEventName]));\n    }\n    return acc;\n  }, []);\n  return registeredList;\n}\nfunction unregisterEvent(registered) {\n  google.maps.event.removeListener(registered);\n}\nfunction unregisterEvents() {\n  var events = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  events.forEach(unregisterEvent);\n}\nfunction applyUpdatersToPropsAndRegisterEvents(_ref) {\n  var {\n    updaterMap,\n    eventMap,\n    prevProps,\n    nextProps,\n    instance\n  } = _ref;\n  var registeredEvents = registerEvents(nextProps, instance, eventMap);\n  applyUpdaterToNextProps(updaterMap, prevProps, nextProps, instance);\n  return registeredEvents;\n}\n\nvar eventMap$i = {\n  onDblClick: 'dblclick',\n  onDragEnd: 'dragend',\n  onDragStart: 'dragstart',\n  onMapTypeIdChanged: 'maptypeid_changed',\n  onMouseMove: 'mousemove',\n  onMouseOut: 'mouseout',\n  onMouseOver: 'mouseover',\n  onMouseDown: 'mousedown',\n  onMouseUp: 'mouseup',\n  onRightClick: 'rightclick',\n  onTilesLoaded: 'tilesloaded',\n  onBoundsChanged: 'bounds_changed',\n  onCenterChanged: 'center_changed',\n  onClick: 'click',\n  onDrag: 'drag',\n  onHeadingChanged: 'heading_changed',\n  onIdle: 'idle',\n  onProjectionChanged: 'projection_changed',\n  onResize: 'resize',\n  onTiltChanged: 'tilt_changed',\n  onZoomChanged: 'zoom_changed'\n};\nvar updaterMap$i = {\n  extraMapTypes(map, extra) {\n    extra.forEach(function forEachExtra(it, i) {\n      map.mapTypes.set(String(i), it);\n    });\n  },\n  center(map, center) {\n    map.setCenter(center);\n  },\n  clickableIcons(map, clickable) {\n    map.setClickableIcons(clickable);\n  },\n  heading(map, heading) {\n    map.setHeading(heading);\n  },\n  mapTypeId(map, mapTypeId) {\n    map.setMapTypeId(mapTypeId);\n  },\n  options(map, options) {\n    map.setOptions(options);\n  },\n  streetView(map, streetView) {\n    map.setStreetView(streetView);\n  },\n  tilt(map, tilt) {\n    map.setTilt(tilt);\n  },\n  zoom(map, zoom) {\n    map.setZoom(zoom);\n  }\n};\n// TODO: unfinished!\nfunction GoogleMapFunctional(_ref) {\n  var {\n    children,\n    options,\n    id,\n    mapContainerStyle,\n    mapContainerClassName,\n    center,\n    // clickableIcons,\n    // extraMapTypes,\n    // heading,\n    // mapTypeId,\n    onClick,\n    onDblClick,\n    onDrag,\n    onDragEnd,\n    onDragStart,\n    onMouseMove,\n    onMouseOut,\n    onMouseOver,\n    onMouseDown,\n    onMouseUp,\n    onRightClick,\n    // onMapTypeIdChanged,\n    // onTilesLoaded,\n    // onBoundsChanged,\n    onCenterChanged,\n    // onHeadingChanged,\n    // onIdle,\n    // onProjectionChanged,\n    // onResize,\n    // onTiltChanged,\n    // onZoomChanged,\n    onLoad,\n    onUnmount\n  } = _ref;\n  var [map, setMap] = useState(null);\n  var ref = useRef(null);\n  // const [extraMapTypesListener, setExtraMapTypesListener] = useState<google.maps.MapsEventListener | null>(null)\n  var [centerChangedListener, setCenterChangedListener] = useState(null);\n  var [dblclickListener, setDblclickListener] = useState(null);\n  var [dragendListener, setDragendListener] = useState(null);\n  var [dragstartListener, setDragstartListener] = useState(null);\n  var [mousedownListener, setMousedownListener] = useState(null);\n  var [mousemoveListener, setMousemoveListener] = useState(null);\n  var [mouseoutListener, setMouseoutListener] = useState(null);\n  var [mouseoverListener, setMouseoverListener] = useState(null);\n  var [mouseupListener, setMouseupListener] = useState(null);\n  var [rightclickListener, setRightclickListener] = useState(null);\n  var [clickListener, setClickListener] = useState(null);\n  var [dragListener, setDragListener] = useState(null);\n  // Order does matter\n  useEffect(() => {\n    if (options && map !== null) {\n      map.setOptions(options);\n    }\n  }, [map, options]);\n  useEffect(() => {\n    if (map !== null && typeof center !== 'undefined') {\n      map.setCenter(center);\n    }\n  }, [map, center]);\n  useEffect(() => {\n    if (map && onDblClick) {\n      if (dblclickListener !== null) {\n        google.maps.event.removeListener(dblclickListener);\n      }\n      setDblclickListener(google.maps.event.addListener(map, 'dblclick', onDblClick));\n    }\n  }, [onDblClick]);\n  useEffect(() => {\n    if (map && onDragEnd) {\n      if (dragendListener !== null) {\n        google.maps.event.removeListener(dragendListener);\n      }\n      setDragendListener(google.maps.event.addListener(map, 'dragend', onDragEnd));\n    }\n  }, [onDragEnd]);\n  useEffect(() => {\n    if (map && onDragStart) {\n      if (dragstartListener !== null) {\n        google.maps.event.removeListener(dragstartListener);\n      }\n      setDragstartListener(google.maps.event.addListener(map, 'dragstart', onDragStart));\n    }\n  }, [onDragStart]);\n  useEffect(() => {\n    if (map && onMouseDown) {\n      if (mousedownListener !== null) {\n        google.maps.event.removeListener(mousedownListener);\n      }\n      setMousedownListener(google.maps.event.addListener(map, 'mousedown', onMouseDown));\n    }\n  }, [onMouseDown]);\n  useEffect(() => {\n    if (map && onMouseMove) {\n      if (mousemoveListener !== null) {\n        google.maps.event.removeListener(mousemoveListener);\n      }\n      setMousemoveListener(google.maps.event.addListener(map, 'mousemove', onMouseMove));\n    }\n  }, [onMouseMove]);\n  useEffect(() => {\n    if (map && onMouseOut) {\n      if (mouseoutListener !== null) {\n        google.maps.event.removeListener(mouseoutListener);\n      }\n      setMouseoutListener(google.maps.event.addListener(map, 'mouseout', onMouseOut));\n    }\n  }, [onMouseOut]);\n  useEffect(() => {\n    if (map && onMouseOver) {\n      if (mouseoverListener !== null) {\n        google.maps.event.removeListener(mouseoverListener);\n      }\n      setMouseoverListener(google.maps.event.addListener(map, 'mouseover', onMouseOver));\n    }\n  }, [onMouseOver]);\n  useEffect(() => {\n    if (map && onMouseUp) {\n      if (mouseupListener !== null) {\n        google.maps.event.removeListener(mouseupListener);\n      }\n      setMouseupListener(google.maps.event.addListener(map, 'mouseup', onMouseUp));\n    }\n  }, [onMouseUp]);\n  useEffect(() => {\n    if (map && onRightClick) {\n      if (rightclickListener !== null) {\n        google.maps.event.removeListener(rightclickListener);\n      }\n      setRightclickListener(google.maps.event.addListener(map, 'rightclick', onRightClick));\n    }\n  }, [onRightClick]);\n  useEffect(() => {\n    if (map && onClick) {\n      if (clickListener !== null) {\n        google.maps.event.removeListener(clickListener);\n      }\n      setClickListener(google.maps.event.addListener(map, 'click', onClick));\n    }\n  }, [onClick]);\n  useEffect(() => {\n    if (map && onDrag) {\n      if (dragListener !== null) {\n        google.maps.event.removeListener(dragListener);\n      }\n      setDragListener(google.maps.event.addListener(map, 'drag', onDrag));\n    }\n  }, [onDrag]);\n  useEffect(() => {\n    if (map && onCenterChanged) {\n      if (centerChangedListener !== null) {\n        google.maps.event.removeListener(centerChangedListener);\n      }\n      setCenterChangedListener(google.maps.event.addListener(map, 'center_changed', onCenterChanged));\n    }\n  }, [onClick]);\n  useEffect(() => {\n    var map = ref.current === null ? null : new google.maps.Map(ref.current, options);\n    setMap(map);\n    if (map !== null && onLoad) {\n      onLoad(map);\n    }\n    return () => {\n      if (map !== null) {\n        if (onUnmount) {\n          onUnmount(map);\n        }\n      }\n    };\n  }, []);\n  return jsx(\"div\", {\n    id: id,\n    ref: ref,\n    style: mapContainerStyle,\n    className: mapContainerClassName,\n    children: jsx(MapContext.Provider, {\n      value: map,\n      children: map !== null ? children : null\n    })\n  });\n}\nmemo(GoogleMapFunctional);\nclass GoogleMap extends PureComponent {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"state\", {\n      map: null\n    });\n    _defineProperty(this, \"registeredEvents\", []);\n    _defineProperty(this, \"mapRef\", null);\n    _defineProperty(this, \"getInstance\", () => {\n      if (this.mapRef === null) {\n        return null;\n      }\n      return new google.maps.Map(this.mapRef, this.props.options);\n    });\n    _defineProperty(this, \"panTo\", latLng => {\n      var map = this.getInstance();\n      if (map) {\n        map.panTo(latLng);\n      }\n    });\n    _defineProperty(this, \"setMapCallback\", () => {\n      if (this.state.map !== null) {\n        if (this.props.onLoad) {\n          this.props.onLoad(this.state.map);\n        }\n      }\n    });\n    _defineProperty(this, \"getRef\", ref => {\n      this.mapRef = ref;\n    });\n  }\n  componentDidMount() {\n    var map = this.getInstance();\n    this.registeredEvents = applyUpdatersToPropsAndRegisterEvents({\n      updaterMap: updaterMap$i,\n      eventMap: eventMap$i,\n      prevProps: {},\n      nextProps: this.props,\n      instance: map\n    });\n    this.setState(function setMap() {\n      return {\n        map\n      };\n    }, this.setMapCallback);\n  }\n  componentDidUpdate(prevProps) {\n    if (this.state.map !== null) {\n      unregisterEvents(this.registeredEvents);\n      this.registeredEvents = applyUpdatersToPropsAndRegisterEvents({\n        updaterMap: updaterMap$i,\n        eventMap: eventMap$i,\n        prevProps,\n        nextProps: this.props,\n        instance: this.state.map\n      });\n    }\n  }\n  componentWillUnmount() {\n    if (this.state.map !== null) {\n      if (this.props.onUnmount) {\n        this.props.onUnmount(this.state.map);\n      }\n      unregisterEvents(this.registeredEvents);\n    }\n  }\n  render() {\n    return jsx(\"div\", {\n      id: this.props.id,\n      ref: this.getRef,\n      style: this.props.mapContainerStyle,\n      className: this.props.mapContainerClassName,\n      children: jsx(MapContext.Provider, {\n        value: this.state.map,\n        children: this.state.map !== null ? this.props.children : null\n      })\n    });\n  }\n}\n\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) {\n  try {\n    var i = n[a](c),\n      u = i.value;\n  } catch (n) {\n    return void e(n);\n  }\n  i.done ? t(u) : Promise.resolve(u).then(r, o);\n}\nfunction _asyncToGenerator(n) {\n  return function () {\n    var t = this,\n      e = arguments;\n    return new Promise(function (r, o) {\n      var a = n.apply(t, e);\n      function _next(n) {\n        asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n);\n      }\n      function _throw(n) {\n        asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n);\n      }\n      _next(void 0);\n    });\n  };\n}\n\nfunction makeLoadScriptUrl(_ref) {\n  var {\n    googleMapsApiKey,\n    googleMapsClientId,\n    version = 'weekly',\n    language,\n    region,\n    libraries,\n    channel,\n    mapIds,\n    authReferrerPolicy\n  } = _ref;\n  var params = [];\n  invariant(googleMapsApiKey && googleMapsClientId || !(googleMapsApiKey && googleMapsClientId), 'You need to specify either googleMapsApiKey or googleMapsClientId for @react-google-maps/api load script to work. You cannot use both at the same time.');\n  if (googleMapsApiKey) {\n    params.push(\"key=\".concat(googleMapsApiKey));\n  } else if (googleMapsClientId) {\n    params.push(\"client=\".concat(googleMapsClientId));\n  }\n  if (version) {\n    params.push(\"v=\".concat(version));\n  }\n  if (language) {\n    params.push(\"language=\".concat(language));\n  }\n  if (region) {\n    params.push(\"region=\".concat(region));\n  }\n  if (libraries && libraries.length) {\n    params.push(\"libraries=\".concat(libraries.sort().join(',')));\n  }\n  if (channel) {\n    params.push(\"channel=\".concat(channel));\n  }\n  if (mapIds && mapIds.length) {\n    params.push(\"map_ids=\".concat(mapIds.join(',')));\n  }\n  if (authReferrerPolicy) {\n    params.push(\"auth_referrer_policy=\".concat(authReferrerPolicy));\n  }\n  params.push('loading=async');\n  params.push('callback=initMap');\n  return \"https://maps.googleapis.com/maps/api/js?\".concat(params.join('&'));\n}\n\nvar isBrowser = typeof document !== 'undefined';\n\nfunction injectScript(_ref) {\n  var {\n    url,\n    id,\n    nonce\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  } = _ref;\n  if (!isBrowser) {\n    return Promise.reject(new Error('document is undefined'));\n  }\n  return new Promise(function injectScriptCallback(resolve, reject) {\n    var existingScript = document.getElementById(id);\n    var windowWithGoogleMap = window;\n    if (existingScript) {\n      // Same script id/url: keep same script\n      var dataStateAttribute = existingScript.getAttribute('data-state');\n      if (existingScript.src === url && dataStateAttribute !== 'error') {\n        if (dataStateAttribute === 'ready') {\n          return resolve(id);\n        } else {\n          var originalInitMap = windowWithGoogleMap.initMap;\n          var originalErrorCallback = existingScript.onerror;\n          windowWithGoogleMap.initMap = function initMap() {\n            if (originalInitMap) {\n              originalInitMap();\n            }\n            resolve(id);\n          };\n          existingScript.onerror = function (err) {\n            if (originalErrorCallback) {\n              originalErrorCallback(err);\n            }\n            reject(err);\n          };\n          return;\n        }\n      }\n      // Same script id, but either\n      // 1. requested URL is different\n      // 2. script failed to load\n      else {\n        existingScript.remove();\n      }\n    }\n    var script = document.createElement('script');\n    script.type = 'text/javascript';\n    script.src = url;\n    script.id = id;\n    script.async = true;\n    script.nonce = nonce || '';\n    script.onerror = function onerror(err) {\n      script.setAttribute('data-state', 'error');\n      reject(err);\n    };\n    windowWithGoogleMap.initMap = function onload() {\n      script.setAttribute('data-state', 'ready');\n      resolve(id);\n    };\n    document.head.appendChild(script);\n  }).catch(err => {\n    console.error('injectScript error: ', err);\n    throw err;\n  });\n}\n\nfunction isGoogleFontStyle(element) {\n  // 'Roboto' or 'Google Sans Text' font download\n  var href = element.href;\n  if (href && (href.indexOf('https://fonts.googleapis.com/css?family=Roboto') === 0 || href.indexOf('https://fonts.googleapis.com/css?family=Google+Sans+Text') === 0)) {\n    return true;\n  }\n  // font style elements\n  if (\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n  // @ts-ignore\n  element.tagName.toLowerCase() === 'style' &&\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n  // @ts-ignore\n  element.styleSheet &&\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n  // @ts-ignore\n  element.styleSheet.cssText &&\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n  // @ts-ignore\n  element.styleSheet.cssText.replace('\\r\\n', '').indexOf('.gm-style') === 0) {\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    element.styleSheet.cssText = '';\n    return true;\n  }\n  // font style elements for other browsers\n  if (\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n  // @ts-ignore\n  element.tagName.toLowerCase() === 'style' &&\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n  // @ts-ignore\n  element.innerHTML &&\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n  // @ts-ignore\n  element.innerHTML.replace('\\r\\n', '').indexOf('.gm-style') === 0) {\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    element.innerHTML = '';\n    return true;\n  }\n  // when google tries to add empty style\n  if (\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n  // @ts-ignore\n  element.tagName.toLowerCase() === 'style' &&\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n  // @ts-ignore\n  !element.styleSheet &&\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n  // @ts-ignore\n  !element.innerHTML) {\n    return true;\n  }\n  return false;\n}\n// Preventing the Google Maps library from downloading an extra font\nfunction preventGoogleFonts() {\n  // we override these methods only for one particular head element\n  // default methods for other elements are not affected\n  var head = document.getElementsByTagName('head')[0];\n  if (head) {\n    var trueInsertBefore = head.insertBefore.bind(head);\n    // TODO: adding return before reflect solves the TS issue\n    head.insertBefore = function insertBefore(newElement, referenceElement) {\n      if (!isGoogleFontStyle(newElement)) {\n        Reflect.apply(trueInsertBefore, head, [newElement, referenceElement]);\n      }\n      return newElement;\n    };\n    var trueAppend = head.appendChild.bind(head);\n    // TODO: adding return before reflect solves the TS issue\n    head.appendChild = function appendChild(textNode) {\n      if (!isGoogleFontStyle(textNode)) {\n        Reflect.apply(trueAppend, head, [textNode]);\n      }\n      return textNode;\n    };\n  }\n}\n\nvar cleaningUp = false;\nfunction DefaultLoadingElement() {\n  return jsx(\"div\", {\n    children: \"Loading...\"\n  });\n}\nvar defaultLoadScriptProps = {\n  id: 'script-loader',\n  version: 'weekly'\n};\nclass LoadScript extends PureComponent {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"check\", null);\n    _defineProperty(this, \"state\", {\n      loaded: false\n    });\n    _defineProperty(this, \"cleanupCallback\", () => {\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore\n      delete window.google.maps;\n      this.injectScript();\n    });\n    _defineProperty(this, \"isCleaningUp\", /*#__PURE__*/_asyncToGenerator(function* () {\n      function promiseCallback(resolve) {\n        if (!cleaningUp) {\n          resolve();\n        } else {\n          if (isBrowser) {\n            var timer = window.setInterval(function interval() {\n              if (!cleaningUp) {\n                window.clearInterval(timer);\n                resolve();\n              }\n            }, 1);\n          }\n        }\n        return;\n      }\n      return new Promise(promiseCallback);\n    }));\n    _defineProperty(this, \"cleanup\", () => {\n      cleaningUp = true;\n      var script = document.getElementById(this.props.id);\n      if (script && script.parentNode) {\n        script.parentNode.removeChild(script);\n      }\n      Array.prototype.slice.call(document.getElementsByTagName('script')).filter(function filter(script) {\n        return typeof script.src === 'string' && script.src.includes('maps.googleapis');\n      }).forEach(function forEach(script) {\n        if (script.parentNode) {\n          script.parentNode.removeChild(script);\n        }\n      });\n      Array.prototype.slice.call(document.getElementsByTagName('link')).filter(function filter(link) {\n        return link.href === 'https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Google+Sans';\n      }).forEach(function forEach(link) {\n        if (link.parentNode) {\n          link.parentNode.removeChild(link);\n        }\n      });\n      Array.prototype.slice.call(document.getElementsByTagName('style')).filter(function filter(style) {\n        return style.innerText !== undefined && style.innerText.length > 0 && style.innerText.includes('.gm-');\n      }).forEach(function forEach(style) {\n        if (style.parentNode) {\n          style.parentNode.removeChild(style);\n        }\n      });\n    });\n    _defineProperty(this, \"injectScript\", () => {\n      if (this.props.preventGoogleFontsLoading) {\n        preventGoogleFonts();\n      }\n      invariant(!!this.props.id, 'LoadScript requires \"id\" prop to be a string: %s', this.props.id);\n      var injectScriptOptions = {\n        id: this.props.id,\n        nonce: this.props.nonce,\n        url: makeLoadScriptUrl(this.props)\n      };\n      injectScript(injectScriptOptions).then(() => {\n        if (this.props.onLoad) {\n          this.props.onLoad();\n        }\n        this.setState(function setLoaded() {\n          return {\n            loaded: true\n          };\n        });\n        return;\n      }).catch(err => {\n        if (this.props.onError) {\n          this.props.onError(err);\n        }\n        console.error(\"\\n          There has been an Error with loading Google Maps API script, please check that you provided correct google API key (\".concat(this.props.googleMapsApiKey || '-', \") or Client ID (\").concat(this.props.googleMapsClientId || '-', \") to <LoadScript />\\n          Otherwise it is a Network issue.\\n        \"));\n      });\n    });\n    _defineProperty(this, \"getRef\", el => {\n      this.check = el;\n    });\n  }\n  componentDidMount() {\n    if (isBrowser) {\n      if (window.google && window.google.maps && !cleaningUp) {\n        console.error('google api is already presented');\n        return;\n      }\n      this.isCleaningUp().then(this.injectScript).catch(function error(err) {\n        console.error('Error at injecting script after cleaning up: ', err);\n      });\n    }\n  }\n  componentDidUpdate(prevProps) {\n    if (this.props.libraries !== prevProps.libraries) {\n      console.warn('Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables');\n    }\n    if (isBrowser && prevProps.language !== this.props.language) {\n      this.cleanup();\n      // TODO: refactor to use gDSFP maybe... wait for hooks refactoring.\n      this.setState(function setLoaded() {\n        return {\n          loaded: false\n        };\n      }, this.cleanupCallback);\n    }\n  }\n  componentWillUnmount() {\n    if (isBrowser) {\n      this.cleanup();\n      var timeoutCallback = () => {\n        if (!this.check) {\n          // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n          // @ts-ignore\n          delete window.google;\n          cleaningUp = false;\n        }\n      };\n      window.setTimeout(timeoutCallback, 1);\n      if (this.props.onUnmount) {\n        this.props.onUnmount();\n      }\n    }\n  }\n  render() {\n    return jsxs(Fragment, {\n      children: [jsx(\"div\", {\n        ref: this.getRef\n      }), this.state.loaded ? this.props.children : this.props.loadingElement || jsx(DefaultLoadingElement, {})]\n    });\n  }\n}\n_defineProperty(LoadScript, \"defaultProps\", defaultLoadScriptProps);\n\nfunction _objectWithoutPropertiesLoose(r, e) {\n  if (null == r) return {};\n  var t = {};\n  for (var n in r) if ({}.hasOwnProperty.call(r, n)) {\n    if (e.includes(n)) continue;\n    t[n] = r[n];\n  }\n  return t;\n}\n\nfunction _objectWithoutProperties(e, t) {\n  if (null == e) return {};\n  var o,\n    r,\n    i = _objectWithoutPropertiesLoose(e, t);\n  if (Object.getOwnPropertySymbols) {\n    var s = Object.getOwnPropertySymbols(e);\n    for (r = 0; r < s.length; r++) o = s[r], t.includes(o) || {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]);\n  }\n  return i;\n}\n\n/* eslint-disable filenames/match-regex */\nvar previouslyLoadedUrl;\nfunction useLoadScript(_ref) {\n  var {\n    id = defaultLoadScriptProps.id,\n    version = defaultLoadScriptProps.version,\n    nonce,\n    googleMapsApiKey,\n    googleMapsClientId,\n    language,\n    region,\n    libraries,\n    preventGoogleFontsLoading,\n    channel,\n    mapIds,\n    authReferrerPolicy\n  } = _ref;\n  var isMounted = useRef(false);\n  var [isLoaded, setLoaded] = useState(false);\n  var [loadError, setLoadError] = useState(undefined);\n  useEffect(function trackMountedState() {\n    isMounted.current = true;\n    return () => {\n      isMounted.current = false;\n    };\n  }, []);\n  useEffect(function applyPreventGoogleFonts() {\n    if (isBrowser && preventGoogleFontsLoading) {\n      preventGoogleFonts();\n    }\n  }, [preventGoogleFontsLoading]);\n  useEffect(function validateLoadedState() {\n    if (isLoaded) {\n      invariant(!!window.google, 'useLoadScript was marked as loaded, but window.google is not present. Something went wrong.');\n    }\n  }, [isLoaded]);\n  var url = makeLoadScriptUrl({\n    version,\n    googleMapsApiKey,\n    googleMapsClientId,\n    language,\n    region,\n    libraries,\n    channel,\n    mapIds,\n    authReferrerPolicy\n  });\n  useEffect(function loadScriptAndModifyLoadedState() {\n    if (!isBrowser) {\n      return;\n    }\n    function setLoadedIfMounted() {\n      if (isMounted.current) {\n        setLoaded(true);\n        previouslyLoadedUrl = url;\n      }\n    }\n    if (window.google && window.google.maps && previouslyLoadedUrl === url) {\n      setLoadedIfMounted();\n      return;\n    }\n    injectScript({\n      id,\n      url,\n      nonce\n    }).then(setLoadedIfMounted).catch(function handleInjectError(err) {\n      if (isMounted.current) {\n        setLoadError(err);\n      }\n      console.warn(\"\\n        There has been an Error with loading Google Maps API script, please check that you provided correct google API key (\".concat(googleMapsApiKey || '-', \") or Client ID (\").concat(googleMapsClientId || '-', \")\\n        Otherwise it is a Network issue.\\n      \"));\n      console.error(err);\n    });\n  }, [id, url, nonce]);\n  var prevLibraries = useRef(undefined);\n  useEffect(function checkPerformance() {\n    if (prevLibraries.current && libraries !== prevLibraries.current) {\n      console.warn('Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables');\n    }\n    prevLibraries.current = libraries;\n  }, [libraries]);\n  return {\n    isLoaded,\n    loadError,\n    url\n  };\n}\n\nvar _excluded$1 = [\"loadingElement\", \"onLoad\", \"onError\", \"onUnmount\", \"children\"];\nvar defaultLoadingElement = jsx(DefaultLoadingElement, {});\nfunction LoadScriptNext(_ref) {\n  var {\n      loadingElement,\n      onLoad,\n      onError,\n      onUnmount,\n      children\n    } = _ref,\n    hookOptions = _objectWithoutProperties(_ref, _excluded$1);\n  var {\n    isLoaded,\n    loadError\n  } = useLoadScript(hookOptions);\n  useEffect(function handleOnLoad() {\n    if (isLoaded && typeof onLoad === 'function') {\n      onLoad();\n    }\n  }, [isLoaded, onLoad]);\n  useEffect(function handleOnError() {\n    if (loadError && typeof onError === 'function') {\n      onError(loadError);\n    }\n  }, [loadError, onError]);\n  useEffect(function handleOnUnmount() {\n    return () => {\n      if (onUnmount) {\n        onUnmount();\n      }\n    };\n  }, [onUnmount]);\n  return isLoaded ? children : loadingElement || defaultLoadingElement;\n}\nvar LoadScriptNext$1 = memo(LoadScriptNext);\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n/* global Reflect, Promise, SuppressedError, Symbol */\n\nfunction __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, [])).next());\n  });\n}\ntypeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\nfunction getDefaultExportFromCjs(x) {\n  return x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n}\n\n// do not edit .js files directly - edit src/index.jst\n\nvar fastDeepEqual$1 = function equal(a, b) {\n  if (a === b) return true;\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;) if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n    for (i = length; i-- !== 0;) if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n      if (!equal(a[key], b[key])) return false;\n    }\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a !== a && b !== b;\n};\nvar isEqual = /*@__PURE__*/getDefaultExportFromCjs(fastDeepEqual$1);\n\n/**\n * Copyright 2019 Google LLC. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at.\n *\n *      Http://www.apache.org/licenses/LICENSE-2.0.\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar DEFAULT_ID = \"__googleMapsScriptId\";\n/**\n * The status of the [[Loader]].\n */\nvar LoaderStatus;\n(function (LoaderStatus) {\n  LoaderStatus[LoaderStatus[\"INITIALIZED\"] = 0] = \"INITIALIZED\";\n  LoaderStatus[LoaderStatus[\"LOADING\"] = 1] = \"LOADING\";\n  LoaderStatus[LoaderStatus[\"SUCCESS\"] = 2] = \"SUCCESS\";\n  LoaderStatus[LoaderStatus[\"FAILURE\"] = 3] = \"FAILURE\";\n})(LoaderStatus || (LoaderStatus = {}));\n/**\n * [[Loader]] makes it easier to add Google Maps JavaScript API to your application\n * dynamically using\n * [Promises](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise).\n * It works by dynamically creating and appending a script node to the the\n * document head and wrapping the callback function so as to return a promise.\n *\n * ```\n * const loader = new Loader({\n *   apiKey: \"\",\n *   version: \"weekly\",\n *   libraries: [\"places\"]\n * });\n *\n * loader.load().then((google) => {\n *   const map = new google.maps.Map(...)\n * })\n * ```\n */\nclass Loader {\n  /**\n   * Creates an instance of Loader using [[LoaderOptions]]. No defaults are set\n   * using this library, instead the defaults are set by the Google Maps\n   * JavaScript API server.\n   *\n   * ```\n   * const loader = Loader({apiKey, version: 'weekly', libraries: ['places']});\n   * ```\n   */\n  constructor(_ref) {\n    var {\n      apiKey,\n      authReferrerPolicy,\n      channel,\n      client,\n      id = DEFAULT_ID,\n      language,\n      libraries = [],\n      mapIds,\n      nonce,\n      region,\n      retries = 3,\n      url = \"https://maps.googleapis.com/maps/api/js\",\n      version\n    } = _ref;\n    this.callbacks = [];\n    this.done = false;\n    this.loading = false;\n    this.errors = [];\n    this.apiKey = apiKey;\n    this.authReferrerPolicy = authReferrerPolicy;\n    this.channel = channel;\n    this.client = client;\n    this.id = id || DEFAULT_ID; // Do not allow empty string\n    this.language = language;\n    this.libraries = libraries;\n    this.mapIds = mapIds;\n    this.nonce = nonce;\n    this.region = region;\n    this.retries = retries;\n    this.url = url;\n    this.version = version;\n    if (Loader.instance) {\n      if (!isEqual(this.options, Loader.instance.options)) {\n        throw new Error(\"Loader must not be called again with different options. \".concat(JSON.stringify(this.options), \" !== \").concat(JSON.stringify(Loader.instance.options)));\n      }\n      return Loader.instance;\n    }\n    Loader.instance = this;\n  }\n  get options() {\n    return {\n      version: this.version,\n      apiKey: this.apiKey,\n      channel: this.channel,\n      client: this.client,\n      id: this.id,\n      libraries: this.libraries,\n      language: this.language,\n      region: this.region,\n      mapIds: this.mapIds,\n      nonce: this.nonce,\n      url: this.url,\n      authReferrerPolicy: this.authReferrerPolicy\n    };\n  }\n  get status() {\n    if (this.errors.length) {\n      return LoaderStatus.FAILURE;\n    }\n    if (this.done) {\n      return LoaderStatus.SUCCESS;\n    }\n    if (this.loading) {\n      return LoaderStatus.LOADING;\n    }\n    return LoaderStatus.INITIALIZED;\n  }\n  get failed() {\n    return this.done && !this.loading && this.errors.length >= this.retries + 1;\n  }\n  /**\n   * CreateUrl returns the Google Maps JavaScript API script url given the [[LoaderOptions]].\n   *\n   * @ignore\n   * @deprecated\n   */\n  createUrl() {\n    var url = this.url;\n    url += \"?callback=__googleMapsCallback&loading=async\";\n    if (this.apiKey) {\n      url += \"&key=\".concat(this.apiKey);\n    }\n    if (this.channel) {\n      url += \"&channel=\".concat(this.channel);\n    }\n    if (this.client) {\n      url += \"&client=\".concat(this.client);\n    }\n    if (this.libraries.length > 0) {\n      url += \"&libraries=\".concat(this.libraries.join(\",\"));\n    }\n    if (this.language) {\n      url += \"&language=\".concat(this.language);\n    }\n    if (this.region) {\n      url += \"&region=\".concat(this.region);\n    }\n    if (this.version) {\n      url += \"&v=\".concat(this.version);\n    }\n    if (this.mapIds) {\n      url += \"&map_ids=\".concat(this.mapIds.join(\",\"));\n    }\n    if (this.authReferrerPolicy) {\n      url += \"&auth_referrer_policy=\".concat(this.authReferrerPolicy);\n    }\n    return url;\n  }\n  deleteScript() {\n    var script = document.getElementById(this.id);\n    if (script) {\n      script.remove();\n    }\n  }\n  /**\n   * Load the Google Maps JavaScript API script and return a Promise.\n   * @deprecated, use importLibrary() instead.\n   */\n  load() {\n    return this.loadPromise();\n  }\n  /**\n   * Load the Google Maps JavaScript API script and return a Promise.\n   *\n   * @ignore\n   * @deprecated, use importLibrary() instead.\n   */\n  loadPromise() {\n    return new Promise((resolve, reject) => {\n      this.loadCallback(err => {\n        if (!err) {\n          resolve(window.google);\n        } else {\n          reject(err.error);\n        }\n      });\n    });\n  }\n  importLibrary(name) {\n    this.execute();\n    return google.maps.importLibrary(name);\n  }\n  /**\n   * Load the Google Maps JavaScript API script with a callback.\n   * @deprecated, use importLibrary() instead.\n   */\n  loadCallback(fn) {\n    this.callbacks.push(fn);\n    this.execute();\n  }\n  /**\n   * Set the script on document.\n   */\n  setScript() {\n    var _a, _b;\n    if (document.getElementById(this.id)) {\n      // TODO wrap onerror callback for cases where the script was loaded elsewhere\n      this.callback();\n      return;\n    }\n    var params = {\n      key: this.apiKey,\n      channel: this.channel,\n      client: this.client,\n      libraries: this.libraries.length && this.libraries,\n      v: this.version,\n      mapIds: this.mapIds,\n      language: this.language,\n      region: this.region,\n      authReferrerPolicy: this.authReferrerPolicy\n    };\n    // keep the URL minimal:\n    Object.keys(params).forEach(\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    key => !params[key] && delete params[key]);\n    if (!((_b = (_a = window === null || window === void 0 ? void 0 : window.google) === null || _a === void 0 ? void 0 : _a.maps) === null || _b === void 0 ? void 0 : _b.importLibrary)) {\n      // tweaked copy of https://developers.google.com/maps/documentation/javascript/load-maps-js-api#dynamic-library-import\n      // which also sets the base url, the id, and the nonce\n      /* eslint-disable */\n      (g => {\n        // @ts-ignore\n        var h,\n          a,\n          k,\n          p = \"The Google Maps JavaScript API\",\n          c = \"google\",\n          l = \"importLibrary\",\n          q = \"__ib__\",\n          m = document,\n          b = window;\n        // @ts-ignore\n        b = b[c] || (b[c] = {});\n        // @ts-ignore\n        var d = b.maps || (b.maps = {}),\n          r = new Set(),\n          e = new URLSearchParams(),\n          u = () =>\n          // @ts-ignore\n          h || (h = new Promise((f, n) => __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            yield a = m.createElement(\"script\");\n            a.id = this.id;\n            e.set(\"libraries\", [...r] + \"\");\n            // @ts-ignore\n            for (k in g) e.set(k.replace(/[A-Z]/g, t => \"_\" + t[0].toLowerCase()), g[k]);\n            e.set(\"callback\", c + \".maps.\" + q);\n            a.src = this.url + \"?\" + e;\n            d[q] = f;\n            a.onerror = () => h = n(Error(p + \" could not load.\"));\n            // @ts-ignore\n            a.nonce = this.nonce || ((_a = m.querySelector(\"script[nonce]\")) === null || _a === void 0 ? void 0 : _a.nonce) || \"\";\n            m.head.append(a);\n          })));\n        // @ts-ignore\n        d[l] ? console.warn(p + \" only loads once. Ignoring:\", g) : d[l] = function (f) {\n          for (var _len = arguments.length, n = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n            n[_key - 1] = arguments[_key];\n          }\n          return r.add(f) && u().then(() => d[l](f, ...n));\n        };\n      })(params);\n      /* eslint-enable */\n    }\n    // While most libraries populate the global namespace when loaded via bootstrap params,\n    // this is not the case for \"marker\" when used with the inline bootstrap loader\n    // (and maybe others in the future). So ensure there is an importLibrary for each:\n    var libraryPromises = this.libraries.map(library => this.importLibrary(library));\n    // ensure at least one library, to kick off loading...\n    if (!libraryPromises.length) {\n      libraryPromises.push(this.importLibrary(\"core\"));\n    }\n    Promise.all(libraryPromises).then(() => this.callback(), error => {\n      var event = new ErrorEvent(\"error\", {\n        error\n      }); // for backwards compat\n      this.loadErrorCallback(event);\n    });\n  }\n  /**\n   * Reset the loader state.\n   */\n  reset() {\n    this.deleteScript();\n    this.done = false;\n    this.loading = false;\n    this.errors = [];\n    this.onerrorEvent = null;\n  }\n  resetIfRetryingFailed() {\n    if (this.failed) {\n      this.reset();\n    }\n  }\n  loadErrorCallback(e) {\n    this.errors.push(e);\n    if (this.errors.length <= this.retries) {\n      var delay = this.errors.length * Math.pow(2, this.errors.length);\n      console.error(\"Failed to load Google Maps script, retrying in \".concat(delay, \" ms.\"));\n      setTimeout(() => {\n        this.deleteScript();\n        this.setScript();\n      }, delay);\n    } else {\n      this.onerrorEvent = e;\n      this.callback();\n    }\n  }\n  callback() {\n    this.done = true;\n    this.loading = false;\n    this.callbacks.forEach(cb => {\n      cb(this.onerrorEvent);\n    });\n    this.callbacks = [];\n  }\n  execute() {\n    this.resetIfRetryingFailed();\n    if (this.loading) {\n      // do nothing but wait\n      return;\n    }\n    if (this.done) {\n      this.callback();\n    } else {\n      // short circuit and warn if google.maps is already loaded\n      if (window.google && window.google.maps && window.google.maps.version) {\n        console.warn(\"Google Maps already loaded outside @googlemaps/js-api-loader. \" + \"This may result in undesirable behavior as options and script parameters may not match.\");\n        this.callback();\n        return;\n      }\n      this.loading = true;\n      this.setScript();\n    }\n  }\n}\n\nvar defaultLibraries = ['maps'];\nfunction useJsApiLoader(_ref) {\n  var {\n    id = defaultLoadScriptProps.id,\n    version = defaultLoadScriptProps.version,\n    nonce,\n    googleMapsApiKey,\n    // googleMapsClientId,\n    language,\n    region,\n    libraries = defaultLibraries,\n    preventGoogleFontsLoading,\n    // channel,\n    mapIds,\n    authReferrerPolicy\n  } = _ref;\n  var isMounted = useRef(false);\n  var [isLoaded, setLoaded] = useState(false);\n  var [loadError, setLoadError] = useState(undefined);\n  useEffect(function trackMountedState() {\n    isMounted.current = true;\n    return () => {\n      isMounted.current = false;\n    };\n  }, []);\n  var loader = useMemo(() => {\n    return new Loader({\n      id,\n      apiKey: googleMapsApiKey,\n      version,\n      libraries,\n      language: language || 'en',\n      region: region || 'US',\n      mapIds: mapIds || [],\n      nonce: nonce || '',\n      authReferrerPolicy: authReferrerPolicy || 'origin'\n    });\n  }, [id, googleMapsApiKey, version, libraries, language, region, mapIds, nonce, authReferrerPolicy]);\n  useEffect(function effect() {\n    if (isLoaded) {\n      return;\n    } else {\n      loader.load().then(() => {\n        if (isMounted.current) {\n          setLoaded(true);\n        }\n        return;\n      }).catch(error => {\n        setLoadError(error);\n      });\n    }\n  }, []);\n  useEffect(() => {\n    if (isBrowser && preventGoogleFontsLoading) {\n      preventGoogleFonts();\n    }\n  }, [preventGoogleFontsLoading]);\n  var prevLibraries = useRef();\n  useEffect(() => {\n    if (prevLibraries.current && libraries !== prevLibraries.current) {\n      console.warn('Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables');\n    }\n    prevLibraries.current = libraries;\n  }, [libraries]);\n  return {\n    isLoaded,\n    loadError\n  };\n}\n\nfunction ownKeys$f(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread$f(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys$f(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$f(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nvar eventMap$h = {};\nvar updaterMap$h = {\n  options(instance, options) {\n    instance.setOptions(options);\n  }\n};\nfunction TrafficLayerFunctional(_ref) {\n  var {\n    options,\n    onLoad,\n    onUnmount\n  } = _ref;\n  var map = useContext(MapContext);\n  var [instance, setInstance] = useState(null);\n  // Order does matter\n  useEffect(() => {\n    if (instance !== null) {\n      instance.setMap(map);\n    }\n  }, [map]);\n  useEffect(() => {\n    if (options && instance !== null) {\n      instance.setOptions(options);\n    }\n  }, [instance, options]);\n  useEffect(() => {\n    var trafficLayer = new google.maps.TrafficLayer(_objectSpread$f(_objectSpread$f({}, options), {}, {\n      map\n    }));\n    setInstance(trafficLayer);\n    if (onLoad) {\n      onLoad(trafficLayer);\n    }\n    return () => {\n      if (instance !== null) {\n        if (onUnmount) {\n          onUnmount(instance);\n        }\n        instance.setMap(null);\n      }\n    };\n  }, []);\n  return null;\n}\nvar TrafficLayerF = memo(TrafficLayerFunctional);\nclass TrafficLayer extends PureComponent {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"state\", {\n      trafficLayer: null\n    });\n    _defineProperty(this, \"setTrafficLayerCallback\", () => {\n      if (this.state.trafficLayer !== null && this.props.onLoad) {\n        this.props.onLoad(this.state.trafficLayer);\n      }\n    });\n    _defineProperty(this, \"registeredEvents\", []);\n  }\n  componentDidMount() {\n    var trafficLayer = new google.maps.TrafficLayer(_objectSpread$f(_objectSpread$f({}, this.props.options), {}, {\n      map: this.context\n    }));\n    this.registeredEvents = applyUpdatersToPropsAndRegisterEvents({\n      updaterMap: updaterMap$h,\n      eventMap: eventMap$h,\n      prevProps: {},\n      nextProps: this.props,\n      instance: trafficLayer\n    });\n    this.setState(function setTrafficLayer() {\n      return {\n        trafficLayer\n      };\n    }, this.setTrafficLayerCallback);\n  }\n  componentDidUpdate(prevProps) {\n    if (this.state.trafficLayer !== null) {\n      unregisterEvents(this.registeredEvents);\n      this.registeredEvents = applyUpdatersToPropsAndRegisterEvents({\n        updaterMap: updaterMap$h,\n        eventMap: eventMap$h,\n        prevProps,\n        nextProps: this.props,\n        instance: this.state.trafficLayer\n      });\n    }\n  }\n  componentWillUnmount() {\n    if (this.state.trafficLayer !== null) {\n      if (this.props.onUnmount) {\n        this.props.onUnmount(this.state.trafficLayer);\n      }\n      unregisterEvents(this.registeredEvents);\n      this.state.trafficLayer.setMap(null);\n    }\n  }\n  render() {\n    return null;\n  }\n}\n_defineProperty(TrafficLayer, \"contextType\", MapContext);\n\nfunction BicyclingLayerFunctional(_ref) {\n  var {\n    onLoad,\n    onUnmount\n  } = _ref;\n  var map = useContext(MapContext);\n  var [instance, setInstance] = useState(null);\n  // Order does matter\n  useEffect(() => {\n    if (instance !== null) {\n      instance.setMap(map);\n    }\n  }, [map]);\n  useEffect(() => {\n    var bicyclingLayer = new google.maps.BicyclingLayer();\n    setInstance(bicyclingLayer);\n    bicyclingLayer.setMap(map);\n    if (onLoad) {\n      onLoad(bicyclingLayer);\n    }\n    return () => {\n      if (bicyclingLayer !== null) {\n        if (onUnmount) {\n          onUnmount(bicyclingLayer);\n        }\n        bicyclingLayer.setMap(null);\n      }\n    };\n  }, []);\n  return null;\n}\nvar BicyclingLayerF = memo(BicyclingLayerFunctional);\nclass BicyclingLayer extends PureComponent {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"state\", {\n      bicyclingLayer: null\n    });\n    _defineProperty(this, \"setBicyclingLayerCallback\", () => {\n      if (this.state.bicyclingLayer !== null) {\n        this.state.bicyclingLayer.setMap(this.context);\n        if (this.props.onLoad) {\n          this.props.onLoad(this.state.bicyclingLayer);\n        }\n      }\n    });\n  }\n  componentDidMount() {\n    var bicyclingLayer = new google.maps.BicyclingLayer();\n    this.setState(() => {\n      return {\n        bicyclingLayer\n      };\n    }, this.setBicyclingLayerCallback);\n  }\n  componentWillUnmount() {\n    if (this.state.bicyclingLayer !== null) {\n      if (this.props.onUnmount) {\n        this.props.onUnmount(this.state.bicyclingLayer);\n      }\n      this.state.bicyclingLayer.setMap(null);\n    }\n  }\n  render() {\n    return null;\n  }\n}\n_defineProperty(BicyclingLayer, \"contextType\", MapContext);\n\nfunction TransitLayerFunctional(_ref) {\n  var {\n    onLoad,\n    onUnmount\n  } = _ref;\n  var map = useContext(MapContext);\n  var [instance, setInstance] = useState(null);\n  // Order does matter\n  useEffect(() => {\n    if (instance !== null) {\n      instance.setMap(map);\n    }\n  }, [map]);\n  useEffect(() => {\n    var transitLayer = new google.maps.TransitLayer();\n    setInstance(transitLayer);\n    transitLayer.setMap(map);\n    if (onLoad) {\n      onLoad(transitLayer);\n    }\n    return () => {\n      if (instance !== null) {\n        if (onUnmount) {\n          onUnmount(instance);\n        }\n        instance.setMap(null);\n      }\n    };\n  }, []);\n  return null;\n}\nvar TransitLayerF = memo(TransitLayerFunctional);\nclass TransitLayer extends PureComponent {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"state\", {\n      transitLayer: null\n    });\n    _defineProperty(this, \"setTransitLayerCallback\", () => {\n      if (this.state.transitLayer !== null) {\n        this.state.transitLayer.setMap(this.context);\n        if (this.props.onLoad) {\n          this.props.onLoad(this.state.transitLayer);\n        }\n      }\n    });\n  }\n  componentDidMount() {\n    var transitLayer = new google.maps.TransitLayer();\n    this.setState(function setTransitLayer() {\n      return {\n        transitLayer\n      };\n    }, this.setTransitLayerCallback);\n  }\n  componentWillUnmount() {\n    if (this.state.transitLayer !== null) {\n      if (this.props.onUnmount) {\n        this.props.onUnmount(this.state.transitLayer);\n      }\n      this.state.transitLayer.setMap(null);\n    }\n  }\n  render() {\n    return null;\n  }\n}\n_defineProperty(TransitLayer, \"contextType\", MapContext);\n\nfunction ownKeys$e(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread$e(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys$e(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$e(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nvar eventMap$g = {\n  onCircleComplete: 'circlecomplete',\n  onMarkerComplete: 'markercomplete',\n  onOverlayComplete: 'overlaycomplete',\n  onPolygonComplete: 'polygoncomplete',\n  onPolylineComplete: 'polylinecomplete',\n  onRectangleComplete: 'rectanglecomplete'\n};\nvar updaterMap$g = {\n  drawingMode(instance, drawingMode) {\n    instance.setDrawingMode(drawingMode);\n  },\n  options(instance, options) {\n    instance.setOptions(options);\n  }\n};\nfunction DrawingManagerFunctional(_ref) {\n  var {\n    options,\n    drawingMode,\n    onCircleComplete,\n    onMarkerComplete,\n    onOverlayComplete,\n    onPolygonComplete,\n    onPolylineComplete,\n    onRectangleComplete,\n    onLoad,\n    onUnmount\n  } = _ref;\n  var map = useContext(MapContext);\n  var [instance, setInstance] = useState(null);\n  var [circlecompleteListener, setCircleCompleteListener] = useState(null);\n  var [markercompleteListener, setMarkerCompleteListener] = useState(null);\n  var [overlaycompleteListener, setOverlayCompleteListener] = useState(null);\n  var [polygoncompleteListener, setPolygonCompleteListener] = useState(null);\n  var [polylinecompleteListener, setPolylineCompleteListener] = useState(null);\n  var [rectanglecompleteListener, setRectangleCompleteListener] = useState(null);\n  // Order does matter\n  useEffect(() => {\n    if (instance !== null) {\n      instance.setMap(map);\n    }\n  }, [map]);\n  useEffect(() => {\n    if (options && instance !== null) {\n      instance.setOptions(options);\n    }\n  }, [instance, options]);\n  useEffect(() => {\n    if (instance !== null) {\n      instance.setDrawingMode(drawingMode !== null && drawingMode !== void 0 ? drawingMode : null);\n    }\n  }, [instance, drawingMode]);\n  useEffect(() => {\n    if (instance && onCircleComplete) {\n      if (circlecompleteListener !== null) {\n        google.maps.event.removeListener(circlecompleteListener);\n      }\n      setCircleCompleteListener(google.maps.event.addListener(instance, 'circlecomplete', onCircleComplete));\n    }\n  }, [instance, onCircleComplete]);\n  useEffect(() => {\n    if (instance && onMarkerComplete) {\n      if (markercompleteListener !== null) {\n        google.maps.event.removeListener(markercompleteListener);\n      }\n      setMarkerCompleteListener(google.maps.event.addListener(instance, 'markercomplete', onMarkerComplete));\n    }\n  }, [instance, onMarkerComplete]);\n  useEffect(() => {\n    if (instance && onOverlayComplete) {\n      if (overlaycompleteListener !== null) {\n        google.maps.event.removeListener(overlaycompleteListener);\n      }\n      setOverlayCompleteListener(google.maps.event.addListener(instance, 'overlaycomplete', onOverlayComplete));\n    }\n  }, [instance, onOverlayComplete]);\n  useEffect(() => {\n    if (instance && onPolygonComplete) {\n      if (polygoncompleteListener !== null) {\n        google.maps.event.removeListener(polygoncompleteListener);\n      }\n      setPolygonCompleteListener(google.maps.event.addListener(instance, 'polygoncomplete', onPolygonComplete));\n    }\n  }, [instance, onPolygonComplete]);\n  useEffect(() => {\n    if (instance && onPolylineComplete) {\n      if (polylinecompleteListener !== null) {\n        google.maps.event.removeListener(polylinecompleteListener);\n      }\n      setPolylineCompleteListener(google.maps.event.addListener(instance, 'polylinecomplete', onPolylineComplete));\n    }\n  }, [instance, onPolylineComplete]);\n  useEffect(() => {\n    if (instance && onRectangleComplete) {\n      if (rectanglecompleteListener !== null) {\n        google.maps.event.removeListener(rectanglecompleteListener);\n      }\n      setRectangleCompleteListener(google.maps.event.addListener(instance, 'rectanglecomplete', onRectangleComplete));\n    }\n  }, [instance, onRectangleComplete]);\n  useEffect(() => {\n    invariant(!!google.maps.drawing, \"Did you include prop libraries={['drawing']} in the URL? %s\", google.maps.drawing);\n    var drawingManager = new google.maps.drawing.DrawingManager(_objectSpread$e(_objectSpread$e({}, options), {}, {\n      map\n    }));\n    if (drawingMode) {\n      drawingManager.setDrawingMode(drawingMode);\n    }\n    if (onCircleComplete) {\n      setCircleCompleteListener(google.maps.event.addListener(drawingManager, 'circlecomplete', onCircleComplete));\n    }\n    if (onMarkerComplete) {\n      setMarkerCompleteListener(google.maps.event.addListener(drawingManager, 'markercomplete', onMarkerComplete));\n    }\n    if (onOverlayComplete) {\n      setOverlayCompleteListener(google.maps.event.addListener(drawingManager, 'overlaycomplete', onOverlayComplete));\n    }\n    if (onPolygonComplete) {\n      setPolygonCompleteListener(google.maps.event.addListener(drawingManager, 'polygoncomplete', onPolygonComplete));\n    }\n    if (onPolylineComplete) {\n      setPolylineCompleteListener(google.maps.event.addListener(drawingManager, 'polylinecomplete', onPolylineComplete));\n    }\n    if (onRectangleComplete) {\n      setRectangleCompleteListener(google.maps.event.addListener(drawingManager, 'rectanglecomplete', onRectangleComplete));\n    }\n    setInstance(drawingManager);\n    if (onLoad) {\n      onLoad(drawingManager);\n    }\n    return () => {\n      if (instance !== null) {\n        if (circlecompleteListener) {\n          google.maps.event.removeListener(circlecompleteListener);\n        }\n        if (markercompleteListener) {\n          google.maps.event.removeListener(markercompleteListener);\n        }\n        if (overlaycompleteListener) {\n          google.maps.event.removeListener(overlaycompleteListener);\n        }\n        if (polygoncompleteListener) {\n          google.maps.event.removeListener(polygoncompleteListener);\n        }\n        if (polylinecompleteListener) {\n          google.maps.event.removeListener(polylinecompleteListener);\n        }\n        if (rectanglecompleteListener) {\n          google.maps.event.removeListener(rectanglecompleteListener);\n        }\n        if (onUnmount) {\n          onUnmount(instance);\n        }\n        instance.setMap(null);\n      }\n    };\n  }, []);\n  return null;\n}\nvar DrawingManagerF = memo(DrawingManagerFunctional);\nclass DrawingManager extends PureComponent {\n  constructor(props) {\n    super(props);\n    _defineProperty(this, \"registeredEvents\", []);\n    _defineProperty(this, \"state\", {\n      drawingManager: null\n    });\n    _defineProperty(this, \"setDrawingManagerCallback\", () => {\n      if (this.state.drawingManager !== null && this.props.onLoad) {\n        this.props.onLoad(this.state.drawingManager);\n      }\n    });\n    invariant(!!google.maps.drawing, \"Did you include prop libraries={['drawing']} in the URL? %s\", google.maps.drawing);\n  }\n  componentDidMount() {\n    var drawingManager = new google.maps.drawing.DrawingManager(_objectSpread$e(_objectSpread$e({}, this.props.options), {}, {\n      map: this.context\n    }));\n    this.registeredEvents = applyUpdatersToPropsAndRegisterEvents({\n      updaterMap: updaterMap$g,\n      eventMap: eventMap$g,\n      prevProps: {},\n      nextProps: this.props,\n      instance: drawingManager\n    });\n    this.setState(function setDrawingManager() {\n      return {\n        drawingManager\n      };\n    }, this.setDrawingManagerCallback);\n  }\n  componentDidUpdate(prevProps) {\n    if (this.state.drawingManager !== null) {\n      unregisterEvents(this.registeredEvents);\n      this.registeredEvents = applyUpdatersToPropsAndRegisterEvents({\n        updaterMap: updaterMap$g,\n        eventMap: eventMap$g,\n        prevProps,\n        nextProps: this.props,\n        instance: this.state.drawingManager\n      });\n    }\n  }\n  componentWillUnmount() {\n    if (this.state.drawingManager !== null) {\n      if (this.props.onUnmount) {\n        this.props.onUnmount(this.state.drawingManager);\n      }\n      unregisterEvents(this.registeredEvents);\n      this.state.drawingManager.setMap(null);\n    }\n  }\n  render() {\n    return null;\n  }\n}\n_defineProperty(DrawingManager, \"contextType\", MapContext);\n\nfunction ownKeys$d(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread$d(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys$d(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$d(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nvar eventMap$f = {\n  onAnimationChanged: 'animation_changed',\n  onClick: 'click',\n  onClickableChanged: 'clickable_changed',\n  onCursorChanged: 'cursor_changed',\n  onDblClick: 'dblclick',\n  onDrag: 'drag',\n  onDragEnd: 'dragend',\n  onDraggableChanged: 'draggable_changed',\n  onDragStart: 'dragstart',\n  onFlatChanged: 'flat_changed',\n  onIconChanged: 'icon_changed',\n  onMouseDown: 'mousedown',\n  onMouseOut: 'mouseout',\n  onMouseOver: 'mouseover',\n  onMouseUp: 'mouseup',\n  onPositionChanged: 'position_changed',\n  onRightClick: 'rightclick',\n  onShapeChanged: 'shape_changed',\n  onTitleChanged: 'title_changed',\n  onVisibleChanged: 'visible_changed',\n  onZindexChanged: 'zindex_changed'\n};\nvar updaterMap$f = {\n  animation(instance, animation) {\n    instance.setAnimation(animation);\n  },\n  clickable(instance, clickable) {\n    instance.setClickable(clickable);\n  },\n  cursor(instance, cursor) {\n    instance.setCursor(cursor);\n  },\n  draggable(instance, draggable) {\n    instance.setDraggable(draggable);\n  },\n  icon(instance, icon) {\n    instance.setIcon(icon);\n  },\n  label(instance, label) {\n    instance.setLabel(label);\n  },\n  map(instance, map) {\n    instance.setMap(map);\n  },\n  opacity(instance, opacity) {\n    instance.setOpacity(opacity);\n  },\n  options(instance, options) {\n    instance.setOptions(options);\n  },\n  position(instance, position) {\n    instance.setPosition(position);\n  },\n  shape(instance, shape) {\n    instance.setShape(shape);\n  },\n  title(instance, title) {\n    instance.setTitle(title);\n  },\n  visible(instance, visible) {\n    instance.setVisible(visible);\n  },\n  zIndex(instance, zIndex) {\n    instance.setZIndex(zIndex);\n  }\n};\nvar defaultOptions$5 = {};\nfunction MarkerFunctional(_ref) {\n  var {\n    position,\n    options,\n    clusterer,\n    noClustererRedraw,\n    children,\n    draggable,\n    visible,\n    animation,\n    clickable,\n    cursor,\n    icon,\n    label,\n    opacity,\n    shape,\n    title,\n    zIndex,\n    onClick,\n    onDblClick,\n    onDrag,\n    onDragEnd,\n    onDragStart,\n    onMouseOut,\n    onMouseOver,\n    onMouseUp,\n    onMouseDown,\n    onRightClick,\n    onClickableChanged,\n    onCursorChanged,\n    onAnimationChanged,\n    onDraggableChanged,\n    onFlatChanged,\n    onIconChanged,\n    onPositionChanged,\n    onShapeChanged,\n    onTitleChanged,\n    onVisibleChanged,\n    onZindexChanged,\n    onLoad,\n    onUnmount\n  } = _ref;\n  var map = useContext(MapContext);\n  var [instance, setInstance] = useState(null);\n  var [dblclickListener, setDblclickListener] = useState(null);\n  var [dragendListener, setDragendListener] = useState(null);\n  var [dragstartListener, setDragstartListener] = useState(null);\n  var [mousedownListener, setMousedownListener] = useState(null);\n  var [mouseoutListener, setMouseoutListener] = useState(null);\n  var [mouseoverListener, setMouseoverListener] = useState(null);\n  var [mouseupListener, setMouseupListener] = useState(null);\n  var [rightclickListener, setRightclickListener] = useState(null);\n  var [clickListener, setClickListener] = useState(null);\n  var [dragListener, setDragListener] = useState(null);\n  var [clickableChangedListener, setClickableChangedListener] = useState(null);\n  var [cursorChangedListener, setCursorChangedListener] = useState(null);\n  var [animationChangedListener, setAnimationChangedListener] = useState(null);\n  var [draggableChangedListener, setDraggableChangedListener] = useState(null);\n  var [flatChangedListener, setFlatChangedListener] = useState(null);\n  var [iconChangedListener, setIconChangedListener] = useState(null);\n  var [positionChangedListener, setPositionChangedListener] = useState(null);\n  var [shapeChangedListener, setShapeChangedListener] = useState(null);\n  var [titleChangedListener, setTitleChangedListener] = useState(null);\n  var [visibleChangedListener, setVisibleChangedListener] = useState(null);\n  var [zIndexChangedListener, setZindexChangedListener] = useState(null);\n  // Order does matter\n  useEffect(() => {\n    if (instance !== null) {\n      instance.setMap(map);\n    }\n  }, [map]);\n  useEffect(() => {\n    if (typeof options !== 'undefined' && instance !== null) {\n      instance.setOptions(options);\n    }\n  }, [instance, options]);\n  useEffect(() => {\n    if (typeof draggable !== 'undefined' && instance !== null) {\n      instance.setDraggable(draggable);\n    }\n  }, [instance, draggable]);\n  useEffect(() => {\n    if (position && instance !== null) {\n      instance.setPosition(position);\n    }\n  }, [instance, position]);\n  useEffect(() => {\n    if (typeof visible !== 'undefined' && instance !== null) {\n      instance.setVisible(visible);\n    }\n  }, [instance, visible]);\n  useEffect(() => {\n    instance === null || instance === void 0 || instance.setAnimation(animation);\n  }, [instance, animation]);\n  useEffect(() => {\n    if (instance && clickable !== undefined) {\n      instance.setClickable(clickable);\n    }\n  }, [instance, clickable]);\n  useEffect(() => {\n    if (instance && cursor !== undefined) {\n      instance.setCursor(cursor);\n    }\n  }, [instance, cursor]);\n  useEffect(() => {\n    if (instance && icon !== undefined) {\n      instance.setIcon(icon);\n    }\n  }, [instance, icon]);\n  useEffect(() => {\n    if (instance && label !== undefined) {\n      instance.setLabel(label);\n    }\n  }, [instance, label]);\n  useEffect(() => {\n    if (instance && opacity !== undefined) {\n      instance.setOpacity(opacity);\n    }\n  }, [instance, opacity]);\n  useEffect(() => {\n    if (instance && shape !== undefined) {\n      instance.setShape(shape);\n    }\n  }, [instance, shape]);\n  useEffect(() => {\n    if (instance && title !== undefined) {\n      instance.setTitle(title);\n    }\n  }, [instance, title]);\n  useEffect(() => {\n    if (instance && zIndex !== undefined) {\n      instance.setZIndex(zIndex);\n    }\n  }, [instance, zIndex]);\n  useEffect(() => {\n    if (instance && onDblClick) {\n      if (dblclickListener !== null) {\n        google.maps.event.removeListener(dblclickListener);\n      }\n      setDblclickListener(google.maps.event.addListener(instance, 'dblclick', onDblClick));\n    }\n  }, [onDblClick]);\n  useEffect(() => {\n    if (instance && onDragEnd) {\n      if (dragendListener !== null) {\n        google.maps.event.removeListener(dragendListener);\n      }\n      setDragendListener(google.maps.event.addListener(instance, 'dragend', onDragEnd));\n    }\n  }, [onDragEnd]);\n  useEffect(() => {\n    if (instance && onDragStart) {\n      if (dragstartListener !== null) {\n        google.maps.event.removeListener(dragstartListener);\n      }\n      setDragstartListener(google.maps.event.addListener(instance, 'dragstart', onDragStart));\n    }\n  }, [onDragStart]);\n  useEffect(() => {\n    if (instance && onMouseDown) {\n      if (mousedownListener !== null) {\n        google.maps.event.removeListener(mousedownListener);\n      }\n      setMousedownListener(google.maps.event.addListener(instance, 'mousedown', onMouseDown));\n    }\n  }, [onMouseDown]);\n  useEffect(() => {\n    if (instance && onMouseOut) {\n      if (mouseoutListener !== null) {\n        google.maps.event.removeListener(mouseoutListener);\n      }\n      setMouseoutListener(google.maps.event.addListener(instance, 'mouseout', onMouseOut));\n    }\n  }, [onMouseOut]);\n  useEffect(() => {\n    if (instance && onMouseOver) {\n      if (mouseoverListener !== null) {\n        google.maps.event.removeListener(mouseoverListener);\n      }\n      setMouseoverListener(google.maps.event.addListener(instance, 'mouseover', onMouseOver));\n    }\n  }, [onMouseOver]);\n  useEffect(() => {\n    if (instance && onMouseUp) {\n      if (mouseupListener !== null) {\n        google.maps.event.removeListener(mouseupListener);\n      }\n      setMouseupListener(google.maps.event.addListener(instance, 'mouseup', onMouseUp));\n    }\n  }, [onMouseUp]);\n  useEffect(() => {\n    if (instance && onRightClick) {\n      if (rightclickListener !== null) {\n        google.maps.event.removeListener(rightclickListener);\n      }\n      setRightclickListener(google.maps.event.addListener(instance, 'rightclick', onRightClick));\n    }\n  }, [onRightClick]);\n  useEffect(() => {\n    if (instance && onClick) {\n      if (clickListener !== null) {\n        google.maps.event.removeListener(clickListener);\n      }\n      setClickListener(google.maps.event.addListener(instance, 'click', onClick));\n    }\n  }, [onClick]);\n  useEffect(() => {\n    if (instance && onDrag) {\n      if (dragListener !== null) {\n        google.maps.event.removeListener(dragListener);\n      }\n      setDragListener(google.maps.event.addListener(instance, 'drag', onDrag));\n    }\n  }, [onDrag]);\n  useEffect(() => {\n    if (instance && onClickableChanged) {\n      if (clickableChangedListener !== null) {\n        google.maps.event.removeListener(clickableChangedListener);\n      }\n      setClickableChangedListener(google.maps.event.addListener(instance, 'clickable_changed', onClickableChanged));\n    }\n  }, [onClickableChanged]);\n  useEffect(() => {\n    if (instance && onCursorChanged) {\n      if (cursorChangedListener !== null) {\n        google.maps.event.removeListener(cursorChangedListener);\n      }\n      setCursorChangedListener(google.maps.event.addListener(instance, 'cursor_changed', onCursorChanged));\n    }\n  }, [onCursorChanged]);\n  useEffect(() => {\n    if (instance && onAnimationChanged) {\n      if (animationChangedListener !== null) {\n        google.maps.event.removeListener(animationChangedListener);\n      }\n      setAnimationChangedListener(google.maps.event.addListener(instance, 'animation_changed', onAnimationChanged));\n    }\n  }, [onAnimationChanged]);\n  useEffect(() => {\n    if (instance && onDraggableChanged) {\n      if (draggableChangedListener !== null) {\n        google.maps.event.removeListener(draggableChangedListener);\n      }\n      setDraggableChangedListener(google.maps.event.addListener(instance, 'draggable_changed', onDraggableChanged));\n    }\n  }, [onDraggableChanged]);\n  useEffect(() => {\n    if (instance && onFlatChanged) {\n      if (flatChangedListener !== null) {\n        google.maps.event.removeListener(flatChangedListener);\n      }\n      setFlatChangedListener(google.maps.event.addListener(instance, 'flat_changed', onFlatChanged));\n    }\n  }, [onFlatChanged]);\n  useEffect(() => {\n    if (instance && onIconChanged) {\n      if (iconChangedListener !== null) {\n        google.maps.event.removeListener(iconChangedListener);\n      }\n      setIconChangedListener(google.maps.event.addListener(instance, 'icon_changed', onIconChanged));\n    }\n  }, [onIconChanged]);\n  useEffect(() => {\n    if (instance && onPositionChanged) {\n      if (positionChangedListener !== null) {\n        google.maps.event.removeListener(positionChangedListener);\n      }\n      setPositionChangedListener(google.maps.event.addListener(instance, 'position_changed', onPositionChanged));\n    }\n  }, [onPositionChanged]);\n  useEffect(() => {\n    if (instance && onShapeChanged) {\n      if (shapeChangedListener !== null) {\n        google.maps.event.removeListener(shapeChangedListener);\n      }\n      setShapeChangedListener(google.maps.event.addListener(instance, 'shape_changed', onShapeChanged));\n    }\n  }, [onShapeChanged]);\n  useEffect(() => {\n    if (instance && onTitleChanged) {\n      if (titleChangedListener !== null) {\n        google.maps.event.removeListener(titleChangedListener);\n      }\n      setTitleChangedListener(google.maps.event.addListener(instance, 'title_changed', onTitleChanged));\n    }\n  }, [onTitleChanged]);\n  useEffect(() => {\n    if (instance && onVisibleChanged) {\n      if (visibleChangedListener !== null) {\n        google.maps.event.removeListener(visibleChangedListener);\n      }\n      setVisibleChangedListener(google.maps.event.addListener(instance, 'visible_changed', onVisibleChanged));\n    }\n  }, [onVisibleChanged]);\n  useEffect(() => {\n    if (instance && onZindexChanged) {\n      if (zIndexChangedListener !== null) {\n        google.maps.event.removeListener(zIndexChangedListener);\n      }\n      setZindexChangedListener(google.maps.event.addListener(instance, 'zindex_changed', onZindexChanged));\n    }\n  }, [onZindexChanged]);\n  useEffect(() => {\n    var markerOptions = _objectSpread$d(_objectSpread$d(_objectSpread$d({}, options || defaultOptions$5), clusterer ? defaultOptions$5 : {\n      map\n    }), {}, {\n      position\n    });\n    var marker = new google.maps.Marker(markerOptions);\n    if (clusterer) {\n      clusterer.addMarker(marker, !!noClustererRedraw);\n    } else {\n      marker.setMap(map);\n    }\n    if (position) {\n      marker.setPosition(position);\n    }\n    if (typeof visible !== 'undefined') {\n      marker.setVisible(visible);\n    }\n    if (typeof draggable !== 'undefined') {\n      marker.setDraggable(draggable);\n    }\n    if (typeof clickable !== 'undefined') {\n      marker.setClickable(clickable);\n    }\n    if (typeof cursor === 'string') {\n      marker.setCursor(cursor);\n    }\n    if (icon) {\n      marker.setIcon(icon);\n    }\n    if (typeof label !== 'undefined') {\n      marker.setLabel(label);\n    }\n    if (typeof opacity !== 'undefined') {\n      marker.setOpacity(opacity);\n    }\n    if (shape) {\n      marker.setShape(shape);\n    }\n    if (typeof title === 'string') {\n      marker.setTitle(title);\n    }\n    if (typeof zIndex === 'number') {\n      marker.setZIndex(zIndex);\n    }\n    if (onDblClick) {\n      setDblclickListener(google.maps.event.addListener(marker, 'dblclick', onDblClick));\n    }\n    if (onDragEnd) {\n      setDragendListener(google.maps.event.addListener(marker, 'dragend', onDragEnd));\n    }\n    if (onDragStart) {\n      setDragstartListener(google.maps.event.addListener(marker, 'dragstart', onDragStart));\n    }\n    if (onMouseDown) {\n      setMousedownListener(google.maps.event.addListener(marker, 'mousedown', onMouseDown));\n    }\n    if (onMouseOut) {\n      setMouseoutListener(google.maps.event.addListener(marker, 'mouseout', onMouseOut));\n    }\n    if (onMouseOver) {\n      setMouseoverListener(google.maps.event.addListener(marker, 'mouseover', onMouseOver));\n    }\n    if (onMouseUp) {\n      setMouseupListener(google.maps.event.addListener(marker, 'mouseup', onMouseUp));\n    }\n    if (onRightClick) {\n      setRightclickListener(google.maps.event.addListener(marker, 'rightclick', onRightClick));\n    }\n    if (onClick) {\n      setClickListener(google.maps.event.addListener(marker, 'click', onClick));\n    }\n    if (onDrag) {\n      setDragListener(google.maps.event.addListener(marker, 'drag', onDrag));\n    }\n    if (onClickableChanged) {\n      setClickableChangedListener(google.maps.event.addListener(marker, 'clickable_changed', onClickableChanged));\n    }\n    if (onCursorChanged) {\n      setCursorChangedListener(google.maps.event.addListener(marker, 'cursor_changed', onCursorChanged));\n    }\n    if (onAnimationChanged) {\n      setAnimationChangedListener(google.maps.event.addListener(marker, 'animation_changed', onAnimationChanged));\n    }\n    if (onDraggableChanged) {\n      setDraggableChangedListener(google.maps.event.addListener(marker, 'draggable_changed', onDraggableChanged));\n    }\n    if (onFlatChanged) {\n      setFlatChangedListener(google.maps.event.addListener(marker, 'flat_changed', onFlatChanged));\n    }\n    if (onIconChanged) {\n      setIconChangedListener(google.maps.event.addListener(marker, 'icon_changed', onIconChanged));\n    }\n    if (onPositionChanged) {\n      setPositionChangedListener(google.maps.event.addListener(marker, 'position_changed', onPositionChanged));\n    }\n    if (onShapeChanged) {\n      setShapeChangedListener(google.maps.event.addListener(marker, 'shape_changed', onShapeChanged));\n    }\n    if (onTitleChanged) {\n      setTitleChangedListener(google.maps.event.addListener(marker, 'title_changed', onTitleChanged));\n    }\n    if (onVisibleChanged) {\n      setVisibleChangedListener(google.maps.event.addListener(marker, 'visible_changed', onVisibleChanged));\n    }\n    if (onZindexChanged) {\n      setZindexChangedListener(google.maps.event.addListener(marker, 'zindex_changed', onZindexChanged));\n    }\n    setInstance(marker);\n    if (onLoad) {\n      onLoad(marker);\n    }\n    return () => {\n      if (dblclickListener !== null) {\n        google.maps.event.removeListener(dblclickListener);\n      }\n      if (dragendListener !== null) {\n        google.maps.event.removeListener(dragendListener);\n      }\n      if (dragstartListener !== null) {\n        google.maps.event.removeListener(dragstartListener);\n      }\n      if (mousedownListener !== null) {\n        google.maps.event.removeListener(mousedownListener);\n      }\n      if (mouseoutListener !== null) {\n        google.maps.event.removeListener(mouseoutListener);\n      }\n      if (mouseoverListener !== null) {\n        google.maps.event.removeListener(mouseoverListener);\n      }\n      if (mouseupListener !== null) {\n        google.maps.event.removeListener(mouseupListener);\n      }\n      if (rightclickListener !== null) {\n        google.maps.event.removeListener(rightclickListener);\n      }\n      if (clickListener !== null) {\n        google.maps.event.removeListener(clickListener);\n      }\n      if (clickableChangedListener !== null) {\n        google.maps.event.removeListener(clickableChangedListener);\n      }\n      if (cursorChangedListener !== null) {\n        google.maps.event.removeListener(cursorChangedListener);\n      }\n      if (animationChangedListener !== null) {\n        google.maps.event.removeListener(animationChangedListener);\n      }\n      if (draggableChangedListener !== null) {\n        google.maps.event.removeListener(draggableChangedListener);\n      }\n      if (flatChangedListener !== null) {\n        google.maps.event.removeListener(flatChangedListener);\n      }\n      if (iconChangedListener !== null) {\n        google.maps.event.removeListener(iconChangedListener);\n      }\n      if (positionChangedListener !== null) {\n        google.maps.event.removeListener(positionChangedListener);\n      }\n      if (titleChangedListener !== null) {\n        google.maps.event.removeListener(titleChangedListener);\n      }\n      if (visibleChangedListener !== null) {\n        google.maps.event.removeListener(visibleChangedListener);\n      }\n      if (zIndexChangedListener !== null) {\n        google.maps.event.removeListener(zIndexChangedListener);\n      }\n      if (onUnmount) {\n        onUnmount(marker);\n      }\n      if (clusterer) {\n        clusterer.removeMarker(marker, !!noClustererRedraw);\n      } else if (marker) {\n        marker.setMap(null);\n      }\n    };\n  }, []);\n  var chx = useMemo(() => {\n    return children ? Children.map(children, child => {\n      if (!isValidElement(child)) {\n        return child;\n      }\n      var elementChild = child;\n      return cloneElement(elementChild, {\n        anchor: instance\n      });\n    }) : null;\n  }, [children, instance]);\n  return jsx(Fragment, {\n    children: chx\n  }) || null;\n}\nvar MarkerF = memo(MarkerFunctional);\nclass Marker extends PureComponent {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"registeredEvents\", []);\n  }\n  componentDidMount() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      var markerOptions = _objectSpread$d(_objectSpread$d(_objectSpread$d({}, _this.props.options || defaultOptions$5), _this.props.clusterer ? defaultOptions$5 : {\n        map: _this.context\n      }), {}, {\n        position: _this.props.position\n      });\n      // Unfortunately we can't just do this in the contstructor, because the\n      // `MapContext` might not be filled in yet.\n      _this.marker = new google.maps.Marker(markerOptions);\n      if (_this.props.clusterer) {\n        _this.props.clusterer.addMarker(_this.marker, !!_this.props.noClustererRedraw);\n      } else {\n        _this.marker.setMap(_this.context);\n      }\n      _this.registeredEvents = applyUpdatersToPropsAndRegisterEvents({\n        updaterMap: updaterMap$f,\n        eventMap: eventMap$f,\n        prevProps: {},\n        nextProps: _this.props,\n        instance: _this.marker\n      });\n      if (_this.props.onLoad) {\n        _this.props.onLoad(_this.marker);\n      }\n    })();\n  }\n  componentDidUpdate(prevProps) {\n    if (this.marker) {\n      unregisterEvents(this.registeredEvents);\n      this.registeredEvents = applyUpdatersToPropsAndRegisterEvents({\n        updaterMap: updaterMap$f,\n        eventMap: eventMap$f,\n        prevProps,\n        nextProps: this.props,\n        instance: this.marker\n      });\n    }\n  }\n  componentWillUnmount() {\n    if (!this.marker) {\n      return;\n    }\n    if (this.props.onUnmount) {\n      this.props.onUnmount(this.marker);\n    }\n    unregisterEvents(this.registeredEvents);\n    if (this.props.clusterer) {\n      this.props.clusterer.removeMarker(this.marker, !!this.props.noClustererRedraw);\n    } else if (this.marker) {\n      this.marker.setMap(null);\n    }\n  }\n  render() {\n    var children = this.props.children ? Children.map(this.props.children, child => {\n      if (!isValidElement(child)) {\n        return child;\n      }\n      var elementChild = child;\n      return cloneElement(elementChild, {\n        anchor: this.marker\n      });\n    }) : null;\n    return children || null;\n  }\n}\n_defineProperty(Marker, \"contextType\", MapContext);\n\nvar ClusterIcon = /** @class */function () {\n  function ClusterIcon(cluster, styles) {\n    cluster.getClusterer().extend(ClusterIcon, google.maps.OverlayView);\n    this.cluster = cluster;\n    this.clusterClassName = this.cluster.getClusterer().getClusterClass();\n    this.className = this.clusterClassName;\n    this.styles = styles;\n    this.center = undefined;\n    this.div = null;\n    this.sums = null;\n    this.visible = false;\n    this.boundsChangedListener = null;\n    this.url = '';\n    this.height = 0;\n    this.width = 0;\n    this.anchorText = [0, 0];\n    this.anchorIcon = [0, 0];\n    this.textColor = 'black';\n    this.textSize = 11;\n    this.textDecoration = 'none';\n    this.fontWeight = 'bold';\n    this.fontStyle = 'normal';\n    this.fontFamily = 'Arial,sans-serif';\n    this.backgroundPosition = '0 0';\n    this.cMouseDownInCluster = null;\n    this.cDraggingMapByCluster = null;\n    this.timeOut = null;\n    this.setMap(cluster.getMap()); // Note: this causes onAdd to be called\n    this.onBoundsChanged = this.onBoundsChanged.bind(this);\n    this.onMouseDown = this.onMouseDown.bind(this);\n    this.onClick = this.onClick.bind(this);\n    this.onMouseOver = this.onMouseOver.bind(this);\n    this.onMouseOut = this.onMouseOut.bind(this);\n    this.onAdd = this.onAdd.bind(this);\n    this.onRemove = this.onRemove.bind(this);\n    this.draw = this.draw.bind(this);\n    this.hide = this.hide.bind(this);\n    this.show = this.show.bind(this);\n    this.useStyle = this.useStyle.bind(this);\n    this.setCenter = this.setCenter.bind(this);\n    this.getPosFromLatLng = this.getPosFromLatLng.bind(this);\n  }\n  ClusterIcon.prototype.onBoundsChanged = function () {\n    this.cDraggingMapByCluster = this.cMouseDownInCluster;\n  };\n  ClusterIcon.prototype.onMouseDown = function () {\n    this.cMouseDownInCluster = true;\n    this.cDraggingMapByCluster = false;\n  };\n  ClusterIcon.prototype.onClick = function (event) {\n    this.cMouseDownInCluster = false;\n    if (!this.cDraggingMapByCluster) {\n      var markerClusterer_1 = this.cluster.getClusterer();\n      /**\n       * This event is fired when a cluster marker is clicked.\n       * @name MarkerClusterer#click\n       * @param {Cluster} c The cluster that was clicked.\n       * @event\n       */\n      google.maps.event.trigger(markerClusterer_1, 'click', this.cluster);\n      google.maps.event.trigger(markerClusterer_1, 'clusterclick', this.cluster); // deprecated name\n      // The default click handler follows. Disable it by setting\n      // the zoomOnClick property to false.\n      if (markerClusterer_1.getZoomOnClick()) {\n        // Zoom into the cluster.\n        var maxZoom_1 = markerClusterer_1.getMaxZoom();\n        var bounds_1 = this.cluster.getBounds();\n        var map = markerClusterer_1.getMap();\n        if (map !== null && 'fitBounds' in map) {\n          map.fitBounds(bounds_1);\n        }\n        // There is a fix for Issue 170 here:\n        this.timeOut = window.setTimeout(function () {\n          var map = markerClusterer_1.getMap();\n          if (map !== null) {\n            if ('fitBounds' in map) {\n              map.fitBounds(bounds_1);\n            }\n            var zoom = map.getZoom() || 0;\n            // Don't zoom beyond the max zoom level\n            if (maxZoom_1 !== null && zoom > maxZoom_1) {\n              map.setZoom(maxZoom_1 + 1);\n            }\n          }\n        }, 100);\n      }\n      // Prevent event propagation to the map:\n      event.cancelBubble = true;\n      if (event.stopPropagation) {\n        event.stopPropagation();\n      }\n    }\n  };\n  ClusterIcon.prototype.onMouseOver = function () {\n    /**\n     * This event is fired when the mouse moves over a cluster marker.\n     * @name MarkerClusterer#mouseover\n     * @param {Cluster} c The cluster that the mouse moved over.\n     * @event\n     */\n    google.maps.event.trigger(this.cluster.getClusterer(), 'mouseover', this.cluster);\n  };\n  ClusterIcon.prototype.onMouseOut = function () {\n    /**\n     * This event is fired when the mouse moves out of a cluster marker.\n     * @name MarkerClusterer#mouseout\n     * @param {Cluster} c The cluster that the mouse moved out of.\n     * @event\n     */\n    google.maps.event.trigger(this.cluster.getClusterer(), 'mouseout', this.cluster);\n  };\n  ClusterIcon.prototype.onAdd = function () {\n    var _a;\n    this.div = document.createElement('div');\n    this.div.className = this.className;\n    if (this.visible) {\n      this.show();\n    }\n    (_a = this.getPanes()) === null || _a === void 0 ? void 0 : _a.overlayMouseTarget.appendChild(this.div);\n    var map = this.getMap();\n    if (map !== null) {\n      // Fix for Issue 157\n      this.boundsChangedListener = google.maps.event.addListener(map, 'bounds_changed', this.onBoundsChanged);\n      this.div.addEventListener('mousedown', this.onMouseDown);\n      this.div.addEventListener('click', this.onClick);\n      this.div.addEventListener('mouseover', this.onMouseOver);\n      this.div.addEventListener('mouseout', this.onMouseOut);\n    }\n  };\n  ClusterIcon.prototype.onRemove = function () {\n    if (this.div && this.div.parentNode) {\n      this.hide();\n      if (this.boundsChangedListener !== null) {\n        google.maps.event.removeListener(this.boundsChangedListener);\n      }\n      this.div.removeEventListener('mousedown', this.onMouseDown);\n      this.div.removeEventListener('click', this.onClick);\n      this.div.removeEventListener('mouseover', this.onMouseOver);\n      this.div.removeEventListener('mouseout', this.onMouseOut);\n      this.div.parentNode.removeChild(this.div);\n      if (this.timeOut !== null) {\n        window.clearTimeout(this.timeOut);\n        this.timeOut = null;\n      }\n      this.div = null;\n    }\n  };\n  ClusterIcon.prototype.draw = function () {\n    if (this.visible && this.div !== null && this.center) {\n      var pos = this.getPosFromLatLng(this.center);\n      this.div.style.top = pos !== null ? \"\".concat(pos.y, \"px\") : '0';\n      this.div.style.left = pos !== null ? \"\".concat(pos.x, \"px\") : '0';\n    }\n  };\n  ClusterIcon.prototype.hide = function () {\n    if (this.div) {\n      this.div.style.display = 'none';\n    }\n    this.visible = false;\n  };\n  ClusterIcon.prototype.show = function () {\n    var _a, _b, _c, _d, _e, _f;\n    if (this.div && this.center) {\n      var divTitle = this.sums === null || typeof this.sums.title === 'undefined' || this.sums.title === '' ? this.cluster.getClusterer().getTitle() : this.sums.title;\n      // NOTE: values must be specified in px units\n      var bp = this.backgroundPosition.split(' ');\n      var spriteH = parseInt(((_a = bp[0]) === null || _a === void 0 ? void 0 : _a.replace(/^\\s+|\\s+$/g, '')) || '0', 10);\n      var spriteV = parseInt(((_b = bp[1]) === null || _b === void 0 ? void 0 : _b.replace(/^\\s+|\\s+$/g, '')) || '0', 10);\n      var pos = this.getPosFromLatLng(this.center);\n      this.div.className = this.className;\n      this.div.setAttribute('style', \"cursor: pointer; position: absolute; top: \".concat(pos !== null ? \"\".concat(pos.y, \"px\") : '0', \"; left: \").concat(pos !== null ? \"\".concat(pos.x, \"px\") : '0', \"; width: \").concat(this.width, \"px; height: \").concat(this.height, \"px; \"));\n      var img = document.createElement('img');\n      img.alt = divTitle;\n      img.src = this.url;\n      img.width = this.width;\n      img.height = this.height;\n      img.setAttribute('style', \"position: absolute; top: \".concat(spriteV, \"px; left: \").concat(spriteH, \"px\"));\n      if (!this.cluster.getClusterer().enableRetinaIcons) {\n        img.style.clip = \"rect(-\".concat(spriteV, \"px, -\").concat(spriteH + this.width, \"px, -\").concat(spriteV + this.height, \", -\").concat(spriteH, \")\");\n      }\n      var textElm = document.createElement('div');\n      textElm.setAttribute('style', \"position: absolute; top: \".concat(this.anchorText[0], \"px; left: \").concat(this.anchorText[1], \"px; color: \").concat(this.textColor, \"; font-size: \").concat(this.textSize, \"px; font-family: \").concat(this.fontFamily, \"; font-weight: \").concat(this.fontWeight, \"; fontStyle: \").concat(this.fontStyle, \"; text-decoration: \").concat(this.textDecoration, \"; text-align: center; width: \").concat(this.width, \"px; line-height: \").concat(this.height, \"px\"));\n      if ((_c = this.sums) === null || _c === void 0 ? void 0 : _c.text) textElm.innerText = \"\".concat((_d = this.sums) === null || _d === void 0 ? void 0 : _d.text);\n      if ((_e = this.sums) === null || _e === void 0 ? void 0 : _e.html) textElm.innerHTML = \"\".concat((_f = this.sums) === null || _f === void 0 ? void 0 : _f.html);\n      this.div.innerHTML = '';\n      this.div.appendChild(img);\n      this.div.appendChild(textElm);\n      this.div.title = divTitle;\n      this.div.style.display = '';\n    }\n    this.visible = true;\n  };\n  ClusterIcon.prototype.useStyle = function (sums) {\n    this.sums = sums;\n    var styles = this.cluster.getClusterer().getStyles();\n    var style = styles[Math.min(styles.length - 1, Math.max(0, sums.index - 1))];\n    if (style) {\n      this.url = style.url;\n      this.height = style.height;\n      this.width = style.width;\n      if (style.className) {\n        this.className = \"\".concat(this.clusterClassName, \" \").concat(style.className);\n      }\n      this.anchorText = style.anchorText || [0, 0];\n      this.anchorIcon = style.anchorIcon || [this.height / 2, this.width / 2];\n      this.textColor = style.textColor || 'black';\n      this.textSize = style.textSize || 11;\n      this.textDecoration = style.textDecoration || 'none';\n      this.fontWeight = style.fontWeight || 'bold';\n      this.fontStyle = style.fontStyle || 'normal';\n      this.fontFamily = style.fontFamily || 'Arial,sans-serif';\n      this.backgroundPosition = style.backgroundPosition || '0 0';\n    }\n  };\n  ClusterIcon.prototype.setCenter = function (center) {\n    this.center = center;\n  };\n  ClusterIcon.prototype.getPosFromLatLng = function (latlng) {\n    var pos = this.getProjection().fromLatLngToDivPixel(latlng);\n    if (pos !== null) {\n      pos.x -= this.anchorIcon[1];\n      pos.y -= this.anchorIcon[0];\n    }\n    return pos;\n  };\n  return ClusterIcon;\n}();\n\n/* global google */\nvar Cluster$1 = /** @class */function () {\n  function Cluster(markerClusterer) {\n    this.markerClusterer = markerClusterer;\n    this.map = this.markerClusterer.getMap();\n    this.gridSize = this.markerClusterer.getGridSize();\n    this.minClusterSize = this.markerClusterer.getMinimumClusterSize();\n    this.averageCenter = this.markerClusterer.getAverageCenter();\n    this.markers = [];\n    this.center = undefined;\n    this.bounds = null;\n    this.clusterIcon = new ClusterIcon(this, this.markerClusterer.getStyles());\n    this.getSize = this.getSize.bind(this);\n    this.getMarkers = this.getMarkers.bind(this);\n    this.getCenter = this.getCenter.bind(this);\n    this.getMap = this.getMap.bind(this);\n    this.getClusterer = this.getClusterer.bind(this);\n    this.getBounds = this.getBounds.bind(this);\n    this.remove = this.remove.bind(this);\n    this.addMarker = this.addMarker.bind(this);\n    this.isMarkerInClusterBounds = this.isMarkerInClusterBounds.bind(this);\n    this.calculateBounds = this.calculateBounds.bind(this);\n    this.updateIcon = this.updateIcon.bind(this);\n    this.isMarkerAlreadyAdded = this.isMarkerAlreadyAdded.bind(this);\n  }\n  Cluster.prototype.getSize = function () {\n    return this.markers.length;\n  };\n  Cluster.prototype.getMarkers = function () {\n    return this.markers;\n  };\n  Cluster.prototype.getCenter = function () {\n    return this.center;\n  };\n  Cluster.prototype.getMap = function () {\n    return this.map;\n  };\n  Cluster.prototype.getClusterer = function () {\n    return this.markerClusterer;\n  };\n  Cluster.prototype.getBounds = function () {\n    var bounds = new google.maps.LatLngBounds(this.center, this.center);\n    var markers = this.getMarkers();\n    for (var _i = 0, markers_1 = markers; _i < markers_1.length; _i++) {\n      var marker = markers_1[_i];\n      var position = marker.getPosition();\n      if (position) {\n        bounds.extend(position);\n      }\n    }\n    return bounds;\n  };\n  Cluster.prototype.remove = function () {\n    this.clusterIcon.setMap(null);\n    this.markers = [];\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    delete this.markers;\n  };\n  Cluster.prototype.addMarker = function (marker) {\n    var _a;\n    if (this.isMarkerAlreadyAdded(marker)) {\n      return false;\n    }\n    if (!this.center) {\n      var position = marker.getPosition();\n      if (position) {\n        this.center = position;\n        this.calculateBounds();\n      }\n    } else {\n      if (this.averageCenter) {\n        var position = marker.getPosition();\n        if (position) {\n          var length_1 = this.markers.length + 1;\n          this.center = new google.maps.LatLng((this.center.lat() * (length_1 - 1) + position.lat()) / length_1, (this.center.lng() * (length_1 - 1) + position.lng()) / length_1);\n          this.calculateBounds();\n        }\n      }\n    }\n    marker.isAdded = true;\n    this.markers.push(marker);\n    var mCount = this.markers.length;\n    var maxZoom = this.markerClusterer.getMaxZoom();\n    var zoom = (_a = this.map) === null || _a === void 0 ? void 0 : _a.getZoom();\n    if (maxZoom !== null && typeof zoom !== 'undefined' && zoom > maxZoom) {\n      // Zoomed in past max zoom, so show the marker.\n      if (marker.getMap() !== this.map) {\n        marker.setMap(this.map);\n      }\n    } else if (mCount < this.minClusterSize) {\n      // Min cluster size not reached so show the marker.\n      if (marker.getMap() !== this.map) {\n        marker.setMap(this.map);\n      }\n    } else if (mCount === this.minClusterSize) {\n      // Hide the markers that were showing.\n      for (var _i = 0, _b = this.markers; _i < _b.length; _i++) {\n        var markerElement = _b[_i];\n        markerElement.setMap(null);\n      }\n    } else {\n      marker.setMap(null);\n    }\n    return true;\n  };\n  Cluster.prototype.isMarkerInClusterBounds = function (marker) {\n    if (this.bounds !== null) {\n      var position = marker.getPosition();\n      if (position) {\n        return this.bounds.contains(position);\n      }\n    }\n    return false;\n  };\n  Cluster.prototype.calculateBounds = function () {\n    this.bounds = this.markerClusterer.getExtendedBounds(new google.maps.LatLngBounds(this.center, this.center));\n  };\n  Cluster.prototype.updateIcon = function () {\n    var _a;\n    var mCount = this.markers.length;\n    var maxZoom = this.markerClusterer.getMaxZoom();\n    var zoom = (_a = this.map) === null || _a === void 0 ? void 0 : _a.getZoom();\n    if (maxZoom !== null && typeof zoom !== 'undefined' && zoom > maxZoom) {\n      this.clusterIcon.hide();\n      return;\n    }\n    if (mCount < this.minClusterSize) {\n      // Min cluster size not yet reached.\n      this.clusterIcon.hide();\n      return;\n    }\n    if (this.center) {\n      this.clusterIcon.setCenter(this.center);\n    }\n    this.clusterIcon.useStyle(this.markerClusterer.getCalculator()(this.markers, this.markerClusterer.getStyles().length));\n    this.clusterIcon.show();\n  };\n  Cluster.prototype.isMarkerAlreadyAdded = function (marker) {\n    if (this.markers.includes) {\n      return this.markers.includes(marker);\n    }\n    for (var i = 0; i < this.markers.length; i++) {\n      if (marker === this.markers[i]) {\n        return true;\n      }\n    }\n    return false;\n  };\n  return Cluster;\n}();\n\n/* global google */\n/* eslint-disable filenames/match-regex */\n/**\n * Supports up to 9007199254740991 (Number.MAX_SAFE_INTEGER) markers\n * which is not a problem as max array length is 4294967296 (2**32)\n */\nfunction CALCULATOR(markers, numStyles) {\n  var count = markers.length;\n  var numberOfDigits = count.toString().length;\n  var index = Math.min(numberOfDigits, numStyles);\n  return {\n    text: count.toString(),\n    index: index,\n    title: ''\n  };\n}\nvar BATCH_SIZE = 2000;\nvar BATCH_SIZE_IE = 500;\nvar IMAGE_PATH = 'https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m';\nvar IMAGE_EXTENSION = 'png';\nvar IMAGE_SIZES = [53, 56, 66, 78, 90];\nvar CLUSTERER_CLASS = 'cluster';\nvar Clusterer = /** @class */function () {\n  function Clusterer(map, optMarkers, optOptions) {\n    if (optMarkers === void 0) {\n      optMarkers = [];\n    }\n    if (optOptions === void 0) {\n      optOptions = {};\n    }\n    this.getMinimumClusterSize = this.getMinimumClusterSize.bind(this);\n    this.setMinimumClusterSize = this.setMinimumClusterSize.bind(this);\n    this.getEnableRetinaIcons = this.getEnableRetinaIcons.bind(this);\n    this.setEnableRetinaIcons = this.setEnableRetinaIcons.bind(this);\n    this.addToClosestCluster = this.addToClosestCluster.bind(this);\n    this.getImageExtension = this.getImageExtension.bind(this);\n    this.setImageExtension = this.setImageExtension.bind(this);\n    this.getExtendedBounds = this.getExtendedBounds.bind(this);\n    this.getAverageCenter = this.getAverageCenter.bind(this);\n    this.setAverageCenter = this.setAverageCenter.bind(this);\n    this.getTotalClusters = this.getTotalClusters.bind(this);\n    this.fitMapToMarkers = this.fitMapToMarkers.bind(this);\n    this.getIgnoreHidden = this.getIgnoreHidden.bind(this);\n    this.setIgnoreHidden = this.setIgnoreHidden.bind(this);\n    this.getClusterClass = this.getClusterClass.bind(this);\n    this.setClusterClass = this.setClusterClass.bind(this);\n    this.getTotalMarkers = this.getTotalMarkers.bind(this);\n    this.getZoomOnClick = this.getZoomOnClick.bind(this);\n    this.setZoomOnClick = this.setZoomOnClick.bind(this);\n    this.getBatchSizeIE = this.getBatchSizeIE.bind(this);\n    this.setBatchSizeIE = this.setBatchSizeIE.bind(this);\n    this.createClusters = this.createClusters.bind(this);\n    this.onZoomChanged = this.onZoomChanged.bind(this);\n    this.getImageSizes = this.getImageSizes.bind(this);\n    this.setImageSizes = this.setImageSizes.bind(this);\n    this.getCalculator = this.getCalculator.bind(this);\n    this.setCalculator = this.setCalculator.bind(this);\n    this.removeMarkers = this.removeMarkers.bind(this);\n    this.resetViewport = this.resetViewport.bind(this);\n    this.getImagePath = this.getImagePath.bind(this);\n    this.setImagePath = this.setImagePath.bind(this);\n    this.pushMarkerTo = this.pushMarkerTo.bind(this);\n    this.removeMarker = this.removeMarker.bind(this);\n    this.clearMarkers = this.clearMarkers.bind(this);\n    this.setupStyles = this.setupStyles.bind(this);\n    this.getGridSize = this.getGridSize.bind(this);\n    this.setGridSize = this.setGridSize.bind(this);\n    this.getClusters = this.getClusters.bind(this);\n    this.getMaxZoom = this.getMaxZoom.bind(this);\n    this.setMaxZoom = this.setMaxZoom.bind(this);\n    this.getMarkers = this.getMarkers.bind(this);\n    this.addMarkers = this.addMarkers.bind(this);\n    this.getStyles = this.getStyles.bind(this);\n    this.setStyles = this.setStyles.bind(this);\n    this.addMarker = this.addMarker.bind(this);\n    this.onRemove = this.onRemove.bind(this);\n    this.getTitle = this.getTitle.bind(this);\n    this.setTitle = this.setTitle.bind(this);\n    this.repaint = this.repaint.bind(this);\n    this.onIdle = this.onIdle.bind(this);\n    this.redraw = this.redraw.bind(this);\n    this.onAdd = this.onAdd.bind(this);\n    this.draw = this.draw.bind(this);\n    this.extend = this.extend.bind(this);\n    this.extend(Clusterer, google.maps.OverlayView);\n    this.markers = [];\n    this.clusters = [];\n    this.listeners = [];\n    this.activeMap = null;\n    this.ready = false;\n    this.gridSize = optOptions.gridSize || 60;\n    this.minClusterSize = optOptions.minimumClusterSize || 2;\n    this.maxZoom = optOptions.maxZoom || null;\n    this.styles = optOptions.styles || [];\n    this.title = optOptions.title || '';\n    this.zoomOnClick = true;\n    if (optOptions.zoomOnClick !== undefined) {\n      this.zoomOnClick = optOptions.zoomOnClick;\n    }\n    this.averageCenter = false;\n    if (optOptions.averageCenter !== undefined) {\n      this.averageCenter = optOptions.averageCenter;\n    }\n    this.ignoreHidden = false;\n    if (optOptions.ignoreHidden !== undefined) {\n      this.ignoreHidden = optOptions.ignoreHidden;\n    }\n    this.enableRetinaIcons = false;\n    if (optOptions.enableRetinaIcons !== undefined) {\n      this.enableRetinaIcons = optOptions.enableRetinaIcons;\n    }\n    this.imagePath = optOptions.imagePath || IMAGE_PATH;\n    this.imageExtension = optOptions.imageExtension || IMAGE_EXTENSION;\n    this.imageSizes = optOptions.imageSizes || IMAGE_SIZES;\n    this.calculator = optOptions.calculator || CALCULATOR;\n    this.batchSize = optOptions.batchSize || BATCH_SIZE;\n    this.batchSizeIE = optOptions.batchSizeIE || BATCH_SIZE_IE;\n    this.clusterClass = optOptions.clusterClass || CLUSTERER_CLASS;\n    if (navigator.userAgent.toLowerCase().indexOf('msie') !== -1) {\n      // Try to avoid IE timeout when processing a huge number of markers:\n      this.batchSize = this.batchSizeIE;\n    }\n    this.timerRefStatic = null;\n    this.setupStyles();\n    this.addMarkers(optMarkers, true);\n    this.setMap(map); // Note: this causes onAdd to be called\n  }\n  Clusterer.prototype.onZoomChanged = function () {\n    var _a, _b;\n    this.resetViewport(false);\n    // Workaround for this Google bug: when map is at level 0 and \"-\" of\n    // zoom slider is clicked, a \"zoom_changed\" event is fired even though\n    // the map doesn't zoom out any further. In this situation, no \"idle\"\n    // event is triggered so the cluster markers that have been removed\n    // do not get redrawn. Same goes for a zoom in at maxZoom.\n    if (((_a = this.getMap()) === null || _a === void 0 ? void 0 : _a.getZoom()) === (this.get('minZoom') || 0) || ((_b = this.getMap()) === null || _b === void 0 ? void 0 : _b.getZoom()) === this.get('maxZoom')) {\n      google.maps.event.trigger(this, 'idle');\n    }\n  };\n  Clusterer.prototype.onIdle = function () {\n    this.redraw();\n  };\n  Clusterer.prototype.onAdd = function () {\n    var map = this.getMap();\n    this.activeMap = map;\n    this.ready = true;\n    this.repaint();\n    if (map !== null) {\n      // Add the map event listeners\n      this.listeners = [google.maps.event.addListener(map, 'zoom_changed', this.onZoomChanged), google.maps.event.addListener(map, 'idle', this.onIdle)];\n    }\n  };\n  Clusterer.prototype.onRemove = function () {\n    // Put all the managed markers back on the map:\n    for (var _i = 0, _a = this.markers; _i < _a.length; _i++) {\n      var marker = _a[_i];\n      if (marker.getMap() !== this.activeMap) {\n        marker.setMap(this.activeMap);\n      }\n    }\n    // Remove all clusters:\n    for (var _b = 0, _c = this.clusters; _b < _c.length; _b++) {\n      var cluster = _c[_b];\n      cluster.remove();\n    }\n    this.clusters = [];\n    // Remove map event listeners:\n    for (var _d = 0, _e = this.listeners; _d < _e.length; _d++) {\n      var listener = _e[_d];\n      google.maps.event.removeListener(listener);\n    }\n    this.listeners = [];\n    this.activeMap = null;\n    this.ready = false;\n  };\n  Clusterer.prototype.draw = function () {\n    return;\n  };\n  Clusterer.prototype.getMap = function () {\n    return null;\n  };\n  Clusterer.prototype.getPanes = function () {\n    return null;\n  };\n  Clusterer.prototype.getProjection = function () {\n    return {\n      fromContainerPixelToLatLng: function fromContainerPixelToLatLng() {\n        return null;\n      },\n      fromDivPixelToLatLng: function fromDivPixelToLatLng() {\n        return null;\n      },\n      fromLatLngToContainerPixel: function fromLatLngToContainerPixel() {\n        return null;\n      },\n      fromLatLngToDivPixel: function fromLatLngToDivPixel() {\n        return null;\n      },\n      getVisibleRegion: function getVisibleRegion() {\n        return null;\n      },\n      getWorldWidth: function getWorldWidth() {\n        return 0;\n      }\n    };\n  };\n  Clusterer.prototype.setMap = function () {\n    return;\n  };\n  Clusterer.prototype.addListener = function () {\n    return {\n      remove: function remove() {\n        return;\n      }\n    };\n  };\n  Clusterer.prototype.bindTo = function () {\n    return;\n  };\n  Clusterer.prototype.get = function () {\n    return;\n  };\n  Clusterer.prototype.notify = function () {\n    return;\n  };\n  Clusterer.prototype.set = function () {\n    return;\n  };\n  Clusterer.prototype.setValues = function () {\n    return;\n  };\n  Clusterer.prototype.unbind = function () {\n    return;\n  };\n  Clusterer.prototype.unbindAll = function () {\n    return;\n  };\n  Clusterer.prototype.setupStyles = function () {\n    if (this.styles.length > 0) {\n      return;\n    }\n    for (var i = 0; i < this.imageSizes.length; i++) {\n      this.styles.push({\n        url: \"\".concat(this.imagePath + (i + 1), \".\").concat(this.imageExtension),\n        height: this.imageSizes[i] || 0,\n        width: this.imageSizes[i] || 0\n      });\n    }\n  };\n  Clusterer.prototype.fitMapToMarkers = function () {\n    var markers = this.getMarkers();\n    var bounds = new google.maps.LatLngBounds();\n    for (var _i = 0, markers_1 = markers; _i < markers_1.length; _i++) {\n      var marker = markers_1[_i];\n      var position = marker.getPosition();\n      if (position) {\n        bounds.extend(position);\n      }\n    }\n    var map = this.getMap();\n    if (map !== null && 'fitBounds' in map) {\n      map.fitBounds(bounds);\n    }\n  };\n  Clusterer.prototype.getGridSize = function () {\n    return this.gridSize;\n  };\n  Clusterer.prototype.setGridSize = function (gridSize) {\n    this.gridSize = gridSize;\n  };\n  Clusterer.prototype.getMinimumClusterSize = function () {\n    return this.minClusterSize;\n  };\n  Clusterer.prototype.setMinimumClusterSize = function (minimumClusterSize) {\n    this.minClusterSize = minimumClusterSize;\n  };\n  Clusterer.prototype.getMaxZoom = function () {\n    return this.maxZoom;\n  };\n  Clusterer.prototype.setMaxZoom = function (maxZoom) {\n    this.maxZoom = maxZoom;\n  };\n  Clusterer.prototype.getStyles = function () {\n    return this.styles;\n  };\n  Clusterer.prototype.setStyles = function (styles) {\n    this.styles = styles;\n  };\n  Clusterer.prototype.getTitle = function () {\n    return this.title;\n  };\n  Clusterer.prototype.setTitle = function (title) {\n    this.title = title;\n  };\n  Clusterer.prototype.getZoomOnClick = function () {\n    return this.zoomOnClick;\n  };\n  Clusterer.prototype.setZoomOnClick = function (zoomOnClick) {\n    this.zoomOnClick = zoomOnClick;\n  };\n  Clusterer.prototype.getAverageCenter = function () {\n    return this.averageCenter;\n  };\n  Clusterer.prototype.setAverageCenter = function (averageCenter) {\n    this.averageCenter = averageCenter;\n  };\n  Clusterer.prototype.getIgnoreHidden = function () {\n    return this.ignoreHidden;\n  };\n  Clusterer.prototype.setIgnoreHidden = function (ignoreHidden) {\n    this.ignoreHidden = ignoreHidden;\n  };\n  Clusterer.prototype.getEnableRetinaIcons = function () {\n    return this.enableRetinaIcons;\n  };\n  Clusterer.prototype.setEnableRetinaIcons = function (enableRetinaIcons) {\n    this.enableRetinaIcons = enableRetinaIcons;\n  };\n  Clusterer.prototype.getImageExtension = function () {\n    return this.imageExtension;\n  };\n  Clusterer.prototype.setImageExtension = function (imageExtension) {\n    this.imageExtension = imageExtension;\n  };\n  Clusterer.prototype.getImagePath = function () {\n    return this.imagePath;\n  };\n  Clusterer.prototype.setImagePath = function (imagePath) {\n    this.imagePath = imagePath;\n  };\n  Clusterer.prototype.getImageSizes = function () {\n    return this.imageSizes;\n  };\n  Clusterer.prototype.setImageSizes = function (imageSizes) {\n    this.imageSizes = imageSizes;\n  };\n  Clusterer.prototype.getCalculator = function () {\n    return this.calculator;\n  };\n  Clusterer.prototype.setCalculator = function (calculator) {\n    this.calculator = calculator;\n  };\n  Clusterer.prototype.getBatchSizeIE = function () {\n    return this.batchSizeIE;\n  };\n  Clusterer.prototype.setBatchSizeIE = function (batchSizeIE) {\n    this.batchSizeIE = batchSizeIE;\n  };\n  Clusterer.prototype.getClusterClass = function () {\n    return this.clusterClass;\n  };\n  Clusterer.prototype.setClusterClass = function (clusterClass) {\n    this.clusterClass = clusterClass;\n  };\n  Clusterer.prototype.getMarkers = function () {\n    return this.markers;\n  };\n  Clusterer.prototype.getTotalMarkers = function () {\n    return this.markers.length;\n  };\n  Clusterer.prototype.getClusters = function () {\n    return this.clusters;\n  };\n  Clusterer.prototype.getTotalClusters = function () {\n    return this.clusters.length;\n  };\n  Clusterer.prototype.addMarker = function (marker, optNoDraw) {\n    this.pushMarkerTo(marker);\n    if (!optNoDraw) {\n      this.redraw();\n    }\n  };\n  Clusterer.prototype.addMarkers = function (markers, optNoDraw) {\n    for (var key in markers) {\n      if (Object.prototype.hasOwnProperty.call(markers, key)) {\n        var marker = markers[key];\n        if (marker) {\n          this.pushMarkerTo(marker);\n        }\n      }\n    }\n    if (!optNoDraw) {\n      this.redraw();\n    }\n  };\n  Clusterer.prototype.pushMarkerTo = function (marker) {\n    var _this = this;\n    // If the marker is draggable add a listener so we can update the clusters on the dragend:\n    if (marker.getDraggable()) {\n      google.maps.event.addListener(marker, 'dragend', function () {\n        if (_this.ready) {\n          marker.isAdded = false;\n          _this.repaint();\n        }\n      });\n    }\n    marker.isAdded = false;\n    this.markers.push(marker);\n  };\n  Clusterer.prototype.removeMarker_ = function (marker) {\n    var index = -1;\n    if (this.markers.indexOf) {\n      index = this.markers.indexOf(marker);\n    } else {\n      for (var i = 0; i < this.markers.length; i++) {\n        if (marker === this.markers[i]) {\n          index = i;\n          break;\n        }\n      }\n    }\n    if (index === -1) {\n      // Marker is not in our list of markers, so do nothing:\n      return false;\n    }\n    marker.setMap(null);\n    this.markers.splice(index, 1); // Remove the marker from the list of managed markers\n    return true;\n  };\n  Clusterer.prototype.removeMarker = function (marker, optNoDraw) {\n    var removed = this.removeMarker_(marker);\n    if (!optNoDraw && removed) {\n      this.repaint();\n    }\n    return removed;\n  };\n  Clusterer.prototype.removeMarkers = function (markers, optNoDraw) {\n    var removed = false;\n    for (var _i = 0, markers_2 = markers; _i < markers_2.length; _i++) {\n      var marker = markers_2[_i];\n      removed = removed || this.removeMarker_(marker);\n    }\n    if (!optNoDraw && removed) {\n      this.repaint();\n    }\n    return removed;\n  };\n  Clusterer.prototype.clearMarkers = function () {\n    this.resetViewport(true);\n    this.markers = [];\n  };\n  Clusterer.prototype.repaint = function () {\n    var oldClusters = this.clusters.slice();\n    this.clusters = [];\n    this.resetViewport(false);\n    this.redraw();\n    // Remove the old clusters.\n    // Do it in a timeout to prevent blinking effect.\n    setTimeout(function timeout() {\n      for (var _i = 0, oldClusters_1 = oldClusters; _i < oldClusters_1.length; _i++) {\n        var oldCluster = oldClusters_1[_i];\n        oldCluster.remove();\n      }\n    }, 0);\n  };\n  Clusterer.prototype.getExtendedBounds = function (bounds) {\n    var projection = this.getProjection();\n    // Convert the points to pixels and the extend out by the grid size.\n    var trPix = projection.fromLatLngToDivPixel(\n    // Turn the bounds into latlng.\n    new google.maps.LatLng(bounds.getNorthEast().lat(), bounds.getNorthEast().lng()));\n    if (trPix !== null) {\n      trPix.x += this.gridSize;\n      trPix.y -= this.gridSize;\n    }\n    var blPix = projection.fromLatLngToDivPixel(\n    // Turn the bounds into latlng.\n    new google.maps.LatLng(bounds.getSouthWest().lat(), bounds.getSouthWest().lng()));\n    if (blPix !== null) {\n      blPix.x -= this.gridSize;\n      blPix.y += this.gridSize;\n    }\n    // Extend the bounds to contain the new bounds.\n    if (trPix !== null) {\n      // Convert the pixel points back to LatLng nw\n      var point1 = projection.fromDivPixelToLatLng(trPix);\n      if (point1 !== null) {\n        bounds.extend(point1);\n      }\n    }\n    if (blPix !== null) {\n      // Convert the pixel points back to LatLng sw\n      var point2 = projection.fromDivPixelToLatLng(blPix);\n      if (point2 !== null) {\n        bounds.extend(point2);\n      }\n    }\n    return bounds;\n  };\n  Clusterer.prototype.redraw = function () {\n    // Redraws all the clusters.\n    this.createClusters(0);\n  };\n  Clusterer.prototype.resetViewport = function (optHide) {\n    // Remove all the clusters\n    for (var _i = 0, _a = this.clusters; _i < _a.length; _i++) {\n      var cluster = _a[_i];\n      cluster.remove();\n    }\n    this.clusters = [];\n    // Reset the markers to not be added and to be removed from the map.\n    for (var _b = 0, _c = this.markers; _b < _c.length; _b++) {\n      var marker = _c[_b];\n      marker.isAdded = false;\n      if (optHide) {\n        marker.setMap(null);\n      }\n    }\n  };\n  Clusterer.prototype.distanceBetweenPoints = function (p1, p2) {\n    var R = 6371; // Radius of the Earth in km\n    var dLat = (p2.lat() - p1.lat()) * Math.PI / 180;\n    var dLon = (p2.lng() - p1.lng()) * Math.PI / 180;\n    var a = Math.sin(dLat / 2) * Math.sin(dLat / 2) + Math.cos(p1.lat() * Math.PI / 180) * Math.cos(p2.lat() * Math.PI / 180) * Math.sin(dLon / 2) * Math.sin(dLon / 2);\n    return R * (2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a)));\n  };\n  Clusterer.prototype.isMarkerInBounds = function (marker, bounds) {\n    var position = marker.getPosition();\n    if (position) {\n      return bounds.contains(position);\n    }\n    return false;\n  };\n  Clusterer.prototype.addToClosestCluster = function (marker) {\n    var cluster;\n    var distance = 40000; // Some large number\n    var clusterToAddTo = null;\n    for (var _i = 0, _a = this.clusters; _i < _a.length; _i++) {\n      var clusterElement = _a[_i];\n      cluster = clusterElement;\n      var center = cluster.getCenter();\n      var position = marker.getPosition();\n      if (center && position) {\n        var d = this.distanceBetweenPoints(center, position);\n        if (d < distance) {\n          distance = d;\n          clusterToAddTo = cluster;\n        }\n      }\n    }\n    if (clusterToAddTo && clusterToAddTo.isMarkerInClusterBounds(marker)) {\n      clusterToAddTo.addMarker(marker);\n    } else {\n      cluster = new Cluster$1(this);\n      cluster.addMarker(marker);\n      this.clusters.push(cluster);\n    }\n  };\n  Clusterer.prototype.createClusters = function (iFirst) {\n    var _this = this;\n    if (!this.ready) {\n      return;\n    }\n    // Cancel previous batch processing if we're working on the first batch:\n    if (iFirst === 0) {\n      /**\n       * This event is fired when the <code>Clusterer</code> begins\n       *  clustering markers.\n       * @name Clusterer#clusteringbegin\n       * @param {Clusterer} mc The Clusterer whose markers are being clustered.\n       * @event\n       */\n      google.maps.event.trigger(this, 'clusteringbegin', this);\n      if (this.timerRefStatic !== null) {\n        window.clearTimeout(this.timerRefStatic);\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        delete this.timerRefStatic;\n      }\n    }\n    var map = this.getMap();\n    var bounds = map !== null && 'getBounds' in map ? map.getBounds() : null;\n    var zoom = (map === null || map === void 0 ? void 0 : map.getZoom()) || 0;\n    // Get our current map view bounds.\n    // Create a new bounds object so we don't affect the map.\n    //\n    // See Comments 9 & 11 on Issue 3651 relating to this workaround for a Google Maps bug:\n    var mapBounds = zoom > 3 ? new google.maps.LatLngBounds(bounds === null || bounds === void 0 ? void 0 : bounds.getSouthWest(), bounds === null || bounds === void 0 ? void 0 : bounds.getNorthEast()) : new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472, -178.48388434375), new google.maps.LatLng(-85.08136444384544, 178.00048865625));\n    var extendedMapBounds = this.getExtendedBounds(mapBounds);\n    var iLast = Math.min(iFirst + this.batchSize, this.markers.length);\n    for (var i = iFirst; i < iLast; i++) {\n      var marker = this.markers[i];\n      if (marker && !marker.isAdded && this.isMarkerInBounds(marker, extendedMapBounds) && (!this.ignoreHidden || this.ignoreHidden && marker.getVisible())) {\n        this.addToClosestCluster(marker);\n      }\n    }\n    if (iLast < this.markers.length) {\n      this.timerRefStatic = window.setTimeout(function () {\n        _this.createClusters(iLast);\n      }, 0);\n    } else {\n      this.timerRefStatic = null;\n      /**\n       * This event is fired when the <code>Clusterer</code> stops\n       *  clustering markers.\n       * @name Clusterer#clusteringend\n       * @param {Clusterer} mc The Clusterer whose markers are being clustered.\n       * @event\n       */\n      google.maps.event.trigger(this, 'clusteringend', this);\n      for (var _i = 0, _a = this.clusters; _i < _a.length; _i++) {\n        var cluster = _a[_i];\n        cluster.updateIcon();\n      }\n    }\n  };\n  Clusterer.prototype.extend = function (obj1, obj2) {\n    return function applyExtend(object) {\n      for (var property in object.prototype) {\n        // eslint-disable-next-line @typescript-eslint/ban-types\n        var prop = property;\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        this.prototype[prop] = object.prototype[prop];\n      }\n      return this;\n    }.apply(obj1, [obj2]);\n  };\n  return Clusterer;\n}();\n\nfunction ownKeys$c(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread$c(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys$c(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$c(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nvar eventMap$e = {\n  onClick: 'click',\n  onClusteringBegin: 'clusteringbegin',\n  onClusteringEnd: 'clusteringend',\n  onMouseOut: 'mouseout',\n  onMouseOver: 'mouseover'\n};\nvar updaterMap$e = {\n  averageCenter(instance, averageCenter) {\n    instance.setAverageCenter(averageCenter);\n  },\n  batchSizeIE(instance, batchSizeIE) {\n    instance.setBatchSizeIE(batchSizeIE);\n  },\n  calculator(instance, calculator) {\n    instance.setCalculator(calculator);\n  },\n  clusterClass(instance, clusterClass) {\n    instance.setClusterClass(clusterClass);\n  },\n  enableRetinaIcons(instance, enableRetinaIcons) {\n    instance.setEnableRetinaIcons(enableRetinaIcons);\n  },\n  gridSize(instance, gridSize) {\n    instance.setGridSize(gridSize);\n  },\n  ignoreHidden(instance, ignoreHidden) {\n    instance.setIgnoreHidden(ignoreHidden);\n  },\n  imageExtension(instance, imageExtension) {\n    instance.setImageExtension(imageExtension);\n  },\n  imagePath(instance, imagePath) {\n    instance.setImagePath(imagePath);\n  },\n  imageSizes(instance, imageSizes) {\n    instance.setImageSizes(imageSizes);\n  },\n  maxZoom(instance, maxZoom) {\n    instance.setMaxZoom(maxZoom);\n  },\n  minimumClusterSize(instance, minimumClusterSize) {\n    instance.setMinimumClusterSize(minimumClusterSize);\n  },\n  styles(instance, styles) {\n    instance.setStyles(styles);\n  },\n  title(instance, title) {\n    instance.setTitle(title);\n  },\n  zoomOnClick(instance, zoomOnClick) {\n    instance.setZoomOnClick(zoomOnClick);\n  }\n};\nvar defaultOptions$4 = {};\nfunction MarkerClustererFunctional(props) {\n  var {\n    children,\n    options,\n    averageCenter,\n    batchSizeIE,\n    calculator,\n    clusterClass,\n    enableRetinaIcons,\n    gridSize,\n    ignoreHidden,\n    imageExtension,\n    imagePath,\n    imageSizes,\n    maxZoom,\n    minimumClusterSize,\n    styles,\n    title,\n    zoomOnClick,\n    onClick,\n    onClusteringBegin,\n    onClusteringEnd,\n    onMouseOver,\n    onMouseOut,\n    onLoad,\n    onUnmount\n  } = props;\n  var [instance, setInstance] = useState(null);\n  var map = useContext(MapContext);\n  var [clickListener, setClickListener] = useState(null);\n  var [clusteringBeginListener, setClusteringBeginListener] = useState(null);\n  var [clusteringEndListener, setClusteringEndListener] = useState(null);\n  var [mouseoutListener, setMouseoutListener] = useState(null);\n  var [mouseoverListener, setMouseoverListener] = useState(null);\n  useEffect(() => {\n    if (instance && onMouseOut) {\n      if (mouseoutListener !== null) {\n        google.maps.event.removeListener(mouseoutListener);\n      }\n      setMouseoutListener(google.maps.event.addListener(instance, eventMap$e.onMouseOut, onMouseOut));\n    }\n  }, [onMouseOut]);\n  useEffect(() => {\n    if (instance && onMouseOver) {\n      if (mouseoverListener !== null) {\n        google.maps.event.removeListener(mouseoverListener);\n      }\n      setMouseoverListener(google.maps.event.addListener(instance, eventMap$e.onMouseOver, onMouseOver));\n    }\n  }, [onMouseOver]);\n  useEffect(() => {\n    if (instance && onClick) {\n      if (clickListener !== null) {\n        google.maps.event.removeListener(clickListener);\n      }\n      setClickListener(google.maps.event.addListener(instance, eventMap$e.onClick, onClick));\n    }\n  }, [onClick]);\n  useEffect(() => {\n    if (instance && onClusteringBegin) {\n      if (clusteringBeginListener !== null) {\n        google.maps.event.removeListener(clusteringBeginListener);\n      }\n      setClusteringBeginListener(google.maps.event.addListener(instance, eventMap$e.onClusteringBegin, onClusteringBegin));\n    }\n  }, [onClusteringBegin]);\n  useEffect(() => {\n    if (instance && onClusteringEnd) {\n      if (clusteringEndListener !== null) {\n        google.maps.event.removeListener(clusteringEndListener);\n      }\n      setClusteringBeginListener(google.maps.event.addListener(instance, eventMap$e.onClusteringEnd, onClusteringEnd));\n    }\n  }, [onClusteringEnd]);\n  useEffect(() => {\n    if (typeof averageCenter !== 'undefined' && instance !== null) {\n      updaterMap$e.averageCenter(instance, averageCenter);\n    }\n  }, [instance, averageCenter]);\n  useEffect(() => {\n    if (typeof batchSizeIE !== 'undefined' && instance !== null) {\n      updaterMap$e.batchSizeIE(instance, batchSizeIE);\n    }\n  }, [instance, batchSizeIE]);\n  useEffect(() => {\n    if (typeof calculator !== 'undefined' && instance !== null) {\n      updaterMap$e.calculator(instance, calculator);\n    }\n  }, [instance, calculator]);\n  useEffect(() => {\n    if (typeof clusterClass !== 'undefined' && instance !== null) {\n      updaterMap$e.clusterClass(instance, clusterClass);\n    }\n  }, [instance, clusterClass]);\n  useEffect(() => {\n    if (typeof enableRetinaIcons !== 'undefined' && instance !== null) {\n      updaterMap$e.enableRetinaIcons(instance, enableRetinaIcons);\n    }\n  }, [instance, enableRetinaIcons]);\n  useEffect(() => {\n    if (typeof gridSize !== 'undefined' && instance !== null) {\n      updaterMap$e.gridSize(instance, gridSize);\n    }\n  }, [instance, gridSize]);\n  useEffect(() => {\n    if (typeof ignoreHidden !== 'undefined' && instance !== null) {\n      updaterMap$e.ignoreHidden(instance, ignoreHidden);\n    }\n  }, [instance, ignoreHidden]);\n  useEffect(() => {\n    if (typeof imageExtension !== 'undefined' && instance !== null) {\n      updaterMap$e.imageExtension(instance, imageExtension);\n    }\n  }, [instance, imageExtension]);\n  useEffect(() => {\n    if (typeof imagePath !== 'undefined' && instance !== null) {\n      updaterMap$e.imagePath(instance, imagePath);\n    }\n  }, [instance, imagePath]);\n  useEffect(() => {\n    if (typeof imageSizes !== 'undefined' && instance !== null) {\n      updaterMap$e.imageSizes(instance, imageSizes);\n    }\n  }, [instance, imageSizes]);\n  useEffect(() => {\n    if (typeof maxZoom !== 'undefined' && instance !== null) {\n      updaterMap$e.maxZoom(instance, maxZoom);\n    }\n  }, [instance, maxZoom]);\n  useEffect(() => {\n    if (typeof minimumClusterSize !== 'undefined' && instance !== null) {\n      updaterMap$e.minimumClusterSize(instance, minimumClusterSize);\n    }\n  }, [instance, minimumClusterSize]);\n  useEffect(() => {\n    if (typeof styles !== 'undefined' && instance !== null) {\n      updaterMap$e.styles(instance, styles);\n    }\n  }, [instance, styles]);\n  useEffect(() => {\n    if (typeof title !== 'undefined' && instance !== null) {\n      updaterMap$e.title(instance, title);\n    }\n  }, [instance, title]);\n  useEffect(() => {\n    if (typeof zoomOnClick !== 'undefined' && instance !== null) {\n      updaterMap$e.zoomOnClick(instance, zoomOnClick);\n    }\n  }, [instance, zoomOnClick]);\n  useEffect(() => {\n    if (!map) return;\n    var clustererOptions = _objectSpread$c({}, options || defaultOptions$4);\n    var clusterer = new Clusterer(map, [], clustererOptions);\n    if (averageCenter) {\n      updaterMap$e.averageCenter(clusterer, averageCenter);\n    }\n    if (batchSizeIE) {\n      updaterMap$e.batchSizeIE(clusterer, batchSizeIE);\n    }\n    if (calculator) {\n      updaterMap$e.calculator(clusterer, calculator);\n    }\n    if (clusterClass) {\n      updaterMap$e.clusterClass(clusterer, clusterClass);\n    }\n    if (enableRetinaIcons) {\n      updaterMap$e.enableRetinaIcons(clusterer, enableRetinaIcons);\n    }\n    if (gridSize) {\n      updaterMap$e.gridSize(clusterer, gridSize);\n    }\n    if (ignoreHidden) {\n      updaterMap$e.ignoreHidden(clusterer, ignoreHidden);\n    }\n    if (imageExtension) {\n      updaterMap$e.imageExtension(clusterer, imageExtension);\n    }\n    if (imagePath) {\n      updaterMap$e.imagePath(clusterer, imagePath);\n    }\n    if (imageSizes) {\n      updaterMap$e.imageSizes(clusterer, imageSizes);\n    }\n    if (maxZoom) {\n      updaterMap$e.maxZoom(clusterer, maxZoom);\n    }\n    if (minimumClusterSize) {\n      updaterMap$e.minimumClusterSize(clusterer, minimumClusterSize);\n    }\n    if (styles) {\n      updaterMap$e.styles(clusterer, styles);\n    }\n    if (title) {\n      updaterMap$e.title(clusterer, title);\n    }\n    if (zoomOnClick) {\n      updaterMap$e.zoomOnClick(clusterer, zoomOnClick);\n    }\n    if (onMouseOut) {\n      setMouseoutListener(google.maps.event.addListener(clusterer, eventMap$e.onMouseOut, onMouseOut));\n    }\n    if (onMouseOver) {\n      setMouseoverListener(google.maps.event.addListener(clusterer, eventMap$e.onMouseOver, onMouseOver));\n    }\n    if (onClick) {\n      setClickListener(google.maps.event.addListener(clusterer, eventMap$e.onClick, onClick));\n    }\n    if (onClusteringBegin) {\n      setClusteringBeginListener(google.maps.event.addListener(clusterer, eventMap$e.onClusteringBegin, onClusteringBegin));\n    }\n    if (onClusteringEnd) {\n      setClusteringEndListener(google.maps.event.addListener(clusterer, eventMap$e.onClusteringEnd, onClusteringEnd));\n    }\n    setInstance(clusterer);\n    if (onLoad) {\n      onLoad(clusterer);\n    }\n    return () => {\n      if (mouseoutListener !== null) {\n        google.maps.event.removeListener(mouseoutListener);\n      }\n      if (mouseoverListener !== null) {\n        google.maps.event.removeListener(mouseoverListener);\n      }\n      if (clickListener !== null) {\n        google.maps.event.removeListener(clickListener);\n      }\n      if (clusteringBeginListener !== null) {\n        google.maps.event.removeListener(clusteringBeginListener);\n      }\n      if (clusteringEndListener !== null) {\n        google.maps.event.removeListener(clusteringEndListener);\n      }\n      if (onUnmount) {\n        onUnmount(clusterer);\n      }\n    };\n  }, []);\n  return instance !== null ? children(instance) || null : null;\n}\nvar MarkerClustererF = memo(MarkerClustererFunctional);\nclass ClustererComponent extends PureComponent {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"registeredEvents\", []);\n    _defineProperty(this, \"state\", {\n      markerClusterer: null\n    });\n    _defineProperty(this, \"setClustererCallback\", () => {\n      if (this.state.markerClusterer !== null && this.props.onLoad) {\n        this.props.onLoad(this.state.markerClusterer);\n      }\n    });\n  }\n  componentDidMount() {\n    if (this.context) {\n      var markerClusterer = new Clusterer(this.context, [], this.props.options);\n      this.registeredEvents = applyUpdatersToPropsAndRegisterEvents({\n        updaterMap: updaterMap$e,\n        eventMap: eventMap$e,\n        prevProps: {},\n        nextProps: this.props,\n        instance: markerClusterer\n      });\n      this.setState(() => {\n        return {\n          markerClusterer\n        };\n      }, this.setClustererCallback);\n    }\n  }\n  componentDidUpdate(prevProps) {\n    if (this.state.markerClusterer) {\n      unregisterEvents(this.registeredEvents);\n      this.registeredEvents = applyUpdatersToPropsAndRegisterEvents({\n        updaterMap: updaterMap$e,\n        eventMap: eventMap$e,\n        prevProps,\n        nextProps: this.props,\n        instance: this.state.markerClusterer\n      });\n    }\n  }\n  componentWillUnmount() {\n    if (this.state.markerClusterer !== null) {\n      if (this.props.onUnmount) {\n        this.props.onUnmount(this.state.markerClusterer);\n      }\n      unregisterEvents(this.registeredEvents);\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore\n      this.state.markerClusterer.setMap(null);\n    }\n  }\n  render() {\n    return this.state.markerClusterer !== null ? this.props.children(this.state.markerClusterer) : null;\n  }\n}\n_defineProperty(ClustererComponent, \"contextType\", MapContext);\n\n// This handler prevents an event in the InfoBox from being passed on to the map.\nfunction cancelHandler(event) {\n  event.cancelBubble = true;\n  if (event.stopPropagation) {\n    event.stopPropagation();\n  }\n}\nvar InfoBox = /** @class */function () {\n  function InfoBox(options) {\n    if (options === void 0) {\n      options = {};\n    }\n    this.getCloseClickHandler = this.getCloseClickHandler.bind(this);\n    this.closeClickHandler = this.closeClickHandler.bind(this);\n    this.createInfoBoxDiv = this.createInfoBoxDiv.bind(this);\n    this.addClickHandler = this.addClickHandler.bind(this);\n    this.getCloseBoxImg = this.getCloseBoxImg.bind(this);\n    this.getBoxWidths = this.getBoxWidths.bind(this);\n    this.setBoxStyle = this.setBoxStyle.bind(this);\n    this.setPosition = this.setPosition.bind(this);\n    this.getPosition = this.getPosition.bind(this);\n    this.setOptions = this.setOptions.bind(this);\n    this.setContent = this.setContent.bind(this);\n    this.setVisible = this.setVisible.bind(this);\n    this.getContent = this.getContent.bind(this);\n    this.getVisible = this.getVisible.bind(this);\n    this.setZIndex = this.setZIndex.bind(this);\n    this.getZIndex = this.getZIndex.bind(this);\n    this.onRemove = this.onRemove.bind(this);\n    this.panBox = this.panBox.bind(this);\n    this.extend = this.extend.bind(this);\n    this.close = this.close.bind(this);\n    this.draw = this.draw.bind(this);\n    this.show = this.show.bind(this);\n    this.hide = this.hide.bind(this);\n    this.open = this.open.bind(this);\n    this.extend(InfoBox, google.maps.OverlayView);\n    // Standard options (in common with google.maps.InfoWindow):\n    this.content = options.content || '';\n    this.disableAutoPan = options.disableAutoPan || false;\n    this.maxWidth = options.maxWidth || 0;\n    this.pixelOffset = options.pixelOffset || new google.maps.Size(0, 0);\n    this.position = options.position || new google.maps.LatLng(0, 0);\n    this.zIndex = options.zIndex || null;\n    // Additional options (unique to InfoBox):\n    this.boxClass = options.boxClass || 'infoBox';\n    this.boxStyle = options.boxStyle || {};\n    this.closeBoxMargin = options.closeBoxMargin || '2px';\n    this.closeBoxURL = options.closeBoxURL || 'http://www.google.com/intl/en_us/mapfiles/close.gif';\n    if (options.closeBoxURL === '') {\n      this.closeBoxURL = '';\n    }\n    this.infoBoxClearance = options.infoBoxClearance || new google.maps.Size(1, 1);\n    if (typeof options.visible === 'undefined') {\n      if (typeof options.isHidden === 'undefined') {\n        options.visible = true;\n      } else {\n        options.visible = !options.isHidden;\n      }\n    }\n    this.isHidden = !options.visible;\n    this.alignBottom = options.alignBottom || false;\n    this.pane = options.pane || 'floatPane';\n    this.enableEventPropagation = options.enableEventPropagation || false;\n    this.div = null;\n    this.closeListener = null;\n    this.moveListener = null;\n    this.mapListener = null;\n    this.contextListener = null;\n    this.eventListeners = null;\n    this.fixedWidthSet = null;\n  }\n  InfoBox.prototype.createInfoBoxDiv = function () {\n    var _this = this;\n    // This handler ignores the current event in the InfoBox and conditionally prevents\n    // the event from being passed on to the map. It is used for the contextmenu event.\n    var ignoreHandler = function ignoreHandler(event) {\n      event.returnValue = false;\n      if (event.preventDefault) {\n        event.preventDefault();\n      }\n      if (!_this.enableEventPropagation) {\n        cancelHandler(event);\n      }\n    };\n    if (!this.div) {\n      this.div = document.createElement('div');\n      this.setBoxStyle();\n      if (typeof this.content === 'string') {\n        this.div.innerHTML = this.getCloseBoxImg() + this.content;\n      } else {\n        this.div.innerHTML = this.getCloseBoxImg();\n        this.div.appendChild(this.content);\n      }\n      var panes = this.getPanes();\n      if (panes !== null) {\n        panes[this.pane].appendChild(this.div); // Add the InfoBox div to the DOM\n      }\n      this.addClickHandler();\n      if (this.div.style.width) {\n        this.fixedWidthSet = true;\n      } else {\n        if (this.maxWidth !== 0 && this.div.offsetWidth > this.maxWidth) {\n          this.div.style.width = this.maxWidth + 'px';\n          this.fixedWidthSet = true;\n        } else {\n          // The following code is needed to overcome problems with MSIE\n          var bw = this.getBoxWidths();\n          this.div.style.width = this.div.offsetWidth - bw.left - bw.right + 'px';\n          this.fixedWidthSet = false;\n        }\n      }\n      this.panBox(this.disableAutoPan);\n      if (!this.enableEventPropagation) {\n        this.eventListeners = [];\n        // Cancel event propagation.\n        // Note: mousemove not included (to resolve Issue 152)\n        var events = ['mousedown', 'mouseover', 'mouseout', 'mouseup', 'click', 'dblclick', 'touchstart', 'touchend', 'touchmove'];\n        for (var _i = 0, events_1 = events; _i < events_1.length; _i++) {\n          var event_1 = events_1[_i];\n          this.eventListeners.push(google.maps.event.addListener(this.div, event_1, cancelHandler));\n        }\n        // Workaround for Google bug that causes the cursor to change to a pointer\n        // when the mouse moves over a marker underneath InfoBox.\n        this.eventListeners.push(google.maps.event.addListener(this.div, 'mouseover', function () {\n          if (_this.div) {\n            _this.div.style.cursor = 'default';\n          }\n        }));\n      }\n      this.contextListener = google.maps.event.addListener(this.div, 'contextmenu', ignoreHandler);\n      /**\n       * This event is fired when the DIV containing the InfoBox's content is attached to the DOM.\n       * @name InfoBox#domready\n       * @event\n       */\n      google.maps.event.trigger(this, 'domready');\n    }\n  };\n  InfoBox.prototype.getCloseBoxImg = function () {\n    var img = '';\n    if (this.closeBoxURL !== '') {\n      img = '<img alt=\"\"';\n      img += ' aria-hidden=\"true\"';\n      img += \" src='\" + this.closeBoxURL + \"'\";\n      img += ' align=right'; // Do this because Opera chokes on style='float: right;'\n      img += \" style='\";\n      img += ' position: relative;'; // Required by MSIE\n      img += ' cursor: pointer;';\n      img += ' margin: ' + this.closeBoxMargin + ';';\n      img += \"'>\";\n    }\n    return img;\n  };\n  InfoBox.prototype.addClickHandler = function () {\n    this.closeListener = this.div && this.div.firstChild && this.closeBoxURL !== '' ? google.maps.event.addListener(this.div.firstChild, 'click', this.getCloseClickHandler()) : null;\n  };\n  InfoBox.prototype.closeClickHandler = function (event) {\n    // 1.0.3 fix: Always prevent propagation of a close box click to the map:\n    event.cancelBubble = true;\n    if (event.stopPropagation) {\n      event.stopPropagation();\n    }\n    /**\n     * This event is fired when the InfoBox's close box is clicked.\n     * @name InfoBox#closeclick\n     * @event\n     */\n    google.maps.event.trigger(this, 'closeclick');\n    this.close();\n  };\n  InfoBox.prototype.getCloseClickHandler = function () {\n    return this.closeClickHandler;\n  };\n  InfoBox.prototype.panBox = function (disablePan) {\n    if (this.div && !disablePan) {\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore\n      var map = this.getMap();\n      // Only pan if attached to map, not panorama\n      if (map instanceof google.maps.Map) {\n        var xOffset = 0;\n        var yOffset = 0;\n        var bounds = map.getBounds();\n        if (bounds && !bounds.contains(this.position)) {\n          // Marker not in visible area of map, so set center\n          // of map to the marker position first.\n          map.setCenter(this.position);\n        }\n        var mapDiv = map.getDiv();\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        var mapWidth = mapDiv.offsetWidth;\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        var mapHeight = mapDiv.offsetHeight;\n        var iwOffsetX = this.pixelOffset.width;\n        var iwOffsetY = this.pixelOffset.height;\n        var iwWidth = this.div.offsetWidth;\n        var iwHeight = this.div.offsetHeight;\n        var padX = this.infoBoxClearance.width;\n        var padY = this.infoBoxClearance.height;\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        var projection = this.getProjection();\n        var pixPosition = projection.fromLatLngToContainerPixel(this.position);\n        if (pixPosition !== null) {\n          if (pixPosition.x < -iwOffsetX + padX) {\n            xOffset = pixPosition.x + iwOffsetX - padX;\n          } else if (pixPosition.x + iwWidth + iwOffsetX + padX > mapWidth) {\n            xOffset = pixPosition.x + iwWidth + iwOffsetX + padX - mapWidth;\n          }\n          if (this.alignBottom) {\n            if (pixPosition.y < -iwOffsetY + padY + iwHeight) {\n              yOffset = pixPosition.y + iwOffsetY - padY - iwHeight;\n            } else if (pixPosition.y + iwOffsetY + padY > mapHeight) {\n              yOffset = pixPosition.y + iwOffsetY + padY - mapHeight;\n            }\n          } else {\n            if (pixPosition.y < -iwOffsetY + padY) {\n              yOffset = pixPosition.y + iwOffsetY - padY;\n            } else if (pixPosition.y + iwHeight + iwOffsetY + padY > mapHeight) {\n              yOffset = pixPosition.y + iwHeight + iwOffsetY + padY - mapHeight;\n            }\n          }\n        }\n        if (!(xOffset === 0 && yOffset === 0)) {\n          // Move the map to the shifted center.\n          map.panBy(xOffset, yOffset);\n        }\n      }\n    }\n  };\n  InfoBox.prototype.setBoxStyle = function () {\n    if (this.div) {\n      // Apply style values from the style sheet defined in the boxClass parameter:\n      this.div.className = this.boxClass;\n      // Clear existing inline style values:\n      this.div.style.cssText = '';\n      // Apply style values defined in the boxStyle parameter:\n      var boxStyle = this.boxStyle;\n      for (var i in boxStyle) {\n        if (Object.prototype.hasOwnProperty.call(boxStyle, i)) {\n          // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n          // @ts-ignore\n          this.div.style[i] = boxStyle[i];\n        }\n      }\n      // Fix for iOS disappearing InfoBox problem\n      // See http://stackoverflow.com/questions/9229535/google-maps-markers-disappear-at-certain-zoom-level-only-on-iphone-ipad\n      this.div.style.webkitTransform = 'translateZ(0)';\n      // Fix up opacity style for benefit of MSIE\n      if (typeof this.div.style.opacity !== 'undefined' && this.div.style.opacity !== '') {\n        // See http://www.quirksmode.org/css/opacity.html\n        var opacity = parseFloat(this.div.style.opacity || '');\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        this.div.style.msFilter = '\"progid:DXImageTransform.Microsoft.Alpha(Opacity=' + opacity * 100 + ')\"';\n        this.div.style.filter = 'alpha(opacity=' + opacity * 100 + ')';\n      }\n      // Apply required styles\n      this.div.style.position = 'absolute';\n      this.div.style.visibility = 'hidden';\n      if (this.zIndex !== null) {\n        this.div.style.zIndex = this.zIndex + '';\n      }\n      if (!this.div.style.overflow) {\n        this.div.style.overflow = 'auto';\n      }\n    }\n  };\n  InfoBox.prototype.getBoxWidths = function () {\n    var bw = {\n      top: 0,\n      bottom: 0,\n      left: 0,\n      right: 0\n    };\n    if (!this.div) {\n      return bw;\n    }\n    if (document.defaultView) {\n      var ownerDocument = this.div.ownerDocument;\n      var computedStyle = ownerDocument && ownerDocument.defaultView ? ownerDocument.defaultView.getComputedStyle(this.div, '') : null;\n      if (computedStyle) {\n        // The computed styles are always in pixel units (good!)\n        bw.top = parseInt(computedStyle.borderTopWidth || '', 10) || 0;\n        bw.bottom = parseInt(computedStyle.borderBottomWidth || '', 10) || 0;\n        bw.left = parseInt(computedStyle.borderLeftWidth || '', 10) || 0;\n        bw.right = parseInt(computedStyle.borderRightWidth || '', 10) || 0;\n      }\n    } else if (\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    document.documentElement.currentStyle // MSIE\n    ) {\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore\n      var currentStyle = this.div.currentStyle;\n      if (currentStyle) {\n        // The current styles may not be in pixel units, but assume they are (bad!)\n        bw.top = parseInt(currentStyle.borderTopWidth || '', 10) || 0;\n        bw.bottom = parseInt(currentStyle.borderBottomWidth || '', 10) || 0;\n        bw.left = parseInt(currentStyle.borderLeftWidth || '', 10) || 0;\n        bw.right = parseInt(currentStyle.borderRightWidth || '', 10) || 0;\n      }\n    }\n    return bw;\n  };\n  InfoBox.prototype.onRemove = function () {\n    if (this.div && this.div.parentNode) {\n      this.div.parentNode.removeChild(this.div);\n      this.div = null;\n    }\n  };\n  InfoBox.prototype.draw = function () {\n    this.createInfoBoxDiv();\n    if (this.div) {\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore\n      var projection = this.getProjection();\n      var pixPosition = projection.fromLatLngToDivPixel(this.position);\n      if (pixPosition !== null) {\n        this.div.style.left = pixPosition.x + this.pixelOffset.width + 'px';\n        if (this.alignBottom) {\n          this.div.style.bottom = -(pixPosition.y + this.pixelOffset.height) + 'px';\n        } else {\n          this.div.style.top = pixPosition.y + this.pixelOffset.height + 'px';\n        }\n      }\n      if (this.isHidden) {\n        this.div.style.visibility = 'hidden';\n      } else {\n        this.div.style.visibility = 'visible';\n      }\n    }\n  };\n  InfoBox.prototype.setOptions = function (options) {\n    if (options === void 0) {\n      options = {};\n    }\n    if (typeof options.boxClass !== 'undefined') {\n      // Must be first\n      this.boxClass = options.boxClass;\n      this.setBoxStyle();\n    }\n    if (typeof options.boxStyle !== 'undefined') {\n      // Must be second\n      this.boxStyle = options.boxStyle;\n      this.setBoxStyle();\n    }\n    if (typeof options.content !== 'undefined') {\n      this.setContent(options.content);\n    }\n    if (typeof options.disableAutoPan !== 'undefined') {\n      this.disableAutoPan = options.disableAutoPan;\n    }\n    if (typeof options.maxWidth !== 'undefined') {\n      this.maxWidth = options.maxWidth;\n    }\n    if (typeof options.pixelOffset !== 'undefined') {\n      this.pixelOffset = options.pixelOffset;\n    }\n    if (typeof options.alignBottom !== 'undefined') {\n      this.alignBottom = options.alignBottom;\n    }\n    if (typeof options.position !== 'undefined') {\n      this.setPosition(options.position);\n    }\n    if (typeof options.zIndex !== 'undefined') {\n      this.setZIndex(options.zIndex);\n    }\n    if (typeof options.closeBoxMargin !== 'undefined') {\n      this.closeBoxMargin = options.closeBoxMargin;\n    }\n    if (typeof options.closeBoxURL !== 'undefined') {\n      this.closeBoxURL = options.closeBoxURL;\n    }\n    if (typeof options.infoBoxClearance !== 'undefined') {\n      this.infoBoxClearance = options.infoBoxClearance;\n    }\n    if (typeof options.isHidden !== 'undefined') {\n      this.isHidden = options.isHidden;\n    }\n    if (typeof options.visible !== 'undefined') {\n      this.isHidden = !options.visible;\n    }\n    if (typeof options.enableEventPropagation !== 'undefined') {\n      this.enableEventPropagation = options.enableEventPropagation;\n    }\n    if (this.div) {\n      this.draw();\n    }\n  };\n  InfoBox.prototype.setContent = function (content) {\n    this.content = content;\n    if (this.div) {\n      if (this.closeListener) {\n        google.maps.event.removeListener(this.closeListener);\n        this.closeListener = null;\n      }\n      // Odd code required to make things work with MSIE.\n      if (!this.fixedWidthSet) {\n        this.div.style.width = '';\n      }\n      if (typeof content === 'string') {\n        this.div.innerHTML = this.getCloseBoxImg() + content;\n      } else {\n        this.div.innerHTML = this.getCloseBoxImg();\n        this.div.appendChild(content);\n      }\n      // Perverse code required to make things work with MSIE.\n      // (Ensures the close box does, in fact, float to the right.)\n      if (!this.fixedWidthSet) {\n        this.div.style.width = this.div.offsetWidth + 'px';\n        if (typeof content === 'string') {\n          this.div.innerHTML = this.getCloseBoxImg() + content;\n        } else {\n          this.div.innerHTML = this.getCloseBoxImg();\n          this.div.appendChild(content);\n        }\n      }\n      this.addClickHandler();\n    }\n    /**\n     * This event is fired when the content of the InfoBox changes.\n     * @name InfoBox#content_changed\n     * @event\n     */\n    google.maps.event.trigger(this, 'content_changed');\n  };\n  InfoBox.prototype.setPosition = function (latLng) {\n    this.position = latLng;\n    if (this.div) {\n      this.draw();\n    }\n    /**\n     * This event is fired when the position of the InfoBox changes.\n     * @name InfoBox#position_changed\n     * @event\n     */\n    google.maps.event.trigger(this, 'position_changed');\n  };\n  InfoBox.prototype.setVisible = function (isVisible) {\n    this.isHidden = !isVisible;\n    if (this.div) {\n      this.div.style.visibility = this.isHidden ? 'hidden' : 'visible';\n    }\n  };\n  InfoBox.prototype.setZIndex = function (index) {\n    this.zIndex = index;\n    if (this.div) {\n      this.div.style.zIndex = index + '';\n    }\n    /**\n     * This event is fired when the zIndex of the InfoBox changes.\n     * @name InfoBox#zindex_changed\n     * @event\n     */\n    google.maps.event.trigger(this, 'zindex_changed');\n  };\n  InfoBox.prototype.getContent = function () {\n    return this.content;\n  };\n  InfoBox.prototype.getPosition = function () {\n    return this.position;\n  };\n  InfoBox.prototype.getZIndex = function () {\n    return this.zIndex;\n  };\n  InfoBox.prototype.getVisible = function () {\n    var map = this.getMap();\n    return typeof map === 'undefined' || map === null ? false : !this.isHidden;\n  };\n  InfoBox.prototype.show = function () {\n    this.isHidden = false;\n    if (this.div) {\n      this.div.style.visibility = 'visible';\n    }\n  };\n  InfoBox.prototype.hide = function () {\n    this.isHidden = true;\n    if (this.div) {\n      this.div.style.visibility = 'hidden';\n    }\n  };\n  InfoBox.prototype.open = function (map, anchor) {\n    var _this = this;\n    if (anchor) {\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore\n      this.position = anchor.getPosition();\n      this.moveListener = google.maps.event.addListener(anchor, 'position_changed', function () {\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        var position = anchor.getPosition();\n        _this.setPosition(position);\n      });\n      this.mapListener = google.maps.event.addListener(anchor, 'map_changed', function () {\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        _this.setMap(anchor.map);\n      });\n    }\n    this.setMap(map);\n    if (this.div) {\n      this.panBox();\n    }\n  };\n  InfoBox.prototype.close = function () {\n    if (this.closeListener) {\n      google.maps.event.removeListener(this.closeListener);\n      this.closeListener = null;\n    }\n    if (this.eventListeners) {\n      for (var _i = 0, _a = this.eventListeners; _i < _a.length; _i++) {\n        var eventListener = _a[_i];\n        google.maps.event.removeListener(eventListener);\n      }\n      this.eventListeners = null;\n    }\n    if (this.moveListener) {\n      google.maps.event.removeListener(this.moveListener);\n      this.moveListener = null;\n    }\n    if (this.mapListener) {\n      google.maps.event.removeListener(this.mapListener);\n      this.mapListener = null;\n    }\n    if (this.contextListener) {\n      google.maps.event.removeListener(this.contextListener);\n      this.contextListener = null;\n    }\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    this.setMap(null);\n  };\n  InfoBox.prototype.extend = function (obj1, obj2) {\n    return function applyExtend(object) {\n      for (var property in object.prototype) {\n        if (!Object.prototype.hasOwnProperty.call(this, property)) {\n          // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n          // @ts-ignore\n          this.prototype[property] = object.prototype[property];\n        }\n      }\n      return this;\n    }.apply(obj1, [obj2]);\n  };\n  return InfoBox;\n}();\n\nvar _excluded = [\"position\"],\n  _excluded2 = [\"position\"];\nfunction ownKeys$b(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread$b(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys$b(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$b(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nvar eventMap$d = {\n  onCloseClick: 'closeclick',\n  onContentChanged: 'content_changed',\n  onDomReady: 'domready',\n  onPositionChanged: 'position_changed',\n  onZindexChanged: 'zindex_changed'\n};\nvar updaterMap$d = {\n  options(instance, options) {\n    instance.setOptions(options);\n  },\n  position(instance, position) {\n    if (position instanceof google.maps.LatLng) {\n      instance.setPosition(position);\n    } else {\n      instance.setPosition(new google.maps.LatLng(position.lat, position.lng));\n    }\n  },\n  visible(instance, visible) {\n    instance.setVisible(visible);\n  },\n  zIndex(instance, zIndex) {\n    instance.setZIndex(zIndex);\n  }\n};\nvar defaultOptions$3 = {};\nfunction InfoBoxFunctional(_ref) {\n  var {\n    children,\n    anchor,\n    options,\n    position,\n    zIndex,\n    onCloseClick,\n    onDomReady,\n    onContentChanged,\n    onPositionChanged,\n    onZindexChanged,\n    onLoad,\n    onUnmount\n  } = _ref;\n  var map = useContext(MapContext);\n  var [instance, setInstance] = useState(null);\n  var [closeClickListener, setCloseClickListener] = useState(null);\n  var [domReadyClickListener, setDomReadyClickListener] = useState(null);\n  var [contentChangedClickListener, setContentChangedClickListener] = useState(null);\n  var [positionChangedClickListener, setPositionChangedClickListener] = useState(null);\n  var [zIndexChangedClickListener, setZindexChangedClickListener] = useState(null);\n  var containerElementRef = useRef(null);\n  // Order does matter\n  useEffect(() => {\n    if (map && instance !== null) {\n      instance.close();\n      if (anchor) {\n        instance.open(map, anchor);\n      } else if (instance.getPosition()) {\n        instance.open(map);\n      }\n    }\n  }, [map, instance, anchor]);\n  useEffect(() => {\n    if (options && instance !== null) {\n      instance.setOptions(options);\n    }\n  }, [instance, options]);\n  useEffect(() => {\n    if (position && instance !== null) {\n      var positionLatLng = position instanceof google.maps.LatLng ? position :\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore\n      new google.maps.LatLng(position.lat, position.lng);\n      instance.setPosition(positionLatLng);\n    }\n  }, [position]);\n  useEffect(() => {\n    if (typeof zIndex === 'number' && instance !== null) {\n      instance.setZIndex(zIndex);\n    }\n  }, [zIndex]);\n  useEffect(() => {\n    if (instance && onCloseClick) {\n      if (closeClickListener !== null) {\n        google.maps.event.removeListener(closeClickListener);\n      }\n      setCloseClickListener(google.maps.event.addListener(instance, 'closeclick', onCloseClick));\n    }\n  }, [onCloseClick]);\n  useEffect(() => {\n    if (instance && onDomReady) {\n      if (domReadyClickListener !== null) {\n        google.maps.event.removeListener(domReadyClickListener);\n      }\n      setDomReadyClickListener(google.maps.event.addListener(instance, 'domready', onDomReady));\n    }\n  }, [onDomReady]);\n  useEffect(() => {\n    if (instance && onContentChanged) {\n      if (contentChangedClickListener !== null) {\n        google.maps.event.removeListener(contentChangedClickListener);\n      }\n      setContentChangedClickListener(google.maps.event.addListener(instance, 'content_changed', onContentChanged));\n    }\n  }, [onContentChanged]);\n  useEffect(() => {\n    if (instance && onPositionChanged) {\n      if (positionChangedClickListener !== null) {\n        google.maps.event.removeListener(positionChangedClickListener);\n      }\n      setPositionChangedClickListener(google.maps.event.addListener(instance, 'position_changed', onPositionChanged));\n    }\n  }, [onPositionChanged]);\n  useEffect(() => {\n    if (instance && onZindexChanged) {\n      if (zIndexChangedClickListener !== null) {\n        google.maps.event.removeListener(zIndexChangedClickListener);\n      }\n      setZindexChangedClickListener(google.maps.event.addListener(instance, 'zindex_changed', onZindexChanged));\n    }\n  }, [onZindexChanged]);\n  useEffect(() => {\n    if (map) {\n      var _ref2 = options || defaultOptions$3,\n        {\n          position: _position\n        } = _ref2,\n        infoBoxOptions = _objectWithoutProperties(_ref2, _excluded);\n      var positionLatLng;\n      if (_position && !(_position instanceof google.maps.LatLng)) {\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        positionLatLng = new google.maps.LatLng(_position.lat, _position.lng);\n      }\n      var infoBox = new InfoBox(_objectSpread$b(_objectSpread$b({}, infoBoxOptions), positionLatLng ? {\n        position: positionLatLng\n      } : {}));\n      containerElementRef.current = document.createElement('div');\n      setInstance(infoBox);\n      if (onCloseClick) {\n        setCloseClickListener(google.maps.event.addListener(infoBox, 'closeclick', onCloseClick));\n      }\n      if (onDomReady) {\n        setDomReadyClickListener(google.maps.event.addListener(infoBox, 'domready', onDomReady));\n      }\n      if (onContentChanged) {\n        setContentChangedClickListener(google.maps.event.addListener(infoBox, 'content_changed', onContentChanged));\n      }\n      if (onPositionChanged) {\n        setPositionChangedClickListener(google.maps.event.addListener(infoBox, 'position_changed', onPositionChanged));\n      }\n      if (onZindexChanged) {\n        setZindexChangedClickListener(google.maps.event.addListener(infoBox, 'zindex_changed', onZindexChanged));\n      }\n      infoBox.setContent(containerElementRef.current);\n      if (anchor) {\n        infoBox.open(map, anchor);\n      } else if (infoBox.getPosition()) {\n        infoBox.open(map);\n      } else {\n        invariant(false, 'You must provide either an anchor or a position prop for <InfoBox>.');\n      }\n      if (onLoad) {\n        onLoad(infoBox);\n      }\n    }\n    return () => {\n      if (instance !== null) {\n        if (closeClickListener) {\n          google.maps.event.removeListener(closeClickListener);\n        }\n        if (contentChangedClickListener) {\n          google.maps.event.removeListener(contentChangedClickListener);\n        }\n        if (domReadyClickListener) {\n          google.maps.event.removeListener(domReadyClickListener);\n        }\n        if (positionChangedClickListener) {\n          google.maps.event.removeListener(positionChangedClickListener);\n        }\n        if (zIndexChangedClickListener) {\n          google.maps.event.removeListener(zIndexChangedClickListener);\n        }\n        if (onUnmount) {\n          onUnmount(instance);\n        }\n        instance.close();\n      }\n    };\n  }, []);\n  return containerElementRef.current ? createPortal(Children.only(children), containerElementRef.current) : null;\n}\nvar InfoBoxF = memo(InfoBoxFunctional);\nclass InfoBoxComponent extends PureComponent {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"registeredEvents\", []);\n    _defineProperty(this, \"containerElement\", null);\n    _defineProperty(this, \"state\", {\n      infoBox: null\n    });\n    _defineProperty(this, \"open\", (infoBox, anchor) => {\n      if (anchor) {\n        if (this.context !== null) {\n          infoBox.open(this.context, anchor);\n        }\n      } else if (infoBox.getPosition()) {\n        if (this.context !== null) {\n          infoBox.open(this.context);\n        }\n      } else {\n        invariant(false, 'You must provide either an anchor or a position prop for <InfoBox>.');\n      }\n    });\n    _defineProperty(this, \"setInfoBoxCallback\", () => {\n      if (this.state.infoBox !== null && this.containerElement !== null) {\n        this.state.infoBox.setContent(this.containerElement);\n        this.open(this.state.infoBox, this.props.anchor);\n        if (this.props.onLoad) {\n          this.props.onLoad(this.state.infoBox);\n        }\n      }\n    });\n  }\n  componentDidMount() {\n    var _ref3 = this.props.options || {},\n      {\n        position\n      } = _ref3,\n      infoBoxOptions = _objectWithoutProperties(_ref3, _excluded2);\n    var positionLatLng;\n    if (position && !(position instanceof google.maps.LatLng)) {\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore\n      positionLatLng = new google.maps.LatLng(position.lat, position.lng);\n    }\n    var infoBox = new InfoBox(_objectSpread$b(_objectSpread$b({}, infoBoxOptions), positionLatLng ? {\n      position: positionLatLng\n    } : {}));\n    this.containerElement = document.createElement('div');\n    this.registeredEvents = applyUpdatersToPropsAndRegisterEvents({\n      updaterMap: updaterMap$d,\n      eventMap: eventMap$d,\n      prevProps: {},\n      nextProps: this.props,\n      instance: infoBox\n    });\n    this.setState({\n      infoBox\n    }, this.setInfoBoxCallback);\n  }\n  componentDidUpdate(prevProps) {\n    var {\n      infoBox\n    } = this.state;\n    if (infoBox !== null) {\n      unregisterEvents(this.registeredEvents);\n      this.registeredEvents = applyUpdatersToPropsAndRegisterEvents({\n        updaterMap: updaterMap$d,\n        eventMap: eventMap$d,\n        prevProps,\n        nextProps: this.props,\n        instance: infoBox\n      });\n    }\n  }\n  componentWillUnmount() {\n    var {\n      onUnmount\n    } = this.props;\n    var {\n      infoBox\n    } = this.state;\n    if (infoBox !== null) {\n      if (onUnmount) {\n        onUnmount(infoBox);\n      }\n      unregisterEvents(this.registeredEvents);\n      infoBox.close();\n    }\n  }\n  render() {\n    return this.containerElement ? createPortal(Children.only(this.props.children), this.containerElement) : null;\n  }\n}\n_defineProperty(InfoBoxComponent, \"contextType\", MapContext);\n\nvar fastDeepEqual;\nvar hasRequiredFastDeepEqual;\nfunction requireFastDeepEqual() {\n  if (hasRequiredFastDeepEqual) return fastDeepEqual;\n  hasRequiredFastDeepEqual = 1;\n\n  // do not edit .js files directly - edit src/index.jst\n\n  fastDeepEqual = function equal(a, b) {\n    if (a === b) return true;\n    if (a && b && typeof a == 'object' && typeof b == 'object') {\n      if (a.constructor !== b.constructor) return false;\n      var length, i, keys;\n      if (Array.isArray(a)) {\n        length = a.length;\n        if (length != b.length) return false;\n        for (i = length; i-- !== 0;) if (!equal(a[i], b[i])) return false;\n        return true;\n      }\n      if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n      if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n      if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n      keys = Object.keys(a);\n      length = keys.length;\n      if (length !== Object.keys(b).length) return false;\n      for (i = length; i-- !== 0;) if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n      for (i = length; i-- !== 0;) {\n        var key = keys[i];\n        if (!equal(a[key], b[key])) return false;\n      }\n      return true;\n    }\n\n    // true if both NaN, false otherwise\n    return a !== a && b !== b;\n  };\n  return fastDeepEqual;\n}\n\nvar fastDeepEqualExports = requireFastDeepEqual();\nvar equal = /*@__PURE__*/getDefaultExportFromCjs$1(fastDeepEqualExports);\n\nvar ARRAY_TYPES = [Int8Array, Uint8Array, Uint8ClampedArray, Int16Array, Uint16Array, Int32Array, Uint32Array, Float32Array, Float64Array];\n\n/** @typedef {Int8ArrayConstructor | Uint8ArrayConstructor | Uint8ClampedArrayConstructor | Int16ArrayConstructor | Uint16ArrayConstructor | Int32ArrayConstructor | Uint32ArrayConstructor | Float32ArrayConstructor | Float64ArrayConstructor} TypedArrayConstructor */\n\nvar VERSION = 1; // serialized format version\nvar HEADER_SIZE = 8;\nclass KDBush {\n  /**\n   * Creates an index from raw `ArrayBuffer` data.\n   * @param {ArrayBuffer} data\n   */\n  static from(data) {\n    if (!(data instanceof ArrayBuffer)) {\n      throw new Error('Data must be an instance of ArrayBuffer.');\n    }\n    var [magic, versionAndType] = new Uint8Array(data, 0, 2);\n    if (magic !== 0xdb) {\n      throw new Error('Data does not appear to be in a KDBush format.');\n    }\n    var version = versionAndType >> 4;\n    if (version !== VERSION) {\n      throw new Error(\"Got v\".concat(version, \" data when expected v\").concat(VERSION, \".\"));\n    }\n    var ArrayType = ARRAY_TYPES[versionAndType & 0x0f];\n    if (!ArrayType) {\n      throw new Error('Unrecognized array type.');\n    }\n    var [nodeSize] = new Uint16Array(data, 2, 1);\n    var [numItems] = new Uint32Array(data, 4, 1);\n    return new KDBush(numItems, nodeSize, ArrayType, data);\n  }\n\n  /**\n   * Creates an index that will hold a given number of items.\n   * @param {number} numItems\n   * @param {number} [nodeSize=64] Size of the KD-tree node (64 by default).\n   * @param {TypedArrayConstructor} [ArrayType=Float64Array] The array type used for coordinates storage (`Float64Array` by default).\n   * @param {ArrayBuffer} [data] (For internal use only)\n   */\n  constructor(numItems) {\n    var nodeSize = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 64;\n    var ArrayType = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : Float64Array;\n    var data = arguments.length > 3 ? arguments[3] : undefined;\n    if (isNaN(numItems) || numItems < 0) throw new Error(\"Unpexpected numItems value: \".concat(numItems, \".\"));\n    this.numItems = +numItems;\n    this.nodeSize = Math.min(Math.max(+nodeSize, 2), 65535);\n    this.ArrayType = ArrayType;\n    this.IndexArrayType = numItems < 65536 ? Uint16Array : Uint32Array;\n    var arrayTypeIndex = ARRAY_TYPES.indexOf(this.ArrayType);\n    var coordsByteSize = numItems * 2 * this.ArrayType.BYTES_PER_ELEMENT;\n    var idsByteSize = numItems * this.IndexArrayType.BYTES_PER_ELEMENT;\n    var padCoords = (8 - idsByteSize % 8) % 8;\n    if (arrayTypeIndex < 0) {\n      throw new Error(\"Unexpected typed array class: \".concat(ArrayType, \".\"));\n    }\n    if (data && data instanceof ArrayBuffer) {\n      // reconstruct an index from a buffer\n      this.data = data;\n      this.ids = new this.IndexArrayType(this.data, HEADER_SIZE, numItems);\n      this.coords = new this.ArrayType(this.data, HEADER_SIZE + idsByteSize + padCoords, numItems * 2);\n      this._pos = numItems * 2;\n      this._finished = true;\n    } else {\n      // initialize a new index\n      this.data = new ArrayBuffer(HEADER_SIZE + coordsByteSize + idsByteSize + padCoords);\n      this.ids = new this.IndexArrayType(this.data, HEADER_SIZE, numItems);\n      this.coords = new this.ArrayType(this.data, HEADER_SIZE + idsByteSize + padCoords, numItems * 2);\n      this._pos = 0;\n      this._finished = false;\n\n      // set header\n      new Uint8Array(this.data, 0, 2).set([0xdb, (VERSION << 4) + arrayTypeIndex]);\n      new Uint16Array(this.data, 2, 1)[0] = nodeSize;\n      new Uint32Array(this.data, 4, 1)[0] = numItems;\n    }\n  }\n\n  /**\n   * Add a point to the index.\n   * @param {number} x\n   * @param {number} y\n   * @returns {number} An incremental index associated with the added item (starting from `0`).\n   */\n  add(x, y) {\n    var index = this._pos >> 1;\n    this.ids[index] = index;\n    this.coords[this._pos++] = x;\n    this.coords[this._pos++] = y;\n    return index;\n  }\n\n  /**\n   * Perform indexing of the added points.\n   */\n  finish() {\n    var numAdded = this._pos >> 1;\n    if (numAdded !== this.numItems) {\n      throw new Error(\"Added \".concat(numAdded, \" items when expected \").concat(this.numItems, \".\"));\n    }\n    // kd-sort both arrays for efficient search\n    sort(this.ids, this.coords, this.nodeSize, 0, this.numItems - 1, 0);\n    this._finished = true;\n    return this;\n  }\n\n  /**\n   * Search the index for items within a given bounding box.\n   * @param {number} minX\n   * @param {number} minY\n   * @param {number} maxX\n   * @param {number} maxY\n   * @returns {number[]} An array of indices correponding to the found items.\n   */\n  range(minX, minY, maxX, maxY) {\n    if (!this._finished) throw new Error('Data not yet indexed - call index.finish().');\n    var {\n      ids,\n      coords,\n      nodeSize\n    } = this;\n    var stack = [0, ids.length - 1, 0];\n    var result = [];\n\n    // recursively search for items in range in the kd-sorted arrays\n    while (stack.length) {\n      var axis = stack.pop() || 0;\n      var right = stack.pop() || 0;\n      var left = stack.pop() || 0;\n\n      // if we reached \"tree node\", search linearly\n      if (right - left <= nodeSize) {\n        for (var i = left; i <= right; i++) {\n          var _x = coords[2 * i];\n          var _y = coords[2 * i + 1];\n          if (_x >= minX && _x <= maxX && _y >= minY && _y <= maxY) result.push(ids[i]);\n        }\n        continue;\n      }\n\n      // otherwise find the middle index\n      var m = left + right >> 1;\n\n      // include the middle item if it's in range\n      var x = coords[2 * m];\n      var y = coords[2 * m + 1];\n      if (x >= minX && x <= maxX && y >= minY && y <= maxY) result.push(ids[m]);\n\n      // queue search in halves that intersect the query\n      if (axis === 0 ? minX <= x : minY <= y) {\n        stack.push(left);\n        stack.push(m - 1);\n        stack.push(1 - axis);\n      }\n      if (axis === 0 ? maxX >= x : maxY >= y) {\n        stack.push(m + 1);\n        stack.push(right);\n        stack.push(1 - axis);\n      }\n    }\n    return result;\n  }\n\n  /**\n   * Search the index for items within a given radius.\n   * @param {number} qx\n   * @param {number} qy\n   * @param {number} r Query radius.\n   * @returns {number[]} An array of indices correponding to the found items.\n   */\n  within(qx, qy, r) {\n    if (!this._finished) throw new Error('Data not yet indexed - call index.finish().');\n    var {\n      ids,\n      coords,\n      nodeSize\n    } = this;\n    var stack = [0, ids.length - 1, 0];\n    var result = [];\n    var r2 = r * r;\n\n    // recursively search for items within radius in the kd-sorted arrays\n    while (stack.length) {\n      var axis = stack.pop() || 0;\n      var right = stack.pop() || 0;\n      var left = stack.pop() || 0;\n\n      // if we reached \"tree node\", search linearly\n      if (right - left <= nodeSize) {\n        for (var i = left; i <= right; i++) {\n          if (sqDist(coords[2 * i], coords[2 * i + 1], qx, qy) <= r2) result.push(ids[i]);\n        }\n        continue;\n      }\n\n      // otherwise find the middle index\n      var m = left + right >> 1;\n\n      // include the middle item if it's in range\n      var x = coords[2 * m];\n      var y = coords[2 * m + 1];\n      if (sqDist(x, y, qx, qy) <= r2) result.push(ids[m]);\n\n      // queue search in halves that intersect the query\n      if (axis === 0 ? qx - r <= x : qy - r <= y) {\n        stack.push(left);\n        stack.push(m - 1);\n        stack.push(1 - axis);\n      }\n      if (axis === 0 ? qx + r >= x : qy + r >= y) {\n        stack.push(m + 1);\n        stack.push(right);\n        stack.push(1 - axis);\n      }\n    }\n    return result;\n  }\n}\n\n/**\n * @param {Uint16Array | Uint32Array} ids\n * @param {InstanceType<TypedArrayConstructor>} coords\n * @param {number} nodeSize\n * @param {number} left\n * @param {number} right\n * @param {number} axis\n */\nfunction sort(ids, coords, nodeSize, left, right, axis) {\n  if (right - left <= nodeSize) return;\n  var m = left + right >> 1; // middle index\n\n  // sort ids and coords around the middle index so that the halves lie\n  // either left/right or top/bottom correspondingly (taking turns)\n  select(ids, coords, m, left, right, axis);\n\n  // recursively kd-sort first half and second half on the opposite axis\n  sort(ids, coords, nodeSize, left, m - 1, 1 - axis);\n  sort(ids, coords, nodeSize, m + 1, right, 1 - axis);\n}\n\n/**\n * Custom Floyd-Rivest selection algorithm: sort ids and coords so that\n * [left..k-1] items are smaller than k-th item (on either x or y axis)\n * @param {Uint16Array | Uint32Array} ids\n * @param {InstanceType<TypedArrayConstructor>} coords\n * @param {number} k\n * @param {number} left\n * @param {number} right\n * @param {number} axis\n */\nfunction select(ids, coords, k, left, right, axis) {\n  while (right > left) {\n    if (right - left > 600) {\n      var n = right - left + 1;\n      var m = k - left + 1;\n      var z = Math.log(n);\n      var s = 0.5 * Math.exp(2 * z / 3);\n      var sd = 0.5 * Math.sqrt(z * s * (n - s) / n) * (m - n / 2 < 0 ? -1 : 1);\n      var newLeft = Math.max(left, Math.floor(k - m * s / n + sd));\n      var newRight = Math.min(right, Math.floor(k + (n - m) * s / n + sd));\n      select(ids, coords, k, newLeft, newRight, axis);\n    }\n    var t = coords[2 * k + axis];\n    var i = left;\n    var j = right;\n    swapItem(ids, coords, left, k);\n    if (coords[2 * right + axis] > t) swapItem(ids, coords, left, right);\n    while (i < j) {\n      swapItem(ids, coords, i, j);\n      i++;\n      j--;\n      while (coords[2 * i + axis] < t) i++;\n      while (coords[2 * j + axis] > t) j--;\n    }\n    if (coords[2 * left + axis] === t) swapItem(ids, coords, left, j);else {\n      j++;\n      swapItem(ids, coords, j, right);\n    }\n    if (j <= k) left = j + 1;\n    if (k <= j) right = j - 1;\n  }\n}\n\n/**\n * @param {Uint16Array | Uint32Array} ids\n * @param {InstanceType<TypedArrayConstructor>} coords\n * @param {number} i\n * @param {number} j\n */\nfunction swapItem(ids, coords, i, j) {\n  swap(ids, i, j);\n  swap(coords, 2 * i, 2 * j);\n  swap(coords, 2 * i + 1, 2 * j + 1);\n}\n\n/**\n * @param {InstanceType<TypedArrayConstructor>} arr\n * @param {number} i\n * @param {number} j\n */\nfunction swap(arr, i, j) {\n  var tmp = arr[i];\n  arr[i] = arr[j];\n  arr[j] = tmp;\n}\n\n/**\n * @param {number} ax\n * @param {number} ay\n * @param {number} bx\n * @param {number} by\n */\nfunction sqDist(ax, ay, bx, by) {\n  var dx = ax - bx;\n  var dy = ay - by;\n  return dx * dx + dy * dy;\n}\n\nvar defaultOptions$2 = {\n  minZoom: 0,\n  // min zoom to generate clusters on\n  maxZoom: 16,\n  // max zoom level to cluster the points on\n  minPoints: 2,\n  // minimum points to form a cluster\n  radius: 40,\n  // cluster radius in pixels\n  extent: 512,\n  // tile extent (radius is calculated relative to it)\n  nodeSize: 64,\n  // size of the KD-tree leaf node, affects performance\n  log: false,\n  // whether to log timing info\n\n  // whether to generate numeric ids for input features (in vector tiles)\n  generateId: false,\n  // a reduce function for calculating custom cluster properties\n  reduce: null,\n  // (accumulated, props) => { accumulated.sum += props.sum; }\n\n  // properties to use for individual points when running the reducer\n  map: props => props // props => ({sum: props.my_value})\n};\nvar fround = Math.fround || (tmp => x => {\n  tmp[0] = +x;\n  return tmp[0];\n})(new Float32Array(1));\nvar OFFSET_ZOOM = 2;\nvar OFFSET_ID = 3;\nvar OFFSET_PARENT = 4;\nvar OFFSET_NUM = 5;\nvar OFFSET_PROP = 6;\nclass Supercluster {\n  constructor(options) {\n    this.options = Object.assign(Object.create(defaultOptions$2), options);\n    this.trees = new Array(this.options.maxZoom + 1);\n    this.stride = this.options.reduce ? 7 : 6;\n    this.clusterProps = [];\n  }\n  load(points) {\n    var {\n      log,\n      minZoom,\n      maxZoom\n    } = this.options;\n    if (log) console.time('total time');\n    var timerId = \"prepare \".concat(points.length, \" points\");\n    if (log) console.time(timerId);\n    this.points = points;\n\n    // generate a cluster object for each point and index input points into a KD-tree\n    var data = [];\n    for (var i = 0; i < points.length; i++) {\n      var p = points[i];\n      if (!p.geometry) continue;\n      var [lng, lat] = p.geometry.coordinates;\n      var x = fround(lngX(lng));\n      var y = fround(latY(lat));\n      // store internal point/cluster data in flat numeric arrays for performance\n      data.push(x, y,\n      // projected point coordinates\n      Infinity,\n      // the last zoom the point was processed at\n      i,\n      // index of the source feature in the original input array\n      -1,\n      // parent cluster id\n      1 // number of points in a cluster\n      );\n      if (this.options.reduce) data.push(0); // noop\n    }\n    var tree = this.trees[maxZoom + 1] = this._createTree(data);\n    if (log) console.timeEnd(timerId);\n\n    // cluster points on max zoom, then cluster the results on previous zoom, etc.;\n    // results in a cluster hierarchy across zoom levels\n    for (var z = maxZoom; z >= minZoom; z--) {\n      var now = +Date.now();\n\n      // create a new set of clusters for the zoom and index them with a KD-tree\n      tree = this.trees[z] = this._createTree(this._cluster(tree, z));\n      if (log) console.log('z%d: %d clusters in %dms', z, tree.numItems, +Date.now() - now);\n    }\n    if (log) console.timeEnd('total time');\n    return this;\n  }\n  getClusters(bbox, zoom) {\n    var minLng = ((bbox[0] + 180) % 360 + 360) % 360 - 180;\n    var minLat = Math.max(-90, Math.min(90, bbox[1]));\n    var maxLng = bbox[2] === 180 ? 180 : ((bbox[2] + 180) % 360 + 360) % 360 - 180;\n    var maxLat = Math.max(-90, Math.min(90, bbox[3]));\n    if (bbox[2] - bbox[0] >= 360) {\n      minLng = -180;\n      maxLng = 180;\n    } else if (minLng > maxLng) {\n      var easternHem = this.getClusters([minLng, minLat, 180, maxLat], zoom);\n      var westernHem = this.getClusters([-180, minLat, maxLng, maxLat], zoom);\n      return easternHem.concat(westernHem);\n    }\n    var tree = this.trees[this._limitZoom(zoom)];\n    var ids = tree.range(lngX(minLng), latY(maxLat), lngX(maxLng), latY(minLat));\n    var data = tree.data;\n    var clusters = [];\n    for (var id of ids) {\n      var k = this.stride * id;\n      clusters.push(data[k + OFFSET_NUM] > 1 ? getClusterJSON(data, k, this.clusterProps) : this.points[data[k + OFFSET_ID]]);\n    }\n    return clusters;\n  }\n  getChildren(clusterId) {\n    var originId = this._getOriginId(clusterId);\n    var originZoom = this._getOriginZoom(clusterId);\n    var errorMsg = 'No cluster with the specified id.';\n    var tree = this.trees[originZoom];\n    if (!tree) throw new Error(errorMsg);\n    var data = tree.data;\n    if (originId * this.stride >= data.length) throw new Error(errorMsg);\n    var r = this.options.radius / (this.options.extent * Math.pow(2, originZoom - 1));\n    var x = data[originId * this.stride];\n    var y = data[originId * this.stride + 1];\n    var ids = tree.within(x, y, r);\n    var children = [];\n    for (var id of ids) {\n      var k = id * this.stride;\n      if (data[k + OFFSET_PARENT] === clusterId) {\n        children.push(data[k + OFFSET_NUM] > 1 ? getClusterJSON(data, k, this.clusterProps) : this.points[data[k + OFFSET_ID]]);\n      }\n    }\n    if (children.length === 0) throw new Error(errorMsg);\n    return children;\n  }\n  getLeaves(clusterId, limit, offset) {\n    limit = limit || 10;\n    offset = offset || 0;\n    var leaves = [];\n    this._appendLeaves(leaves, clusterId, limit, offset, 0);\n    return leaves;\n  }\n  getTile(z, x, y) {\n    var tree = this.trees[this._limitZoom(z)];\n    var z2 = Math.pow(2, z);\n    var {\n      extent,\n      radius\n    } = this.options;\n    var p = radius / extent;\n    var top = (y - p) / z2;\n    var bottom = (y + 1 + p) / z2;\n    var tile = {\n      features: []\n    };\n    this._addTileFeatures(tree.range((x - p) / z2, top, (x + 1 + p) / z2, bottom), tree.data, x, y, z2, tile);\n    if (x === 0) {\n      this._addTileFeatures(tree.range(1 - p / z2, top, 1, bottom), tree.data, z2, y, z2, tile);\n    }\n    if (x === z2 - 1) {\n      this._addTileFeatures(tree.range(0, top, p / z2, bottom), tree.data, -1, y, z2, tile);\n    }\n    return tile.features.length ? tile : null;\n  }\n  getClusterExpansionZoom(clusterId) {\n    var expansionZoom = this._getOriginZoom(clusterId) - 1;\n    while (expansionZoom <= this.options.maxZoom) {\n      var children = this.getChildren(clusterId);\n      expansionZoom++;\n      if (children.length !== 1) break;\n      clusterId = children[0].properties.cluster_id;\n    }\n    return expansionZoom;\n  }\n  _appendLeaves(result, clusterId, limit, offset, skipped) {\n    var children = this.getChildren(clusterId);\n    for (var child of children) {\n      var props = child.properties;\n      if (props && props.cluster) {\n        if (skipped + props.point_count <= offset) {\n          // skip the whole cluster\n          skipped += props.point_count;\n        } else {\n          // enter the cluster\n          skipped = this._appendLeaves(result, props.cluster_id, limit, offset, skipped);\n          // exit the cluster\n        }\n      } else if (skipped < offset) {\n        // skip a single point\n        skipped++;\n      } else {\n        // add a single point\n        result.push(child);\n      }\n      if (result.length === limit) break;\n    }\n    return skipped;\n  }\n  _createTree(data) {\n    var tree = new KDBush(data.length / this.stride | 0, this.options.nodeSize, Float32Array);\n    for (var i = 0; i < data.length; i += this.stride) tree.add(data[i], data[i + 1]);\n    tree.finish();\n    tree.data = data;\n    return tree;\n  }\n  _addTileFeatures(ids, data, x, y, z2, tile) {\n    for (var i of ids) {\n      var k = i * this.stride;\n      var isCluster = data[k + OFFSET_NUM] > 1;\n      var tags = void 0,\n        px = void 0,\n        py = void 0;\n      if (isCluster) {\n        tags = getClusterProperties(data, k, this.clusterProps);\n        px = data[k];\n        py = data[k + 1];\n      } else {\n        var p = this.points[data[k + OFFSET_ID]];\n        tags = p.properties;\n        var [lng, lat] = p.geometry.coordinates;\n        px = lngX(lng);\n        py = latY(lat);\n      }\n      var f = {\n        type: 1,\n        geometry: [[Math.round(this.options.extent * (px * z2 - x)), Math.round(this.options.extent * (py * z2 - y))]],\n        tags\n      };\n\n      // assign id\n      var id = void 0;\n      if (isCluster || this.options.generateId) {\n        // optionally generate id for points\n        id = data[k + OFFSET_ID];\n      } else {\n        // keep id if already assigned\n        id = this.points[data[k + OFFSET_ID]].id;\n      }\n      if (id !== undefined) f.id = id;\n      tile.features.push(f);\n    }\n  }\n  _limitZoom(z) {\n    return Math.max(this.options.minZoom, Math.min(Math.floor(+z), this.options.maxZoom + 1));\n  }\n  _cluster(tree, zoom) {\n    var {\n      radius,\n      extent,\n      reduce,\n      minPoints\n    } = this.options;\n    var r = radius / (extent * Math.pow(2, zoom));\n    var data = tree.data;\n    var nextData = [];\n    var stride = this.stride;\n\n    // loop through each point\n    for (var i = 0; i < data.length; i += stride) {\n      // if we've already visited the point at this zoom level, skip it\n      if (data[i + OFFSET_ZOOM] <= zoom) continue;\n      data[i + OFFSET_ZOOM] = zoom;\n\n      // find all nearby points\n      var x = data[i];\n      var y = data[i + 1];\n      var neighborIds = tree.within(data[i], data[i + 1], r);\n      var numPointsOrigin = data[i + OFFSET_NUM];\n      var numPoints = numPointsOrigin;\n\n      // count the number of points in a potential cluster\n      for (var neighborId of neighborIds) {\n        var k = neighborId * stride;\n        // filter out neighbors that are already processed\n        if (data[k + OFFSET_ZOOM] > zoom) numPoints += data[k + OFFSET_NUM];\n      }\n\n      // if there were neighbors to merge, and there are enough points to form a cluster\n      if (numPoints > numPointsOrigin && numPoints >= minPoints) {\n        var wx = x * numPointsOrigin;\n        var wy = y * numPointsOrigin;\n        var clusterProperties = void 0;\n        var clusterPropIndex = -1;\n\n        // encode both zoom and point index on which the cluster originated -- offset by total length of features\n        var id = ((i / stride | 0) << 5) + (zoom + 1) + this.points.length;\n        for (var _neighborId of neighborIds) {\n          var _k = _neighborId * stride;\n          if (data[_k + OFFSET_ZOOM] <= zoom) continue;\n          data[_k + OFFSET_ZOOM] = zoom; // save the zoom (so it doesn't get processed twice)\n\n          var numPoints2 = data[_k + OFFSET_NUM];\n          wx += data[_k] * numPoints2; // accumulate coordinates for calculating weighted center\n          wy += data[_k + 1] * numPoints2;\n          data[_k + OFFSET_PARENT] = id;\n          if (reduce) {\n            if (!clusterProperties) {\n              clusterProperties = this._map(data, i, true);\n              clusterPropIndex = this.clusterProps.length;\n              this.clusterProps.push(clusterProperties);\n            }\n            reduce(clusterProperties, this._map(data, _k));\n          }\n        }\n        data[i + OFFSET_PARENT] = id;\n        nextData.push(wx / numPoints, wy / numPoints, Infinity, id, -1, numPoints);\n        if (reduce) nextData.push(clusterPropIndex);\n      } else {\n        // left points as unclustered\n        for (var j = 0; j < stride; j++) nextData.push(data[i + j]);\n        if (numPoints > 1) {\n          for (var _neighborId2 of neighborIds) {\n            var _k2 = _neighborId2 * stride;\n            if (data[_k2 + OFFSET_ZOOM] <= zoom) continue;\n            data[_k2 + OFFSET_ZOOM] = zoom;\n            for (var _j = 0; _j < stride; _j++) nextData.push(data[_k2 + _j]);\n          }\n        }\n      }\n    }\n    return nextData;\n  }\n\n  // get index of the point from which the cluster originated\n  _getOriginId(clusterId) {\n    return clusterId - this.points.length >> 5;\n  }\n\n  // get zoom of the point from which the cluster originated\n  _getOriginZoom(clusterId) {\n    return (clusterId - this.points.length) % 32;\n  }\n  _map(data, i, clone) {\n    if (data[i + OFFSET_NUM] > 1) {\n      var props = this.clusterProps[data[i + OFFSET_PROP]];\n      return clone ? Object.assign({}, props) : props;\n    }\n    var original = this.points[data[i + OFFSET_ID]].properties;\n    var result = this.options.map(original);\n    return clone && result === original ? Object.assign({}, result) : result;\n  }\n}\nfunction getClusterJSON(data, i, clusterProps) {\n  return {\n    type: 'Feature',\n    id: data[i + OFFSET_ID],\n    properties: getClusterProperties(data, i, clusterProps),\n    geometry: {\n      type: 'Point',\n      coordinates: [xLng(data[i]), yLat(data[i + 1])]\n    }\n  };\n}\nfunction getClusterProperties(data, i, clusterProps) {\n  var count = data[i + OFFSET_NUM];\n  var abbrev = count >= 10000 ? \"\".concat(Math.round(count / 1000), \"k\") : count >= 1000 ? \"\".concat(Math.round(count / 100) / 10, \"k\") : count;\n  var propIndex = data[i + OFFSET_PROP];\n  var properties = propIndex === -1 ? {} : Object.assign({}, clusterProps[propIndex]);\n  return Object.assign(properties, {\n    cluster: true,\n    cluster_id: data[i + OFFSET_ID],\n    point_count: count,\n    point_count_abbreviated: abbrev\n  });\n}\n\n// longitude/latitude to spherical mercator in [0..1] range\nfunction lngX(lng) {\n  return lng / 360 + 0.5;\n}\nfunction latY(lat) {\n  var sin = Math.sin(lat * Math.PI / 180);\n  var y = 0.5 - 0.25 * Math.log((1 + sin) / (1 - sin)) / Math.PI;\n  return y < 0 ? 0 : y > 1 ? 1 : y;\n}\n\n// spherical mercator to longitude/latitude\nfunction xLng(x) {\n  return (x - 0.5) * 360;\n}\nfunction yLat(y) {\n  var y2 = (180 - y * 360) * Math.PI / 180;\n  return 360 * Math.atan(Math.exp(y2)) / Math.PI - 90;\n}\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n\nfunction __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n}\n\n/**\n * Copyright 2023 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * util class that creates a common set of convenience functions to wrap\n * shared behavior of Advanced Markers and Markers.\n */\nclass MarkerUtils {\n  static isAdvancedMarkerAvailable(map) {\n    return google.maps.marker && map.getMapCapabilities().isAdvancedMarkersAvailable === true;\n  }\n  static isAdvancedMarker(marker) {\n    return google.maps.marker && marker instanceof google.maps.marker.AdvancedMarkerElement;\n  }\n  static setMap(marker, map) {\n    if (this.isAdvancedMarker(marker)) {\n      marker.map = map;\n    } else {\n      marker.setMap(map);\n    }\n  }\n  static getPosition(marker) {\n    // SuperClusterAlgorithm.calculate expects a LatLng instance so we fake it for Adv Markers\n    if (this.isAdvancedMarker(marker)) {\n      if (marker.position) {\n        if (marker.position instanceof google.maps.LatLng) {\n          return marker.position;\n        }\n        // since we can't cast to LatLngLiteral for reasons =(\n        if (marker.position.lat && marker.position.lng) {\n          return new google.maps.LatLng(marker.position.lat, marker.position.lng);\n        }\n      }\n      return new google.maps.LatLng(null);\n    }\n    return marker.getPosition();\n  }\n  static getVisible(marker) {\n    if (this.isAdvancedMarker(marker)) {\n      /**\n       * Always return true for Advanced Markers because the clusterer\n       * uses getVisible as a way to count legacy markers not as an actual\n       * indicator of visibility for some reason. Even when markers are hidden\n       * Marker.getVisible returns `true` and this is used to set the marker count\n       * on the cluster. See the behavior of Cluster.count\n       */\n      return true;\n    }\n    return marker.getVisible();\n  }\n}\n\n/**\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nclass Cluster {\n  constructor(_ref) {\n    var {\n      markers,\n      position\n    } = _ref;\n    this.markers = markers;\n    if (position) {\n      if (position instanceof google.maps.LatLng) {\n        this._position = position;\n      } else {\n        this._position = new google.maps.LatLng(position);\n      }\n    }\n  }\n  get bounds() {\n    if (this.markers.length === 0 && !this._position) {\n      return;\n    }\n    var bounds = new google.maps.LatLngBounds(this._position, this._position);\n    for (var marker of this.markers) {\n      bounds.extend(MarkerUtils.getPosition(marker));\n    }\n    return bounds;\n  }\n  get position() {\n    return this._position || this.bounds.getCenter();\n  }\n  /**\n   * Get the count of **visible** markers.\n   */\n  get count() {\n    return this.markers.filter(m => MarkerUtils.getVisible(m)).length;\n  }\n  /**\n   * Add a marker to the cluster.\n   */\n  push(marker) {\n    this.markers.push(marker);\n  }\n  /**\n   * Cleanup references and remove marker from map.\n   */\n  delete() {\n    if (this.marker) {\n      MarkerUtils.setMap(this.marker, null);\n      this.marker = undefined;\n    }\n    this.markers.length = 0;\n  }\n}\n\n/**\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Returns the markers visible in a padded map viewport\n *\n * @param map\n * @param mapCanvasProjection\n * @param markers The list of marker to filter\n * @param viewportPaddingPixels The padding in pixel\n * @returns The list of markers in the padded viewport\n */\nvar filterMarkersToPaddedViewport = (map, mapCanvasProjection, markers, viewportPaddingPixels) => {\n  var extendedMapBounds = extendBoundsToPaddedViewport(map.getBounds(), mapCanvasProjection, viewportPaddingPixels);\n  return markers.filter(marker => extendedMapBounds.contains(MarkerUtils.getPosition(marker)));\n};\n/**\n * Extends a bounds by a number of pixels in each direction\n */\nvar extendBoundsToPaddedViewport = (bounds, projection, numPixels) => {\n  var {\n    northEast,\n    southWest\n  } = latLngBoundsToPixelBounds(bounds, projection);\n  var extendedPixelBounds = extendPixelBounds({\n    northEast,\n    southWest\n  }, numPixels);\n  return pixelBoundsToLatLngBounds(extendedPixelBounds, projection);\n};\n/**\n * Gets the extended bounds as a bbox [westLng, southLat, eastLng, northLat]\n */\nvar getPaddedViewport = (bounds, projection, pixels) => {\n  var extended = extendBoundsToPaddedViewport(bounds, projection, pixels);\n  var ne = extended.getNorthEast();\n  var sw = extended.getSouthWest();\n  return [sw.lng(), sw.lat(), ne.lng(), ne.lat()];\n};\n/**\n * Returns the distance between 2 positions.\n *\n * @hidden\n */\nvar distanceBetweenPoints = (p1, p2) => {\n  var R = 6371; // Radius of the Earth in km\n  var dLat = (p2.lat - p1.lat) * Math.PI / 180;\n  var dLon = (p2.lng - p1.lng) * Math.PI / 180;\n  var sinDLat = Math.sin(dLat / 2);\n  var sinDLon = Math.sin(dLon / 2);\n  var a = sinDLat * sinDLat + Math.cos(p1.lat * Math.PI / 180) * Math.cos(p2.lat * Math.PI / 180) * sinDLon * sinDLon;\n  var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n  return R * c;\n};\n/**\n * Converts a LatLng bound to pixels.\n *\n * @hidden\n */\nvar latLngBoundsToPixelBounds = (bounds, projection) => {\n  return {\n    northEast: projection.fromLatLngToDivPixel(bounds.getNorthEast()),\n    southWest: projection.fromLatLngToDivPixel(bounds.getSouthWest())\n  };\n};\n/**\n * Extends a pixel bounds by numPixels in all directions.\n *\n * @hidden\n */\nvar extendPixelBounds = (_ref2, numPixels) => {\n  var {\n    northEast,\n    southWest\n  } = _ref2;\n  northEast.x += numPixels;\n  northEast.y -= numPixels;\n  southWest.x -= numPixels;\n  southWest.y += numPixels;\n  return {\n    northEast,\n    southWest\n  };\n};\n/**\n * @hidden\n */\nvar pixelBoundsToLatLngBounds = (_ref3, projection) => {\n  var {\n    northEast,\n    southWest\n  } = _ref3;\n  var sw = projection.fromDivPixelToLatLng(southWest);\n  var ne = projection.fromDivPixelToLatLng(northEast);\n  return new google.maps.LatLngBounds(sw, ne);\n};\n\n/**\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * @hidden\n */\nclass AbstractAlgorithm {\n  constructor(_ref4) {\n    var {\n      maxZoom = 16\n    } = _ref4;\n    this.maxZoom = maxZoom;\n  }\n  /**\n   * Helper function to bypass clustering based upon some map state such as\n   * zoom, number of markers, etc.\n   *\n   * ```typescript\n   *  cluster({markers, map}: AlgorithmInput): Cluster[] {\n   *    if (shouldBypassClustering(map)) {\n   *      return this.noop({markers})\n   *    }\n   * }\n   * ```\n   */\n  noop(_ref5) {\n    var {\n      markers\n    } = _ref5;\n    return noop$1(markers);\n  }\n}\n/**\n * Abstract viewport algorithm proves a class to filter markers by a padded\n * viewport. This is a common optimization.\n *\n * @hidden\n */\nclass AbstractViewportAlgorithm extends AbstractAlgorithm {\n  constructor(_a) {\n    var {\n        viewportPadding = 60\n      } = _a,\n      options = __rest(_a, [\"viewportPadding\"]);\n    super(options);\n    this.viewportPadding = 60;\n    this.viewportPadding = viewportPadding;\n  }\n  calculate(_ref6) {\n    var {\n      markers,\n      map,\n      mapCanvasProjection\n    } = _ref6;\n    if (map.getZoom() >= this.maxZoom) {\n      return {\n        clusters: this.noop({\n          markers\n        }),\n        changed: false\n      };\n    }\n    return {\n      clusters: this.cluster({\n        markers: filterMarkersToPaddedViewport(map, mapCanvasProjection, markers, this.viewportPadding),\n        map,\n        mapCanvasProjection\n      })\n    };\n  }\n}\n/**\n * @hidden\n */\nvar noop$1 = markers => {\n  var clusters = markers.map(marker => new Cluster({\n    position: MarkerUtils.getPosition(marker),\n    markers: [marker]\n  }));\n  return clusters;\n};\n\n/**\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * The default Grid algorithm historically used in Google Maps marker\n * clustering.\n *\n * The Grid algorithm does not implement caching and markers may flash as the\n * viewport changes. Instead use {@link SuperClusterAlgorithm}.\n */\nclass GridAlgorithm extends AbstractViewportAlgorithm {\n  constructor(_a) {\n    var {\n        maxDistance = 40000,\n        gridSize = 40\n      } = _a,\n      options = __rest(_a, [\"maxDistance\", \"gridSize\"]);\n    super(options);\n    this.clusters = [];\n    this.state = {\n      zoom: -1\n    };\n    this.maxDistance = maxDistance;\n    this.gridSize = gridSize;\n  }\n  calculate(_ref7) {\n    var {\n      markers,\n      map,\n      mapCanvasProjection\n    } = _ref7;\n    var state = {\n      zoom: map.getZoom()\n    };\n    var changed = false;\n    if (this.state.zoom >= this.maxZoom && state.zoom >= this.maxZoom) ;else {\n      changed = !equal(this.state, state);\n    }\n    this.state = state;\n    if (map.getZoom() >= this.maxZoom) {\n      return {\n        clusters: this.noop({\n          markers\n        }),\n        changed\n      };\n    }\n    return {\n      clusters: this.cluster({\n        markers: filterMarkersToPaddedViewport(map, mapCanvasProjection, markers, this.viewportPadding),\n        map,\n        mapCanvasProjection\n      })\n    };\n  }\n  cluster(_ref8) {\n    var {\n      markers,\n      map,\n      mapCanvasProjection\n    } = _ref8;\n    this.clusters = [];\n    markers.forEach(marker => {\n      this.addToClosestCluster(marker, map, mapCanvasProjection);\n    });\n    return this.clusters;\n  }\n  addToClosestCluster(marker, map, projection) {\n    var maxDistance = this.maxDistance; // Some large number\n    var cluster = null;\n    for (var i = 0; i < this.clusters.length; i++) {\n      var candidate = this.clusters[i];\n      var distance = distanceBetweenPoints(candidate.bounds.getCenter().toJSON(), MarkerUtils.getPosition(marker).toJSON());\n      if (distance < maxDistance) {\n        maxDistance = distance;\n        cluster = candidate;\n      }\n    }\n    if (cluster && extendBoundsToPaddedViewport(cluster.bounds, projection, this.gridSize).contains(MarkerUtils.getPosition(marker))) {\n      cluster.push(marker);\n    } else {\n      var _cluster = new Cluster({\n        markers: [marker]\n      });\n      this.clusters.push(_cluster);\n    }\n  }\n}\n\n/**\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Noop algorithm does not generate any clusters or filter markers by the an extended viewport.\n */\nclass NoopAlgorithm extends AbstractAlgorithm {\n  constructor(_a) {\n    var options = __rest(_a, []);\n    super(options);\n  }\n  calculate(_ref9) {\n    var {\n      markers,\n      map,\n      mapCanvasProjection\n    } = _ref9;\n    return {\n      clusters: this.cluster({\n        markers,\n        map,\n        mapCanvasProjection\n      }),\n      changed: false\n    };\n  }\n  cluster(input) {\n    return this.noop(input);\n  }\n}\n\n/**\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * A very fast JavaScript algorithm for geospatial point clustering using KD trees.\n *\n * @see https://www.npmjs.com/package/supercluster for more information on options.\n */\nclass SuperClusterAlgorithm extends AbstractAlgorithm {\n  constructor(_a) {\n    var {\n        maxZoom,\n        radius = 60\n      } = _a,\n      options = __rest(_a, [\"maxZoom\", \"radius\"]);\n    super({\n      maxZoom\n    });\n    this.state = {\n      zoom: -1\n    };\n    this.superCluster = new Supercluster(Object.assign({\n      maxZoom: this.maxZoom,\n      radius\n    }, options));\n  }\n  calculate(input) {\n    var changed = false;\n    var state = {\n      zoom: input.map.getZoom()\n    };\n    if (!equal(input.markers, this.markers)) {\n      changed = true;\n      // TODO use proxy to avoid copy?\n      this.markers = [...input.markers];\n      var points = this.markers.map(marker => {\n        var position = MarkerUtils.getPosition(marker);\n        var coordinates = [position.lng(), position.lat()];\n        return {\n          type: \"Feature\",\n          geometry: {\n            type: \"Point\",\n            coordinates\n          },\n          properties: {\n            marker\n          }\n        };\n      });\n      this.superCluster.load(points);\n    }\n    if (!changed) {\n      if (this.state.zoom <= this.maxZoom || state.zoom <= this.maxZoom) {\n        changed = !equal(this.state, state);\n      }\n    }\n    this.state = state;\n    if (changed) {\n      this.clusters = this.cluster(input);\n    }\n    return {\n      clusters: this.clusters,\n      changed\n    };\n  }\n  cluster(_ref10) {\n    var {\n      map\n    } = _ref10;\n    return this.superCluster.getClusters([-180, -90, 180, 90], Math.round(map.getZoom())).map(feature => this.transformCluster(feature));\n  }\n  transformCluster(_ref11) {\n    var {\n      geometry: {\n        coordinates: [lng, lat]\n      },\n      properties\n    } = _ref11;\n    if (properties.cluster) {\n      return new Cluster({\n        markers: this.superCluster.getLeaves(properties.cluster_id, Infinity).map(leaf => leaf.properties.marker),\n        position: {\n          lat,\n          lng\n        }\n      });\n    }\n    var marker = properties.marker;\n    return new Cluster({\n      markers: [marker],\n      position: MarkerUtils.getPosition(marker)\n    });\n  }\n}\n\n/**\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * A very fast JavaScript algorithm for geospatial point clustering using KD trees.\n *\n * @see https://www.npmjs.com/package/supercluster for more information on options.\n */\nclass SuperClusterViewportAlgorithm extends AbstractViewportAlgorithm {\n  constructor(_a) {\n    var {\n        maxZoom,\n        radius = 60,\n        viewportPadding = 60\n      } = _a,\n      options = __rest(_a, [\"maxZoom\", \"radius\", \"viewportPadding\"]);\n    super({\n      maxZoom,\n      viewportPadding\n    });\n    this.superCluster = new Supercluster(Object.assign({\n      maxZoom: this.maxZoom,\n      radius\n    }, options));\n    this.state = {\n      zoom: -1,\n      view: [0, 0, 0, 0]\n    };\n  }\n  calculate(input) {\n    var state = {\n      zoom: Math.round(input.map.getZoom()),\n      view: getPaddedViewport(input.map.getBounds(), input.mapCanvasProjection, this.viewportPadding)\n    };\n    var changed = !equal(this.state, state);\n    if (!equal(input.markers, this.markers)) {\n      changed = true;\n      // TODO use proxy to avoid copy?\n      this.markers = [...input.markers];\n      var points = this.markers.map(marker => {\n        var position = MarkerUtils.getPosition(marker);\n        var coordinates = [position.lng(), position.lat()];\n        return {\n          type: \"Feature\",\n          geometry: {\n            type: \"Point\",\n            coordinates\n          },\n          properties: {\n            marker\n          }\n        };\n      });\n      this.superCluster.load(points);\n    }\n    if (changed) {\n      this.clusters = this.cluster(input);\n      this.state = state;\n    }\n    return {\n      clusters: this.clusters,\n      changed\n    };\n  }\n  cluster(_ref12) {\n    var {\n      map,\n      mapCanvasProjection\n    } = _ref12;\n    /* recalculate new state because we can't use the cached version. */\n    var state = {\n      zoom: Math.round(map.getZoom()),\n      view: getPaddedViewport(map.getBounds(), mapCanvasProjection, this.viewportPadding)\n    };\n    return this.superCluster.getClusters(state.view, state.zoom).map(feature => this.transformCluster(feature));\n  }\n  transformCluster(_ref13) {\n    var {\n      geometry: {\n        coordinates: [lng, lat]\n      },\n      properties\n    } = _ref13;\n    if (properties.cluster) {\n      return new Cluster({\n        markers: this.superCluster.getLeaves(properties.cluster_id, Infinity).map(leaf => leaf.properties.marker),\n        position: {\n          lat,\n          lng\n        }\n      });\n    }\n    var marker = properties.marker;\n    return new Cluster({\n      markers: [marker],\n      position: MarkerUtils.getPosition(marker)\n    });\n  }\n}\n\n/**\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Provides statistics on all clusters in the current render cycle for use in {@link Renderer.render}.\n */\nclass ClusterStats {\n  constructor(markers, clusters) {\n    this.markers = {\n      sum: markers.length\n    };\n    var clusterMarkerCounts = clusters.map(a => a.count);\n    var clusterMarkerSum = clusterMarkerCounts.reduce((a, b) => a + b, 0);\n    this.clusters = {\n      count: clusters.length,\n      markers: {\n        mean: clusterMarkerSum / clusters.length,\n        sum: clusterMarkerSum,\n        min: Math.min(...clusterMarkerCounts),\n        max: Math.max(...clusterMarkerCounts)\n      }\n    };\n  }\n}\nclass DefaultRenderer {\n  /**\n   * The default render function for the library used by {@link MarkerClusterer}.\n   *\n   * Currently set to use the following:\n   *\n   * ```typescript\n   * // change color if this cluster has more markers than the mean cluster\n   * const color =\n   *   count > Math.max(10, stats.clusters.markers.mean)\n   *     ? \"#ff0000\"\n   *     : \"#0000ff\";\n   *\n   * // create svg url with fill color\n   * const svg = window.btoa(`\n   * <svg fill=\"${color}\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 240 240\">\n   *   <circle cx=\"120\" cy=\"120\" opacity=\".6\" r=\"70\" />\n   *   <circle cx=\"120\" cy=\"120\" opacity=\".3\" r=\"90\" />\n   *   <circle cx=\"120\" cy=\"120\" opacity=\".2\" r=\"110\" />\n   *   <circle cx=\"120\" cy=\"120\" opacity=\".1\" r=\"130\" />\n   * </svg>`);\n   *\n   * // create marker using svg icon\n   * return new google.maps.Marker({\n   *   position,\n   *   icon: {\n   *     url: `data:image/svg+xml;base64,${svg}`,\n   *     scaledSize: new google.maps.Size(45, 45),\n   *   },\n   *   label: {\n   *     text: String(count),\n   *     color: \"rgba(255,255,255,0.9)\",\n   *     fontSize: \"12px\",\n   *   },\n   *   // adjust zIndex to be above other markers\n   *   zIndex: 1000 + count,\n   * });\n   * ```\n   */\n  render(_ref14, stats, map) {\n    var {\n      count,\n      position\n    } = _ref14;\n    // change color if this cluster has more markers than the mean cluster\n    var color = count > Math.max(10, stats.clusters.markers.mean) ? \"#ff0000\" : \"#0000ff\";\n    // create svg literal with fill color\n    var svg = \"<svg fill=\\\"\".concat(color, \"\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 240 240\\\" width=\\\"50\\\" height=\\\"50\\\">\\n<circle cx=\\\"120\\\" cy=\\\"120\\\" opacity=\\\".6\\\" r=\\\"70\\\" />\\n<circle cx=\\\"120\\\" cy=\\\"120\\\" opacity=\\\".3\\\" r=\\\"90\\\" />\\n<circle cx=\\\"120\\\" cy=\\\"120\\\" opacity=\\\".2\\\" r=\\\"110\\\" />\\n<text x=\\\"50%\\\" y=\\\"50%\\\" style=\\\"fill:#fff\\\" text-anchor=\\\"middle\\\" font-size=\\\"50\\\" dominant-baseline=\\\"middle\\\" font-family=\\\"roboto,arial,sans-serif\\\">\").concat(count, \"</text>\\n</svg>\");\n    var title = \"Cluster of \".concat(count, \" markers\"),\n      // adjust zIndex to be above other markers\n      zIndex = Number(google.maps.Marker.MAX_ZINDEX) + count;\n    if (MarkerUtils.isAdvancedMarkerAvailable(map)) {\n      // create cluster SVG element\n      var parser = new DOMParser();\n      var svgEl = parser.parseFromString(svg, \"image/svg+xml\").documentElement;\n      svgEl.setAttribute(\"transform\", \"translate(0 25)\");\n      var _clusterOptions = {\n        map,\n        position,\n        zIndex,\n        title,\n        content: svgEl\n      };\n      return new google.maps.marker.AdvancedMarkerElement(_clusterOptions);\n    }\n    var clusterOptions = {\n      position,\n      zIndex,\n      title,\n      icon: {\n        url: \"data:image/svg+xml;base64,\".concat(btoa(svg)),\n        anchor: new google.maps.Point(25, 25)\n      }\n    };\n    return new google.maps.Marker(clusterOptions);\n  }\n}\n\n/**\n * Copyright 2019 Google LLC. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Extends an object's prototype by another's.\n *\n * @param type1 The Type to be extended.\n * @param type2 The Type to extend with.\n * @ignore\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction extend(type1, type2) {\n  /* istanbul ignore next */\n  // eslint-disable-next-line prefer-const\n  for (var property in type2.prototype) {\n    type1.prototype[property] = type2.prototype[property];\n  }\n}\n/**\n * @ignore\n */\nclass OverlayViewSafe {\n  constructor() {\n    // MarkerClusterer implements google.maps.OverlayView interface. We use the\n    // extend function to extend MarkerClusterer with google.maps.OverlayView\n    // because it might not always be available when the code is defined so we\n    // look for it at the last possible moment. If it doesn't exist now then\n    // there is no point going ahead :)\n    extend(OverlayViewSafe, google.maps.OverlayView);\n  }\n}\n\n/**\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar MarkerClustererEvents;\n(function (MarkerClustererEvents) {\n  MarkerClustererEvents[\"CLUSTERING_BEGIN\"] = \"clusteringbegin\";\n  MarkerClustererEvents[\"CLUSTERING_END\"] = \"clusteringend\";\n  MarkerClustererEvents[\"CLUSTER_CLICK\"] = \"click\";\n})(MarkerClustererEvents || (MarkerClustererEvents = {}));\nvar defaultOnClusterClickHandler = (_, cluster, map) => {\n  map.fitBounds(cluster.bounds);\n};\n/**\n * MarkerClusterer creates and manages per-zoom-level clusters for large amounts\n * of markers. See {@link MarkerClustererOptions} for more details.\n *\n */\nclass MarkerClusterer extends OverlayViewSafe {\n  constructor(_ref15) {\n    var {\n      map,\n      markers = [],\n      algorithmOptions = {},\n      algorithm = new SuperClusterAlgorithm(algorithmOptions),\n      renderer = new DefaultRenderer(),\n      onClusterClick = defaultOnClusterClickHandler\n    } = _ref15;\n    super();\n    this.markers = [...markers];\n    this.clusters = [];\n    this.algorithm = algorithm;\n    this.renderer = renderer;\n    this.onClusterClick = onClusterClick;\n    if (map) {\n      this.setMap(map);\n    }\n  }\n  addMarker(marker, noDraw) {\n    if (this.markers.includes(marker)) {\n      return;\n    }\n    this.markers.push(marker);\n    if (!noDraw) {\n      this.render();\n    }\n  }\n  addMarkers(markers, noDraw) {\n    markers.forEach(marker => {\n      this.addMarker(marker, true);\n    });\n    if (!noDraw) {\n      this.render();\n    }\n  }\n  removeMarker(marker, noDraw) {\n    var index = this.markers.indexOf(marker);\n    if (index === -1) {\n      // Marker is not in our list of markers, so do nothing:\n      return false;\n    }\n    MarkerUtils.setMap(marker, null);\n    this.markers.splice(index, 1); // Remove the marker from the list of managed markers\n    if (!noDraw) {\n      this.render();\n    }\n    return true;\n  }\n  removeMarkers(markers, noDraw) {\n    var removed = false;\n    markers.forEach(marker => {\n      removed = this.removeMarker(marker, true) || removed;\n    });\n    if (removed && !noDraw) {\n      this.render();\n    }\n    return removed;\n  }\n  clearMarkers(noDraw) {\n    this.markers.length = 0;\n    if (!noDraw) {\n      this.render();\n    }\n  }\n  /**\n   * Recalculates and draws all the marker clusters.\n   */\n  render() {\n    var map = this.getMap();\n    if (map instanceof google.maps.Map && map.getProjection()) {\n      google.maps.event.trigger(this, MarkerClustererEvents.CLUSTERING_BEGIN, this);\n      var {\n        clusters,\n        changed\n      } = this.algorithm.calculate({\n        markers: this.markers,\n        map,\n        mapCanvasProjection: this.getProjection()\n      });\n      // Allow algorithms to return flag on whether the clusters/markers have changed.\n      if (changed || changed == undefined) {\n        // Accumulate the markers of the clusters composed of a single marker.\n        // Those clusters directly use the marker.\n        // Clusters with more than one markers use a group marker generated by a renderer.\n        var singleMarker = new Set();\n        for (var cluster of clusters) {\n          if (cluster.markers.length == 1) {\n            singleMarker.add(cluster.markers[0]);\n          }\n        }\n        var groupMarkers = [];\n        // Iterate the clusters that are currently rendered.\n        for (var _cluster2 of this.clusters) {\n          if (_cluster2.marker == null) {\n            continue;\n          }\n          if (_cluster2.markers.length == 1) {\n            if (!singleMarker.has(_cluster2.marker)) {\n              // The marker:\n              // - was previously rendered because it is from a cluster with 1 marker,\n              // - should no more be rendered as it is not in singleMarker.\n              MarkerUtils.setMap(_cluster2.marker, null);\n            }\n          } else {\n            // Delay the removal of old group markers to avoid flickering.\n            groupMarkers.push(_cluster2.marker);\n          }\n        }\n        this.clusters = clusters;\n        this.renderClusters();\n        // Delayed removal of the markers of the former groups.\n        requestAnimationFrame(() => groupMarkers.forEach(marker => MarkerUtils.setMap(marker, null)));\n      }\n      google.maps.event.trigger(this, MarkerClustererEvents.CLUSTERING_END, this);\n    }\n  }\n  onAdd() {\n    this.idleListener = this.getMap().addListener(\"idle\", this.render.bind(this));\n    this.render();\n  }\n  onRemove() {\n    google.maps.event.removeListener(this.idleListener);\n    this.reset();\n  }\n  reset() {\n    this.markers.forEach(marker => MarkerUtils.setMap(marker, null));\n    this.clusters.forEach(cluster => cluster.delete());\n    this.clusters = [];\n  }\n  renderClusters() {\n    // Generate stats to pass to renderers.\n    var stats = new ClusterStats(this.markers, this.clusters);\n    var map = this.getMap();\n    this.clusters.forEach(cluster => {\n      if (cluster.markers.length === 1) {\n        cluster.marker = cluster.markers[0];\n      } else {\n        // Generate the marker to represent the group.\n        cluster.marker = this.renderer.render(cluster, stats, map);\n        // Make sure all individual markers are removed from the map.\n        cluster.markers.forEach(marker => MarkerUtils.setMap(marker, null));\n        if (this.onClusterClick) {\n          cluster.marker.addListener(\"click\", /* istanbul ignore next */\n          event => {\n            google.maps.event.trigger(this, MarkerClustererEvents.CLUSTER_CLICK, cluster);\n            this.onClusterClick(event, cluster, map);\n          });\n        }\n      }\n      MarkerUtils.setMap(cluster.marker, map);\n    });\n  }\n}\n\nvar index_esm = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  AbstractAlgorithm: AbstractAlgorithm,\n  AbstractViewportAlgorithm: AbstractViewportAlgorithm,\n  Cluster: Cluster,\n  ClusterStats: ClusterStats,\n  DefaultRenderer: DefaultRenderer,\n  GridAlgorithm: GridAlgorithm,\n  MarkerClusterer: MarkerClusterer,\n  get MarkerClustererEvents () { return MarkerClustererEvents; },\n  MarkerUtils: MarkerUtils,\n  NoopAlgorithm: NoopAlgorithm,\n  SuperClusterAlgorithm: SuperClusterAlgorithm,\n  SuperClusterViewportAlgorithm: SuperClusterViewportAlgorithm,\n  defaultOnClusterClickHandler: defaultOnClusterClickHandler,\n  distanceBetweenPoints: distanceBetweenPoints,\n  extendBoundsToPaddedViewport: extendBoundsToPaddedViewport,\n  extendPixelBounds: extendPixelBounds,\n  filterMarkersToPaddedViewport: filterMarkersToPaddedViewport,\n  getPaddedViewport: getPaddedViewport,\n  noop: noop$1,\n  pixelBoundsToLatLngBounds: pixelBoundsToLatLngBounds\n});\n\nfunction ownKeys$a(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread$a(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys$a(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$a(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction useGoogleMarkerClusterer(options) {\n  var map = useGoogleMap();\n  var [markerClusterer, setMarkerClusterer] = useState(null);\n  useEffect(() => {\n    if (map && markerClusterer === null) {\n      var markerCluster = new MarkerClusterer(_objectSpread$a(_objectSpread$a({}, options), {}, {\n        map\n      }));\n      setMarkerClusterer(markerCluster);\n    }\n  }, [map]);\n  return markerClusterer;\n}\n/** Wrapper around [@googlemaps/markerclusterer](https://github.com/googlemaps/js-markerclusterer)\n *\n * Accepts {@link  MarkerClustererOptionsSubset} which is a subset of  {@link MarkerClustererOptions}\n */\nfunction GoogleMarkerClusterer(_ref) {\n  var {\n    children,\n    options\n  } = _ref;\n  var markerClusterer = useGoogleMarkerClusterer(options);\n  return markerClusterer !== null ? children(markerClusterer) : null;\n}\nvar GoogleMarkerClusterer$1 = memo(GoogleMarkerClusterer);\n\nvar eventMap$c = {\n  onCloseClick: 'closeclick',\n  onContentChanged: 'content_changed',\n  onDomReady: 'domready',\n  onPositionChanged: 'position_changed',\n  onZindexChanged: 'zindex_changed'\n};\nvar updaterMap$c = {\n  options(instance, options) {\n    instance.setOptions(options);\n  },\n  position(instance, position) {\n    instance.setPosition(position);\n  },\n  zIndex(instance, zIndex) {\n    instance.setZIndex(zIndex);\n  }\n};\nfunction InfoWindowFunctional(_ref) {\n  var {\n    children,\n    anchor,\n    options,\n    position,\n    zIndex,\n    onCloseClick,\n    onDomReady,\n    onContentChanged,\n    onPositionChanged,\n    onZindexChanged,\n    onLoad,\n    onUnmount\n  } = _ref;\n  var map = useContext(MapContext);\n  var [instance, setInstance] = useState(null);\n  var [closeclickListener, setCloseClickListener] = useState(null);\n  var [domreadyclickListener, setDomReadyClickListener] = useState(null);\n  var [contentchangedclickListener, setContentChangedClickListener] = useState(null);\n  var [positionchangedclickListener, setPositionChangedClickListener] = useState(null);\n  var [zindexchangedclickListener, setZindexChangedClickListener] = useState(null);\n  var containerElementRef = useRef(null);\n  // Order does matter\n  useEffect(() => {\n    if (instance !== null) {\n      instance.close();\n      if (anchor) {\n        instance.open(map, anchor);\n      } else if (instance.getPosition()) {\n        instance.open(map);\n      }\n    }\n  }, [map, instance, anchor]);\n  useEffect(() => {\n    if (options && instance !== null) {\n      instance.setOptions(options);\n    }\n  }, [instance, options]);\n  useEffect(() => {\n    if (position && instance !== null) {\n      instance.setPosition(position);\n    }\n  }, [position]);\n  useEffect(() => {\n    if (typeof zIndex === 'number' && instance !== null) {\n      instance.setZIndex(zIndex);\n    }\n  }, [zIndex]);\n  useEffect(() => {\n    if (instance && onCloseClick) {\n      if (closeclickListener !== null) {\n        google.maps.event.removeListener(closeclickListener);\n      }\n      setCloseClickListener(google.maps.event.addListener(instance, 'closeclick', onCloseClick));\n    }\n  }, [onCloseClick]);\n  useEffect(() => {\n    if (instance && onDomReady) {\n      if (domreadyclickListener !== null) {\n        google.maps.event.removeListener(domreadyclickListener);\n      }\n      setDomReadyClickListener(google.maps.event.addListener(instance, 'domready', onDomReady));\n    }\n  }, [onDomReady]);\n  useEffect(() => {\n    if (instance && onContentChanged) {\n      if (contentchangedclickListener !== null) {\n        google.maps.event.removeListener(contentchangedclickListener);\n      }\n      setContentChangedClickListener(google.maps.event.addListener(instance, 'content_changed', onContentChanged));\n    }\n  }, [onContentChanged]);\n  useEffect(() => {\n    if (instance && onPositionChanged) {\n      if (positionchangedclickListener !== null) {\n        google.maps.event.removeListener(positionchangedclickListener);\n      }\n      setPositionChangedClickListener(google.maps.event.addListener(instance, 'position_changed', onPositionChanged));\n    }\n  }, [onPositionChanged]);\n  useEffect(() => {\n    if (instance && onZindexChanged) {\n      if (zindexchangedclickListener !== null) {\n        google.maps.event.removeListener(zindexchangedclickListener);\n      }\n      setZindexChangedClickListener(google.maps.event.addListener(instance, 'zindex_changed', onZindexChanged));\n    }\n  }, [onZindexChanged]);\n  useEffect(() => {\n    var infoWindow = new google.maps.InfoWindow(options);\n    setInstance(infoWindow);\n    containerElementRef.current = document.createElement('div');\n    if (onCloseClick) {\n      setCloseClickListener(google.maps.event.addListener(infoWindow, 'closeclick', onCloseClick));\n    }\n    if (onDomReady) {\n      setDomReadyClickListener(google.maps.event.addListener(infoWindow, 'domready', onDomReady));\n    }\n    if (onContentChanged) {\n      setContentChangedClickListener(google.maps.event.addListener(infoWindow, 'content_changed', onContentChanged));\n    }\n    if (onPositionChanged) {\n      setPositionChangedClickListener(google.maps.event.addListener(infoWindow, 'position_changed', onPositionChanged));\n    }\n    if (onZindexChanged) {\n      setZindexChangedClickListener(google.maps.event.addListener(infoWindow, 'zindex_changed', onZindexChanged));\n    }\n    infoWindow.setContent(containerElementRef.current);\n    if (position) {\n      infoWindow.setPosition(position);\n    }\n    if (zIndex) {\n      infoWindow.setZIndex(zIndex);\n    }\n    if (anchor) {\n      infoWindow.open(map, anchor);\n    } else if (infoWindow.getPosition()) {\n      infoWindow.open(map);\n    } else {\n      invariant(false, \"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>.\");\n    }\n    if (onLoad) {\n      onLoad(infoWindow);\n    }\n    return () => {\n      if (closeclickListener) {\n        google.maps.event.removeListener(closeclickListener);\n      }\n      if (contentchangedclickListener) {\n        google.maps.event.removeListener(contentchangedclickListener);\n      }\n      if (domreadyclickListener) {\n        google.maps.event.removeListener(domreadyclickListener);\n      }\n      if (positionchangedclickListener) {\n        google.maps.event.removeListener(positionchangedclickListener);\n      }\n      if (zindexchangedclickListener) {\n        google.maps.event.removeListener(zindexchangedclickListener);\n      }\n      if (onUnmount) {\n        onUnmount(infoWindow);\n      }\n      infoWindow.close();\n    };\n  }, []);\n  return containerElementRef.current ? createPortal(Children.only(children), containerElementRef.current) : null;\n}\nvar InfoWindowF = memo(InfoWindowFunctional);\nclass InfoWindow extends PureComponent {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"registeredEvents\", []);\n    _defineProperty(this, \"containerElement\", null);\n    _defineProperty(this, \"state\", {\n      infoWindow: null\n    });\n    _defineProperty(this, \"open\", (infoWindow, anchor) => {\n      if (anchor) {\n        infoWindow.open(this.context, anchor);\n      } else if (infoWindow.getPosition()) {\n        infoWindow.open(this.context);\n      } else {\n        invariant(false, \"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>.\");\n      }\n    });\n    _defineProperty(this, \"setInfoWindowCallback\", () => {\n      if (this.state.infoWindow !== null && this.containerElement !== null) {\n        this.state.infoWindow.setContent(this.containerElement);\n        this.open(this.state.infoWindow, this.props.anchor);\n        if (this.props.onLoad) {\n          this.props.onLoad(this.state.infoWindow);\n        }\n      }\n    });\n  }\n  componentDidMount() {\n    var infoWindow = new google.maps.InfoWindow(this.props.options);\n    this.containerElement = document.createElement('div');\n    this.registeredEvents = applyUpdatersToPropsAndRegisterEvents({\n      updaterMap: updaterMap$c,\n      eventMap: eventMap$c,\n      prevProps: {},\n      nextProps: this.props,\n      instance: infoWindow\n    });\n    this.setState(() => {\n      return {\n        infoWindow\n      };\n    }, this.setInfoWindowCallback);\n  }\n  componentDidUpdate(prevProps) {\n    if (this.state.infoWindow !== null) {\n      unregisterEvents(this.registeredEvents);\n      this.registeredEvents = applyUpdatersToPropsAndRegisterEvents({\n        updaterMap: updaterMap$c,\n        eventMap: eventMap$c,\n        prevProps,\n        nextProps: this.props,\n        instance: this.state.infoWindow\n      });\n    }\n  }\n  componentWillUnmount() {\n    if (this.state.infoWindow !== null) {\n      unregisterEvents(this.registeredEvents);\n      if (this.props.onUnmount) {\n        this.props.onUnmount(this.state.infoWindow);\n      }\n      this.state.infoWindow.close();\n    }\n  }\n  render() {\n    return this.containerElement ? createPortal(Children.only(this.props.children), this.containerElement) : null;\n  }\n}\n_defineProperty(InfoWindow, \"contextType\", MapContext);\n\nfunction ownKeys$9(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread$9(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys$9(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$9(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nvar eventMap$b = {\n  onClick: 'click',\n  onDblClick: 'dblclick',\n  onDrag: 'drag',\n  onDragEnd: 'dragend',\n  onDragStart: 'dragstart',\n  onMouseDown: 'mousedown',\n  onMouseMove: 'mousemove',\n  onMouseOut: 'mouseout',\n  onMouseOver: 'mouseover',\n  onMouseUp: 'mouseup',\n  onRightClick: 'rightclick'\n};\nvar updaterMap$b = {\n  draggable(instance, draggable) {\n    instance.setDraggable(draggable);\n  },\n  editable(instance, editable) {\n    instance.setEditable(editable);\n  },\n  map(instance, map) {\n    instance.setMap(map);\n  },\n  options(instance, options) {\n    instance.setOptions(options);\n  },\n  path(instance, path) {\n    instance.setPath(path);\n  },\n  visible(instance, visible) {\n    instance.setVisible(visible);\n  }\n};\nvar defaultOptions$1 = {};\nfunction PolylineFunctional(_ref) {\n  var {\n    options,\n    draggable,\n    editable,\n    visible,\n    path,\n    onDblClick,\n    onDragEnd,\n    onDragStart,\n    onMouseDown,\n    onMouseMove,\n    onMouseOut,\n    onMouseOver,\n    onMouseUp,\n    onRightClick,\n    onClick,\n    onDrag,\n    onLoad,\n    onUnmount\n  } = _ref;\n  var map = useContext(MapContext);\n  var [instance, setInstance] = useState(null);\n  var [dblclickListener, setDblclickListener] = useState(null);\n  var [dragendListener, setDragendListener] = useState(null);\n  var [dragstartListener, setDragstartListener] = useState(null);\n  var [mousedownListener, setMousedownListener] = useState(null);\n  var [mousemoveListener, setMousemoveListener] = useState(null);\n  var [mouseoutListener, setMouseoutListener] = useState(null);\n  var [mouseoverListener, setMouseoverListener] = useState(null);\n  var [mouseupListener, setMouseupListener] = useState(null);\n  var [rightclickListener, setRightclickListener] = useState(null);\n  var [clickListener, setClickListener] = useState(null);\n  var [dragListener, setDragListener] = useState(null);\n  // Order does matter\n  useEffect(() => {\n    if (instance !== null) {\n      instance.setMap(map);\n    }\n  }, [map]);\n  useEffect(() => {\n    if (typeof options !== 'undefined' && instance !== null) {\n      instance.setOptions(options);\n    }\n  }, [instance, options]);\n  useEffect(() => {\n    if (typeof draggable !== 'undefined' && instance !== null) {\n      instance.setDraggable(draggable);\n    }\n  }, [instance, draggable]);\n  useEffect(() => {\n    if (typeof editable !== 'undefined' && instance !== null) {\n      instance.setEditable(editable);\n    }\n  }, [instance, editable]);\n  useEffect(() => {\n    if (typeof visible !== 'undefined' && instance !== null) {\n      instance.setVisible(visible);\n    }\n  }, [instance, visible]);\n  useEffect(() => {\n    if (typeof path !== 'undefined' && instance !== null) {\n      instance.setPath(path);\n    }\n  }, [instance, path]);\n  useEffect(() => {\n    if (instance && onDblClick) {\n      if (dblclickListener !== null) {\n        google.maps.event.removeListener(dblclickListener);\n      }\n      setDblclickListener(google.maps.event.addListener(instance, 'dblclick', onDblClick));\n    }\n  }, [onDblClick]);\n  useEffect(() => {\n    if (instance && onDragEnd) {\n      if (dragendListener !== null) {\n        google.maps.event.removeListener(dragendListener);\n      }\n      setDragendListener(google.maps.event.addListener(instance, 'dragend', onDragEnd));\n    }\n  }, [onDragEnd]);\n  useEffect(() => {\n    if (instance && onDragStart) {\n      if (dragstartListener !== null) {\n        google.maps.event.removeListener(dragstartListener);\n      }\n      setDragstartListener(google.maps.event.addListener(instance, 'dragstart', onDragStart));\n    }\n  }, [onDragStart]);\n  useEffect(() => {\n    if (instance && onMouseDown) {\n      if (mousedownListener !== null) {\n        google.maps.event.removeListener(mousedownListener);\n      }\n      setMousedownListener(google.maps.event.addListener(instance, 'mousedown', onMouseDown));\n    }\n  }, [onMouseDown]);\n  useEffect(() => {\n    if (instance && onMouseMove) {\n      if (mousemoveListener !== null) {\n        google.maps.event.removeListener(mousemoveListener);\n      }\n      setMousemoveListener(google.maps.event.addListener(instance, 'mousemove', onMouseMove));\n    }\n  }, [onMouseMove]);\n  useEffect(() => {\n    if (instance && onMouseOut) {\n      if (mouseoutListener !== null) {\n        google.maps.event.removeListener(mouseoutListener);\n      }\n      setMouseoutListener(google.maps.event.addListener(instance, 'mouseout', onMouseOut));\n    }\n  }, [onMouseOut]);\n  useEffect(() => {\n    if (instance && onMouseOver) {\n      if (mouseoverListener !== null) {\n        google.maps.event.removeListener(mouseoverListener);\n      }\n      setMouseoverListener(google.maps.event.addListener(instance, 'mouseover', onMouseOver));\n    }\n  }, [onMouseOver]);\n  useEffect(() => {\n    if (instance && onMouseUp) {\n      if (mouseupListener !== null) {\n        google.maps.event.removeListener(mouseupListener);\n      }\n      setMouseupListener(google.maps.event.addListener(instance, 'mouseup', onMouseUp));\n    }\n  }, [onMouseUp]);\n  useEffect(() => {\n    if (instance && onRightClick) {\n      if (rightclickListener !== null) {\n        google.maps.event.removeListener(rightclickListener);\n      }\n      setRightclickListener(google.maps.event.addListener(instance, 'rightclick', onRightClick));\n    }\n  }, [onRightClick]);\n  useEffect(() => {\n    if (instance && onClick) {\n      if (clickListener !== null) {\n        google.maps.event.removeListener(clickListener);\n      }\n      setClickListener(google.maps.event.addListener(instance, 'click', onClick));\n    }\n  }, [onClick]);\n  useEffect(() => {\n    if (instance && onDrag) {\n      if (dragListener !== null) {\n        google.maps.event.removeListener(dragListener);\n      }\n      setDragListener(google.maps.event.addListener(instance, 'drag', onDrag));\n    }\n  }, [onDrag]);\n  useEffect(() => {\n    var polyline = new google.maps.Polyline(_objectSpread$9(_objectSpread$9({}, options || defaultOptions$1), {}, {\n      map\n    }));\n    if (path) {\n      polyline.setPath(path);\n    }\n    if (typeof visible !== 'undefined') {\n      polyline.setVisible(visible);\n    }\n    if (typeof editable !== 'undefined') {\n      polyline.setEditable(editable);\n    }\n    if (typeof draggable !== 'undefined') {\n      polyline.setDraggable(draggable);\n    }\n    if (onDblClick) {\n      setDblclickListener(google.maps.event.addListener(polyline, 'dblclick', onDblClick));\n    }\n    if (onDragEnd) {\n      setDragendListener(google.maps.event.addListener(polyline, 'dragend', onDragEnd));\n    }\n    if (onDragStart) {\n      setDragstartListener(google.maps.event.addListener(polyline, 'dragstart', onDragStart));\n    }\n    if (onMouseDown) {\n      setMousedownListener(google.maps.event.addListener(polyline, 'mousedown', onMouseDown));\n    }\n    if (onMouseMove) {\n      setMousemoveListener(google.maps.event.addListener(polyline, 'mousemove', onMouseMove));\n    }\n    if (onMouseOut) {\n      setMouseoutListener(google.maps.event.addListener(polyline, 'mouseout', onMouseOut));\n    }\n    if (onMouseOver) {\n      setMouseoverListener(google.maps.event.addListener(polyline, 'mouseover', onMouseOver));\n    }\n    if (onMouseUp) {\n      setMouseupListener(google.maps.event.addListener(polyline, 'mouseup', onMouseUp));\n    }\n    if (onRightClick) {\n      setRightclickListener(google.maps.event.addListener(polyline, 'rightclick', onRightClick));\n    }\n    if (onClick) {\n      setClickListener(google.maps.event.addListener(polyline, 'click', onClick));\n    }\n    if (onDrag) {\n      setDragListener(google.maps.event.addListener(polyline, 'drag', onDrag));\n    }\n    setInstance(polyline);\n    if (onLoad) {\n      onLoad(polyline);\n    }\n    return () => {\n      if (dblclickListener !== null) {\n        google.maps.event.removeListener(dblclickListener);\n      }\n      if (dragendListener !== null) {\n        google.maps.event.removeListener(dragendListener);\n      }\n      if (dragstartListener !== null) {\n        google.maps.event.removeListener(dragstartListener);\n      }\n      if (mousedownListener !== null) {\n        google.maps.event.removeListener(mousedownListener);\n      }\n      if (mousemoveListener !== null) {\n        google.maps.event.removeListener(mousemoveListener);\n      }\n      if (mouseoutListener !== null) {\n        google.maps.event.removeListener(mouseoutListener);\n      }\n      if (mouseoverListener !== null) {\n        google.maps.event.removeListener(mouseoverListener);\n      }\n      if (mouseupListener !== null) {\n        google.maps.event.removeListener(mouseupListener);\n      }\n      if (rightclickListener !== null) {\n        google.maps.event.removeListener(rightclickListener);\n      }\n      if (clickListener !== null) {\n        google.maps.event.removeListener(clickListener);\n      }\n      if (onUnmount) {\n        onUnmount(polyline);\n      }\n      polyline.setMap(null);\n    };\n  }, []);\n  return null;\n}\nvar PolylineF = memo(PolylineFunctional);\nclass Polyline extends PureComponent {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"registeredEvents\", []);\n    _defineProperty(this, \"state\", {\n      polyline: null\n    });\n    _defineProperty(this, \"setPolylineCallback\", () => {\n      if (this.state.polyline !== null && this.props.onLoad) {\n        this.props.onLoad(this.state.polyline);\n      }\n    });\n  }\n  componentDidMount() {\n    var polyline = new google.maps.Polyline(_objectSpread$9(_objectSpread$9({}, this.props.options), {}, {\n      map: this.context\n    }));\n    this.registeredEvents = applyUpdatersToPropsAndRegisterEvents({\n      updaterMap: updaterMap$b,\n      eventMap: eventMap$b,\n      prevProps: {},\n      nextProps: this.props,\n      instance: polyline\n    });\n    this.setState(function setPolyline() {\n      return {\n        polyline\n      };\n    }, this.setPolylineCallback);\n  }\n  componentDidUpdate(prevProps) {\n    if (this.state.polyline !== null) {\n      unregisterEvents(this.registeredEvents);\n      this.registeredEvents = applyUpdatersToPropsAndRegisterEvents({\n        updaterMap: updaterMap$b,\n        eventMap: eventMap$b,\n        prevProps,\n        nextProps: this.props,\n        instance: this.state.polyline\n      });\n    }\n  }\n  componentWillUnmount() {\n    if (this.state.polyline === null) {\n      return;\n    }\n    if (this.props.onUnmount) {\n      this.props.onUnmount(this.state.polyline);\n    }\n    unregisterEvents(this.registeredEvents);\n    this.state.polyline.setMap(null);\n  }\n  render() {\n    return null;\n  }\n}\n_defineProperty(Polyline, \"contextType\", MapContext);\n\nfunction ownKeys$8(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread$8(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys$8(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$8(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nvar eventMap$a = {\n  onClick: 'click',\n  onDblClick: 'dblclick',\n  onDrag: 'drag',\n  onDragEnd: 'dragend',\n  onDragStart: 'dragstart',\n  onMouseDown: 'mousedown',\n  onMouseMove: 'mousemove',\n  onMouseOut: 'mouseout',\n  onMouseOver: 'mouseover',\n  onMouseUp: 'mouseup',\n  onRightClick: 'rightclick'\n};\nvar updaterMap$a = {\n  draggable(instance, draggable) {\n    instance.setDraggable(draggable);\n  },\n  editable(instance, editable) {\n    instance.setEditable(editable);\n  },\n  map(instance, map) {\n    instance.setMap(map);\n  },\n  options(instance, options) {\n    instance.setOptions(options);\n  },\n  path(instance, path) {\n    instance.setPath(path);\n  },\n  paths(instance, paths) {\n    instance.setPaths(paths);\n  },\n  visible(instance, visible) {\n    instance.setVisible(visible);\n  }\n};\nfunction PolygonFunctional(_ref) {\n  var {\n    options,\n    draggable,\n    editable,\n    visible,\n    path,\n    paths,\n    onDblClick,\n    onDragEnd,\n    onDragStart,\n    onMouseDown,\n    onMouseMove,\n    onMouseOut,\n    onMouseOver,\n    onMouseUp,\n    onRightClick,\n    onClick,\n    onDrag,\n    onLoad,\n    onUnmount,\n    onEdit\n  } = _ref;\n  var map = useContext(MapContext);\n  var [instance, setInstance] = useState(null);\n  var [dblclickListener, setDblclickListener] = useState(null);\n  var [dragendListener, setDragendListener] = useState(null);\n  var [dragstartListener, setDragstartListener] = useState(null);\n  var [mousedownListener, setMousedownListener] = useState(null);\n  var [mousemoveListener, setMousemoveListener] = useState(null);\n  var [mouseoutListener, setMouseoutListener] = useState(null);\n  var [mouseoverListener, setMouseoverListener] = useState(null);\n  var [mouseupListener, setMouseupListener] = useState(null);\n  var [rightclickListener, setRightclickListener] = useState(null);\n  var [clickListener, setClickListener] = useState(null);\n  var [dragListener, setDragListener] = useState(null);\n  // Order does matter\n  useEffect(() => {\n    if (instance !== null) {\n      instance.setMap(map);\n    }\n  }, [map]);\n  useEffect(() => {\n    if (typeof options !== 'undefined' && instance !== null) {\n      instance.setOptions(options);\n    }\n  }, [instance, options]);\n  useEffect(() => {\n    if (typeof draggable !== 'undefined' && instance !== null) {\n      instance.setDraggable(draggable);\n    }\n  }, [instance, draggable]);\n  useEffect(() => {\n    if (typeof editable !== 'undefined' && instance !== null) {\n      instance.setEditable(editable);\n    }\n  }, [instance, editable]);\n  useEffect(() => {\n    if (typeof visible !== 'undefined' && instance !== null) {\n      instance.setVisible(visible);\n    }\n  }, [instance, visible]);\n  useEffect(() => {\n    if (typeof path !== 'undefined' && instance !== null) {\n      instance.setPath(path);\n    }\n  }, [instance, path]);\n  useEffect(() => {\n    if (typeof paths !== 'undefined' && instance !== null) {\n      instance.setPaths(paths);\n    }\n  }, [instance, paths]);\n  useEffect(() => {\n    if (instance && typeof onDblClick === 'function') {\n      if (dblclickListener !== null) {\n        google.maps.event.removeListener(dblclickListener);\n      }\n      setDblclickListener(google.maps.event.addListener(instance, 'dblclick', onDblClick));\n    }\n  }, [onDblClick]);\n  useEffect(() => {\n    if (!instance) {\n      return;\n    }\n    google.maps.event.addListener(instance.getPath(), 'insert_at', () => {\n      onEdit === null || onEdit === void 0 || onEdit(instance);\n    });\n    google.maps.event.addListener(instance.getPath(), 'set_at', () => {\n      onEdit === null || onEdit === void 0 || onEdit(instance);\n    });\n    google.maps.event.addListener(instance.getPath(), 'remove_at', () => {\n      onEdit === null || onEdit === void 0 || onEdit(instance);\n    });\n  }, [instance, onEdit]);\n  useEffect(() => {\n    if (instance && typeof onDragEnd === 'function') {\n      if (dragendListener !== null) {\n        google.maps.event.removeListener(dragendListener);\n      }\n      setDragendListener(google.maps.event.addListener(instance, 'dragend', onDragEnd));\n    }\n  }, [onDragEnd]);\n  useEffect(() => {\n    if (instance && typeof onDragStart === 'function') {\n      if (dragstartListener !== null) {\n        google.maps.event.removeListener(dragstartListener);\n      }\n      setDragstartListener(google.maps.event.addListener(instance, 'dragstart', onDragStart));\n    }\n  }, [onDragStart]);\n  useEffect(() => {\n    if (instance && typeof onMouseDown === 'function') {\n      if (mousedownListener !== null) {\n        google.maps.event.removeListener(mousedownListener);\n      }\n      setMousedownListener(google.maps.event.addListener(instance, 'mousedown', onMouseDown));\n    }\n  }, [onMouseDown]);\n  useEffect(() => {\n    if (instance && typeof onMouseMove === 'function') {\n      if (mousemoveListener !== null) {\n        google.maps.event.removeListener(mousemoveListener);\n      }\n      setMousemoveListener(google.maps.event.addListener(instance, 'mousemove', onMouseMove));\n    }\n  }, [onMouseMove]);\n  useEffect(() => {\n    if (instance && typeof onMouseOut === 'function') {\n      if (mouseoutListener !== null) {\n        google.maps.event.removeListener(mouseoutListener);\n      }\n      setMouseoutListener(google.maps.event.addListener(instance, 'mouseout', onMouseOut));\n    }\n  }, [onMouseOut]);\n  useEffect(() => {\n    if (instance && typeof onMouseOver === 'function') {\n      if (mouseoverListener !== null) {\n        google.maps.event.removeListener(mouseoverListener);\n      }\n      setMouseoverListener(google.maps.event.addListener(instance, 'mouseover', onMouseOver));\n    }\n  }, [onMouseOver]);\n  useEffect(() => {\n    if (instance && typeof onMouseUp === 'function') {\n      if (mouseupListener !== null) {\n        google.maps.event.removeListener(mouseupListener);\n      }\n      setMouseupListener(google.maps.event.addListener(instance, 'mouseup', onMouseUp));\n    }\n  }, [onMouseUp]);\n  useEffect(() => {\n    if (instance && typeof onRightClick === 'function') {\n      if (rightclickListener !== null) {\n        google.maps.event.removeListener(rightclickListener);\n      }\n      setRightclickListener(google.maps.event.addListener(instance, 'rightclick', onRightClick));\n    }\n  }, [onRightClick]);\n  useEffect(() => {\n    if (instance && typeof onClick === 'function') {\n      if (clickListener !== null) {\n        google.maps.event.removeListener(clickListener);\n      }\n      setClickListener(google.maps.event.addListener(instance, 'click', onClick));\n    }\n  }, [onClick]);\n  useEffect(() => {\n    if (instance && typeof onDrag === 'function') {\n      if (dragListener !== null) {\n        google.maps.event.removeListener(dragListener);\n      }\n      setDragListener(google.maps.event.addListener(instance, 'drag', onDrag));\n    }\n  }, [onDrag]);\n  useEffect(() => {\n    var polygon = new google.maps.Polygon(_objectSpread$8(_objectSpread$8({}, options), {}, {\n      map\n    }));\n    if (path) {\n      polygon.setPath(path);\n    }\n    if (paths) {\n      polygon.setPaths(paths);\n    }\n    if (typeof visible !== 'undefined') {\n      polygon.setVisible(visible);\n    }\n    if (typeof editable !== 'undefined') {\n      polygon.setEditable(editable);\n    }\n    if (typeof draggable !== 'undefined') {\n      polygon.setDraggable(draggable);\n    }\n    if (onDblClick) {\n      setDblclickListener(google.maps.event.addListener(polygon, 'dblclick', onDblClick));\n    }\n    if (onDragEnd) {\n      setDragendListener(google.maps.event.addListener(polygon, 'dragend', onDragEnd));\n    }\n    if (onDragStart) {\n      setDragstartListener(google.maps.event.addListener(polygon, 'dragstart', onDragStart));\n    }\n    if (onMouseDown) {\n      setMousedownListener(google.maps.event.addListener(polygon, 'mousedown', onMouseDown));\n    }\n    if (onMouseMove) {\n      setMousemoveListener(google.maps.event.addListener(polygon, 'mousemove', onMouseMove));\n    }\n    if (onMouseOut) {\n      setMouseoutListener(google.maps.event.addListener(polygon, 'mouseout', onMouseOut));\n    }\n    if (onMouseOver) {\n      setMouseoverListener(google.maps.event.addListener(polygon, 'mouseover', onMouseOver));\n    }\n    if (onMouseUp) {\n      setMouseupListener(google.maps.event.addListener(polygon, 'mouseup', onMouseUp));\n    }\n    if (onRightClick) {\n      setRightclickListener(google.maps.event.addListener(polygon, 'rightclick', onRightClick));\n    }\n    if (onClick) {\n      setClickListener(google.maps.event.addListener(polygon, 'click', onClick));\n    }\n    if (onDrag) {\n      setDragListener(google.maps.event.addListener(polygon, 'drag', onDrag));\n    }\n    setInstance(polygon);\n    if (onLoad) {\n      onLoad(polygon);\n    }\n    return () => {\n      if (dblclickListener !== null) {\n        google.maps.event.removeListener(dblclickListener);\n      }\n      if (dragendListener !== null) {\n        google.maps.event.removeListener(dragendListener);\n      }\n      if (dragstartListener !== null) {\n        google.maps.event.removeListener(dragstartListener);\n      }\n      if (mousedownListener !== null) {\n        google.maps.event.removeListener(mousedownListener);\n      }\n      if (mousemoveListener !== null) {\n        google.maps.event.removeListener(mousemoveListener);\n      }\n      if (mouseoutListener !== null) {\n        google.maps.event.removeListener(mouseoutListener);\n      }\n      if (mouseoverListener !== null) {\n        google.maps.event.removeListener(mouseoverListener);\n      }\n      if (mouseupListener !== null) {\n        google.maps.event.removeListener(mouseupListener);\n      }\n      if (rightclickListener !== null) {\n        google.maps.event.removeListener(rightclickListener);\n      }\n      if (clickListener !== null) {\n        google.maps.event.removeListener(clickListener);\n      }\n      if (onUnmount) {\n        onUnmount(polygon);\n      }\n      polygon.setMap(null);\n    };\n  }, []);\n  return null;\n}\nvar PolygonF = memo(PolygonFunctional);\nclass Polygon extends PureComponent {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"registeredEvents\", []);\n  }\n  componentDidMount() {\n    var polygonOptions = this.props.options || {};\n    this.polygon = new google.maps.Polygon(polygonOptions);\n    this.polygon.setMap(this.context);\n    this.registeredEvents = applyUpdatersToPropsAndRegisterEvents({\n      updaterMap: updaterMap$a,\n      eventMap: eventMap$a,\n      prevProps: {},\n      nextProps: this.props,\n      instance: this.polygon\n    });\n    if (this.props.onLoad) {\n      this.props.onLoad(this.polygon);\n    }\n  }\n  componentDidUpdate(prevProps) {\n    if (this.polygon) {\n      unregisterEvents(this.registeredEvents);\n      this.registeredEvents = applyUpdatersToPropsAndRegisterEvents({\n        updaterMap: updaterMap$a,\n        eventMap: eventMap$a,\n        prevProps,\n        nextProps: this.props,\n        instance: this.polygon\n      });\n    }\n  }\n  componentWillUnmount() {\n    if (this.polygon) {\n      if (this.props.onUnmount) {\n        this.props.onUnmount(this.polygon);\n      }\n      unregisterEvents(this.registeredEvents);\n      if (this.polygon) {\n        this.polygon.setMap(null);\n      }\n    }\n  }\n  render() {\n    return null;\n  }\n}\n_defineProperty(Polygon, \"contextType\", MapContext);\n\nfunction ownKeys$7(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread$7(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys$7(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$7(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nvar eventMap$9 = {\n  onBoundsChanged: 'bounds_changed',\n  onClick: 'click',\n  onDblClick: 'dblclick',\n  onDrag: 'drag',\n  onDragEnd: 'dragend',\n  onDragStart: 'dragstart',\n  onMouseDown: 'mousedown',\n  onMouseMove: 'mousemove',\n  onMouseOut: 'mouseout',\n  onMouseOver: 'mouseover',\n  onMouseUp: 'mouseup',\n  onRightClick: 'rightclick'\n};\nvar updaterMap$9 = {\n  bounds(instance, bounds) {\n    instance.setBounds(bounds);\n  },\n  draggable(instance, draggable) {\n    instance.setDraggable(draggable);\n  },\n  editable(instance, editable) {\n    instance.setEditable(editable);\n  },\n  map(instance, map) {\n    instance.setMap(map);\n  },\n  options(instance, options) {\n    instance.setOptions(options);\n  },\n  visible(instance, visible) {\n    instance.setVisible(visible);\n  }\n};\nfunction RectangleFunctional(_ref) {\n  var {\n    options,\n    bounds,\n    draggable,\n    editable,\n    visible,\n    onDblClick,\n    onDragEnd,\n    onDragStart,\n    onMouseDown,\n    onMouseMove,\n    onMouseOut,\n    onMouseOver,\n    onMouseUp,\n    onRightClick,\n    onClick,\n    onDrag,\n    onBoundsChanged,\n    onLoad,\n    onUnmount\n  } = _ref;\n  var map = useContext(MapContext);\n  var [instance, setInstance] = useState(null);\n  var [dblclickListener, setDblclickListener] = useState(null);\n  var [dragendListener, setDragendListener] = useState(null);\n  var [dragstartListener, setDragstartListener] = useState(null);\n  var [mousedownListener, setMousedownListener] = useState(null);\n  var [mousemoveListener, setMousemoveListener] = useState(null);\n  var [mouseoutListener, setMouseoutListener] = useState(null);\n  var [mouseoverListener, setMouseoverListener] = useState(null);\n  var [mouseupListener, setMouseupListener] = useState(null);\n  var [rightClickListener, setRightClickListener] = useState(null);\n  var [clickListener, setClickListener] = useState(null);\n  var [dragListener, setDragListener] = useState(null);\n  var [boundsChangedListener, setBoundsChangedListener] = useState(null);\n  // Order does matter\n  useEffect(() => {\n    if (instance !== null) {\n      instance.setMap(map);\n    }\n  }, [map]);\n  useEffect(() => {\n    if (typeof options !== 'undefined' && instance !== null) {\n      instance.setOptions(options);\n    }\n  }, [instance, options]);\n  useEffect(() => {\n    if (typeof draggable !== 'undefined' && instance !== null) {\n      instance.setDraggable(draggable);\n    }\n  }, [instance, draggable]);\n  useEffect(() => {\n    if (typeof editable !== 'undefined' && instance !== null) {\n      instance.setEditable(editable);\n    }\n  }, [instance, editable]);\n  useEffect(() => {\n    if (typeof visible !== 'undefined' && instance !== null) {\n      instance.setVisible(visible);\n    }\n  }, [instance, visible]);\n  useEffect(() => {\n    if (typeof bounds !== 'undefined' && instance !== null) {\n      instance.setBounds(bounds);\n    }\n  }, [instance, bounds]);\n  useEffect(() => {\n    if (instance && onDblClick) {\n      if (dblclickListener !== null) {\n        google.maps.event.removeListener(dblclickListener);\n      }\n      setDblclickListener(google.maps.event.addListener(instance, 'dblclick', onDblClick));\n    }\n  }, [onDblClick]);\n  useEffect(() => {\n    if (instance && onDragEnd) {\n      if (dragendListener !== null) {\n        google.maps.event.removeListener(dragendListener);\n      }\n      setDragendListener(google.maps.event.addListener(instance, 'dragend', onDragEnd));\n    }\n  }, [onDragEnd]);\n  useEffect(() => {\n    if (instance && onDragStart) {\n      if (dragstartListener !== null) {\n        google.maps.event.removeListener(dragstartListener);\n      }\n      setDragstartListener(google.maps.event.addListener(instance, 'dragstart', onDragStart));\n    }\n  }, [onDragStart]);\n  useEffect(() => {\n    if (instance && onMouseDown) {\n      if (mousedownListener !== null) {\n        google.maps.event.removeListener(mousedownListener);\n      }\n      setMousedownListener(google.maps.event.addListener(instance, 'mousedown', onMouseDown));\n    }\n  }, [onMouseDown]);\n  useEffect(() => {\n    if (instance && onMouseMove) {\n      if (mousemoveListener !== null) {\n        google.maps.event.removeListener(mousemoveListener);\n      }\n      setMousemoveListener(google.maps.event.addListener(instance, 'mousemove', onMouseMove));\n    }\n  }, [onMouseMove]);\n  useEffect(() => {\n    if (instance && onMouseOut) {\n      if (mouseoutListener !== null) {\n        google.maps.event.removeListener(mouseoutListener);\n      }\n      setMouseoutListener(google.maps.event.addListener(instance, 'mouseout', onMouseOut));\n    }\n  }, [onMouseOut]);\n  useEffect(() => {\n    if (instance && onMouseOver) {\n      if (mouseoverListener !== null) {\n        google.maps.event.removeListener(mouseoverListener);\n      }\n      setMouseoverListener(google.maps.event.addListener(instance, 'mouseover', onMouseOver));\n    }\n  }, [onMouseOver]);\n  useEffect(() => {\n    if (instance && onMouseUp) {\n      if (mouseupListener !== null) {\n        google.maps.event.removeListener(mouseupListener);\n      }\n      setMouseupListener(google.maps.event.addListener(instance, 'mouseup', onMouseUp));\n    }\n  }, [onMouseUp]);\n  useEffect(() => {\n    if (instance && onRightClick) {\n      if (rightClickListener !== null) {\n        google.maps.event.removeListener(rightClickListener);\n      }\n      setRightClickListener(google.maps.event.addListener(instance, 'rightclick', onRightClick));\n    }\n  }, [onRightClick]);\n  useEffect(() => {\n    if (instance && onClick) {\n      if (clickListener !== null) {\n        google.maps.event.removeListener(clickListener);\n      }\n      setClickListener(google.maps.event.addListener(instance, 'click', onClick));\n    }\n  }, [onClick]);\n  useEffect(() => {\n    if (instance && onDrag) {\n      if (dragListener !== null) {\n        google.maps.event.removeListener(dragListener);\n      }\n      setDragListener(google.maps.event.addListener(instance, 'drag', onDrag));\n    }\n  }, [onDrag]);\n  useEffect(() => {\n    if (instance && onBoundsChanged) {\n      if (boundsChangedListener !== null) {\n        google.maps.event.removeListener(boundsChangedListener);\n      }\n      setBoundsChangedListener(google.maps.event.addListener(instance, 'bounds_changed', onBoundsChanged));\n    }\n  }, [onBoundsChanged]);\n  useEffect(() => {\n    var rectangle = new google.maps.Rectangle(_objectSpread$7(_objectSpread$7({}, options), {}, {\n      map\n    }));\n    if (typeof visible !== 'undefined') {\n      rectangle.setVisible(visible);\n    }\n    if (typeof editable !== 'undefined') {\n      rectangle.setEditable(editable);\n    }\n    if (typeof draggable !== 'undefined') {\n      rectangle.setDraggable(draggable);\n    }\n    if (typeof bounds !== 'undefined') {\n      rectangle.setBounds(bounds);\n    }\n    if (onDblClick) {\n      setDblclickListener(google.maps.event.addListener(rectangle, 'dblclick', onDblClick));\n    }\n    if (onDragEnd) {\n      setDragendListener(google.maps.event.addListener(rectangle, 'dragend', onDragEnd));\n    }\n    if (onDragStart) {\n      setDragstartListener(google.maps.event.addListener(rectangle, 'dragstart', onDragStart));\n    }\n    if (onMouseDown) {\n      setMousedownListener(google.maps.event.addListener(rectangle, 'mousedown', onMouseDown));\n    }\n    if (onMouseMove) {\n      setMousemoveListener(google.maps.event.addListener(rectangle, 'mousemove', onMouseMove));\n    }\n    if (onMouseOut) {\n      setMouseoutListener(google.maps.event.addListener(rectangle, 'mouseout', onMouseOut));\n    }\n    if (onMouseOver) {\n      setMouseoverListener(google.maps.event.addListener(rectangle, 'mouseover', onMouseOver));\n    }\n    if (onMouseUp) {\n      setMouseupListener(google.maps.event.addListener(rectangle, 'mouseup', onMouseUp));\n    }\n    if (onRightClick) {\n      setRightClickListener(google.maps.event.addListener(rectangle, 'rightclick', onRightClick));\n    }\n    if (onClick) {\n      setClickListener(google.maps.event.addListener(rectangle, 'click', onClick));\n    }\n    if (onDrag) {\n      setDragListener(google.maps.event.addListener(rectangle, 'drag', onDrag));\n    }\n    if (onBoundsChanged) {\n      setBoundsChangedListener(google.maps.event.addListener(rectangle, 'bounds_changed', onBoundsChanged));\n    }\n    setInstance(rectangle);\n    if (onLoad) {\n      onLoad(rectangle);\n    }\n    return () => {\n      if (dblclickListener !== null) {\n        google.maps.event.removeListener(dblclickListener);\n      }\n      if (dragendListener !== null) {\n        google.maps.event.removeListener(dragendListener);\n      }\n      if (dragstartListener !== null) {\n        google.maps.event.removeListener(dragstartListener);\n      }\n      if (mousedownListener !== null) {\n        google.maps.event.removeListener(mousedownListener);\n      }\n      if (mousemoveListener !== null) {\n        google.maps.event.removeListener(mousemoveListener);\n      }\n      if (mouseoutListener !== null) {\n        google.maps.event.removeListener(mouseoutListener);\n      }\n      if (mouseoverListener !== null) {\n        google.maps.event.removeListener(mouseoverListener);\n      }\n      if (mouseupListener !== null) {\n        google.maps.event.removeListener(mouseupListener);\n      }\n      if (rightClickListener !== null) {\n        google.maps.event.removeListener(rightClickListener);\n      }\n      if (clickListener !== null) {\n        google.maps.event.removeListener(clickListener);\n      }\n      if (dragListener !== null) {\n        google.maps.event.removeListener(dragListener);\n      }\n      if (boundsChangedListener !== null) {\n        google.maps.event.removeListener(boundsChangedListener);\n      }\n      if (onUnmount) {\n        onUnmount(rectangle);\n      }\n      rectangle.setMap(null);\n    };\n  }, []);\n  return null;\n}\nvar RectangleF = memo(RectangleFunctional);\nclass Rectangle extends PureComponent {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"registeredEvents\", []);\n    _defineProperty(this, \"state\", {\n      rectangle: null\n    });\n    _defineProperty(this, \"setRectangleCallback\", () => {\n      if (this.state.rectangle !== null && this.props.onLoad) {\n        this.props.onLoad(this.state.rectangle);\n      }\n    });\n  }\n  componentDidMount() {\n    var rectangle = new google.maps.Rectangle(_objectSpread$7(_objectSpread$7({}, this.props.options), {}, {\n      map: this.context\n    }));\n    this.registeredEvents = applyUpdatersToPropsAndRegisterEvents({\n      updaterMap: updaterMap$9,\n      eventMap: eventMap$9,\n      prevProps: {},\n      nextProps: this.props,\n      instance: rectangle\n    });\n    this.setState(function setRectangle() {\n      return {\n        rectangle\n      };\n    }, this.setRectangleCallback);\n  }\n  componentDidUpdate(prevProps) {\n    if (this.state.rectangle !== null) {\n      unregisterEvents(this.registeredEvents);\n      this.registeredEvents = applyUpdatersToPropsAndRegisterEvents({\n        updaterMap: updaterMap$9,\n        eventMap: eventMap$9,\n        prevProps,\n        nextProps: this.props,\n        instance: this.state.rectangle\n      });\n    }\n  }\n  componentWillUnmount() {\n    if (this.state.rectangle !== null) {\n      if (this.props.onUnmount) {\n        this.props.onUnmount(this.state.rectangle);\n      }\n      unregisterEvents(this.registeredEvents);\n      this.state.rectangle.setMap(null);\n    }\n  }\n  render() {\n    return null;\n  }\n}\n_defineProperty(Rectangle, \"contextType\", MapContext);\n\nfunction ownKeys$6(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread$6(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys$6(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$6(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nvar eventMap$8 = {\n  onCenterChanged: 'center_changed',\n  onRadiusChanged: 'radius_changed',\n  onClick: 'click',\n  onDblClick: 'dblclick',\n  onDrag: 'drag',\n  onDragEnd: 'dragend',\n  onDragStart: 'dragstart',\n  onMouseDown: 'mousedown',\n  onMouseMove: 'mousemove',\n  onMouseOut: 'mouseout',\n  onMouseOver: 'mouseover',\n  onMouseUp: 'mouseup',\n  onRightClick: 'rightclick'\n};\nvar updaterMap$8 = {\n  center(instance, center) {\n    instance.setCenter(center);\n  },\n  draggable(instance, draggable) {\n    instance.setDraggable(draggable);\n  },\n  editable(instance, editable) {\n    instance.setEditable(editable);\n  },\n  map(instance, map) {\n    instance.setMap(map);\n  },\n  options(instance, options) {\n    instance.setOptions(options);\n  },\n  radius(instance, radius) {\n    instance.setRadius(radius);\n  },\n  visible(instance, visible) {\n    instance.setVisible(visible);\n  }\n};\nvar defaultOptions = {};\nfunction CircleFunctional(_ref) {\n  var {\n    options,\n    center,\n    radius,\n    draggable,\n    editable,\n    visible,\n    onDblClick,\n    onDragEnd,\n    onDragStart,\n    onMouseDown,\n    onMouseMove,\n    onMouseOut,\n    onMouseOver,\n    onMouseUp,\n    onRightClick,\n    onClick,\n    onDrag,\n    onCenterChanged,\n    onRadiusChanged,\n    onLoad,\n    onUnmount\n  } = _ref;\n  var map = useContext(MapContext);\n  var [instance, setInstance] = useState(null);\n  var [dblclickListener, setDblclickListener] = useState(null);\n  var [dragendListener, setDragendListener] = useState(null);\n  var [dragstartListener, setDragstartListener] = useState(null);\n  var [mousedownListener, setMousedownListener] = useState(null);\n  var [mousemoveListener, setMousemoveListener] = useState(null);\n  var [mouseoutListener, setMouseoutListener] = useState(null);\n  var [mouseoverListener, setMouseoverListener] = useState(null);\n  var [mouseupListener, setMouseupListener] = useState(null);\n  var [rightclickListener, setRightclickListener] = useState(null);\n  var [clickListener, setClickListener] = useState(null);\n  var [dragListener, setDragListener] = useState(null);\n  var [centerChangedListener, setCenterChangedListener] = useState(null);\n  var [radiusChangedListener, setRadiusChangedListener] = useState(null);\n  // Order does matter\n  useEffect(() => {\n    if (instance !== null) {\n      instance.setMap(map);\n    }\n  }, [map]);\n  useEffect(() => {\n    if (typeof options !== 'undefined' && instance !== null) {\n      instance.setOptions(options);\n    }\n  }, [instance, options]);\n  useEffect(() => {\n    if (typeof draggable !== 'undefined' && instance !== null) {\n      instance.setDraggable(draggable);\n    }\n  }, [instance, draggable]);\n  useEffect(() => {\n    if (typeof editable !== 'undefined' && instance !== null) {\n      instance.setEditable(editable);\n    }\n  }, [instance, editable]);\n  useEffect(() => {\n    if (typeof visible !== 'undefined' && instance !== null) {\n      instance.setVisible(visible);\n    }\n  }, [instance, visible]);\n  useEffect(() => {\n    if (typeof radius === 'number' && instance !== null) {\n      instance.setRadius(radius);\n    }\n  }, [instance, radius]);\n  useEffect(() => {\n    if (typeof center !== 'undefined' && instance !== null) {\n      instance.setCenter(center);\n    }\n  }, [instance, center]);\n  useEffect(() => {\n    if (instance && onDblClick) {\n      if (dblclickListener !== null) {\n        google.maps.event.removeListener(dblclickListener);\n      }\n      setDblclickListener(google.maps.event.addListener(instance, 'dblclick', onDblClick));\n    }\n  }, [onDblClick]);\n  useEffect(() => {\n    if (instance && onDragEnd) {\n      if (dragendListener !== null) {\n        google.maps.event.removeListener(dragendListener);\n      }\n      setDragendListener(google.maps.event.addListener(instance, 'dragend', onDragEnd));\n    }\n  }, [onDragEnd]);\n  useEffect(() => {\n    if (instance && onDragStart) {\n      if (dragstartListener !== null) {\n        google.maps.event.removeListener(dragstartListener);\n      }\n      setDragstartListener(google.maps.event.addListener(instance, 'dragstart', onDragStart));\n    }\n  }, [onDragStart]);\n  useEffect(() => {\n    if (instance && onMouseDown) {\n      if (mousedownListener !== null) {\n        google.maps.event.removeListener(mousedownListener);\n      }\n      setMousedownListener(google.maps.event.addListener(instance, 'mousedown', onMouseDown));\n    }\n  }, [onMouseDown]);\n  useEffect(() => {\n    if (instance && onMouseMove) {\n      if (mousemoveListener !== null) {\n        google.maps.event.removeListener(mousemoveListener);\n      }\n      setMousemoveListener(google.maps.event.addListener(instance, 'mousemove', onMouseMove));\n    }\n  }, [onMouseMove]);\n  useEffect(() => {\n    if (instance && onMouseOut) {\n      if (mouseoutListener !== null) {\n        google.maps.event.removeListener(mouseoutListener);\n      }\n      setMouseoutListener(google.maps.event.addListener(instance, 'mouseout', onMouseOut));\n    }\n  }, [onMouseOut]);\n  useEffect(() => {\n    if (instance && onMouseOver) {\n      if (mouseoverListener !== null) {\n        google.maps.event.removeListener(mouseoverListener);\n      }\n      setMouseoverListener(google.maps.event.addListener(instance, 'mouseover', onMouseOver));\n    }\n  }, [onMouseOver]);\n  useEffect(() => {\n    if (instance && onMouseUp) {\n      if (mouseupListener !== null) {\n        google.maps.event.removeListener(mouseupListener);\n      }\n      setMouseupListener(google.maps.event.addListener(instance, 'mouseup', onMouseUp));\n    }\n  }, [onMouseUp]);\n  useEffect(() => {\n    if (instance && onRightClick) {\n      if (rightclickListener !== null) {\n        google.maps.event.removeListener(rightclickListener);\n      }\n      setRightclickListener(google.maps.event.addListener(instance, 'rightclick', onRightClick));\n    }\n  }, [onRightClick]);\n  useEffect(() => {\n    if (instance && onClick) {\n      if (clickListener !== null) {\n        google.maps.event.removeListener(clickListener);\n      }\n      setClickListener(google.maps.event.addListener(instance, 'click', onClick));\n    }\n  }, [onClick]);\n  useEffect(() => {\n    if (instance && onDrag) {\n      if (dragListener !== null) {\n        google.maps.event.removeListener(dragListener);\n      }\n      setDragListener(google.maps.event.addListener(instance, 'drag', onDrag));\n    }\n  }, [onDrag]);\n  useEffect(() => {\n    if (instance && onCenterChanged) {\n      if (centerChangedListener !== null) {\n        google.maps.event.removeListener(centerChangedListener);\n      }\n      setCenterChangedListener(google.maps.event.addListener(instance, 'center_changed', onCenterChanged));\n    }\n  }, [onClick]);\n  useEffect(() => {\n    if (instance && onRadiusChanged) {\n      if (radiusChangedListener !== null) {\n        google.maps.event.removeListener(radiusChangedListener);\n      }\n      setRadiusChangedListener(google.maps.event.addListener(instance, 'radius_changed', onRadiusChanged));\n    }\n  }, [onRadiusChanged]);\n  useEffect(() => {\n    var circle = new google.maps.Circle(_objectSpread$6(_objectSpread$6({}, options || defaultOptions), {}, {\n      map\n    }));\n    if (typeof radius === 'number') {\n      circle.setRadius(radius);\n    }\n    if (typeof center !== 'undefined') {\n      circle.setCenter(center);\n    }\n    if (typeof radius === 'number') {\n      circle.setRadius(radius);\n    }\n    if (typeof visible !== 'undefined') {\n      circle.setVisible(visible);\n    }\n    if (typeof editable !== 'undefined') {\n      circle.setEditable(editable);\n    }\n    if (typeof draggable !== 'undefined') {\n      circle.setDraggable(draggable);\n    }\n    if (onDblClick) {\n      setDblclickListener(google.maps.event.addListener(circle, 'dblclick', onDblClick));\n    }\n    if (onDragEnd) {\n      setDragendListener(google.maps.event.addListener(circle, 'dragend', onDragEnd));\n    }\n    if (onDragStart) {\n      setDragstartListener(google.maps.event.addListener(circle, 'dragstart', onDragStart));\n    }\n    if (onMouseDown) {\n      setMousedownListener(google.maps.event.addListener(circle, 'mousedown', onMouseDown));\n    }\n    if (onMouseMove) {\n      setMousemoveListener(google.maps.event.addListener(circle, 'mousemove', onMouseMove));\n    }\n    if (onMouseOut) {\n      setMouseoutListener(google.maps.event.addListener(circle, 'mouseout', onMouseOut));\n    }\n    if (onMouseOver) {\n      setMouseoverListener(google.maps.event.addListener(circle, 'mouseover', onMouseOver));\n    }\n    if (onMouseUp) {\n      setMouseupListener(google.maps.event.addListener(circle, 'mouseup', onMouseUp));\n    }\n    if (onRightClick) {\n      setRightclickListener(google.maps.event.addListener(circle, 'rightclick', onRightClick));\n    }\n    if (onClick) {\n      setClickListener(google.maps.event.addListener(circle, 'click', onClick));\n    }\n    if (onDrag) {\n      setDragListener(google.maps.event.addListener(circle, 'drag', onDrag));\n    }\n    if (onCenterChanged) {\n      setCenterChangedListener(google.maps.event.addListener(circle, 'center_changed', onCenterChanged));\n    }\n    if (onRadiusChanged) {\n      setRadiusChangedListener(google.maps.event.addListener(circle, 'radius_changed', onRadiusChanged));\n    }\n    setInstance(circle);\n    if (onLoad) {\n      onLoad(circle);\n    }\n    return () => {\n      if (dblclickListener !== null) {\n        google.maps.event.removeListener(dblclickListener);\n      }\n      if (dragendListener !== null) {\n        google.maps.event.removeListener(dragendListener);\n      }\n      if (dragstartListener !== null) {\n        google.maps.event.removeListener(dragstartListener);\n      }\n      if (mousedownListener !== null) {\n        google.maps.event.removeListener(mousedownListener);\n      }\n      if (mousemoveListener !== null) {\n        google.maps.event.removeListener(mousemoveListener);\n      }\n      if (mouseoutListener !== null) {\n        google.maps.event.removeListener(mouseoutListener);\n      }\n      if (mouseoverListener !== null) {\n        google.maps.event.removeListener(mouseoverListener);\n      }\n      if (mouseupListener !== null) {\n        google.maps.event.removeListener(mouseupListener);\n      }\n      if (rightclickListener !== null) {\n        google.maps.event.removeListener(rightclickListener);\n      }\n      if (clickListener !== null) {\n        google.maps.event.removeListener(clickListener);\n      }\n      if (centerChangedListener !== null) {\n        google.maps.event.removeListener(centerChangedListener);\n      }\n      if (radiusChangedListener !== null) {\n        google.maps.event.removeListener(radiusChangedListener);\n      }\n      if (onUnmount) {\n        onUnmount(circle);\n      }\n      circle.setMap(null);\n    };\n  }, []);\n  return null;\n}\nvar CircleF = memo(CircleFunctional);\nclass Circle extends PureComponent {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"registeredEvents\", []);\n    _defineProperty(this, \"state\", {\n      circle: null\n    });\n    _defineProperty(this, \"setCircleCallback\", () => {\n      if (this.state.circle !== null && this.props.onLoad) {\n        this.props.onLoad(this.state.circle);\n      }\n    });\n  }\n  componentDidMount() {\n    var circle = new google.maps.Circle(_objectSpread$6(_objectSpread$6({}, this.props.options), {}, {\n      map: this.context\n    }));\n    this.registeredEvents = applyUpdatersToPropsAndRegisterEvents({\n      updaterMap: updaterMap$8,\n      eventMap: eventMap$8,\n      prevProps: {},\n      nextProps: this.props,\n      instance: circle\n    });\n    this.setState(function setCircle() {\n      return {\n        circle\n      };\n    }, this.setCircleCallback);\n  }\n  componentDidUpdate(prevProps) {\n    if (this.state.circle !== null) {\n      unregisterEvents(this.registeredEvents);\n      this.registeredEvents = applyUpdatersToPropsAndRegisterEvents({\n        updaterMap: updaterMap$8,\n        eventMap: eventMap$8,\n        prevProps,\n        nextProps: this.props,\n        instance: this.state.circle\n      });\n    }\n  }\n  componentWillUnmount() {\n    if (this.state.circle !== null) {\n      var _this$state$circle;\n      if (this.props.onUnmount) {\n        this.props.onUnmount(this.state.circle);\n      }\n      unregisterEvents(this.registeredEvents);\n      (_this$state$circle = this.state.circle) === null || _this$state$circle === void 0 || _this$state$circle.setMap(null);\n    }\n  }\n  render() {\n    return null;\n  }\n}\n_defineProperty(Circle, \"contextType\", MapContext);\n\nfunction ownKeys$5(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread$5(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys$5(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$5(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nvar eventMap$7 = {\n  onClick: 'click',\n  onDblClick: 'dblclick',\n  onMouseDown: 'mousedown',\n  onMouseOut: 'mouseout',\n  onMouseOver: 'mouseover',\n  onMouseUp: 'mouseup',\n  onRightClick: 'rightclick',\n  onAddFeature: 'addfeature',\n  onRemoveFeature: 'removefeature',\n  onRemoveProperty: 'removeproperty',\n  onSetGeometry: 'setgeometry',\n  onSetProperty: 'setproperty'\n};\nvar updaterMap$7 = {\n  add(instance, feature) {\n    instance.add(feature);\n  },\n  addgeojson(instance, geojson, options) {\n    instance.addGeoJson(geojson, options);\n  },\n  contains(instance, feature) {\n    instance.contains(feature);\n  },\n  foreach(instance, callback) {\n    instance.forEach(callback);\n  },\n  loadgeojson(instance, url, options, callback) {\n    instance.loadGeoJson(url, options, callback);\n  },\n  overridestyle(instance, feature, style) {\n    instance.overrideStyle(feature, style);\n  },\n  remove(instance, feature) {\n    instance.remove(feature);\n  },\n  revertstyle(instance, feature) {\n    instance.revertStyle(feature);\n  },\n  controlposition(instance, controlPosition) {\n    instance.setControlPosition(controlPosition);\n  },\n  controls(instance, controls) {\n    instance.setControls(controls);\n  },\n  drawingmode(instance, mode) {\n    instance.setDrawingMode(mode);\n  },\n  map(instance, map) {\n    instance.setMap(map);\n  },\n  style(instance, style) {\n    instance.setStyle(style);\n  },\n  togeojson(instance, callback) {\n    instance.toGeoJson(callback);\n  }\n};\nfunction DataFunctional(_ref) {\n  var {\n    options,\n    onClick,\n    onDblClick,\n    onMouseDown,\n    onMouseMove,\n    onMouseOut,\n    onMouseOver,\n    onMouseUp,\n    onRightClick,\n    onAddFeature,\n    onRemoveFeature,\n    onRemoveProperty,\n    onSetGeometry,\n    onSetProperty,\n    onLoad,\n    onUnmount\n  } = _ref;\n  var map = useContext(MapContext);\n  var [instance, setInstance] = useState(null);\n  var [dblclickListener, setDblclickListener] = useState(null);\n  var [mousedownListener, setMousedownListener] = useState(null);\n  var [mousemoveListener, setMousemoveListener] = useState(null);\n  var [mouseoutListener, setMouseoutListener] = useState(null);\n  var [mouseoverListener, setMouseoverListener] = useState(null);\n  var [mouseupListener, setMouseupListener] = useState(null);\n  var [rightclickListener, setRightclickListener] = useState(null);\n  var [clickListener, setClickListener] = useState(null);\n  var [addFeatureListener, setAddFeatureListener] = useState(null);\n  var [removeFeatureListener, setRemoveFeatureListener] = useState(null);\n  var [removePropertyListener, setRemovePropertyListener] = useState(null);\n  var [setGeometryListener, setSetGeometryListener] = useState(null);\n  var [setPropertyListener, setSetPropertyListener] = useState(null);\n  // Order does matter\n  useEffect(() => {\n    if (instance !== null) {\n      instance.setMap(map);\n    }\n  }, [map]);\n  useEffect(() => {\n    if (instance && onDblClick) {\n      if (dblclickListener !== null) {\n        google.maps.event.removeListener(dblclickListener);\n      }\n      setDblclickListener(google.maps.event.addListener(instance, 'dblclick', onDblClick));\n    }\n  }, [onDblClick]);\n  useEffect(() => {\n    if (instance && onMouseDown) {\n      if (mousedownListener !== null) {\n        google.maps.event.removeListener(mousedownListener);\n      }\n      setMousedownListener(google.maps.event.addListener(instance, 'mousedown', onMouseDown));\n    }\n  }, [onMouseDown]);\n  useEffect(() => {\n    if (instance && onMouseMove) {\n      if (mousemoveListener !== null) {\n        google.maps.event.removeListener(mousemoveListener);\n      }\n      setMousemoveListener(google.maps.event.addListener(instance, 'mousemove', onMouseMove));\n    }\n  }, [onMouseMove]);\n  useEffect(() => {\n    if (instance && onMouseOut) {\n      if (mouseoutListener !== null) {\n        google.maps.event.removeListener(mouseoutListener);\n      }\n      setMouseoutListener(google.maps.event.addListener(instance, 'mouseout', onMouseOut));\n    }\n  }, [onMouseOut]);\n  useEffect(() => {\n    if (instance && onMouseOver) {\n      if (mouseoverListener !== null) {\n        google.maps.event.removeListener(mouseoverListener);\n      }\n      setMouseoverListener(google.maps.event.addListener(instance, 'mouseover', onMouseOver));\n    }\n  }, [onMouseOver]);\n  useEffect(() => {\n    if (instance && onMouseUp) {\n      if (mouseupListener !== null) {\n        google.maps.event.removeListener(mouseupListener);\n      }\n      setMouseupListener(google.maps.event.addListener(instance, 'mouseup', onMouseUp));\n    }\n  }, [onMouseUp]);\n  useEffect(() => {\n    if (instance && onRightClick) {\n      if (rightclickListener !== null) {\n        google.maps.event.removeListener(rightclickListener);\n      }\n      setRightclickListener(google.maps.event.addListener(instance, 'rightclick', onRightClick));\n    }\n  }, [onRightClick]);\n  useEffect(() => {\n    if (instance && onClick) {\n      if (clickListener !== null) {\n        google.maps.event.removeListener(clickListener);\n      }\n      setClickListener(google.maps.event.addListener(instance, 'click', onClick));\n    }\n  }, [onClick]);\n  useEffect(() => {\n    if (instance && onAddFeature) {\n      if (addFeatureListener !== null) {\n        google.maps.event.removeListener(addFeatureListener);\n      }\n      setAddFeatureListener(google.maps.event.addListener(instance, 'addfeature', onAddFeature));\n    }\n  }, [onAddFeature]);\n  useEffect(() => {\n    if (instance && onRemoveFeature) {\n      if (removeFeatureListener !== null) {\n        google.maps.event.removeListener(removeFeatureListener);\n      }\n      setRemoveFeatureListener(google.maps.event.addListener(instance, 'removefeature', onRemoveFeature));\n    }\n  }, [onRemoveFeature]);\n  useEffect(() => {\n    if (instance && onRemoveProperty) {\n      if (removePropertyListener !== null) {\n        google.maps.event.removeListener(removePropertyListener);\n      }\n      setRemovePropertyListener(google.maps.event.addListener(instance, 'removeproperty', onRemoveProperty));\n    }\n  }, [onRemoveProperty]);\n  useEffect(() => {\n    if (instance && onSetGeometry) {\n      if (setGeometryListener !== null) {\n        google.maps.event.removeListener(setGeometryListener);\n      }\n      setSetGeometryListener(google.maps.event.addListener(instance, 'setgeometry', onSetGeometry));\n    }\n  }, [onSetGeometry]);\n  useEffect(() => {\n    if (instance && onSetProperty) {\n      if (setPropertyListener !== null) {\n        google.maps.event.removeListener(setPropertyListener);\n      }\n      setSetPropertyListener(google.maps.event.addListener(instance, 'setproperty', onSetProperty));\n    }\n  }, [onSetProperty]);\n  useEffect(() => {\n    if (map !== null) {\n      var data = new google.maps.Data(_objectSpread$5(_objectSpread$5({}, options), {}, {\n        map\n      }));\n      if (onDblClick) {\n        setDblclickListener(google.maps.event.addListener(data, 'dblclick', onDblClick));\n      }\n      if (onMouseDown) {\n        setMousedownListener(google.maps.event.addListener(data, 'mousedown', onMouseDown));\n      }\n      if (onMouseMove) {\n        setMousemoveListener(google.maps.event.addListener(data, 'mousemove', onMouseMove));\n      }\n      if (onMouseOut) {\n        setMouseoutListener(google.maps.event.addListener(data, 'mouseout', onMouseOut));\n      }\n      if (onMouseOver) {\n        setMouseoverListener(google.maps.event.addListener(data, 'mouseover', onMouseOver));\n      }\n      if (onMouseUp) {\n        setMouseupListener(google.maps.event.addListener(data, 'mouseup', onMouseUp));\n      }\n      if (onRightClick) {\n        setRightclickListener(google.maps.event.addListener(data, 'rightclick', onRightClick));\n      }\n      if (onClick) {\n        setClickListener(google.maps.event.addListener(data, 'click', onClick));\n      }\n      if (onAddFeature) {\n        setAddFeatureListener(google.maps.event.addListener(data, 'addfeature', onAddFeature));\n      }\n      if (onRemoveFeature) {\n        setRemoveFeatureListener(google.maps.event.addListener(data, 'removefeature', onRemoveFeature));\n      }\n      if (onRemoveProperty) {\n        setRemovePropertyListener(google.maps.event.addListener(data, 'removeproperty', onRemoveProperty));\n      }\n      if (onSetGeometry) {\n        setSetGeometryListener(google.maps.event.addListener(data, 'setgeometry', onSetGeometry));\n      }\n      if (onSetProperty) {\n        setSetPropertyListener(google.maps.event.addListener(data, 'setproperty', onSetProperty));\n      }\n      setInstance(data);\n      if (onLoad) {\n        onLoad(data);\n      }\n    }\n    return () => {\n      if (instance) {\n        if (dblclickListener !== null) {\n          google.maps.event.removeListener(dblclickListener);\n        }\n        if (mousedownListener !== null) {\n          google.maps.event.removeListener(mousedownListener);\n        }\n        if (mousemoveListener !== null) {\n          google.maps.event.removeListener(mousemoveListener);\n        }\n        if (mouseoutListener !== null) {\n          google.maps.event.removeListener(mouseoutListener);\n        }\n        if (mouseoverListener !== null) {\n          google.maps.event.removeListener(mouseoverListener);\n        }\n        if (mouseupListener !== null) {\n          google.maps.event.removeListener(mouseupListener);\n        }\n        if (rightclickListener !== null) {\n          google.maps.event.removeListener(rightclickListener);\n        }\n        if (clickListener !== null) {\n          google.maps.event.removeListener(clickListener);\n        }\n        if (addFeatureListener !== null) {\n          google.maps.event.removeListener(addFeatureListener);\n        }\n        if (removeFeatureListener !== null) {\n          google.maps.event.removeListener(removeFeatureListener);\n        }\n        if (removePropertyListener !== null) {\n          google.maps.event.removeListener(removePropertyListener);\n        }\n        if (setGeometryListener !== null) {\n          google.maps.event.removeListener(setGeometryListener);\n        }\n        if (setPropertyListener !== null) {\n          google.maps.event.removeListener(setPropertyListener);\n        }\n        if (onUnmount) {\n          onUnmount(instance);\n        }\n        instance.setMap(null);\n      }\n    };\n  }, []);\n  return null;\n}\nvar DataF = memo(DataFunctional);\nclass Data extends PureComponent {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"registeredEvents\", []);\n    _defineProperty(this, \"state\", {\n      data: null\n    });\n    _defineProperty(this, \"setDataCallback\", () => {\n      if (this.state.data !== null && this.props.onLoad) {\n        this.props.onLoad(this.state.data);\n      }\n    });\n  }\n  componentDidMount() {\n    if (this.context !== null) {\n      var data = new google.maps.Data(_objectSpread$5(_objectSpread$5({}, this.props.options), {}, {\n        map: this.context\n      }));\n      this.registeredEvents = applyUpdatersToPropsAndRegisterEvents({\n        updaterMap: updaterMap$7,\n        eventMap: eventMap$7,\n        prevProps: {},\n        nextProps: this.props,\n        instance: data\n      });\n      this.setState(() => {\n        return {\n          data\n        };\n      }, this.setDataCallback);\n    }\n  }\n  componentDidUpdate(prevProps) {\n    if (this.state.data !== null) {\n      unregisterEvents(this.registeredEvents);\n      this.registeredEvents = applyUpdatersToPropsAndRegisterEvents({\n        updaterMap: updaterMap$7,\n        eventMap: eventMap$7,\n        prevProps,\n        nextProps: this.props,\n        instance: this.state.data\n      });\n    }\n  }\n  componentWillUnmount() {\n    if (this.state.data !== null) {\n      if (this.props.onUnmount) {\n        this.props.onUnmount(this.state.data);\n      }\n      unregisterEvents(this.registeredEvents);\n      if (this.state.data) {\n        this.state.data.setMap(null);\n      }\n    }\n  }\n  render() {\n    return null;\n  }\n}\n_defineProperty(Data, \"contextType\", MapContext);\n\nfunction ownKeys$4(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread$4(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys$4(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$4(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nvar eventMap$6 = {\n  onClick: 'click',\n  onDefaultViewportChanged: 'defaultviewport_changed',\n  onStatusChanged: 'status_changed'\n};\nvar updaterMap$6 = {\n  options(instance, options) {\n    instance.setOptions(options);\n  },\n  url(instance, url) {\n    instance.setUrl(url);\n  },\n  zIndex(instance, zIndex) {\n    instance.setZIndex(zIndex);\n  }\n};\nclass KmlLayer extends PureComponent {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"registeredEvents\", []);\n    _defineProperty(this, \"state\", {\n      kmlLayer: null\n    });\n    _defineProperty(this, \"setKmlLayerCallback\", () => {\n      if (this.state.kmlLayer !== null && this.props.onLoad) {\n        this.props.onLoad(this.state.kmlLayer);\n      }\n    });\n  }\n  componentDidMount() {\n    var kmlLayer = new google.maps.KmlLayer(_objectSpread$4(_objectSpread$4({}, this.props.options), {}, {\n      map: this.context\n    }));\n    this.registeredEvents = applyUpdatersToPropsAndRegisterEvents({\n      updaterMap: updaterMap$6,\n      eventMap: eventMap$6,\n      prevProps: {},\n      nextProps: this.props,\n      instance: kmlLayer\n    });\n    this.setState(function setLmlLayer() {\n      return {\n        kmlLayer\n      };\n    }, this.setKmlLayerCallback);\n  }\n  componentDidUpdate(prevProps) {\n    if (this.state.kmlLayer !== null) {\n      unregisterEvents(this.registeredEvents);\n      this.registeredEvents = applyUpdatersToPropsAndRegisterEvents({\n        updaterMap: updaterMap$6,\n        eventMap: eventMap$6,\n        prevProps,\n        nextProps: this.props,\n        instance: this.state.kmlLayer\n      });\n    }\n  }\n  componentWillUnmount() {\n    if (this.state.kmlLayer !== null) {\n      if (this.props.onUnmount) {\n        this.props.onUnmount(this.state.kmlLayer);\n      }\n      unregisterEvents(this.registeredEvents);\n      this.state.kmlLayer.setMap(null);\n    }\n  }\n  render() {\n    return null;\n  }\n}\n_defineProperty(KmlLayer, \"contextType\", MapContext);\n\nfunction getOffsetOverride(containerElement, getPixelPositionOffset) {\n  return typeof getPixelPositionOffset === 'function' ? getPixelPositionOffset(containerElement.offsetWidth, containerElement.offsetHeight) : {\n    x: 0,\n    y: 0\n  };\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction createLatLng(inst, Type) {\n  return new Type(inst.lat, inst.lng);\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction createLatLngBounds(inst, Type) {\n  return new Type(new google.maps.LatLng(inst.ne.lat, inst.ne.lng), new google.maps.LatLng(inst.sw.lat, inst.sw.lng));\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction ensureOfType(inst,\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\ntype,\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfactory\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\n) {\n  return inst instanceof type ? inst : factory(inst, type);\n}\nfunction ensureOfTypeBounds(inst,\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\ntype,\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfactory\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\n) {\n  return inst instanceof type ? inst : factory(inst, type);\n}\nfunction getLayoutStylesByBounds(mapCanvasProjection, offset, bounds) {\n  var ne = mapCanvasProjection && mapCanvasProjection.fromLatLngToDivPixel(bounds.getNorthEast());\n  var sw = mapCanvasProjection && mapCanvasProjection.fromLatLngToDivPixel(bounds.getSouthWest());\n  if (ne && sw) {\n    return {\n      left: \"\".concat(sw.x + offset.x, \"px\"),\n      top: \"\".concat(ne.y + offset.y, \"px\"),\n      width: \"\".concat(ne.x - sw.x - offset.x, \"px\"),\n      height: \"\".concat(sw.y - ne.y - offset.y, \"px\")\n    };\n  }\n  return {\n    left: '-9999px',\n    top: '-9999px'\n  };\n}\nfunction getLayoutStylesByPosition(mapCanvasProjection, offset, position) {\n  var point = mapCanvasProjection && mapCanvasProjection.fromLatLngToDivPixel(position);\n  if (point) {\n    var {\n      x,\n      y\n    } = point;\n    return {\n      left: \"\".concat(x + offset.x, \"px\"),\n      top: \"\".concat(y + offset.y, \"px\")\n    };\n  }\n  return {\n    left: '-9999px',\n    top: '-9999px'\n  };\n}\nfunction getLayoutStyles(mapCanvasProjection, offset, bounds, position) {\n  return bounds !== undefined ? getLayoutStylesByBounds(mapCanvasProjection, offset, ensureOfTypeBounds(bounds, google.maps.LatLngBounds, createLatLngBounds)) : getLayoutStylesByPosition(mapCanvasProjection, offset, ensureOfType(position, google.maps.LatLng, createLatLng));\n}\nfunction arePositionsEqual(currentPosition, previousPosition) {\n  return currentPosition.left === previousPosition.left && currentPosition.top === previousPosition.top && currentPosition.width === previousPosition.height && currentPosition.height === previousPosition.height;\n}\n\nfunction ownKeys$3(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread$3(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys$3(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$3(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction createOverlay(container, pane, position, bounds, getPixelPositionOffset) {\n  class Overlay extends google.maps.OverlayView {\n    constructor(container, pane, position, bounds) {\n      super();\n      this.container = container;\n      this.pane = pane;\n      this.position = position;\n      this.bounds = bounds;\n    }\n    onAdd() {\n      var _this$getPanes;\n      var pane = (_this$getPanes = this.getPanes()) === null || _this$getPanes === void 0 ? void 0 : _this$getPanes[this.pane];\n      pane === null || pane === void 0 || pane.appendChild(this.container);\n    }\n    draw() {\n      var projection = this.getProjection();\n      var offset = _objectSpread$3({}, this.container ? getOffsetOverride(this.container, getPixelPositionOffset) : {\n        x: 0,\n        y: 0\n      });\n      var layoutStyles = getLayoutStyles(projection, offset, this.bounds, this.position);\n      for (var [key, value] of Object.entries(layoutStyles)) {\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        this.container.style[key] = value;\n      }\n    }\n    onRemove() {\n      if (this.container.parentNode !== null) {\n        this.container.parentNode.removeChild(this.container);\n      }\n    }\n  }\n  return new Overlay(container, pane, position, bounds);\n}\n\nfunction ownKeys$2(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread$2(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys$2(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$2(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction convertToLatLngString(latLngLike) {\n  if (!latLngLike) {\n    return '';\n  }\n  var latLng = latLngLike instanceof google.maps.LatLng ? latLngLike : new google.maps.LatLng(latLngLike.lat, latLngLike.lng);\n  return latLng + '';\n}\nfunction convertToLatLngBoundsString(latLngBoundsLike) {\n  if (!latLngBoundsLike) {\n    return '';\n  }\n  var latLngBounds = latLngBoundsLike instanceof google.maps.LatLngBounds ? latLngBoundsLike : new google.maps.LatLngBounds(new google.maps.LatLng(latLngBoundsLike.south, latLngBoundsLike.east), new google.maps.LatLng(latLngBoundsLike.north, latLngBoundsLike.west));\n  return latLngBounds + '';\n}\nvar FLOAT_PANE = \"floatPane\";\nvar MAP_PANE = \"mapPane\";\nvar MARKER_LAYER = \"markerLayer\";\nvar OVERLAY_LAYER = \"overlayLayer\";\nvar OVERLAY_MOUSE_TARGET = \"overlayMouseTarget\";\nfunction OverlayViewFunctional(_ref) {\n  var {\n    position,\n    bounds,\n    mapPaneName,\n    zIndex,\n    onLoad,\n    onUnmount,\n    getPixelPositionOffset,\n    children\n  } = _ref;\n  var map = useContext(MapContext);\n  var container = useMemo(() => {\n    var div = document.createElement('div');\n    div.style.position = 'absolute';\n    return div;\n  }, []);\n  var overlay = useMemo(() => {\n    return createOverlay(container, mapPaneName, position, bounds, getPixelPositionOffset);\n  }, [container, mapPaneName, position, bounds]);\n  useEffect(() => {\n    onLoad === null || onLoad === void 0 || onLoad(overlay);\n    overlay === null || overlay === void 0 || overlay.setMap(map);\n    return () => {\n      onUnmount === null || onUnmount === void 0 || onUnmount(overlay);\n      overlay === null || overlay === void 0 || overlay.setMap(null);\n    };\n  }, [map, overlay]);\n  // to move the container to the foreground and background\n  useEffect(() => {\n    container.style.zIndex = \"\".concat(zIndex);\n  }, [zIndex, container]);\n  return ReactDOM.createPortal(children, container);\n}\nvar OverlayViewF = memo(OverlayViewFunctional);\nclass OverlayView extends PureComponent {\n  constructor(props) {\n    super(props);\n    _defineProperty(this, \"state\", {\n      paneEl: null,\n      containerStyle: {\n        // set initial position\n        position: 'absolute'\n      }\n    });\n    _defineProperty(this, \"updatePane\", () => {\n      var mapPaneName = this.props.mapPaneName;\n      // https://developers.google.com/maps/documentation/javascript/3.exp/reference#MapPanes\n      var mapPanes = this.overlayView.getPanes();\n      invariant(!!mapPaneName, \"OverlayView requires props.mapPaneName but got %s\", mapPaneName);\n      if (mapPanes) {\n        this.setState({\n          paneEl: mapPanes[mapPaneName]\n        });\n      } else {\n        this.setState({\n          paneEl: null\n        });\n      }\n    });\n    _defineProperty(this, \"onAdd\", () => {\n      var _this$props$onLoad, _this$props;\n      this.updatePane();\n      (_this$props$onLoad = (_this$props = this.props).onLoad) === null || _this$props$onLoad === void 0 || _this$props$onLoad.call(_this$props, this.overlayView);\n    });\n    _defineProperty(this, \"onPositionElement\", () => {\n      var mapCanvasProjection = this.overlayView.getProjection();\n      var offset = _objectSpread$2({\n        x: 0,\n        y: 0\n      }, this.containerRef.current ? getOffsetOverride(this.containerRef.current, this.props.getPixelPositionOffset) : {});\n      var layoutStyles = getLayoutStyles(mapCanvasProjection, offset, this.props.bounds, this.props.position);\n      if (!arePositionsEqual(layoutStyles, {\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        left: this.state.containerStyle.left,\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        top: this.state.containerStyle.top,\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        width: this.state.containerStyle.width,\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        height: this.state.containerStyle.height\n      })) {\n        var _layoutStyles$top, _layoutStyles$left, _layoutStyles$width, _layoutStyles$height;\n        this.setState({\n          containerStyle: {\n            top: (_layoutStyles$top = layoutStyles.top) !== null && _layoutStyles$top !== void 0 ? _layoutStyles$top : 0,\n            left: (_layoutStyles$left = layoutStyles.left) !== null && _layoutStyles$left !== void 0 ? _layoutStyles$left : 0,\n            width: (_layoutStyles$width = layoutStyles.width) !== null && _layoutStyles$width !== void 0 ? _layoutStyles$width : 0,\n            height: (_layoutStyles$height = layoutStyles.height) !== null && _layoutStyles$height !== void 0 ? _layoutStyles$height : 0,\n            position: 'absolute'\n          }\n        });\n      }\n    });\n    _defineProperty(this, \"draw\", () => {\n      this.onPositionElement();\n    });\n    _defineProperty(this, \"onRemove\", () => {\n      var _this$props$onUnmount, _this$props2;\n      this.setState(() => ({\n        paneEl: null\n      }));\n      (_this$props$onUnmount = (_this$props2 = this.props).onUnmount) === null || _this$props$onUnmount === void 0 || _this$props$onUnmount.call(_this$props2, this.overlayView);\n    });\n    this.containerRef = createRef();\n    // You must implement three methods: onAdd(), draw(), and onRemove().\n    var overlayView = new google.maps.OverlayView();\n    overlayView.onAdd = this.onAdd;\n    overlayView.draw = this.draw;\n    overlayView.onRemove = this.onRemove;\n    this.overlayView = overlayView;\n  }\n  componentDidMount() {\n    this.overlayView.setMap(this.context);\n  }\n  componentDidUpdate(prevProps) {\n    var prevPositionString = convertToLatLngString(prevProps.position);\n    var positionString = convertToLatLngString(this.props.position);\n    var prevBoundsString = convertToLatLngBoundsString(prevProps.bounds);\n    var boundsString = convertToLatLngBoundsString(this.props.bounds);\n    if (prevPositionString !== positionString || prevBoundsString !== boundsString) {\n      this.overlayView.draw();\n    }\n    if (prevProps.mapPaneName !== this.props.mapPaneName) {\n      this.updatePane();\n    }\n  }\n  componentWillUnmount() {\n    this.overlayView.setMap(null);\n  }\n  render() {\n    var paneEl = this.state.paneEl;\n    if (paneEl) {\n      return ReactDOM.createPortal(jsx(\"div\", {\n        ref: this.containerRef,\n        style: this.state.containerStyle,\n        children: Children.only(this.props.children)\n      }), paneEl);\n    } else {\n      return null;\n    }\n  }\n}\n_defineProperty(OverlayView, \"FLOAT_PANE\", \"floatPane\");\n_defineProperty(OverlayView, \"MAP_PANE\", \"mapPane\");\n_defineProperty(OverlayView, \"MARKER_LAYER\", \"markerLayer\");\n_defineProperty(OverlayView, \"OVERLAY_LAYER\", \"overlayLayer\");\n_defineProperty(OverlayView, \"OVERLAY_MOUSE_TARGET\", \"overlayMouseTarget\");\n_defineProperty(OverlayView, \"contextType\", MapContext);\n\nfunction noop() {\n  return;\n}\n\nfunction ownKeys$1(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread$1(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys$1(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$1(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nvar eventMap$5 = {\n  onDblClick: 'dblclick',\n  onClick: 'click'\n};\nvar updaterMap$5 = {\n  opacity(instance, opacity) {\n    instance.setOpacity(opacity);\n  }\n};\nfunction GroundOverlayFunctional(_ref) {\n  var {\n    url,\n    bounds,\n    options,\n    visible\n  } = _ref;\n  var map = useContext(MapContext);\n  var imageBounds = new google.maps.LatLngBounds(new google.maps.LatLng(bounds.south, bounds.west), new google.maps.LatLng(bounds.north, bounds.east));\n  var groundOverlay = useMemo(() => {\n    return new google.maps.GroundOverlay(url, imageBounds, options);\n  }, []);\n  useEffect(() => {\n    if (groundOverlay !== null) {\n      groundOverlay.setMap(map);\n    }\n  }, [map]);\n  useEffect(() => {\n    if (typeof url !== 'undefined' && groundOverlay !== null) {\n      groundOverlay.set('url', url);\n      groundOverlay.setMap(map);\n    }\n  }, [groundOverlay, url]);\n  useEffect(() => {\n    if (typeof visible !== 'undefined' && groundOverlay !== null) {\n      groundOverlay.setOpacity(visible ? 1 : 0);\n    }\n  }, [groundOverlay, visible]);\n  useEffect(() => {\n    var newBounds = new google.maps.LatLngBounds(new google.maps.LatLng(bounds.south, bounds.west), new google.maps.LatLng(bounds.north, bounds.east));\n    if (typeof bounds !== 'undefined' && groundOverlay !== null) {\n      groundOverlay.set('bounds', newBounds);\n      groundOverlay.setMap(map);\n    }\n  }, [groundOverlay, bounds]);\n  return null;\n}\nvar GroundOverlayF = memo(GroundOverlayFunctional);\nclass GroundOverlay extends PureComponent {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"registeredEvents\", []);\n    _defineProperty(this, \"state\", {\n      groundOverlay: null\n    });\n    _defineProperty(this, \"setGroundOverlayCallback\", () => {\n      if (this.state.groundOverlay !== null && this.props.onLoad) {\n        this.props.onLoad(this.state.groundOverlay);\n      }\n    });\n  }\n  componentDidMount() {\n    invariant(!!this.props.url || !!this.props.bounds, \"For GroundOverlay, url and bounds are passed in to constructor and are immutable after instantiated. This is the behavior of Google Maps JavaScript API v3 ( See https://developers.google.com/maps/documentation/javascript/reference#GroundOverlay) Hence, use the corresponding two props provided by `react-google-maps-api`, url and bounds. In some cases, you'll need the GroundOverlay component to reflect the changes of url and bounds. You can leverage the React's key property to remount the component. Typically, just `key={url}` would serve your need. See https://github.com/tomchentw/react-google-maps/issues/655\");\n    var groundOverlay = new google.maps.GroundOverlay(this.props.url, this.props.bounds, _objectSpread$1(_objectSpread$1({}, this.props.options), {}, {\n      map: this.context\n    }));\n    this.registeredEvents = applyUpdatersToPropsAndRegisterEvents({\n      updaterMap: updaterMap$5,\n      eventMap: eventMap$5,\n      prevProps: {},\n      nextProps: this.props,\n      instance: groundOverlay\n    });\n    this.setState(function setGroundOverlay() {\n      return {\n        groundOverlay\n      };\n    }, this.setGroundOverlayCallback);\n  }\n  componentDidUpdate(prevProps) {\n    if (this.state.groundOverlay !== null) {\n      unregisterEvents(this.registeredEvents);\n      this.registeredEvents = applyUpdatersToPropsAndRegisterEvents({\n        updaterMap: updaterMap$5,\n        eventMap: eventMap$5,\n        prevProps,\n        nextProps: this.props,\n        instance: this.state.groundOverlay\n      });\n    }\n  }\n  componentWillUnmount() {\n    if (this.state.groundOverlay) {\n      if (this.props.onUnmount) {\n        this.props.onUnmount(this.state.groundOverlay);\n      }\n      this.state.groundOverlay.setMap(null);\n    }\n  }\n  render() {\n    return null;\n  }\n}\n_defineProperty(GroundOverlay, \"defaultProps\", {\n  onLoad: noop\n});\n_defineProperty(GroundOverlay, \"contextType\", MapContext);\n\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nvar eventMap$4 = {};\nvar updaterMap$4 = {\n  data(instance, data) {\n    instance.setData(data);\n  },\n  map(instance, map) {\n    instance.setMap(map);\n  },\n  options(instance, options) {\n    instance.setOptions(options);\n  }\n};\nfunction HeatmapLayerFunctional(_ref) {\n  var {\n    data,\n    onLoad,\n    onUnmount,\n    options\n  } = _ref;\n  var map = useContext(MapContext);\n  var [instance, setInstance] = useState(null);\n  useEffect(() => {\n    if (!google.maps.visualization) {\n      invariant(!!google.maps.visualization, 'Did you include prop libraries={[\"visualization\"]} in useJsApiScript? %s', google.maps.visualization);\n    }\n  }, []);\n  useEffect(() => {\n    invariant(!!data, 'data property is required in HeatmapLayer %s', data);\n  }, [data]);\n  // Order does matter\n  useEffect(() => {\n    if (instance !== null) {\n      instance.setMap(map);\n    }\n  }, [map]);\n  useEffect(() => {\n    if (options && instance !== null) {\n      instance.setOptions(options);\n    }\n  }, [instance, options]);\n  useEffect(() => {\n    var heatmapLayer = new google.maps.visualization.HeatmapLayer(_objectSpread(_objectSpread({}, options), {}, {\n      data,\n      map\n    }));\n    setInstance(heatmapLayer);\n    if (onLoad) {\n      onLoad(heatmapLayer);\n    }\n    return () => {\n      if (instance !== null) {\n        if (onUnmount) {\n          onUnmount(instance);\n        }\n        instance.setMap(null);\n      }\n    };\n  }, []);\n  return null;\n}\nvar HeatmapLayerF = memo(HeatmapLayerFunctional);\nclass HeatmapLayer extends PureComponent {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"registeredEvents\", []);\n    _defineProperty(this, \"state\", {\n      heatmapLayer: null\n    });\n    _defineProperty(this, \"setHeatmapLayerCallback\", () => {\n      if (this.state.heatmapLayer !== null && this.props.onLoad) {\n        this.props.onLoad(this.state.heatmapLayer);\n      }\n    });\n  }\n  componentDidMount() {\n    invariant(!!google.maps.visualization, 'Did you include prop libraries={[\"visualization\"]} to <LoadScript />? %s', google.maps.visualization);\n    invariant(!!this.props.data, 'data property is required in HeatmapLayer %s', this.props.data);\n    var heatmapLayer = new google.maps.visualization.HeatmapLayer(_objectSpread(_objectSpread({}, this.props.options), {}, {\n      data: this.props.data,\n      map: this.context\n    }));\n    this.registeredEvents = applyUpdatersToPropsAndRegisterEvents({\n      updaterMap: updaterMap$4,\n      eventMap: eventMap$4,\n      prevProps: {},\n      nextProps: this.props,\n      instance: heatmapLayer\n    });\n    this.setState(function setHeatmapLayer() {\n      return {\n        heatmapLayer\n      };\n    }, this.setHeatmapLayerCallback);\n  }\n  componentDidUpdate(prevProps) {\n    unregisterEvents(this.registeredEvents);\n    this.registeredEvents = applyUpdatersToPropsAndRegisterEvents({\n      updaterMap: updaterMap$4,\n      eventMap: eventMap$4,\n      prevProps,\n      nextProps: this.props,\n      instance: this.state.heatmapLayer\n    });\n  }\n  componentWillUnmount() {\n    if (this.state.heatmapLayer !== null) {\n      if (this.props.onUnmount) {\n        this.props.onUnmount(this.state.heatmapLayer);\n      }\n      unregisterEvents(this.registeredEvents);\n      this.state.heatmapLayer.setMap(null);\n    }\n  }\n  render() {\n    return null;\n  }\n}\n_defineProperty(HeatmapLayer, \"contextType\", MapContext);\n\nvar eventMap$3 = {\n  onCloseClick: 'closeclick',\n  onPanoChanged: 'pano_changed',\n  onPositionChanged: 'position_changed',\n  onPovChanged: 'pov_changed',\n  onResize: 'resize',\n  onStatusChanged: 'status_changed',\n  onVisibleChanged: 'visible_changed',\n  onZoomChanged: 'zoom_changed'\n};\nvar updaterMap$3 = {\n  register(instance, provider, options) {\n    instance.registerPanoProvider(provider, options);\n  },\n  links(instance, links) {\n    instance.setLinks(links);\n  },\n  motionTracking(instance, motionTracking) {\n    instance.setMotionTracking(motionTracking);\n  },\n  options(instance, options) {\n    instance.setOptions(options);\n  },\n  pano(instance, pano) {\n    instance.setPano(pano);\n  },\n  position(instance, position) {\n    instance.setPosition(position);\n  },\n  pov(instance, pov) {\n    instance.setPov(pov);\n  },\n  visible(instance, visible) {\n    instance.setVisible(visible);\n  },\n  zoom(instance, zoom) {\n    instance.setZoom(zoom);\n  }\n};\nclass StreetViewPanorama extends PureComponent {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"registeredEvents\", []);\n    _defineProperty(this, \"state\", {\n      streetViewPanorama: null\n    });\n    _defineProperty(this, \"setStreetViewPanoramaCallback\", () => {\n      if (this.state.streetViewPanorama !== null && this.props.onLoad) {\n        this.props.onLoad(this.state.streetViewPanorama);\n      }\n    });\n  }\n  componentDidMount() {\n    var _this$context$getStre, _this$context;\n    var streetViewPanorama = (_this$context$getStre = (_this$context = this.context) === null || _this$context === void 0 ? void 0 : _this$context.getStreetView()) !== null && _this$context$getStre !== void 0 ? _this$context$getStre : null;\n    this.registeredEvents = applyUpdatersToPropsAndRegisterEvents({\n      updaterMap: updaterMap$3,\n      eventMap: eventMap$3,\n      prevProps: {},\n      nextProps: this.props,\n      instance: streetViewPanorama\n    });\n    this.setState(() => {\n      return {\n        streetViewPanorama\n      };\n    }, this.setStreetViewPanoramaCallback);\n  }\n  componentDidUpdate(prevProps) {\n    if (this.state.streetViewPanorama !== null) {\n      unregisterEvents(this.registeredEvents);\n      this.registeredEvents = applyUpdatersToPropsAndRegisterEvents({\n        updaterMap: updaterMap$3,\n        eventMap: eventMap$3,\n        prevProps,\n        nextProps: this.props,\n        instance: this.state.streetViewPanorama\n      });\n    }\n  }\n  componentWillUnmount() {\n    if (this.state.streetViewPanorama !== null) {\n      if (this.props.onUnmount) {\n        this.props.onUnmount(this.state.streetViewPanorama);\n      }\n      unregisterEvents(this.registeredEvents);\n      this.state.streetViewPanorama.setVisible(false);\n    }\n  }\n  render() {\n    return null;\n  }\n}\n_defineProperty(StreetViewPanorama, \"contextType\", MapContext);\n\nclass StreetViewService extends PureComponent {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"state\", {\n      streetViewService: null\n    });\n    _defineProperty(this, \"setStreetViewServiceCallback\", () => {\n      if (this.state.streetViewService !== null && this.props.onLoad) {\n        this.props.onLoad(this.state.streetViewService);\n      }\n    });\n  }\n  componentDidMount() {\n    var streetViewService = new google.maps.StreetViewService();\n    this.setState(function setStreetViewService() {\n      return {\n        streetViewService\n      };\n    }, this.setStreetViewServiceCallback);\n  }\n  componentWillUnmount() {\n    if (this.state.streetViewService !== null && this.props.onUnmount) {\n      this.props.onUnmount(this.state.streetViewService);\n    }\n  }\n  render() {\n    return null;\n  }\n}\n_defineProperty(StreetViewService, \"contextType\", MapContext);\n\nclass DirectionsService extends PureComponent {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"state\", {\n      directionsService: null\n    });\n    _defineProperty(this, \"setDirectionsServiceCallback\", () => {\n      if (this.state.directionsService !== null && this.props.onLoad) {\n        this.props.onLoad(this.state.directionsService);\n      }\n    });\n  }\n  componentDidMount() {\n    invariant(!!this.props.options, 'DirectionsService expected options object as parameter, but got %s', this.props.options);\n    var directionsService = new google.maps.DirectionsService();\n    this.setState(function setDirectionsService() {\n      return {\n        directionsService\n      };\n    }, this.setDirectionsServiceCallback);\n  }\n  componentDidUpdate() {\n    if (this.state.directionsService !== null) {\n      this.state.directionsService.route(this.props.options, this.props.callback);\n    }\n  }\n  componentWillUnmount() {\n    if (this.state.directionsService !== null) {\n      if (this.props.onUnmount) {\n        this.props.onUnmount(this.state.directionsService);\n      }\n    }\n  }\n  render() {\n    return null;\n  }\n}\n\nvar eventMap$2 = {\n  onDirectionsChanged: 'directions_changed'\n};\nvar updaterMap$2 = {\n  directions(instance, directions) {\n    instance.setDirections(directions);\n  },\n  map(instance, map) {\n    instance.setMap(map);\n  },\n  options(instance, options) {\n    instance.setOptions(options);\n  },\n  panel(instance, panel) {\n    instance.setPanel(panel);\n  },\n  routeIndex(instance, routeIndex) {\n    instance.setRouteIndex(routeIndex);\n  }\n};\nclass DirectionsRenderer extends PureComponent {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"registeredEvents\", []);\n    _defineProperty(this, \"state\", {\n      directionsRenderer: null\n    });\n    _defineProperty(this, \"setDirectionsRendererCallback\", () => {\n      if (this.state.directionsRenderer !== null) {\n        this.state.directionsRenderer.setMap(this.context);\n        if (this.props.onLoad) {\n          this.props.onLoad(this.state.directionsRenderer);\n        }\n      }\n    });\n  }\n  componentDidMount() {\n    var directionsRenderer = new google.maps.DirectionsRenderer(this.props.options);\n    this.registeredEvents = applyUpdatersToPropsAndRegisterEvents({\n      updaterMap: updaterMap$2,\n      eventMap: eventMap$2,\n      prevProps: {},\n      nextProps: this.props,\n      instance: directionsRenderer\n    });\n    this.setState(function setDirectionsRenderer() {\n      return {\n        directionsRenderer\n      };\n    }, this.setDirectionsRendererCallback);\n  }\n  componentDidUpdate(prevProps) {\n    if (this.state.directionsRenderer !== null) {\n      unregisterEvents(this.registeredEvents);\n      this.registeredEvents = applyUpdatersToPropsAndRegisterEvents({\n        updaterMap: updaterMap$2,\n        eventMap: eventMap$2,\n        prevProps,\n        nextProps: this.props,\n        instance: this.state.directionsRenderer\n      });\n    }\n  }\n  componentWillUnmount() {\n    if (this.state.directionsRenderer !== null) {\n      if (this.props.onUnmount) {\n        this.props.onUnmount(this.state.directionsRenderer);\n      }\n      unregisterEvents(this.registeredEvents);\n      if (this.state.directionsRenderer) {\n        this.state.directionsRenderer.setMap(null);\n      }\n    }\n  }\n  render() {\n    return null;\n  }\n}\n_defineProperty(DirectionsRenderer, \"contextType\", MapContext);\n\nclass DistanceMatrixService extends PureComponent {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"state\", {\n      distanceMatrixService: null\n    });\n    _defineProperty(this, \"setDistanceMatrixServiceCallback\", () => {\n      if (this.state.distanceMatrixService !== null && this.props.onLoad) {\n        this.props.onLoad(this.state.distanceMatrixService);\n      }\n    });\n  }\n  componentDidMount() {\n    invariant(!!this.props.options, 'DistanceMatrixService expected options object as parameter, but go %s', this.props.options);\n    var distanceMatrixService = new google.maps.DistanceMatrixService();\n    this.setState(function setDistanceMatrixService() {\n      return {\n        distanceMatrixService\n      };\n    }, this.setDistanceMatrixServiceCallback);\n  }\n  componentDidUpdate() {\n    if (this.state.distanceMatrixService !== null) {\n      this.state.distanceMatrixService.getDistanceMatrix(this.props.options, this.props.callback);\n    }\n  }\n  componentWillUnmount() {\n    if (this.state.distanceMatrixService !== null && this.props.onUnmount) {\n      this.props.onUnmount(this.state.distanceMatrixService);\n    }\n  }\n  render() {\n    return null;\n  }\n}\n\nvar eventMap$1 = {\n  onPlacesChanged: 'places_changed'\n};\nvar updaterMap$1 = {\n  bounds(instance, bounds) {\n    instance.setBounds(bounds);\n  }\n};\nclass StandaloneSearchBox extends PureComponent {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"registeredEvents\", []);\n    _defineProperty(this, \"containerElement\", createRef());\n    _defineProperty(this, \"state\", {\n      searchBox: null\n    });\n    _defineProperty(this, \"setSearchBoxCallback\", () => {\n      if (this.state.searchBox !== null && this.props.onLoad) {\n        this.props.onLoad(this.state.searchBox);\n      }\n    });\n  }\n  componentDidMount() {\n    invariant(!!google.maps.places, 'You need to provide libraries={[\"places\"]} prop to <LoadScript /> component %s', google.maps.places);\n    if (this.containerElement !== null && this.containerElement.current !== null) {\n      var input = this.containerElement.current.querySelector('input');\n      if (input !== null) {\n        var searchBox = new google.maps.places.SearchBox(input, this.props.options);\n        this.registeredEvents = applyUpdatersToPropsAndRegisterEvents({\n          updaterMap: updaterMap$1,\n          eventMap: eventMap$1,\n          prevProps: {},\n          nextProps: this.props,\n          instance: searchBox\n        });\n        this.setState(function setSearchBox() {\n          return {\n            searchBox\n          };\n        }, this.setSearchBoxCallback);\n      }\n    }\n  }\n  componentDidUpdate(prevProps) {\n    if (this.state.searchBox !== null) {\n      unregisterEvents(this.registeredEvents);\n      this.registeredEvents = applyUpdatersToPropsAndRegisterEvents({\n        updaterMap: updaterMap$1,\n        eventMap: eventMap$1,\n        prevProps,\n        nextProps: this.props,\n        instance: this.state.searchBox\n      });\n    }\n  }\n  componentWillUnmount() {\n    if (this.state.searchBox !== null) {\n      if (this.props.onUnmount) {\n        this.props.onUnmount(this.state.searchBox);\n      }\n      unregisterEvents(this.registeredEvents);\n    }\n  }\n  render() {\n    return jsx(\"div\", {\n      ref: this.containerElement,\n      children: Children.only(this.props.children)\n    });\n  }\n}\n_defineProperty(StandaloneSearchBox, \"contextType\", MapContext);\n\nvar eventMap = {\n  onPlaceChanged: 'place_changed'\n};\nvar updaterMap = {\n  bounds(instance, bounds) {\n    instance.setBounds(bounds);\n  },\n  restrictions(instance, restrictions) {\n    instance.setComponentRestrictions(restrictions);\n  },\n  fields(instance, fields) {\n    instance.setFields(fields);\n  },\n  options(instance, options) {\n    instance.setOptions(options);\n  },\n  types(instance, types) {\n    instance.setTypes(types);\n  }\n};\nclass Autocomplete extends PureComponent {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"registeredEvents\", []);\n    _defineProperty(this, \"containerElement\", createRef());\n    _defineProperty(this, \"state\", {\n      autocomplete: null\n    });\n    _defineProperty(this, \"setAutocompleteCallback\", () => {\n      if (this.state.autocomplete !== null && this.props.onLoad) {\n        this.props.onLoad(this.state.autocomplete);\n      }\n    });\n  }\n  componentDidMount() {\n    var _this$containerElemen;\n    invariant(!!google.maps.places, 'You need to provide libraries={[\"places\"]} prop to <LoadScript /> component %s', google.maps.places);\n    // TODO: why current could be equal null?\n    var input = (_this$containerElemen = this.containerElement.current) === null || _this$containerElemen === void 0 ? void 0 : _this$containerElemen.querySelector('input');\n    if (input) {\n      var autocomplete = new google.maps.places.Autocomplete(input, this.props.options);\n      this.registeredEvents = applyUpdatersToPropsAndRegisterEvents({\n        updaterMap,\n        eventMap,\n        prevProps: {},\n        nextProps: this.props,\n        instance: autocomplete\n      });\n      this.setState(() => {\n        return {\n          autocomplete\n        };\n      }, this.setAutocompleteCallback);\n    }\n  }\n  componentDidUpdate(prevProps) {\n    unregisterEvents(this.registeredEvents);\n    this.registeredEvents = applyUpdatersToPropsAndRegisterEvents({\n      updaterMap,\n      eventMap,\n      prevProps,\n      nextProps: this.props,\n      instance: this.state.autocomplete\n    });\n  }\n  componentWillUnmount() {\n    if (this.state.autocomplete !== null) {\n      unregisterEvents(this.registeredEvents);\n    }\n  }\n  render() {\n    return jsx(\"div\", {\n      ref: this.containerElement,\n      className: this.props.className,\n      children: Children.only(this.props.children)\n    });\n  }\n}\n_defineProperty(Autocomplete, \"defaultProps\", {\n  className: ''\n});\n_defineProperty(Autocomplete, \"contextType\", MapContext);\n\nexport { Autocomplete, BicyclingLayer, BicyclingLayerF, Circle, CircleF, Data, DataF, DirectionsRenderer, DirectionsService, DistanceMatrixService, DrawingManager, DrawingManagerF, FLOAT_PANE, GoogleMap, index_esm as GoogleMapsMarkerClusterer, GoogleMarkerClusterer$1 as GoogleMarkerClusterer, GroundOverlay, GroundOverlayF, HeatmapLayer, HeatmapLayerF, InfoBoxComponent as InfoBox, InfoBoxF, InfoWindow, InfoWindowF, KmlLayer, LoadScript, LoadScriptNext$1 as LoadScriptNext, MAP_PANE, MARKER_LAYER, MapContext, Marker, ClustererComponent as MarkerClusterer, MarkerClustererF, MarkerF, OVERLAY_LAYER, OVERLAY_MOUSE_TARGET, OverlayView, OverlayViewF, Polygon, PolygonF, Polyline, PolylineF, Rectangle, RectangleF, StandaloneSearchBox, StreetViewPanorama, StreetViewService, TrafficLayer, TrafficLayerF, TransitLayer, TransitLayerF, useGoogleMap, useJsApiLoader, useLoadScript };\n//# sourceMappingURL=esm.js.map\n","import React, { useState } from 'react';\nimport { X, MapPin, Clock, Calendar, User, Share2, Mail, Send } from 'lucide-react';\nimport { Event } from '../../types';\nimport { GoogleMap, useLoadScript, Marker } from '@react-google-maps/api';\nimport { supabase } from '../../lib/supabase';\n\ninterface EventModalProps {\n  event: Event;\n  onClose: () => void;\n}\n\nconst EventModal: React.FC<EventModalProps> = ({ event, onClose }) => {\n  const [showShareModal, setShowShareModal] = useState(false);\n  const [shareEmail, setShareEmail] = useState('');\n  const [isSharing, setIsSharing] = useState(false);\n  const [shareError, setShareError] = useState<string | null>(null);\n  const [mapCenter, setMapCenter] = useState<google.maps.LatLngLiteral | null>(null);\n\n  const { isLoaded, loadError } = useLoadScript({\n    googleMapsApiKey: import.meta.env.VITE_GOOGLE_MAPS_API_KEY,\n    libraries: ['places']\n  });\n\n  React.useEffect(() => {\n    if (isLoaded && event.location && !mapCenter) {\n      const geocoder = new google.maps.Geocoder();\n      geocoder.geocode({ address: event.location }, (results, status) => {\n        if (status === 'OK' && results?.[0]) {\n          const { lat, lng } = results[0].geometry.location;\n          setMapCenter({ lat: lat(), lng: lng() });\n        }\n      });\n    }\n  }, [isLoaded, event.location, mapCenter]);\n\n  const handleShare = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!shareEmail) return;\n\n    setIsSharing(true);\n    setShareError(null);\n\n    try {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) throw new Error('Not authenticated');\n\n      const response = await fetch('/api/share-event', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${(await supabase.auth.getSession()).data.session?.access_token}`\n        },\n        body: JSON.stringify({\n          event,\n          recipientEmail: shareEmail,\n          senderEmail: user.email\n        })\n      });\n\n      if (!response.ok) throw new Error('Failed to share event');\n\n      setShowShareModal(false);\n      setShareEmail('');\n    } catch (error) {\n      setShareError('Failed to share event. Please try again.');\n    } finally {\n      setIsSharing(false);\n    }\n  };\n\n  const ShareModal = () => (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60]\" onClick={(e) => e.stopPropagation()}>\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4\">\n        <div className=\"flex justify-between items-center mb-4\">\n          <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">Share Event</h3>\n          <button\n            onClick={() => setShowShareModal(false)}\n            className=\"text-gray-400 hover:text-gray-500 dark:text-gray-300 dark:hover:text-gray-200\"\n          >\n            <X className=\"h-5 w-5\" />\n          </button>\n        </div>\n\n        <form onSubmit={handleShare} className=\"space-y-4\">\n          <div>\n            <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n              Recipient Email\n            </label>\n            <div className=\"mt-1 relative rounded-md shadow-sm\">\n              <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                <Mail className=\"h-5 w-5 text-gray-400\" />\n              </div>\n              <input\n                type=\"email\"\n                id=\"email\"\n                value={shareEmail}\n                onChange={(e) => setShareEmail(e.target.value)}\n                className=\"block w-full pl-10 pr-12 sm:text-sm border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white focus:ring-blue-500 focus:border-blue-500\"\n                placeholder=\"Enter email address\"\n                autoComplete=\"off\"\n              />\n            </div>\n          </div>\n\n          {shareError && (\n            <p className=\"text-sm text-red-600 dark:text-red-400\">{shareError}</p>\n          )}\n\n          <button\n            type=\"submit\"\n            disabled={isSharing || !shareEmail}\n            className=\"w-full flex items-center justify-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n          >\n            {isSharing ? (\n              <>\n                <div className=\"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent mr-2\" />\n                Sharing...\n              </>\n            ) : (\n              <>\n                <Send className=\"h-4 w-4 mr-2\" />\n                Share Event\n              </>\n            )}\n          </button>\n        </form>\n      </div>\n    </div>\n  );\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\" onClick={onClose}>\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-auto\" onClick={(e) => e.stopPropagation()}>\n        <div className=\"px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center\">\n          <div className=\"flex items-center space-x-2\">\n            <span \n              className=\"w-3 h-3 rounded-full\"\n              style={{ backgroundColor: event.child.color }}\n            ></span>\n            <h3 className=\"text-xl font-semibold text-gray-900 dark:text-white\">{event.title}</h3>\n          </div>\n          <div className=\"flex items-center space-x-2\">\n            <button\n              onClick={() => setShowShareModal(true)}\n              className=\"p-2 text-gray-400 hover:text-gray-500 dark:text-gray-300 dark:hover:text-gray-200 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700\"\n            >\n              <Share2 className=\"h-5 w-5\" />\n            </button>\n            <button\n              onClick={onClose}\n              className=\"p-2 text-gray-400 hover:text-gray-500 dark:text-gray-300 dark:hover:text-gray-200 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700\"\n            >\n              <X className=\"h-5 w-5\" />\n            </button>\n          </div>\n        </div>\n\n        <div className=\"p-6 space-y-6\">\n          <div className=\"space-y-4\">\n            <div className=\"flex items-center text-gray-600 dark:text-gray-300\">\n              <Calendar className=\"h-5 w-5 mr-3\" />\n              <span>\n                {event.startTime.toLocaleDateString('en-US', {\n                  weekday: 'long',\n                  year: 'numeric',\n                  month: 'long',\n                  day: 'numeric',\n                })}\n              </span>\n            </div>\n\n            <div className=\"flex items-center text-gray-600 dark:text-gray-300\">\n              <Clock className=\"h-5 w-5 mr-3\" />\n              <span>\n                {event.startTime.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit' })} - \n                {event.endTime.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit' })}\n              </span>\n            </div>\n\n            <div className=\"flex items-center text-gray-600 dark:text-gray-300\">\n              <User className=\"h-5 w-5 mr-3\" />\n              <span>{event.child.name}</span>\n            </div>\n\n            {event.location && (\n              <div className=\"space-y-2\">\n                <div className=\"flex items-center text-gray-600 dark:text-gray-300\">\n                  <MapPin className=\"h-5 w-5 mr-3\" />\n                  <span>{event.location}</span>\n                </div>\n                {isLoaded && !loadError && (\n                  <div className=\"h-64 w-full rounded-lg overflow-hidden\">\n                    {mapCenter && (\n                      <GoogleMap\n                        mapContainerStyle={{ width: '100%', height: '100%' }}\n                        center={mapCenter}\n                        zoom={15}\n                      >\n                        <Marker position={mapCenter} />\n                      </GoogleMap>\n                    )}\n                  </div>\n                )}\n              </div>\n            )}\n\n            {event.description && (\n              <div className=\"bg-gray-50 dark:bg-gray-700 rounded-lg p-4\">\n                <p className=\"text-gray-600 dark:text-gray-300\">{event.description}</p>\n              </div>\n            )}\n          </div>\n\n          <div \n            className=\"flex items-center space-x-2 text-sm\"\n            style={{ color: event.platformColor }}\n          >\n            <event.platformIcon className=\"h-4 w-4\" />\n            <span>Synced from {event.platform}</span>\n          </div>\n        </div>\n      </div>\n\n      {showShareModal && <ShareModal />}\n    </div>\n  );\n};\n\nexport default EventModal;","import React, { useState } from 'react';\nimport { MapPin, Clock, User } from 'lucide-react';\nimport { Event } from '../../types';\nimport EventModal from './EventModal';\n\ninterface EventCardProps {\n  event: Event;\n}\n\nconst EventCard: React.FC<EventCardProps> = ({ event }) => {\n  const [showModal, setShowModal] = useState(false);\n\n  return (\n    <>\n      <div \n        className=\"p-4 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors cursor-pointer\"\n        onClick={() => setShowModal(true)}\n      >\n        <div className=\"flex items-start space-x-4\">\n          <div className=\"flex-shrink-0\">\n            <div \n              className=\"w-12 h-12 rounded-lg flex flex-col items-center justify-center\"\n              style={{ backgroundColor: event.color + '20', color: event.color }}\n            >\n              <div className=\"text-xs font-medium\">{event.startTime.toLocaleString('default', { month: 'short' })}</div>\n              <div className=\"text-lg font-bold\">{event.startTime.getDate()}</div>\n            </div>\n          </div>\n          <div className=\"flex-1 min-w-0\">\n            <div className=\"flex items-center space-x-2\">\n              <span \n                className=\"inline-block h-2 w-2 rounded-full\"\n                style={{ backgroundColor: event.child.color }}\n              ></span>\n              <span className=\"text-sm text-gray-500 dark:text-gray-400\">{event.child.name}</span>\n              <span className=\"text-xs bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300 px-2 py-0.5 rounded-full\">{event.sport}</span>\n            </div>\n            <h3 className=\"text-base font-medium text-gray-900 dark:text-white mt-1\">{event.title}</h3>\n            <div className=\"mt-2 flex items-center text-sm text-gray-500 dark:text-gray-400 space-x-4\">\n              <div className=\"flex items-center\">\n                <Clock className=\"h-4 w-4 mr-1\" />\n                {event.startTime.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit' })} - \n                {event.endTime.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit' })}\n              </div>\n              {event.location && (\n                <div className=\"flex items-center\">\n                  <MapPin className=\"h-4 w-4 mr-1\" />\n                  {event.location}\n                </div>\n              )}\n            </div>\n          </div>\n          <div className=\"flex-shrink-0 self-center\">\n            <div \n              className=\"h-8 w-8 rounded flex items-center justify-center\"\n              style={{ backgroundColor: event.platformColor + '20', color: event.platformColor }}\n            >\n              <event.platformIcon className=\"h-4 w-4\" />\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {showModal && (\n        <EventModal event={event} onClose={() => setShowModal(false)} />\n      )}\n    </>\n  );\n};\n\nexport default EventCard;","import React from 'react';\nimport { Child } from '../../types';\n\ninterface ChildActivitySummaryProps {\n  child: Child;\n}\n\nconst ChildActivitySummary: React.FC<ChildActivitySummaryProps> = ({ child }) => {\n  return (\n    <div className=\"flex items-center space-x-4\">\n      <div \n        className=\"h-10 w-10 rounded-full flex items-center justify-center text-white font-bold\"\n        style={{ backgroundColor: child.color }}\n      >\n        {child.name.charAt(0)}\n      </div>\n      <div className=\"flex-1\">\n        <h3 className=\"text-sm font-medium text-gray-900 dark:text-white\">{child.name}</h3>\n        <div className=\"flex items-center mt-1\">\n          {child.sports.map((sport, index) => (\n            <div \n              key={index}\n              className=\"flex items-center text-xs mr-2\"\n            >\n              <span \n                className=\"w-2 h-2 rounded-full mr-1\"\n                style={{ backgroundColor: sport.color }}\n              ></span>\n              <span className=\"text-gray-500 dark:text-gray-400\">{sport.name}</span>\n            </div>\n          ))}\n        </div>\n      </div>\n      <div className=\"text-right\">\n        <div className=\"text-sm font-medium text-gray-900 dark:text-white\">{child.eventCount}</div>\n        <div className=\"text-xs text-gray-500 dark:text-gray-400\">This week</div>\n      </div>\n    </div>\n  );\n};\n\nexport default ChildActivitySummary;","import React from 'react';\nimport { Platform } from '../../types';\nimport { Check, AlertCircle } from 'lucide-react';\n\ninterface ConnectedPlatformProps {\n  platform: Platform;\n}\n\nconst ConnectedPlatform: React.FC<ConnectedPlatformProps> = ({ platform }) => {\n  return (\n    <div className=\"flex items-center space-x-4\">\n      <div \n        className=\"h-10 w-10 rounded-lg flex items-center justify-center\"\n        style={{ backgroundColor: platform.color + '20', color: platform.color }}\n      >\n        <platform.icon className=\"h-6 w-6\" />\n      </div>\n      <div className=\"flex-1\">\n        <h3 className=\"text-sm font-medium text-gray-900 dark:text-white\">{platform.name}</h3>\n        <div className=\"flex items-center mt-1\">\n          <span className=\"text-xs text-gray-500 dark:text-gray-400\">\n            {platform.connected ? 'Connected' : 'Not connected'}\n          </span>\n          {platform.connected && (\n            <div className=\"ml-2 bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-300 text-xs px-2 py-0.5 rounded-full flex items-center\">\n              <Check className=\"h-3 w-3 mr-1\" />\n              Synced\n            </div>\n          )}\n          {platform.hasIssue && (\n            <div className=\"ml-2 bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-300 text-xs px-2 py-0.5 rounded-full flex items-center\">\n              <AlertCircle className=\"h-3 w-3 mr-1\" />\n              Issue\n            </div>\n          )}\n        </div>\n      </div>\n      <div>\n        <button className=\"text-xs text-blue-600 dark:text-blue-400 hover:text-blue-500 dark:hover:text-blue-300\">\n          {platform.connected ? 'Refresh' : 'Connect'}\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default ConnectedPlatform;","import React, { useState, useEffect, useCallback, useMemo } from 'react';\nimport { Calendar as CalendarIcon, Users, Clock, ArrowRight } from 'lucide-react';\nimport EventCard from '../components/events/EventCard';\nimport ChildActivitySummary from '../components/dashboard/ChildActivitySummary';\nimport ConnectedPlatform from '../components/dashboard/ConnectedPlatform';\nimport { useProfiles } from '../context/ProfilesContext';\nimport { supabase } from '../lib/supabase';\nimport { Event, Platform } from '../types';\n\nconst Dashboard: React.FC = () => {\n  const { profiles } = useProfiles();\n  const [events, setEvents] = useState<Event[]>([]);\n  const [friendsEvents, setFriendsEvents] = useState<Event[]>([]);\n  const [friendsProfiles, setFriendsProfiles] = useState<any[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [platforms] = useState<Platform[]>([\n    {\n      id: 1,\n      name: 'SportsEngine',\n      icon: CalendarIcon,\n      color: '#2563EB',\n      connected: true,\n      hasIssue: false,\n    },\n    {\n      id: 2,\n      name: 'TeamSnap',\n      icon: Users,\n      color: '#7C3AED',\n      connected: true,\n      hasIssue: false,\n    }\n  ]);\n\n  // Memoize profile IDs to prevent unnecessary re-renders\n  const profileIds = useMemo(() => profiles.map(p => p.id), [profiles]);\n\n  // Fetch user's own events - only when profiles change\n  const fetchOwnEvents = useCallback(async () => {\n    if (profileIds.length === 0) return;\n\n    try {\n      const { data: eventData, error } = await supabase\n        .from('events')\n        .select('*')\n        .in('profile_id', profileIds)\n        .order('start_time', { ascending: true });\n\n      if (error) throw error;\n\n      const formattedEvents = eventData.map(event => {\n        const profile = profiles.find(p => p.id === event.profile_id);\n        return {\n          ...event,\n          id: event.id,\n          startTime: new Date(event.start_time),\n          endTime: new Date(event.end_time),\n          child: profile!,\n          platformIcon: CalendarIcon,\n          isToday: new Date(event.start_time).toDateString() === new Date().toDateString(),\n          isOwnEvent: true\n        };\n      });\n\n      setEvents(formattedEvents);\n    } catch (error) {\n      console.error('❌ DASHBOARD: Error fetching own events:', error);\n    }\n  }, [profileIds, profiles]);\n\n  // Fetch friends events - only when user changes\n  const fetchFriendsEvents = useCallback(async (userId: string) => {\n    try {\n      console.log('🔍 DASHBOARD: Fetching friends events for user:', userId);\n      \n      // Get friendships where current user has granted access to friends\n      const { data: friendships, error: friendshipsError } = await supabase\n        .from('friendships')\n        .select('friend_id, role')\n        .eq('user_id', userId)\n        .in('role', ['viewer', 'administrator']);\n\n      if (friendshipsError) {\n        console.error('❌ DASHBOARD: Error fetching friendships:', friendshipsError);\n        return;\n      }\n\n      if (!friendships || friendships.length === 0) {\n        console.log('❌ DASHBOARD: No friendships with viewer/admin access found');\n        setFriendsEvents([]);\n        setFriendsProfiles([]);\n        return;\n      }\n\n      const friendUserIds = friendships.map(f => f.friend_id);\n      console.log('👥 DASHBOARD: Friend user IDs:', friendUserIds);\n\n      // Get user settings and profiles in parallel\n      const [userSettingsResult, friendProfilesResult] = await Promise.all([\n        supabase\n          .from('user_settings')\n          .select('user_id, full_name, profile_photo_url')\n          .in('user_id', friendUserIds),\n        supabase\n          .from('profiles')\n          .select('id, name, user_id')\n          .in('user_id', friendUserIds)\n      ]);\n\n      if (userSettingsResult.error) {\n        console.error('❌ DASHBOARD: Error fetching user settings:', userSettingsResult.error);\n        return;\n      }\n\n      if (friendProfilesResult.error) {\n        console.error('❌ DASHBOARD: Error fetching friend profiles:', friendProfilesResult.error);\n        return;\n      }\n\n      const { data: userSettings } = userSettingsResult;\n      const { data: friendProfiles } = friendProfilesResult;\n\n      if (!friendProfiles || friendProfiles.length === 0) {\n        console.log('❌ DASHBOARD: No friend profiles found');\n        setFriendsEvents([]);\n        setFriendsProfiles([]);\n        return;\n      }\n\n      // Transform friend profiles\n      const transformedFriendProfiles = friendProfiles.map(profile => {\n        const friendship = friendships.find(f => f.friend_id === profile.user_id);\n        const userSetting = userSettings?.find(us => us.user_id === profile.user_id);\n        \n        return {\n          ...profile,\n          age: 0,\n          color: '#64748B',\n          photo_url: null,\n          sports: [],\n          eventCount: 0,\n          ownerName: userSetting?.full_name || 'Friend',\n          ownerPhoto: userSetting?.profile_photo_url,\n          accessRole: friendship?.role\n        };\n      });\n\n      setFriendsProfiles(transformedFriendProfiles);\n\n      // Get events for friend profiles\n      const friendProfileIds = friendProfiles.map(p => p.id);\n      if (friendProfileIds.length > 0) {\n        const { data: friendEventData, error: eventsError } = await supabase\n          .from('events')\n          .select('*')\n          .in('profile_id', friendProfileIds)\n          .order('start_time', { ascending: true });\n\n        if (eventsError) {\n          console.error('❌ DASHBOARD: Error fetching friend events:', eventsError);\n          return;\n        }\n\n        const formattedFriendEvents = friendEventData.map(event => {\n          const profile = transformedFriendProfiles.find(p => p.id === event.profile_id);\n          return {\n            ...event,\n            id: event.id,\n            startTime: new Date(event.start_time),\n            endTime: new Date(event.end_time),\n            child: profile!,\n            platformIcon: CalendarIcon,\n            isToday: new Date(event.start_time).toDateString() === new Date().toDateString(),\n            isOwnEvent: false,\n            ownerName: profile?.ownerName\n          };\n        });\n\n        setFriendsEvents(formattedFriendEvents);\n        console.log('✅ DASHBOARD: Successfully loaded friends events:', formattedFriendEvents.length);\n      }\n\n    } catch (error) {\n      console.error('💥 DASHBOARD: Error fetching friends events:', error);\n    }\n  }, []);\n\n  // Main effect - only runs when dependencies actually change\n  useEffect(() => {\n    let isMounted = true;\n\n    const fetchAllData = async () => {\n      try {\n        const { data: { user }, error: userError } = await supabase.auth.getUser();\n        if (userError) throw userError;\n        if (!user || !isMounted) return;\n\n        // Fetch own events\n        await fetchOwnEvents();\n\n        // Fetch friends events\n        await fetchFriendsEvents(user.id);\n\n      } catch (error) {\n        console.error('❌ DASHBOARD: Error in main fetch:', error);\n      } finally {\n        if (isMounted) {\n          setLoading(false);\n        }\n      }\n    };\n\n    fetchAllData();\n\n    return () => {\n      isMounted = false;\n    };\n  }, [fetchOwnEvents, fetchFriendsEvents]); // Only re-run when these callbacks change\n\n  // Combine all events for display\n  const allEvents = [...events, ...friendsEvents];\n  \n  // Get upcoming events (today and future)\n  const upcomingEvents = allEvents\n    .filter(event => event.startTime >= new Date())\n    .sort((a, b) => a.startTime.getTime() - b.startTime.getTime());\n\n  // Calculate event counts for each child (own and friends)\n  const allProfiles = [\n    ...profiles.map(p => ({ ...p, isOwnProfile: true })),\n    ...friendsProfiles.map(p => ({ ...p, isOwnProfile: false }))\n  ];\n\n  const profilesWithEventCounts = allProfiles.map(profile => ({\n    ...profile,\n    eventCount: allEvents.filter(event => \n      event.child.id === profile.id && \n      event.startTime >= new Date() &&\n      event.startTime <= new Date(new Date().setDate(new Date().getDate() + 7))\n    ).length\n  }));\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <h1 className=\"text-2xl font-bold text-gray-900\">Dashboard</h1>\n        <div className=\"text-sm text-gray-500\">\n          {new Date().toLocaleDateString('en-US', { \n            weekday: 'long', \n            year: 'numeric', \n            month: 'long', \n            day: 'numeric' \n          })}\n        </div>\n      </div>\n\n      {/* Today's Schedule */}\n      <div className=\"bg-white rounded-lg shadow overflow-hidden\">\n        <div className=\"px-4 py-5 sm:px-6 flex justify-between items-center bg-gradient-to-r from-blue-500 to-blue-600\">\n          <div className=\"flex items-center\">\n            <CalendarIcon className=\"h-5 w-5 text-white mr-2\" />\n            <h2 className=\"text-lg font-medium text-white\">Today's Schedule</h2>\n          </div>\n          <span className=\"text-white text-sm font-medium\">\n            {upcomingEvents.filter(e => e.isToday).length} Events\n          </span>\n        </div>\n        <div className=\"divide-y divide-gray-200\">\n          {upcomingEvents.filter(e => e.isToday).length > 0 ? (\n            upcomingEvents\n              .filter(e => e.isToday)\n              .map(event => (\n                <div key={`${event.isOwnEvent ? 'own' : 'friend'}-${event.id}`} className=\"relative\">\n                  {!event.isOwnEvent && (\n                    <div className=\"absolute top-2 right-2 bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full z-10\">\n                      {event.ownerName}'s schedule\n                    </div>\n                  )}\n                  <EventCard event={event} />\n                </div>\n              ))\n          ) : (\n            <div className=\"flex flex-col items-center justify-center p-6 text-center\">\n              <Clock className=\"h-12 w-12 text-gray-300 mb-2\" />\n              <h3 className=\"text-lg font-medium text-gray-900\">No events scheduled for today</h3>\n              <p className=\"text-gray-500 mt-1\">Enjoy your free time!</p>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Children Activity Section */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n        <div className=\"bg-white rounded-lg shadow\">\n          <div className=\"px-4 py-5 sm:px-6 flex justify-between items-center\">\n            <div className=\"flex items-center\">\n              <Users className=\"h-5 w-5 text-gray-500 mr-2\" />\n              <h2 className=\"text-lg font-medium text-gray-900\">Children's Activities</h2>\n            </div>\n            <a href=\"/profiles\" className=\"text-sm font-medium text-blue-600 hover:text-blue-500 flex items-center\">\n              View all <ArrowRight className=\"ml-1 h-4 w-4\" />\n            </a>\n          </div>\n          <div className=\"px-4 py-5 sm:px-6 space-y-4\">\n            {/* Own children */}\n            {profilesWithEventCounts.filter(p => p.isOwnProfile).map(child => (\n              <ChildActivitySummary key={child.id} child={child} />\n            ))}\n            \n            {/* Friends' children with viewer access */}\n            {profilesWithEventCounts.filter(p => !p.isOwnProfile).length > 0 && (\n              <>\n                <div className=\"border-t border-gray-200 pt-4\">\n                  <h4 className=\"text-sm font-medium text-gray-700 mb-3 flex items-center\">\n                    <Users className=\"h-4 w-4 mr-1\" />\n                    Friends' Children ({profilesWithEventCounts.filter(p => !p.isOwnProfile).length})\n                  </h4>\n                </div>\n                {profilesWithEventCounts.filter(p => !p.isOwnProfile).map(child => (\n                  <div key={child.id} className=\"relative\">\n                    <div className=\"flex items-center space-x-4 p-3 bg-blue-50 rounded-lg\">\n                      <div \n                        className=\"h-10 w-10 rounded-full flex items-center justify-center text-white font-bold\"\n                        style={{ backgroundColor: child.color }}\n                      >\n                        {child.photo_url ? (\n                          <img \n                            src={child.photo_url} \n                            alt={child.name}\n                            className=\"h-full w-full rounded-full object-cover\"\n                          />\n                        ) : (\n                          child.name.charAt(0)\n                        )}\n                      </div>\n                      <div className=\"flex-1\">\n                        <h3 className=\"text-sm font-medium text-gray-900\">{child.name}</h3>\n                        <div className=\"flex items-center mt-1\">\n                          <span className=\"text-xs text-blue-600 bg-blue-100 px-2 py-0.5 rounded-full mr-2\">\n                            {child.ownerName}\n                          </span>\n                          <span className=\"text-xs text-gray-500\">\n                            {child.accessRole === 'administrator' ? '👑 Admin' : '👁️ Viewer'} access\n                          </span>\n                        </div>\n                        <div className=\"flex items-center mt-1\">\n                          {child.sports.map((sport, index) => (\n                            <div \n                              key={index}\n                              className=\"flex items-center text-xs mr-2\"\n                            >\n                              <span \n                                className=\"w-2 h-2 rounded-full mr-1\"\n                                style={{ backgroundColor: sport.color }}\n                              ></span>\n                              <span className=\"text-gray-500\">{sport.name}</span>\n                            </div>\n                          ))}\n                        </div>\n                      </div>\n                      <div className=\"text-right\">\n                        <div className=\"text-sm font-medium text-gray-900\">{child.eventCount}</div>\n                        <div className=\"text-xs text-gray-500\">This week</div>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </>\n            )}\n            \n            {profilesWithEventCounts.length === 0 && (\n              <div className=\"text-center py-4 text-gray-500\">\n                No children profiles found. Add a profile to get started.\n              </div>\n            )}\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-lg shadow\">\n          <div className=\"px-4 py-5 sm:px-6 flex justify-between items-center\">\n            <div className=\"flex items-center\">\n              <CalendarIcon className=\"h-5 w-5 text-gray-500 mr-2\" />\n              <h2 className=\"text-lg font-medium text-gray-900\">Connected Platforms</h2>\n            </div>\n            <a href=\"/connections\" className=\"text-sm font-medium text-blue-600 hover:text-blue-500 flex items-center\">\n              Manage <ArrowRight className=\"ml-1 h-4 w-4\" />\n            </a>\n          </div>\n          <div className=\"px-4 py-5 sm:px-6 space-y-4\">\n            {platforms.map(platform => (\n              <ConnectedPlatform key={platform.id} platform={platform} />\n            ))}\n          </div>\n        </div>\n      </div>\n\n      {/* Upcoming Events */}\n      <div className=\"bg-white rounded-lg shadow overflow-hidden\">\n        <div className=\"px-4 py-5 sm:px-6 flex justify-between items-center\">\n          <div className=\"flex items-center\">\n            <CalendarIcon className=\"h-5 w-5 text-gray-500 mr-2\" />\n            <h2 className=\"text-lg font-medium text-gray-900\">Upcoming Events</h2>\n          </div>\n          <a href=\"/calendar\" className=\"text-sm font-medium text-blue-600 hover:text-blue-500 flex items-center\">\n            View calendar <ArrowRight className=\"ml-1 h-4 w-4\" />\n          </a>\n        </div>\n        <div className=\"divide-y divide-gray-200\">\n          {upcomingEvents\n            .filter(e => !e.isToday)\n            .slice(0, 8)\n            .map(event => (\n              <div key={`${event.isOwnEvent ? 'own' : 'friend'}-${event.id}`} className=\"relative\">\n                {!event.isOwnEvent && (\n                  <div className=\"absolute top-2 right-2 bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full z-10\">\n                    {event.ownerName}'s schedule\n                  </div>\n                )}\n                <EventCard event={event} />\n              </div>\n            ))}\n          {upcomingEvents.filter(e => !e.isToday).length === 0 && (\n            <div className=\"text-center py-8 text-gray-500\">\n              No upcoming events scheduled.\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Dashboard;","import React from 'react';\n\ninterface CalendarHeaderProps {\n  view: 'month' | 'week' | 'day';\n}\n\nconst CalendarHeader: React.FC<CalendarHeaderProps> = ({ view }) => {\n  const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n  \n  return (\n    <div className=\"bg-white border-b border-gray-200\">\n      <div className=\"grid grid-cols-7 text-center\">\n        {days.map((day, index) => (\n          <div \n            key={index} \n            className=\"py-2 px-1 text-sm font-medium text-gray-500\"\n          >\n            {day}\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default CalendarHeader;","import React, { useState } from 'react';\nimport { Event } from '../../types';\nimport EventModal from '../events/EventModal';\n\ninterface MonthViewProps {\n  currentDate: Date;\n  events: Event[];\n}\n\nconst MonthView: React.FC<MonthViewProps> = ({ currentDate, events }) => {\n  const [selectedEvent, setSelectedEvent] = useState<Event | null>(null);\n  \n  // Calculate grid days for the month view\n  const getDaysInMonth = (year: number, month: number) => {\n    return new Date(year, month + 1, 0).getDate();\n  };\n  \n  const getFirstDayOfMonth = (year: number, month: number) => {\n    return new Date(year, month, 1).getDay();\n  };\n  \n  const year = currentDate.getFullYear();\n  const month = currentDate.getMonth();\n  const today = new Date();\n  \n  const daysInMonth = getDaysInMonth(year, month);\n  const firstDayOfMonth = getFirstDayOfMonth(year, month);\n  \n  const prevMonth = month === 0 ? 11 : month - 1;\n  const prevMonthYear = month === 0 ? year - 1 : year;\n  const daysInPrevMonth = getDaysInMonth(prevMonthYear, prevMonth);\n  \n  const calendarDays = [];\n  \n  // Previous month days\n  for (let i = 0; i < firstDayOfMonth; i++) {\n    calendarDays.push({\n      date: new Date(prevMonthYear, prevMonth, daysInPrevMonth - firstDayOfMonth + i + 1),\n      isCurrentMonth: false,\n    });\n  }\n  \n  // Current month days\n  for (let i = 1; i <= daysInMonth; i++) {\n    calendarDays.push({\n      date: new Date(year, month, i),\n      isCurrentMonth: true,\n    });\n  }\n  \n  // Next month days to fill the calendar grid\n  const remainingDays = 42 - calendarDays.length; // 6 rows of 7 days\n  const nextMonth = month === 11 ? 0 : month + 1;\n  const nextMonthYear = month === 11 ? year + 1 : year;\n  \n  for (let i = 1; i <= remainingDays; i++) {\n    calendarDays.push({\n      date: new Date(nextMonthYear, nextMonth, i),\n      isCurrentMonth: false,\n    });\n  }\n  \n  // Group events by date\n  const eventsByDate: Record<string, Event[]> = {};\n  events.forEach(event => {\n    const dateKey = event.startTime.toISOString().split('T')[0];\n    if (!eventsByDate[dateKey]) {\n      eventsByDate[dateKey] = [];\n    }\n    eventsByDate[dateKey].push(event);\n  });\n\n  return (\n    <div className=\"grid grid-cols-7 h-full border-b border-gray-200\">\n      {calendarDays.map((day, index) => {\n        const dateKey = day.date.toISOString().split('T')[0];\n        const dayEvents = eventsByDate[dateKey] || [];\n        const isToday = \n          today.getDate() === day.date.getDate() &&\n          today.getMonth() === day.date.getMonth() &&\n          today.getFullYear() === day.date.getFullYear();\n          \n        return (\n          <div \n            key={index} \n            className={`min-h-[100px] border-r border-t border-gray-200 p-1 ${\n              !day.isCurrentMonth ? 'bg-gray-50' : ''\n            }`}\n          >\n            <div className=\"flex justify-between items-start\">\n              <span \n                className={`text-sm font-medium h-6 w-6 flex items-center justify-center rounded-full ${\n                  isToday \n                    ? 'bg-blue-600 text-white' \n                    : day.isCurrentMonth \n                      ? 'text-gray-900' \n                      : 'text-gray-400'\n                }`}\n              >\n                {day.date.getDate()}\n              </span>\n            </div>\n            \n            <div className=\"mt-1 max-h-[80px] overflow-y-auto space-y-1\">\n              {dayEvents.slice(0, 3).map((event, eventIndex) => (\n                <div \n                  key={`${event.isOwnEvent ? 'own' : 'friend'}-${event.id}-${eventIndex}`}\n                  className=\"text-xs px-1 py-0.5 rounded truncate flex items-center cursor-pointer relative\"\n                  style={{ \n                    backgroundColor: event.color + '20',\n                    color: event.color \n                  }}\n                  onClick={() => setSelectedEvent(event)}\n                >\n                  <span \n                    className=\"w-1.5 h-1.5 rounded-full mr-1 flex-shrink-0\"\n                    style={{ backgroundColor: event.child.color }}\n                  ></span>\n                  <span className=\"truncate flex-1\">{event.title}</span>\n                  {!event.isOwnEvent && (\n                    <span className=\"ml-1 text-xs opacity-75\">👥</span>\n                  )}\n                </div>\n              ))}\n              {dayEvents.length > 3 && (\n                <div className=\"text-xs text-gray-500 px-1\">\n                  +{dayEvents.length - 3} more\n                </div>\n              )}\n            </div>\n          </div>\n        );\n      })}\n\n      {selectedEvent && (\n        <EventModal event={selectedEvent} onClose={() => setSelectedEvent(null)} />\n      )}\n    </div>\n  );\n};\n\nexport default MonthView;","import React, { useState } from 'react';\nimport { Event } from '../../types';\nimport EventModal from '../events/EventModal';\n\ninterface WeekViewProps {\n  currentDate: Date;\n  events: Event[];\n}\n\nconst WeekView: React.FC<WeekViewProps> = ({ currentDate, events }) => {\n  const [selectedEvent, setSelectedEvent] = useState<Event | null>(null);\n  \n  // Get the start of the week (Sunday)\n  const getStartOfWeek = (date: Date) => {\n    const day = date.getDay();\n    const diff = date.getDate() - day;\n    return new Date(date.setDate(diff));\n  };\n  \n  const startOfWeek = getStartOfWeek(new Date(currentDate));\n  const weekDays = Array.from({ length: 7 }, (_, i) => {\n    const day = new Date(startOfWeek);\n    day.setDate(startOfWeek.getDate() + i);\n    return day;\n  });\n  \n  const today = new Date();\n  const isToday = (date: Date) => \n    date.getDate() === today.getDate() &&\n    date.getMonth() === today.getMonth() &&\n    date.getFullYear() === today.getFullYear();\n  \n  // Group events by date\n  const eventsByDate: Record<string, Event[]> = {};\n  events.forEach(event => {\n    const dateKey = event.startTime.toISOString().split('T')[0];\n    if (!eventsByDate[dateKey]) {\n      eventsByDate[dateKey] = [];\n    }\n    eventsByDate[dateKey].push(event);\n  });\n  \n  // Generate time slots\n  const timeSlots = Array.from({ length: 24 }, (_, i) => i);\n\n  return (\n    <div className=\"flex flex-col h-full\">\n      <div className=\"flex\">\n        <div className=\"w-20 flex-shrink-0\"></div>\n        <div className=\"flex-1 grid grid-cols-7\">\n          {weekDays.map((day, index) => (\n            <div \n              key={index} \n              className=\"px-2 py-3 text-center border-r border-gray-200\"\n            >\n              <div \n                className={`text-sm font-medium ${\n                  isToday(day) ? 'text-blue-600' : 'text-gray-500'\n                }`}\n              >\n                {day.toLocaleDateString('en-US', { weekday: 'short' })}\n              </div>\n              <div \n                className={`text-lg font-semibold ${\n                  isToday(day) \n                    ? 'text-white bg-blue-600 rounded-full w-8 h-8 flex items-center justify-center mx-auto'\n                    : 'text-gray-900'\n                }`}\n              >\n                {day.getDate()}\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n      \n      <div className=\"flex-1 overflow-y-auto\">\n        <div className=\"flex h-full\">\n          <div className=\"w-20 flex-shrink-0 border-r border-gray-200\">\n            {timeSlots.map(hour => (\n              <div \n                key={hour} \n                className=\"h-12 text-xs text-gray-500 text-right pr-2\"\n                style={{ marginTop: hour === 0 ? '0' : '-8px' }}\n              >\n                {hour === 0 ? '' : `${hour % 12 === 0 ? '12' : hour % 12}${hour < 12 ? 'am' : 'pm'}`}\n              </div>\n            ))}\n          </div>\n          \n          <div className=\"flex-1 grid grid-cols-7 relative\">\n            {/* Time grid lines */}\n            {timeSlots.map(hour => (\n              <React.Fragment key={hour}>\n                <div \n                  className=\"absolute w-full border-t border-gray-200\" \n                  style={{ top: `${hour * 48}px` }}\n                ></div>\n                <div \n                  className=\"absolute w-full border-t border-gray-200 border-dashed opacity-50\" \n                  style={{ top: `${hour * 48 + 24}px` }}\n                ></div>\n              </React.Fragment>\n            ))}\n            \n            {/* Day columns */}\n            {weekDays.map((day, dayIndex) => {\n              const dateKey = day.toISOString().split('T')[0];\n              const dayEvents = eventsByDate[dateKey] || [];\n              \n              return (\n                <div \n                  key={dayIndex} \n                  className=\"h-full border-r border-gray-200 relative\"\n                >\n                  {dayEvents.map((event, eventIndex) => {\n                    const startHour = event.startTime.getHours() + (event.startTime.getMinutes() / 60);\n                    const endHour = event.endTime.getHours() + (event.endTime.getMinutes() / 60);\n                    const duration = endHour - startHour;\n                    \n                    return (\n                      <div\n                        key={`${event.isOwnEvent ? 'own' : 'friend'}-${event.id}-${eventIndex}`}\n                        className=\"absolute left-1 right-1 rounded overflow-hidden text-xs shadow-sm cursor-pointer\"\n                        style={{\n                          top: `${startHour * 48}px`,\n                          height: `${duration * 48}px`,\n                          backgroundColor: event.color + '20',\n                          borderLeft: `3px solid ${event.color}`\n                        }}\n                        onClick={() => setSelectedEvent(event)}\n                      >\n                        <div className=\"p-1 h-full overflow-hidden\">\n                          <div className=\"font-medium flex items-center\" style={{ color: event.color }}>\n                            <span className=\"truncate flex-1\">{event.title}</span>\n                            {!event.isOwnEvent && (\n                              <span className=\"ml-1 text-xs opacity-75\">👥</span>\n                            )}\n                          </div>\n                          <div className=\"text-gray-600 text-xs mt-0.5\">\n                            {event.startTime.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit' })} - \n                            {event.endTime.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit' })}\n                          </div>\n                          {duration > 0.75 && (\n                            <div className=\"text-gray-600 text-xs mt-0.5 flex items-center\">\n                              <span \n                                className=\"w-2 h-2 rounded-full mr-1\"\n                                style={{ backgroundColor: event.child.color }}\n                              ></span>\n                              <span className=\"truncate\">\n                                {event.child.name}\n                                {!event.isOwnEvent && event.ownerName && (\n                                  <span className=\"text-blue-600\"> ({event.ownerName})</span>\n                                )}\n                              </span>\n                            </div>\n                          )}\n                        </div>\n                      </div>\n                    );\n                  })}\n                </div>\n              );\n            })}\n            \n            {/* Current time indicator */}\n            <div \n              className=\"absolute w-full border-t-2 border-red-500 z-10\"\n              style={{ \n                top: `${(today.getHours() + today.getMinutes() / 60) * 48}px`,\n                left: 0,\n                right: 0\n              }}\n            >\n              <div className=\"w-2 h-2 rounded-full bg-red-500 relative -top-1 -left-1\"></div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {selectedEvent && (\n        <EventModal event={selectedEvent} onClose={() => setSelectedEvent(null)} />\n      )}\n    </div>\n  );\n};\n\nexport default WeekView;","import React, { useState } from 'react';\nimport { Event } from '../../types';\nimport { MapPin } from 'lucide-react';\nimport EventModal from '../events/EventModal';\n\ninterface DayViewProps {\n  currentDate: Date;\n  events: Event[];\n}\n\nconst DayView: React.FC<DayViewProps> = ({ currentDate, events }) => {\n  const [selectedEvent, setSelectedEvent] = useState<Event | null>(null);\n  const today = new Date();\n  const isToday = \n    currentDate.getDate() === today.getDate() &&\n    currentDate.getMonth() === today.getMonth() &&\n    currentDate.getFullYear() === today.getFullYear();\n  \n  // Get events for the current day\n  const dayEvents = events.filter(event => {\n    const eventDate = event.startTime;\n    return (\n      eventDate.getDate() === currentDate.getDate() &&\n      eventDate.getMonth() === currentDate.getMonth() &&\n      eventDate.getFullYear() === currentDate.getFullYear()\n    );\n  });\n  \n  // Sort events by start time\n  dayEvents.sort((a, b) => a.startTime.getTime() - b.startTime.getTime());\n  \n  // Generate time slots\n  const timeSlots = Array.from({ length: 24 }, (_, i) => i);\n\n  return (\n    <div className=\"flex flex-col h-full\">\n      <div className=\"flex\">\n        <div className=\"w-20 flex-shrink-0\"></div>\n        <div className=\"flex-1 px-4 py-3\">\n          <div className=\"text-center\">\n            <div className=\"text-sm text-gray-500\">\n              {currentDate.toLocaleDateString('en-US', { weekday: 'long' })}\n            </div>\n            <div className={`inline-flex items-center justify-center ${isToday ? 'text-blue-600' : 'text-gray-900'}`}>\n              <span \n                className={`text-2xl font-bold ${\n                  isToday ? 'bg-blue-600 text-white w-10 h-10 rounded-full flex items-center justify-center' : ''\n                }`}\n              >\n                {currentDate.getDate()}\n              </span>\n            </div>\n          </div>\n        </div>\n      </div>\n      \n      <div className=\"flex-1 overflow-y-auto\">\n        <div className=\"flex h-full\">\n          <div className=\"w-20 flex-shrink-0 border-r border-gray-200\">\n            {timeSlots.map(hour => (\n              <div \n                key={hour} \n                className=\"h-12 text-xs text-gray-500 text-right pr-2\"\n                style={{ marginTop: hour === 0 ? '0' : '-8px' }}\n              >\n                {hour === 0 ? '' : `${hour % 12 === 0 ? '12' : hour % 12}${hour < 12 ? 'am' : 'pm'}`}\n              </div>\n            ))}\n          </div>\n          \n          <div className=\"flex-1 relative\">\n            {/* Time grid lines */}\n            {timeSlots.map(hour => (\n              <React.Fragment key={hour}>\n                <div \n                  className=\"absolute w-full border-t border-gray-200\" \n                  style={{ top: `${hour * 48}px` }}\n                ></div>\n                <div \n                  className=\"absolute w-full border-t border-gray-200 border-dashed opacity-50\" \n                  style={{ top: `${hour * 48 + 24}px` }}\n                ></div>\n              </React.Fragment>\n            ))}\n            \n            {/* Events */}\n            {dayEvents.map((event, eventIndex) => {\n              const startHour = event.startTime.getHours() + (event.startTime.getMinutes() / 60);\n              const endHour = event.endTime.getHours() + (event.endTime.getMinutes() / 60);\n              const duration = endHour - startHour;\n              \n              return (\n                <div\n                  key={`${event.isOwnEvent ? 'own' : 'friend'}-${event.id}-${eventIndex}`}\n                  className=\"absolute left-2 right-2 rounded overflow-hidden shadow-sm cursor-pointer\"\n                  style={{\n                    top: `${startHour * 48}px`,\n                    height: `${duration * 48}px`,\n                    backgroundColor: event.color + '20',\n                    borderLeft: `3px solid ${event.color}`\n                  }}\n                  onClick={() => setSelectedEvent(event)}\n                >\n                  <div className=\"p-2 h-full overflow-hidden\">\n                    <div className=\"flex items-center\">\n                      <span \n                        className=\"w-3 h-3 rounded-full mr-2\"\n                        style={{ backgroundColor: event.child.color }}\n                      ></span>\n                      <span className=\"text-sm font-medium flex-1 truncate\" style={{ color: event.color }}>\n                        {event.title}\n                      </span>\n                      {!event.isOwnEvent && (\n                        <span className=\"ml-1 text-xs opacity-75\">👥</span>\n                      )}\n                    </div>\n                    <div className=\"text-gray-600 text-xs mt-1\">\n                      {event.startTime.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit' })} - \n                      {event.endTime.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit' })}\n                    </div>\n                    {duration > 0.75 && event.location && (\n                      <div className=\"text-gray-600 text-xs mt-1 flex items-center\">\n                        <MapPin className=\"h-3 w-3 mr-1\" />\n                        <span className=\"truncate\">{event.location}</span>\n                      </div>\n                    )}\n                    {duration > 1.5 && (\n                      <div className=\"mt-1 text-xs text-gray-600\">\n                        <div className=\"flex items-center\">\n                          <span className=\"truncate\">\n                            {event.child.name}\n                            {!event.isOwnEvent && event.ownerName && (\n                              <span className=\"text-blue-600\"> ({event.ownerName})</span>\n                            )}\n                          </span>\n                        </div>\n                        {event.description && (\n                          <div className=\"mt-1 truncate\">{event.description}</div>\n                        )}\n                      </div>\n                    )}\n                  </div>\n                </div>\n              );\n            })}\n            \n            {/* Current time indicator */}\n            {isToday && (\n              <div \n                className=\"absolute w-full border-t-2 border-red-500 z-10\"\n                style={{ \n                  top: `${(today.getHours() + today.getMinutes() / 60) * 48}px`,\n                  left: 0,\n                  right: 0\n                }}\n              >\n                <div className=\"w-2 h-2 rounded-full bg-red-500 relative -top-1 -left-1\"></div>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n\n      {selectedEvent && (\n        <EventModal event={selectedEvent} onClose={() => setSelectedEvent(null)} />\n      )}\n    </div>\n  );\n};\n\nexport default DayView;","import React, { useState } from 'react';\nimport { Event } from '../../types';\nimport { Calendar, MapPin, Clock } from 'lucide-react';\nimport EventModal from '../events/EventModal';\n\ninterface AgendaViewProps {\n  currentDate: Date;\n  events: Event[];\n}\n\nconst AgendaView: React.FC<AgendaViewProps> = ({ currentDate, events }) => {\n  const [selectedEvent, setSelectedEvent] = useState<Event | null>(null);\n  \n  // Get the start of the month\n  const startOfMonth = new Date(currentDate.getFullYear(), currentDate.getMonth(), 1);\n  \n  // Get the end of the month\n  const endOfMonth = new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 0);\n  \n  // Filter events for the current month\n  const monthEvents = events.filter(event => {\n    const eventDate = event.startTime;\n    return eventDate >= startOfMonth && eventDate <= endOfMonth;\n  });\n  \n  // Sort events by date\n  monthEvents.sort((a, b) => a.startTime.getTime() - b.startTime.getTime());\n  \n  // Group events by date\n  const eventsByDate: Record<string, Event[]> = {};\n  monthEvents.forEach(event => {\n    const dateKey = event.startTime.toISOString().split('T')[0];\n    if (!eventsByDate[dateKey]) {\n      eventsByDate[dateKey] = [];\n    }\n    eventsByDate[dateKey].push(event);\n  });\n  \n  const dateKeys = Object.keys(eventsByDate).sort();\n  const today = new Date().toISOString().split('T')[0];\n\n  return (\n    <div className=\"divide-y divide-gray-200\">\n      {dateKeys.length > 0 ? (\n        dateKeys.map(dateKey => {\n          const date = new Date(dateKey);\n          const isToday = dateKey === today;\n          \n          return (\n            <div key={dateKey} className=\"p-4\">\n              <div className=\"flex items-center mb-3\">\n                <Calendar className=\"h-5 w-5 text-gray-400 mr-2\" />\n                <h3 \n                  className={`text-base font-medium ${\n                    isToday ? 'text-blue-600' : 'text-gray-900'\n                  }`}\n                >\n                  {date.toLocaleDateString('en-US', { \n                    weekday: 'long', \n                    month: 'long', \n                    day: 'numeric' \n                  })}\n                  {isToday && (\n                    <span className=\"ml-2 text-xs bg-blue-100 text-blue-800 px-2 py-0.5 rounded-full\">\n                      Today\n                    </span>\n                  )}\n                </h3>\n              </div>\n              \n              <div className=\"space-y-3\">\n                {eventsByDate[dateKey].map((event, index) => (\n                  <div \n                    key={`${event.isOwnEvent ? 'own' : 'friend'}-${event.id}-${index}`}\n                    className=\"bg-white border rounded-lg overflow-hidden hover:shadow-md transition-shadow cursor-pointer\"\n                    onClick={() => setSelectedEvent(event)}\n                  >\n                    <div className=\"flex border-l-4 h-full\" style={{ borderColor: event.color }}>\n                      <div className=\"p-3 flex-1\">\n                        <div className=\"flex items-center mb-1\">\n                          <span \n                            className=\"w-3 h-3 rounded-full mr-2\"\n                            style={{ backgroundColor: event.child.color }}\n                          ></span>\n                          <span className=\"text-sm text-gray-500\">\n                            {event.child.name}\n                            {!event.isOwnEvent && event.ownerName && (\n                              <span className=\"text-blue-600\"> ({event.ownerName})</span>\n                            )}\n                          </span>\n                          <span \n                            className=\"ml-2 text-xs px-2 py-0.5 rounded-full\"\n                            style={{ \n                              backgroundColor: event.platformColor + '20',\n                              color: event.platformColor \n                            }}\n                          >\n                            {event.platform}\n                          </span>\n                          {!event.isOwnEvent && (\n                            <span className=\"ml-2 text-xs bg-blue-100 text-blue-800 px-2 py-0.5 rounded-full\">\n                              👥 Friend's Event\n                            </span>\n                          )}\n                        </div>\n                        \n                        <h4 className=\"text-base font-medium text-gray-900\">{event.title}</h4>\n                        \n                        <div className=\"mt-2 flex flex-col sm:flex-row sm:space-x-4\">\n                          <div className=\"flex items-center text-sm text-gray-500\">\n                            <Clock className=\"h-4 w-4 mr-1\" />\n                            {event.startTime.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit' })} - \n                            {event.endTime.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit' })}\n                          </div>\n                          \n                          {event.location && (\n                            <div className=\"flex items-center text-sm text-gray-500 mt-1 sm:mt-0\">\n                              <MapPin className=\"h-4 w-4 mr-1\" />\n                              {event.location}\n                            </div>\n                          )}\n                        </div>\n                        \n                        {event.description && (\n                          <p className=\"mt-2 text-sm text-gray-600\">{event.description}</p>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          );\n        })\n      ) : (\n        <div className=\"p-8 text-center\">\n          <Calendar className=\"h-12 w-12 text-gray-300 mx-auto mb-4\" />\n          <h3 className=\"text-lg font-medium text-gray-900\">No events this month</h3>\n          <p className=\"text-gray-500 mt-1\">Try changing your filters or adding new connections</p>\n        </div>\n      )}\n\n      {selectedEvent && (\n        <EventModal event={selectedEvent} onClose={() => setSelectedEvent(null)} />\n      )}\n    </div>\n  );\n};\n\nexport default AgendaView;","import React, { useState, useEffect, useCallback, useMemo } from 'react';\nimport { \n  ChevronLeft, \n  ChevronRight,\n  Filter,\n  Calendar as CalendarIcon,\n  LayoutGrid,\n  LayoutList\n} from 'lucide-react';\nimport { useProfiles } from '../context/ProfilesContext';\nimport { supabase } from '../lib/supabase';\nimport CalendarHeader from '../components/calendar/CalendarHeader';\nimport MonthView from '../components/calendar/MonthView';\nimport WeekView from '../components/calendar/WeekView';\nimport DayView from '../components/calendar/DayView';\nimport AgendaView from '../components/calendar/AgendaView';\nimport { Event } from '../types';\n\ntype ViewType = 'month' | 'week' | 'day' | 'agenda';\n\nconst Calendar: React.FC = () => {\n  const { profiles } = useProfiles();\n  const [events, setEvents] = useState<Event[]>([]);\n  const [friendsEvents, setFriendsEvents] = useState<Event[]>([]);\n  const [friendsProfiles, setFriendsProfiles] = useState<any[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [currentDate, setCurrentDate] = useState(new Date());\n  const [view, setView] = useState<ViewType>('month');\n  const [filterOpen, setFilterOpen] = useState(false);\n  const [selectedProfiles, setSelectedProfiles] = useState<string[]>([]);\n  const [selectedPlatforms, setSelectedPlatforms] = useState<string[]>([]);\n  const [selectedTypes, setSelectedTypes] = useState<string[]>(['game', 'practice', 'tournament', 'other']);\n  const [showFriendsEvents, setShowFriendsEvents] = useState(true);\n\n  // Memoize profile IDs to prevent unnecessary re-renders\n  const profileIds = useMemo(() => profiles.map(p => p.id), [profiles]);\n\n  // Fetch user's own events - only when profiles change\n  const fetchOwnEvents = useCallback(async () => {\n    if (profileIds.length === 0) return;\n\n    try {\n      const { data: eventData, error } = await supabase\n        .from('events')\n        .select('*')\n        .in('profile_id', profileIds)\n        .order('start_time', { ascending: true });\n\n      if (error) throw error;\n\n      const formattedEvents = eventData.map(event => {\n        const profile = profiles.find(p => p.id === event.profile_id);\n        return {\n          ...event,\n          id: event.id,\n          startTime: new Date(event.start_time),\n          endTime: new Date(event.end_time),\n          child: profile!,\n          platformIcon: CalendarIcon,\n          isToday: new Date(event.start_time).toDateString() === new Date().toDateString(),\n          isOwnEvent: true\n        };\n      });\n\n      setEvents(formattedEvents);\n    } catch (error) {\n      console.error('❌ CALENDAR: Error fetching own events:', error);\n    }\n  }, [profileIds, profiles]);\n\n  // Fetch friends events - only when user changes or showFriendsEvents changes\n  const fetchFriendsEvents = useCallback(async (userId: string) => {\n    if (!showFriendsEvents) {\n      setFriendsEvents([]);\n      setFriendsProfiles([]);\n      return;\n    }\n\n    try {\n      console.log('🔍 CALENDAR: Fetching friends events for user:', userId);\n      \n      // Get friendships where current user has granted access to friends\n      const { data: friendships, error: friendshipsError } = await supabase\n        .from('friendships')\n        .select('friend_id, role')\n        .eq('user_id', userId)\n        .in('role', ['viewer', 'administrator']);\n\n      if (friendshipsError) {\n        console.error('❌ CALENDAR: Error fetching friendships:', friendshipsError);\n        return;\n      }\n\n      if (!friendships || friendships.length === 0) {\n        console.log('❌ CALENDAR: No friendships with viewer/admin access found');\n        setFriendsEvents([]);\n        setFriendsProfiles([]);\n        return;\n      }\n\n      const friendUserIds = friendships.map(f => f.friend_id);\n      console.log('👥 CALENDAR: Friend user IDs:', friendUserIds);\n\n      // Get user settings and profiles in parallel\n      const [userSettingsResult, friendProfilesResult] = await Promise.all([\n        supabase\n          .from('user_settings')\n          .select('user_id, full_name, profile_photo_url')\n          .in('user_id', friendUserIds),\n        supabase\n          .from('profiles')\n          .select('id, name, user_id')\n          .in('user_id', friendUserIds)\n      ]);\n\n      if (userSettingsResult.error) {\n        console.error('❌ CALENDAR: Error fetching user settings:', userSettingsResult.error);\n        return;\n      }\n\n      if (friendProfilesResult.error) {\n        console.error('❌ CALENDAR: Error fetching friend profiles:', friendProfilesResult.error);\n        return;\n      }\n\n      const { data: userSettings } = userSettingsResult;\n      const { data: friendProfiles } = friendProfilesResult;\n\n      if (!friendProfiles || friendProfiles.length === 0) {\n        console.log('❌ CALENDAR: No friend profiles found');\n        setFriendsEvents([]);\n        setFriendsProfiles([]);\n        return;\n      }\n\n      // Transform friend profiles\n      const transformedFriendProfiles = friendProfiles.map(profile => {\n        const friendship = friendships.find(f => f.friend_id === profile.user_id);\n        const userSetting = userSettings?.find(us => us.user_id === profile.user_id);\n        \n        return {\n          ...profile,\n          age: 0,\n          color: '#64748B',\n          photo_url: null,\n          sports: [],\n          eventCount: 0,\n          ownerName: userSetting?.full_name || 'Friend',\n          ownerPhoto: userSetting?.profile_photo_url,\n          accessRole: friendship?.role\n        };\n      });\n\n      setFriendsProfiles(transformedFriendProfiles);\n\n      // Get events for friend profiles\n      const friendProfileIds = friendProfiles.map(p => p.id);\n      if (friendProfileIds.length > 0) {\n        const { data: friendEventData, error: eventsError } = await supabase\n          .from('events')\n          .select('*')\n          .in('profile_id', friendProfileIds)\n          .order('start_time', { ascending: true });\n\n        if (eventsError) {\n          console.error('❌ CALENDAR: Error fetching friend events:', eventsError);\n          return;\n        }\n\n        const formattedFriendEvents = friendEventData.map(event => {\n          const profile = transformedFriendProfiles.find(p => p.id === event.profile_id);\n          return {\n            ...event,\n            id: event.id,\n            startTime: new Date(event.start_time),\n            endTime: new Date(event.end_time),\n            child: profile!,\n            platformIcon: CalendarIcon,\n            isToday: new Date(event.start_time).toDateString() === new Date().toDateString(),\n            isOwnEvent: false,\n            ownerName: profile?.ownerName\n          };\n        });\n\n        setFriendsEvents(formattedFriendEvents);\n        console.log('✅ CALENDAR: Successfully loaded friends events:', formattedFriendEvents.length);\n      }\n\n    } catch (error) {\n      console.error('💥 CALENDAR: Error fetching friends events:', error);\n    }\n  }, [showFriendsEvents]);\n\n  // Main effect - only runs when dependencies actually change\n  useEffect(() => {\n    let isMounted = true;\n\n    const fetchAllData = async () => {\n      try {\n        const { data: { user }, error: userError } = await supabase.auth.getUser();\n        if (userError) throw userError;\n        if (!user || !isMounted) return;\n\n        // Fetch own events\n        await fetchOwnEvents();\n\n        // Fetch friends events\n        await fetchFriendsEvents(user.id);\n\n      } catch (error) {\n        console.error('❌ CALENDAR: Error in main fetch:', error);\n      } finally {\n        if (isMounted) {\n          setLoading(false);\n        }\n      }\n    };\n\n    fetchAllData();\n\n    return () => {\n      isMounted = false;\n    };\n  }, [fetchOwnEvents, fetchFriendsEvents]); // Only re-run when these callbacks change\n\n  // Initialize selected profiles when profiles change\n  useEffect(() => {\n    const allAvailableProfiles = [...profiles.map(p => p.id), ...friendsProfiles.map(p => p.id)];\n    setSelectedProfiles(allAvailableProfiles);\n  }, [profiles, friendsProfiles]);\n  \n  const navigatePrevious = () => {\n    const newDate = new Date(currentDate);\n    switch (view) {\n      case 'month':\n        newDate.setMonth(newDate.getMonth() - 1);\n        break;\n      case 'week':\n        newDate.setDate(newDate.getDate() - 7);\n        break;\n      case 'day':\n        newDate.setDate(newDate.getDate() - 1);\n        break;\n    }\n    setCurrentDate(newDate);\n  };\n  \n  const navigateNext = () => {\n    const newDate = new Date(currentDate);\n    switch (view) {\n      case 'month':\n        newDate.setMonth(newDate.getMonth() + 1);\n        break;\n      case 'week':\n        newDate.setDate(newDate.getDate() + 7);\n        break;\n      case 'day':\n        newDate.setDate(newDate.getDate() + 1);\n        break;\n    }\n    setCurrentDate(newDate);\n  };\n  \n  const navigateToday = () => {\n    setCurrentDate(new Date());\n  };\n\n  const renderTitle = () => {\n    const options: Intl.DateTimeFormatOptions = { \n      year: 'numeric', \n    };\n    \n    switch (view) {\n      case 'month':\n        options.month = 'long';\n        break;\n      case 'week':\n        options.month = 'short';\n        options.day = 'numeric';\n        // Add end of week date\n        const endOfWeek = new Date(currentDate);\n        endOfWeek.setDate(currentDate.getDate() + 6);\n        return `${currentDate.toLocaleDateString('en-US', { month: 'short', day: 'numeric' })} - ${endOfWeek.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })}`;\n      case 'day':\n        options.weekday = 'long';\n        options.month = 'long';\n        options.day = 'numeric';\n        break;\n    }\n    \n    return currentDate.toLocaleDateString('en-US', options);\n  };\n\n  const renderView = () => {\n    // Combine and filter events based on selected filters\n    const allEvents = [...events, ...friendsEvents];\n    \n    const filteredEvents = allEvents.filter(event => {\n      if (selectedPlatforms.length > 0 && !selectedPlatforms.includes(event.platform)) {\n        return false;\n      }\n      return true;\n    });\n\n    switch (view) {\n      case 'month':\n        return <MonthView currentDate={currentDate} events={filteredEvents} />;\n      case 'week':\n        return <WeekView currentDate={currentDate} events={filteredEvents} />;\n      case 'day':\n        return <DayView currentDate={currentDate} events={filteredEvents} />;\n      case 'agenda':\n        return <AgendaView currentDate={currentDate} events={filteredEvents} />;\n    }\n  };\n\n  // Combine all profiles for filter display\n  const allProfiles = [\n    ...profiles.map(p => ({ ...p, isOwnProfile: true })),\n    ...friendsProfiles.map(p => ({ ...p, isOwnProfile: false }))\n  ];\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"h-full flex flex-col\">\n      <div className=\"flex items-center justify-between mb-4 flex-wrap gap-4\">\n        <div className=\"flex items-center\">\n          <h1 className=\"text-2xl font-bold text-gray-900 mr-4\">Calendar</h1>\n          <div className=\"flex items-center space-x-2\">\n            <button\n              onClick={navigatePrevious}\n              className=\"p-1 rounded-full hover:bg-gray-100\"\n            >\n              <ChevronLeft className=\"h-5 w-5 text-gray-500\" />\n            </button>\n            <button\n              onClick={navigateToday}\n              className=\"px-3 py-1 text-sm bg-white border border-gray-300 rounded-md hover:bg-gray-50\"\n            >\n              Today\n            </button>\n            <button\n              onClick={navigateNext}\n              className=\"p-1 rounded-full hover:bg-gray-100\"\n            >\n              <ChevronRight className=\"h-5 w-5 text-gray-500\" />\n            </button>\n            <h2 className=\"text-xl font-semibold text-gray-700 ml-2\">{renderTitle()}</h2>\n          </div>\n        </div>\n        \n        <div className=\"flex items-center space-x-2\">\n          <div className=\"bg-white border border-gray-300 rounded-md p-1 flex\">\n            <button\n              onClick={() => setView('month')}\n              className={`p-1 rounded ${\n                view === 'month' ? 'bg-blue-100 text-blue-600' : 'text-gray-500 hover:bg-gray-100'\n              }`}\n              title=\"Month view\"\n            >\n              <CalendarIcon className=\"h-5 w-5\" />\n            </button>\n            <button\n              onClick={() => setView('week')}\n              className={`p-1 rounded ${\n                view === 'week' ? 'bg-blue-100 text-blue-600' : 'text-gray-500 hover:bg-gray-100'\n              }`}\n              title=\"Week view\"\n            >\n              <LayoutGrid className=\"h-5 w-5\" />\n            </button>\n            <button\n              onClick={() => setView('day')}\n              className={`p-1 rounded ${\n                view === 'day' ? 'bg-blue-100 text-blue-600' : 'text-gray-500 hover:bg-gray-100'\n              }`}\n              title=\"Day view\"\n            >\n              <div className=\"w-5 h-5 flex flex-col justify-center items-center\">\n                <div className=\"w-4 h-0.5 bg-current mb-0.5\"></div>\n                <div className=\"w-4 h-0.5 bg-current mb-0.5\"></div>\n                <div className=\"w-4 h-0.5 bg-current\"></div>\n              </div>\n            </button>\n            <button\n              onClick={() => setView('agenda')}\n              className={`p-1 rounded ${\n                view === 'agenda' ? 'bg-blue-100 text-blue-600' : 'text-gray-500 hover:bg-gray-100'\n              }`}\n              title=\"List view\"\n            >\n              <LayoutList className=\"h-5 w-5\" />\n            </button>\n          </div>\n          \n          <button\n            onClick={() => setFilterOpen(!filterOpen)}\n            className=\"flex items-center px-3 py-1.5 bg-white border border-gray-300 rounded-md hover:bg-gray-50 text-sm\"\n          >\n            <Filter className=\"h-4 w-4 mr-1\" />\n            Filter\n          </button>\n        </div>\n      </div>\n      \n      {filterOpen && (\n        <div className=\"bg-white p-4 rounded-lg shadow-md mb-4 grid grid-cols-1 md:grid-cols-4 gap-4\">\n          <div>\n            <h3 className=\"text-sm font-medium text-gray-700 mb-2\">Your Children</h3>\n            <div className=\"space-y-2\">\n              {allProfiles.filter(p => p.isOwnProfile).map(profile => (\n                <div key={profile.id} className=\"flex items-center\">\n                  <input \n                    id={`child-${profile.id}`} \n                    type=\"checkbox\" \n                    checked={selectedProfiles.includes(profile.id)}\n                    onChange={(e) => {\n                      if (e.target.checked) {\n                        setSelectedProfiles([...selectedProfiles, profile.id]);\n                      } else {\n                        setSelectedProfiles(selectedProfiles.filter(id => id !== profile.id));\n                      }\n                    }}\n                    className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n                  />\n                  <label \n                    htmlFor={`child-${profile.id}`} \n                    className=\"ml-2 text-sm text-gray-700 flex items-center\"\n                  >\n                    <span \n                      className=\"w-3 h-3 rounded-full mr-1.5\"\n                      style={{ backgroundColor: profile.color }}\n                    ></span>\n                    {profile.name}\n                  </label>\n                </div>\n              ))}\n            </div>\n          </div>\n\n          <div>\n            <h3 className=\"text-sm font-medium text-gray-700 mb-2\">Friends' Children</h3>\n            <div className=\"space-y-2\">\n              <div className=\"flex items-center mb-2\">\n                <input \n                  id=\"show-friends-events\" \n                  type=\"checkbox\" \n                  checked={showFriendsEvents}\n                  onChange={(e) => setShowFriendsEvents(e.target.checked)}\n                  className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n                />\n                <label \n                  htmlFor=\"show-friends-events\" \n                  className=\"ml-2 text-sm font-medium text-gray-700\"\n                >\n                  Show friends' events\n                </label>\n              </div>\n              {showFriendsEvents && allProfiles.filter(p => !p.isOwnProfile).map(profile => (\n                <div key={profile.id} className=\"flex items-center\">\n                  <input \n                    id={`friend-child-${profile.id}`} \n                    type=\"checkbox\" \n                    checked={selectedProfiles.includes(profile.id)}\n                    onChange={(e) => {\n                      if (e.target.checked) {\n                        setSelectedProfiles([...selectedProfiles, profile.id]);\n                      } else {\n                        setSelectedProfiles(selectedProfiles.filter(id => id !== profile.id));\n                      }\n                    }}\n                    className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n                  />\n                  <label \n                    htmlFor={`friend-child-${profile.id}`} \n                    className=\"ml-2 text-sm text-gray-700 flex items-center\"\n                  >\n                    <span \n                      className=\"w-3 h-3 rounded-full mr-1.5\"\n                      style={{ backgroundColor: profile.color }}\n                    ></span>\n                    {profile.name}\n                    <span className=\"ml-1 text-xs text-blue-600\">({profile.ownerName})</span>\n                  </label>\n                </div>\n              ))}\n              {!showFriendsEvents && (\n                <p className=\"text-xs text-gray-500\">Enable to see friends' children</p>\n              )}\n            </div>\n          </div>\n          \n          <div>\n            <h3 className=\"text-sm font-medium text-gray-700 mb-2\">Platforms</h3>\n            <div className=\"space-y-2\">\n              {['SportsEngine', 'TeamSnap', 'Playmetrics', 'Manual'].map(platform => (\n                <div key={platform} className=\"flex items-center\">\n                  <input \n                    id={`platform-${platform}`} \n                    type=\"checkbox\" \n                    checked={selectedPlatforms.length === 0 || selectedPlatforms.includes(platform)}\n                    onChange={(e) => {\n                      if (e.target.checked) {\n                        setSelectedPlatforms([...selectedPlatforms, platform]);\n                      } else {\n                        setSelectedPlatforms(selectedPlatforms.filter(p => p !== platform));\n                      }\n                    }}\n                    className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n                  />\n                  <label \n                    htmlFor={`platform-${platform}`} \n                    className=\"ml-2 text-sm text-gray-700\"\n                  >\n                    {platform}\n                  </label>\n                </div>\n              ))}\n            </div>\n          </div>\n          \n          <div>\n            <h3 className=\"text-sm font-medium text-gray-700 mb-2\">Activity Types</h3>\n            <div className=\"space-y-2\">\n              {[\n                { id: 'game', label: 'Games' },\n                { id: 'practice', label: 'Practices' },\n                { id: 'tournament', label: 'Tournaments' },\n                { id: 'other', label: 'Other events' }\n              ].map(type => (\n                <div key={type.id} className=\"flex items-center\">\n                  <input \n                    id={`type-${type.id}`} \n                    type=\"checkbox\" \n                    checked={selectedTypes.includes(type.id)}\n                    onChange={(e) => {\n                      if (e.target.checked) {\n                        setSelectedTypes([...selectedTypes, type.id]);\n                      } else {\n                        setSelectedTypes(selectedTypes.filter(t => t !== type.id));\n                      }\n                    }}\n                    className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n                  />\n                  <label htmlFor={`type-${type.id}`} className=\"ml-2 text-sm text-gray-700\">\n                    {type.label}\n                  </label>\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n      )}\n      \n      <div className=\"bg-white rounded-lg shadow flex-1 overflow-hidden\">\n        {view !== 'agenda' && (\n          <CalendarHeader view={view} />\n        )}\n        <div className=\"flex-1 overflow-auto\">\n          {renderView()}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Calendar;","import React, { useState, useEffect } from 'react';\nimport { \n  Plus, \n  RefreshCw, \n  CheckCircle, \n  XCircle,\n  AlertTriangle,\n  ExternalLink,\n  Lock,\n  Calendar,\n  Users,\n  BarChart,\n  Link as LinkIcon,\n  X\n} from 'lucide-react';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport { supabase } from '../lib/supabase';\nimport { Platform } from '../types';\n\nconst Connections: React.FC = () => {\n  const location = useLocation();\n  const navigate = useNavigate();\n  const [platforms, setPlatforms] = useState<Platform[]>([]);\n  const [connecting, setConnecting] = useState<number | null>(null);\n  const [connectionStep, setConnectionStep] = useState(1);\n  const [loading, setLoading] = useState(true);\n  const [showSuccessMessage, setShowSuccessMessage] = useState(false);\n  \n  // Available platforms that can be connected\n  const availablePlatforms: Platform[] = [\n    {\n      id: 1,\n      name: 'SportsEngine',\n      icon: Calendar,\n      color: '#2563EB',\n      connected: false,\n      hasIssue: false,\n    },\n    {\n      id: 2,\n      name: 'TeamSnap',\n      icon: Users,\n      color: '#7C3AED',\n      connected: false,\n      hasIssue: false,\n    },\n    {\n      id: 3,\n      name: 'PlayMetrics',\n      icon: BarChart,\n      color: '#10B981',\n      connected: false,\n      hasIssue: false,\n    },\n    {\n      id: 4,\n      name: 'GameChanger',\n      icon: LinkIcon,\n      color: '#F97316',\n      connected: false,\n      hasIssue: false,\n    }\n  ];\n\n  useEffect(() => {\n    const fetchConnectedPlatforms = async () => {\n      try {\n        const { data: connectedPlatformsData, error } = await supabase\n          .from('platform_teams')\n          .select('platform')\n          .limit(1000);\n\n        if (error) throw error;\n\n        const uniquePlatforms = [...new Set(connectedPlatformsData.map(p => p.platform))];\n\n        const connectedPlatforms = availablePlatforms.map(platform => ({\n          ...platform,\n          connected: uniquePlatforms.includes(platform.name)\n        }));\n\n        setPlatforms(connectedPlatforms);\n      } catch (error) {\n        console.error('Error fetching connected platforms:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchConnectedPlatforms();\n\n    // Show success message if redirected from TeamSnap callback\n    if (location.state?.teamSnapConnected) {\n      setShowSuccessMessage(true);\n      // Clear the state\n      window.history.replaceState({}, document.title);\n      // Hide the message after 5 seconds\n      setTimeout(() => setShowSuccessMessage(false), 5000);\n    }\n  }, [location]);\n  \n  const handleConnect = (platformId: number) => {\n    setConnecting(platformId);\n    setConnectionStep(1);\n  };\n  \n  const handleDisconnect = async (platformId: number) => {\n    try {\n      const platform = platforms.find(p => p.id === platformId);\n      if (!platform) return;\n\n      // Delete all teams for this platform\n      await supabase\n        .from('platform_teams')\n        .delete()\n        .eq('platform', platform.name);\n\n      // Update local state\n      setPlatforms(prev => prev.map(p => \n        p.id === platformId ? { ...p, connected: false } : p\n      ));\n\n      setConnecting(null);\n    } catch (error) {\n      console.error('Error disconnecting platform:', error);\n    }\n  };\n  \n  const handleRefresh = async (platformId: number) => {\n    // This would re-fetch data from the platform in a real app\n    console.log(`Refreshing platform ${platformId}`);\n  };\n  \n  const nextStep = () => {\n    if (connectionStep < 3) {\n      setConnectionStep(connectionStep + 1);\n    } else {\n      // Connection complete\n      setConnecting(null);\n      setConnectionStep(1);\n    }\n  };\n  \n  const getPlatformBenefits = (platformName: string) => {\n    switch (platformName) {\n      case 'SportsEngine':\n        return [\n          'Access to team schedules and game information',\n          'Import practice times and locations',\n          'Get real-time updates for schedule changes',\n          'View coach announcements and team messages'\n        ];\n      case 'TeamSnap':\n        return [\n          'Sync team availability and roster information',\n          'Import game and practice schedules',\n          'Receive automated notifications for changes',\n          'Access team photos and media'\n        ];\n      case 'PlayMetrics':\n        return [\n          'Import practice plans and development goals',\n          'Track player performance and statistics',\n          'Access coach feedback and evaluations',\n          'Monitor skill development progress'\n        ];\n      case 'GameChanger':\n        return [\n          'Sync game schedules and tournament information',\n          'Import statistics and game results',\n          'Access video highlights and replays',\n          'Receive live game updates'\n        ];\n      default:\n        return [\n          'Sync schedules and events automatically',\n          'Receive real-time updates for changes',\n          'Import all team information',\n          'Streamline your sports management'\n        ];\n    }\n  };\n  \n  const getConnectionStatus = (platform: Platform) => {\n    if (platform.connected) {\n      return platform.hasIssue ? (\n        <div className=\"flex items-center text-yellow-600\">\n          <AlertTriangle className=\"h-5 w-5 mr-1\" />\n          <span>Connection issue</span>\n        </div>\n      ) : (\n        <div className=\"flex items-center text-green-600\">\n          <CheckCircle className=\"h-5 w-5 mr-1\" />\n          <span>Connected</span>\n        </div>\n      );\n    }\n    \n    return (\n      <div className=\"flex items-center text-gray-500\">\n        <XCircle className=\"h-5 w-5 mr-1\" />\n        <span>Not connected</span>\n      </div>\n    );\n  };\n  \n  const renderConnectionDialog = () => {\n    if (connecting === null) return null;\n    \n    const platform = platforms.find(p => p.id === connecting);\n    if (!platform) return null;\n    \n    return (\n      <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n        <div className=\"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-auto\">\n          <div className=\"px-6 py-4 border-b border-gray-200 flex justify-between items-center\">\n            <div className=\"flex items-center\">\n              <div \n                className=\"h-10 w-10 rounded-lg flex items-center justify-center mr-3\"\n                style={{ backgroundColor: platform.color + '20', color: platform.color }}\n              >\n                <platform.icon className=\"h-6 w-6\" />\n              </div>\n              <h3 className=\"text-lg font-semibold text-gray-900\">{platform.connected ? 'Manage' : 'Connect to'} {platform.name}</h3>\n            </div>\n            <button \n              className=\"text-gray-500 hover:text-gray-700\"\n              onClick={() => setConnecting(null)}\n            >\n              <XCircle className=\"h-5 w-5\" />\n            </button>\n          </div>\n          \n          {platform.connected ? (\n            <div className=\"p-6\">\n              <div className=\"mb-6\">\n                <div className=\"flex items-center text-green-600 mb-2\">\n                  <CheckCircle className=\"h-5 w-5 mr-2\" />\n                  <span className=\"font-medium\">Connected to {platform.name}</span>\n                </div>\n                <p className=\"text-gray-600\">\n                  Your {platform.name} account is currently connected and syncing data to TeamSync.\n                </p>\n              </div>\n              \n              <div className=\"bg-gray-50 p-4 rounded-lg mb-6\">\n                <h4 className=\"font-medium text-gray-900 mb-2\">Connection Details</h4>\n                <div className=\"space-y-2 text-sm\">\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-gray-500\">Connected on</span>\n                    <span className=\"text-gray-900\">June 15, 2025</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-gray-500\">Last synced</span>\n                    <span className=\"text-gray-900\">Today at 10:23 AM</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-gray-500\">Status</span>\n                    <span className={platform.hasIssue ? \"text-yellow-600\" : \"text-green-600\"}>\n                      {platform.hasIssue ? \"Connection issue\" : \"Active\"}\n                    </span>\n                  </div>\n                </div>\n              </div>\n              \n              <div className=\"flex flex-col space-y-3\">\n                <button\n                  className=\"w-full py-2 px-4 rounded-md border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 flex items-center justify-center\"\n                  onClick={() => handleRefresh(platform.id)}\n                >\n                  <RefreshCw className=\"h-4 w-4 mr-2\" />\n                  Refresh Connection\n                </button>\n                <button\n                  className=\"w-full py-2 px-4 rounded-md border border-red-300 bg-white text-red-600 hover:bg-red-50 flex items-center justify-center\"\n                  onClick={() => handleDisconnect(platform.id)}\n                >\n                  <XCircle className=\"h-4 w-4 mr-2\" />\n                  Disconnect\n                </button>\n              </div>\n            </div>\n          ) : (\n            <div className=\"p-6\">\n              {connectionStep === 1 && (\n                <div>\n                  <div className=\"mb-6\">\n                    <h4 className=\"font-medium text-gray-900 mb-2\">Connect to {platform.name}</h4>\n                    <p className=\"text-gray-600\">\n                      Connecting to {platform.name} allows TeamSync to automatically import all your schedules, \n                      events, and team information.\n                    </p>\n                  </div>\n                  \n                  <div className=\"bg-blue-50 p-4 rounded-lg mb-6\">\n                    <h4 className=\"font-medium text-blue-800 mb-2\">Benefits</h4>\n                    <ul className=\"space-y-2 text-sm text-blue-700\">\n                      {getPlatformBenefits(platform.name).map((benefit, index) => (\n                        <li key={index} className=\"flex items-start\">\n                          <CheckCircle className=\"h-4 w-4 mr-2 flex-shrink-0 mt-0.5\" />\n                          <span>{benefit}</span>\n                        </li>\n                      ))}\n                    </ul>\n                  </div>\n                  \n                  <div className=\"bg-gray-50 p-4 rounded-lg mb-6\">\n                    <h4 className=\"font-medium text-gray-900 mb-2\">What you'll need</h4>\n                    <ul className=\"space-y-2 text-sm text-gray-600\">\n                      <li className=\"flex items-start\">\n                        <span className=\"flex h-5 w-5 items-center justify-center rounded-full bg-blue-100 text-blue-600 text-xs mr-2 flex-shrink-0\">1</span>\n                        <span>An active {platform.name} account</span>\n                      </li>\n                      <li className=\"flex items-start\">\n                        <span className=\"flex h-5 w-5 items-center justify-center rounded-full bg-blue-100 text-blue-600 text-xs mr-2 flex-shrink-0\">2</span>\n                        <span>Your login credentials</span>\n                      </li>\n                      <li className=\"flex items-start\">\n                        <span className=\"flex h-5 w-5 items-center justify-center rounded-full bg-blue-100 text-blue-600 text-xs mr-2 flex-shrink-0\">3</span>\n                        <span>Permission to access your team data</span>\n                      </li>\n                    </ul>\n                  </div>\n                  \n                  <button\n                    className=\"w-full py-2 px-4 rounded-md bg-blue-600 text-white hover:bg-blue-700 flex items-center justify-center\"\n                    onClick={nextStep}\n                  >\n                    Continue\n                  </button>\n                </div>\n              )}\n              \n              {connectionStep === 2 && (\n                <div>\n                  <div className=\"mb-6\">\n                    <h4 className=\"font-medium text-gray-900 mb-2\">Sign in to {platform.name}</h4>\n                    <p className=\"text-gray-600\">\n                      You'll be redirected to {platform.name} to authorize TeamSync to access your account.\n                    </p>\n                  </div>\n                  \n                  <div className=\"space-y-4 mb-6\">\n                    <div>\n                      <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n                        Email\n                      </label>\n                      <input\n                        type=\"email\"\n                        id=\"email\"\n                        className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500\"\n                        placeholder=\"Enter your email\"\n                      />\n                    </div>\n                    <div>\n                      <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n                        Password\n                      </label>\n                      <input\n                        type=\"password\"\n                        id=\"password\"\n                        className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500\"\n                        placeholder=\"Enter your password\"\n                      />\n                    </div>\n                  </div>\n                  \n                  <div className=\"flex items-center text-sm text-gray-500 mb-6\">\n                    <Lock className=\"h-4 w-4 mr-2\" />\n                    <span>Your credentials are securely transmitted to {platform.name}</span>\n                  </div>\n                  \n                  <div className=\"flex space-x-3\">\n                    <button\n                      className=\"flex-1 py-2 px-4 rounded-md border border-gray-300 bg-white text-gray-700 hover:bg-gray-50\"\n                      onClick={() => setConnectionStep(1)}\n                    >\n                      Back\n                    </button>\n                    <button\n                      className=\"flex-1 py-2 px-4 rounded-md bg-blue-600 text-white hover:bg-blue-700\"\n                      onClick={nextStep}\n                    >\n                      Authorize\n                    </button>\n                  </div>\n                </div>\n              )}\n              \n              {connectionStep === 3 && (\n                <div>\n                  <div className=\"flex flex-col items-center justify-center py-6\">\n                    <div \n                      className=\"h-16 w-16 rounded-full flex items-center justify-center mb-4\"\n                      style={{ backgroundColor: platform.color + '20', color: platform.color }}\n                    >\n                      <CheckCircle className=\"h-10 w-10\" />\n                    </div>\n                    <h4 className=\"text-xl font-medium text-gray-900 mb-2\">Connection Successful!</h4>\n                    <p className=\"text-gray-600 text-center mb-6\">\n                      Your {platform.name} account has been successfully connected to TeamSync.\n                    </p>\n                    \n                    <div className=\"bg-green-50 p-4 rounded-lg w-full mb-6\">\n                      <h5 className=\"font-medium text-green-800 mb-2\">What's Next</h5>\n                      <ul className=\"space-y-2 text-sm text-green-700\">\n                        <li className=\"flex items-start\">\n                          <CheckCircle className=\"h-4 w-4 mr-2 flex-shrink-0 mt-0.5\" />\n                          <span>Your events are being imported (this may take a few minutes)</span>\n                        </li>\n                        <li className=\"flex items-start\">\n                          <CheckCircle className=\"h-4 w-4 mr-2 flex-shrink-0 mt-0.5\" />\n                          <span>You'll receive notifications for any scheduling conflicts</span>\n                        </li>\n                        <li className=\"flex items-start\">\n                          <CheckCircle className=\"h-4 w-4 mr-2 flex-shrink-0 mt-0.5\" />\n                          <span>All future updates will sync automatically</span>\n                        </li>\n                      </ul>\n                    </div>\n                    \n                    <button\n                      className=\"w-full py-2 px-4 rounded-md bg-blue-600 text-white hover:bg-blue-700\"\n                      onClick={nextStep}\n                    >\n                      Done\n                    </button>\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div>\n      {showSuccessMessage && (\n        <div className=\"fixed top-4 right-4 bg-green-50 border border-green-200 text-green-800 rounded-lg p-4 shadow-lg z-50 animate-fade-in\">\n          <div className=\"flex items-center\">\n            <CheckCircle className=\"h-5 w-5 text-green-400 mr-2\" />\n            <div className=\"flex-1\">\n              <p className=\"font-medium\">TeamSnap Connected Successfully!</p>\n              <p className=\"text-sm\">Your teams have been synchronized.</p>\n            </div>\n            <button \n              onClick={() => setShowSuccessMessage(false)}\n              className=\"ml-4 text-green-400 hover:text-green-500\"\n            >\n              <X className=\"h-5 w-5\" />\n            </button>\n          </div>\n        </div>\n      )}\n\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6\">\n        <h1 className=\"text-2xl font-bold text-gray-900 mb-2 sm:mb-0\">Connections</h1>\n        <button\n          className=\"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n        >\n          <Plus className=\"h-4 w-4 mr-2\" />\n          Add New Connection\n        </button>\n      </div>\n      \n      <div className=\"bg-white rounded-lg shadow-sm overflow-hidden mb-8\">\n        <div className=\"px-4 py-5 sm:px-6 border-b border-gray-200\">\n          <h2 className=\"text-lg font-medium text-gray-900\">Connected Platforms</h2>\n          <p className=\"mt-1 text-sm text-gray-500\">\n            Manage your connections to sports platforms and services\n          </p>\n        </div>\n        \n        <div className=\"divide-y divide-gray-200\">\n          {platforms.filter(p => p.connected).map(platform => (\n            <div key={platform.id} className=\"p-6 hover:bg-gray-50 transition-colors\">\n              <div className=\"flex flex-col sm:flex-row sm:items-start\">\n                <div \n                  className=\"h-12 w-12 rounded-lg flex items-center justify-center mb-4 sm:mb-0 sm:mr-4\"\n                  style={{ backgroundColor: platform.color + '20', color: platform.color }}\n                >\n                  <platform.icon className=\"h-6 w-6\" />\n                </div>\n                \n                <div className=\"flex-1\">\n                  <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-2\">\n                    <h3 className=\"text-lg font-medium text-gray-900\">{platform.name}</h3>\n                    {getConnectionStatus(platform)}\n                  </div>\n                  \n                  <p className=\"text-gray-600 mb-4\">\n                    {platform.hasIssue \n                      ? `There is an issue with your ${platform.name} connection. Please refresh or reconnect.` \n                      : `Your ${platform.name} account is connected and syncing data to TeamSync.`}\n                  </p>\n                  \n                  <div className=\"flex flex-wrap gap-3\">\n                    <button\n                      className=\"inline-flex items-center px-3 py-1.5 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50\"\n                      onClick={() => handleConnect(platform.id)}\n                    >\n                      Manage\n                    </button>\n                    \n                    <button\n                      className=\"inline-flex items-center px-3 py-1.5 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50\"\n                      onClick={() => handleRefresh(platform.id)}\n                    >\n                      <RefreshCw className=\"h-4 w-4 mr-1.5\" />\n                      Refresh\n                    </button>\n                    \n                    {platform.hasIssue && (\n                      <div className=\"bg-yellow-100 text-yellow-800 text-xs px-2.5 py-1.5 rounded-full flex items-center\">\n                        <AlertTriangle className=\"h-3.5 w-3.5 mr-1\" />\n                        Connection issue\n                      </div>\n                    )}\n                  </div>\n                </div>\n              </div>\n            </div>\n          ))}\n          \n          {platforms.filter(p => p.connected).length === 0 && (\n            <div className=\"p-8 text-center\">\n              <div className=\"mx-auto h-12 w-12 rounded-full bg-blue-100 flex items-center justify-center mb-4\">\n                <LinkIcon className=\"h-6 w-6 text-blue-600\" />\n              </div>\n              <h3 className=\"text-lg font-medium text-gray-900\">No platforms connected</h3>\n              <p className=\"mt-1 text-gray-500\">Connect to your sports platforms to start syncing data</p>\n            </div>\n          )}\n        </div>\n      </div>\n      \n      <div className=\"bg-white rounded-lg shadow-sm overflow-hidden\">\n        <div className=\"px-4 py-5 sm:px-6 border-b border-gray-200\">\n          <h2 className=\"text-lg font-medium text-gray-900\">Available Platforms</h2>\n          <p className=\"mt-1 text-sm text-gray-500\">\n            Connect to additional sports platforms to import your schedules and events\n          </p>\n        </div>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 p-6\">\n          {platforms.filter(p => !p.connected).map(platform => (\n            <div \n              key={platform.id} \n              className=\"border border-gray-200 rounded-lg overflow-hidden hover:shadow-md transition-shadow\"\n            >\n              <div \n                className=\"p-4 border-b\" \n                style={{ backgroundColor: platform.color + '10' }}\n              >\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex items-center\">\n                    <div \n                      className=\"h-10 w-10 rounded-lg flex items-center justify-center mr-3\"\n                      style={{ backgroundColor: platform.color + '20', color: platform.color }}\n                    >\n                      <platform.icon className=\"h-5 w-5\" />\n                    </div>\n                    <h3 className=\"text-lg font-medium text-gray-900\">{platform.name}</h3>\n                  </div>\n                </div>\n              </div>\n              \n              <div className=\"p-4\">\n                <p className=\"text-sm text-gray-600 mb-4\">\n                  Connect to {platform.name} to import your schedules, events, and team information.\n                </p>\n                \n                <div className=\"flex justify-between items-center\">\n                  <a \n                    href=\"#\" \n                    className=\"text-sm text-blue-600 hover:text-blue-700 flex items-center\"\n                    onClick={(e) => e.preventDefault()}\n                  >\n                    Learn more\n                    <ExternalLink className=\"h-3.5 w-3.5 ml-1\" />\n                  </a>\n                  \n                  <button\n                    className=\"inline-flex items-center px-3 py-1.5 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n                    onClick={() => handleConnect(platform.id)}\n                  >\n                    Connect\n                  </button>\n                </div>\n              </div>\n            </div>\n          ))}\n          \n          {platforms.filter(p => !p.connected).length === 0 && (\n            <div className=\"col-span-full p-8 text-center\">\n              <div className=\"mx-auto h-12 w-12 rounded-full bg-green-100 flex items-center justify-center mb-4\">\n                <CheckCircle className=\"h-6 w-6 text-green-600\" />\n              </div>\n              <h3 className=\"text-lg font-medium text-gray-900\">All platforms connected!</h3>\n              <p className=\"mt-1 text-gray-500\">You've connected all available platforms</p>\n            </div>\n          )}\n        </div>\n      </div>\n      \n      {renderConnectionDialog()}\n    </div>\n  );\n};\n\nexport default Connections;","export default {}",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory();\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\troot.CryptoJS = factory();\n\t}\n}(this, function () {\n\n\t/*globals window, global, require*/\n\n\t/**\n\t * CryptoJS core components.\n\t */\n\tvar CryptoJS = CryptoJS || (function (Math, undefined) {\n\n\t    var crypto;\n\n\t    // Native crypto from window (Browser)\n\t    if (typeof window !== 'undefined' && window.crypto) {\n\t        crypto = window.crypto;\n\t    }\n\n\t    // Native crypto in web worker (Browser)\n\t    if (typeof self !== 'undefined' && self.crypto) {\n\t        crypto = self.crypto;\n\t    }\n\n\t    // Native crypto from worker\n\t    if (typeof globalThis !== 'undefined' && globalThis.crypto) {\n\t        crypto = globalThis.crypto;\n\t    }\n\n\t    // Native (experimental IE 11) crypto from window (Browser)\n\t    if (!crypto && typeof window !== 'undefined' && window.msCrypto) {\n\t        crypto = window.msCrypto;\n\t    }\n\n\t    // Native crypto from global (NodeJS)\n\t    if (!crypto && typeof global !== 'undefined' && global.crypto) {\n\t        crypto = global.crypto;\n\t    }\n\n\t    // Native crypto import via require (NodeJS)\n\t    if (!crypto && typeof require === 'function') {\n\t        try {\n\t            crypto = require('crypto');\n\t        } catch (err) {}\n\t    }\n\n\t    /*\n\t     * Cryptographically secure pseudorandom number generator\n\t     *\n\t     * As Math.random() is cryptographically not safe to use\n\t     */\n\t    var cryptoSecureRandomInt = function () {\n\t        if (crypto) {\n\t            // Use getRandomValues method (Browser)\n\t            if (typeof crypto.getRandomValues === 'function') {\n\t                try {\n\t                    return crypto.getRandomValues(new Uint32Array(1))[0];\n\t                } catch (err) {}\n\t            }\n\n\t            // Use randomBytes method (NodeJS)\n\t            if (typeof crypto.randomBytes === 'function') {\n\t                try {\n\t                    return crypto.randomBytes(4).readInt32LE();\n\t                } catch (err) {}\n\t            }\n\t        }\n\n\t        throw new Error('Native crypto module could not be used to get secure random number.');\n\t    };\n\n\t    /*\n\t     * Local polyfill of Object.create\n\n\t     */\n\t    var create = Object.create || (function () {\n\t        function F() {}\n\n\t        return function (obj) {\n\t            var subtype;\n\n\t            F.prototype = obj;\n\n\t            subtype = new F();\n\n\t            F.prototype = null;\n\n\t            return subtype;\n\t        };\n\t    }());\n\n\t    /**\n\t     * CryptoJS namespace.\n\t     */\n\t    var C = {};\n\n\t    /**\n\t     * Library namespace.\n\t     */\n\t    var C_lib = C.lib = {};\n\n\t    /**\n\t     * Base object for prototypal inheritance.\n\t     */\n\t    var Base = C_lib.Base = (function () {\n\n\n\t        return {\n\t            /**\n\t             * Creates a new object that inherits from this object.\n\t             *\n\t             * @param {Object} overrides Properties to copy into the new object.\n\t             *\n\t             * @return {Object} The new object.\n\t             *\n\t             * @static\n\t             *\n\t             * @example\n\t             *\n\t             *     var MyType = CryptoJS.lib.Base.extend({\n\t             *         field: 'value',\n\t             *\n\t             *         method: function () {\n\t             *         }\n\t             *     });\n\t             */\n\t            extend: function (overrides) {\n\t                // Spawn\n\t                var subtype = create(this);\n\n\t                // Augment\n\t                if (overrides) {\n\t                    subtype.mixIn(overrides);\n\t                }\n\n\t                // Create default initializer\n\t                if (!subtype.hasOwnProperty('init') || this.init === subtype.init) {\n\t                    subtype.init = function () {\n\t                        subtype.$super.init.apply(this, arguments);\n\t                    };\n\t                }\n\n\t                // Initializer's prototype is the subtype object\n\t                subtype.init.prototype = subtype;\n\n\t                // Reference supertype\n\t                subtype.$super = this;\n\n\t                return subtype;\n\t            },\n\n\t            /**\n\t             * Extends this object and runs the init method.\n\t             * Arguments to create() will be passed to init().\n\t             *\n\t             * @return {Object} The new object.\n\t             *\n\t             * @static\n\t             *\n\t             * @example\n\t             *\n\t             *     var instance = MyType.create();\n\t             */\n\t            create: function () {\n\t                var instance = this.extend();\n\t                instance.init.apply(instance, arguments);\n\n\t                return instance;\n\t            },\n\n\t            /**\n\t             * Initializes a newly created object.\n\t             * Override this method to add some logic when your objects are created.\n\t             *\n\t             * @example\n\t             *\n\t             *     var MyType = CryptoJS.lib.Base.extend({\n\t             *         init: function () {\n\t             *             // ...\n\t             *         }\n\t             *     });\n\t             */\n\t            init: function () {\n\t            },\n\n\t            /**\n\t             * Copies properties into this object.\n\t             *\n\t             * @param {Object} properties The properties to mix in.\n\t             *\n\t             * @example\n\t             *\n\t             *     MyType.mixIn({\n\t             *         field: 'value'\n\t             *     });\n\t             */\n\t            mixIn: function (properties) {\n\t                for (var propertyName in properties) {\n\t                    if (properties.hasOwnProperty(propertyName)) {\n\t                        this[propertyName] = properties[propertyName];\n\t                    }\n\t                }\n\n\t                // IE won't copy toString using the loop above\n\t                if (properties.hasOwnProperty('toString')) {\n\t                    this.toString = properties.toString;\n\t                }\n\t            },\n\n\t            /**\n\t             * Creates a copy of this object.\n\t             *\n\t             * @return {Object} The clone.\n\t             *\n\t             * @example\n\t             *\n\t             *     var clone = instance.clone();\n\t             */\n\t            clone: function () {\n\t                return this.init.prototype.extend(this);\n\t            }\n\t        };\n\t    }());\n\n\t    /**\n\t     * An array of 32-bit words.\n\t     *\n\t     * @property {Array} words The array of 32-bit words.\n\t     * @property {number} sigBytes The number of significant bytes in this word array.\n\t     */\n\t    var WordArray = C_lib.WordArray = Base.extend({\n\t        /**\n\t         * Initializes a newly created word array.\n\t         *\n\t         * @param {Array} words (Optional) An array of 32-bit words.\n\t         * @param {number} sigBytes (Optional) The number of significant bytes in the words.\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.lib.WordArray.create();\n\t         *     var wordArray = CryptoJS.lib.WordArray.create([0x00010203, 0x04050607]);\n\t         *     var wordArray = CryptoJS.lib.WordArray.create([0x00010203, 0x04050607], 6);\n\t         */\n\t        init: function (words, sigBytes) {\n\t            words = this.words = words || [];\n\n\t            if (sigBytes != undefined) {\n\t                this.sigBytes = sigBytes;\n\t            } else {\n\t                this.sigBytes = words.length * 4;\n\t            }\n\t        },\n\n\t        /**\n\t         * Converts this word array to a string.\n\t         *\n\t         * @param {Encoder} encoder (Optional) The encoding strategy to use. Default: CryptoJS.enc.Hex\n\t         *\n\t         * @return {string} The stringified word array.\n\t         *\n\t         * @example\n\t         *\n\t         *     var string = wordArray + '';\n\t         *     var string = wordArray.toString();\n\t         *     var string = wordArray.toString(CryptoJS.enc.Utf8);\n\t         */\n\t        toString: function (encoder) {\n\t            return (encoder || Hex).stringify(this);\n\t        },\n\n\t        /**\n\t         * Concatenates a word array to this word array.\n\t         *\n\t         * @param {WordArray} wordArray The word array to append.\n\t         *\n\t         * @return {WordArray} This word array.\n\t         *\n\t         * @example\n\t         *\n\t         *     wordArray1.concat(wordArray2);\n\t         */\n\t        concat: function (wordArray) {\n\t            // Shortcuts\n\t            var thisWords = this.words;\n\t            var thatWords = wordArray.words;\n\t            var thisSigBytes = this.sigBytes;\n\t            var thatSigBytes = wordArray.sigBytes;\n\n\t            // Clamp excess bits\n\t            this.clamp();\n\n\t            // Concat\n\t            if (thisSigBytes % 4) {\n\t                // Copy one byte at a time\n\t                for (var i = 0; i < thatSigBytes; i++) {\n\t                    var thatByte = (thatWords[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                    thisWords[(thisSigBytes + i) >>> 2] |= thatByte << (24 - ((thisSigBytes + i) % 4) * 8);\n\t                }\n\t            } else {\n\t                // Copy one word at a time\n\t                for (var j = 0; j < thatSigBytes; j += 4) {\n\t                    thisWords[(thisSigBytes + j) >>> 2] = thatWords[j >>> 2];\n\t                }\n\t            }\n\t            this.sigBytes += thatSigBytes;\n\n\t            // Chainable\n\t            return this;\n\t        },\n\n\t        /**\n\t         * Removes insignificant bits.\n\t         *\n\t         * @example\n\t         *\n\t         *     wordArray.clamp();\n\t         */\n\t        clamp: function () {\n\t            // Shortcuts\n\t            var words = this.words;\n\t            var sigBytes = this.sigBytes;\n\n\t            // Clamp\n\t            words[sigBytes >>> 2] &= 0xffffffff << (32 - (sigBytes % 4) * 8);\n\t            words.length = Math.ceil(sigBytes / 4);\n\t        },\n\n\t        /**\n\t         * Creates a copy of this word array.\n\t         *\n\t         * @return {WordArray} The clone.\n\t         *\n\t         * @example\n\t         *\n\t         *     var clone = wordArray.clone();\n\t         */\n\t        clone: function () {\n\t            var clone = Base.clone.call(this);\n\t            clone.words = this.words.slice(0);\n\n\t            return clone;\n\t        },\n\n\t        /**\n\t         * Creates a word array filled with random bytes.\n\t         *\n\t         * @param {number} nBytes The number of random bytes to generate.\n\t         *\n\t         * @return {WordArray} The random word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.lib.WordArray.random(16);\n\t         */\n\t        random: function (nBytes) {\n\t            var words = [];\n\n\t            for (var i = 0; i < nBytes; i += 4) {\n\t                words.push(cryptoSecureRandomInt());\n\t            }\n\n\t            return new WordArray.init(words, nBytes);\n\t        }\n\t    });\n\n\t    /**\n\t     * Encoder namespace.\n\t     */\n\t    var C_enc = C.enc = {};\n\n\t    /**\n\t     * Hex encoding strategy.\n\t     */\n\t    var Hex = C_enc.Hex = {\n\t        /**\n\t         * Converts a word array to a hex string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The hex string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var hexString = CryptoJS.enc.Hex.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\n\t            // Convert\n\t            var hexChars = [];\n\t            for (var i = 0; i < sigBytes; i++) {\n\t                var bite = (words[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                hexChars.push((bite >>> 4).toString(16));\n\t                hexChars.push((bite & 0x0f).toString(16));\n\t            }\n\n\t            return hexChars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a hex string to a word array.\n\t         *\n\t         * @param {string} hexStr The hex string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Hex.parse(hexString);\n\t         */\n\t        parse: function (hexStr) {\n\t            // Shortcut\n\t            var hexStrLength = hexStr.length;\n\n\t            // Convert\n\t            var words = [];\n\t            for (var i = 0; i < hexStrLength; i += 2) {\n\t                words[i >>> 3] |= parseInt(hexStr.substr(i, 2), 16) << (24 - (i % 8) * 4);\n\t            }\n\n\t            return new WordArray.init(words, hexStrLength / 2);\n\t        }\n\t    };\n\n\t    /**\n\t     * Latin1 encoding strategy.\n\t     */\n\t    var Latin1 = C_enc.Latin1 = {\n\t        /**\n\t         * Converts a word array to a Latin1 string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The Latin1 string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var latin1String = CryptoJS.enc.Latin1.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\n\t            // Convert\n\t            var latin1Chars = [];\n\t            for (var i = 0; i < sigBytes; i++) {\n\t                var bite = (words[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                latin1Chars.push(String.fromCharCode(bite));\n\t            }\n\n\t            return latin1Chars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a Latin1 string to a word array.\n\t         *\n\t         * @param {string} latin1Str The Latin1 string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Latin1.parse(latin1String);\n\t         */\n\t        parse: function (latin1Str) {\n\t            // Shortcut\n\t            var latin1StrLength = latin1Str.length;\n\n\t            // Convert\n\t            var words = [];\n\t            for (var i = 0; i < latin1StrLength; i++) {\n\t                words[i >>> 2] |= (latin1Str.charCodeAt(i) & 0xff) << (24 - (i % 4) * 8);\n\t            }\n\n\t            return new WordArray.init(words, latin1StrLength);\n\t        }\n\t    };\n\n\t    /**\n\t     * UTF-8 encoding strategy.\n\t     */\n\t    var Utf8 = C_enc.Utf8 = {\n\t        /**\n\t         * Converts a word array to a UTF-8 string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The UTF-8 string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var utf8String = CryptoJS.enc.Utf8.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            try {\n\t                return decodeURIComponent(escape(Latin1.stringify(wordArray)));\n\t            } catch (e) {\n\t                throw new Error('Malformed UTF-8 data');\n\t            }\n\t        },\n\n\t        /**\n\t         * Converts a UTF-8 string to a word array.\n\t         *\n\t         * @param {string} utf8Str The UTF-8 string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Utf8.parse(utf8String);\n\t         */\n\t        parse: function (utf8Str) {\n\t            return Latin1.parse(unescape(encodeURIComponent(utf8Str)));\n\t        }\n\t    };\n\n\t    /**\n\t     * Abstract buffered block algorithm template.\n\t     *\n\t     * The property blockSize must be implemented in a concrete subtype.\n\t     *\n\t     * @property {number} _minBufferSize The number of blocks that should be kept unprocessed in the buffer. Default: 0\n\t     */\n\t    var BufferedBlockAlgorithm = C_lib.BufferedBlockAlgorithm = Base.extend({\n\t        /**\n\t         * Resets this block algorithm's data buffer to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     bufferedBlockAlgorithm.reset();\n\t         */\n\t        reset: function () {\n\t            // Initial values\n\t            this._data = new WordArray.init();\n\t            this._nDataBytes = 0;\n\t        },\n\n\t        /**\n\t         * Adds new data to this block algorithm's buffer.\n\t         *\n\t         * @param {WordArray|string} data The data to append. Strings are converted to a WordArray using UTF-8.\n\t         *\n\t         * @example\n\t         *\n\t         *     bufferedBlockAlgorithm._append('data');\n\t         *     bufferedBlockAlgorithm._append(wordArray);\n\t         */\n\t        _append: function (data) {\n\t            // Convert string to WordArray, else assume WordArray already\n\t            if (typeof data == 'string') {\n\t                data = Utf8.parse(data);\n\t            }\n\n\t            // Append\n\t            this._data.concat(data);\n\t            this._nDataBytes += data.sigBytes;\n\t        },\n\n\t        /**\n\t         * Processes available data blocks.\n\t         *\n\t         * This method invokes _doProcessBlock(offset), which must be implemented by a concrete subtype.\n\t         *\n\t         * @param {boolean} doFlush Whether all blocks and partial blocks should be processed.\n\t         *\n\t         * @return {WordArray} The processed data.\n\t         *\n\t         * @example\n\t         *\n\t         *     var processedData = bufferedBlockAlgorithm._process();\n\t         *     var processedData = bufferedBlockAlgorithm._process(!!'flush');\n\t         */\n\t        _process: function (doFlush) {\n\t            var processedWords;\n\n\t            // Shortcuts\n\t            var data = this._data;\n\t            var dataWords = data.words;\n\t            var dataSigBytes = data.sigBytes;\n\t            var blockSize = this.blockSize;\n\t            var blockSizeBytes = blockSize * 4;\n\n\t            // Count blocks ready\n\t            var nBlocksReady = dataSigBytes / blockSizeBytes;\n\t            if (doFlush) {\n\t                // Round up to include partial blocks\n\t                nBlocksReady = Math.ceil(nBlocksReady);\n\t            } else {\n\t                // Round down to include only full blocks,\n\t                // less the number of blocks that must remain in the buffer\n\t                nBlocksReady = Math.max((nBlocksReady | 0) - this._minBufferSize, 0);\n\t            }\n\n\t            // Count words ready\n\t            var nWordsReady = nBlocksReady * blockSize;\n\n\t            // Count bytes ready\n\t            var nBytesReady = Math.min(nWordsReady * 4, dataSigBytes);\n\n\t            // Process blocks\n\t            if (nWordsReady) {\n\t                for (var offset = 0; offset < nWordsReady; offset += blockSize) {\n\t                    // Perform concrete-algorithm logic\n\t                    this._doProcessBlock(dataWords, offset);\n\t                }\n\n\t                // Remove processed words\n\t                processedWords = dataWords.splice(0, nWordsReady);\n\t                data.sigBytes -= nBytesReady;\n\t            }\n\n\t            // Return processed words\n\t            return new WordArray.init(processedWords, nBytesReady);\n\t        },\n\n\t        /**\n\t         * Creates a copy of this object.\n\t         *\n\t         * @return {Object} The clone.\n\t         *\n\t         * @example\n\t         *\n\t         *     var clone = bufferedBlockAlgorithm.clone();\n\t         */\n\t        clone: function () {\n\t            var clone = Base.clone.call(this);\n\t            clone._data = this._data.clone();\n\n\t            return clone;\n\t        },\n\n\t        _minBufferSize: 0\n\t    });\n\n\t    /**\n\t     * Abstract hasher template.\n\t     *\n\t     * @property {number} blockSize The number of 32-bit words this hasher operates on. Default: 16 (512 bits)\n\t     */\n\t    var Hasher = C_lib.Hasher = BufferedBlockAlgorithm.extend({\n\t        /**\n\t         * Configuration options.\n\t         */\n\t        cfg: Base.extend(),\n\n\t        /**\n\t         * Initializes a newly created hasher.\n\t         *\n\t         * @param {Object} cfg (Optional) The configuration options to use for this hash computation.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hasher = CryptoJS.algo.SHA256.create();\n\t         */\n\t        init: function (cfg) {\n\t            // Apply config defaults\n\t            this.cfg = this.cfg.extend(cfg);\n\n\t            // Set initial values\n\t            this.reset();\n\t        },\n\n\t        /**\n\t         * Resets this hasher to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     hasher.reset();\n\t         */\n\t        reset: function () {\n\t            // Reset data buffer\n\t            BufferedBlockAlgorithm.reset.call(this);\n\n\t            // Perform concrete-hasher logic\n\t            this._doReset();\n\t        },\n\n\t        /**\n\t         * Updates this hasher with a message.\n\t         *\n\t         * @param {WordArray|string} messageUpdate The message to append.\n\t         *\n\t         * @return {Hasher} This hasher.\n\t         *\n\t         * @example\n\t         *\n\t         *     hasher.update('message');\n\t         *     hasher.update(wordArray);\n\t         */\n\t        update: function (messageUpdate) {\n\t            // Append\n\t            this._append(messageUpdate);\n\n\t            // Update the hash\n\t            this._process();\n\n\t            // Chainable\n\t            return this;\n\t        },\n\n\t        /**\n\t         * Finalizes the hash computation.\n\t         * Note that the finalize operation is effectively a destructive, read-once operation.\n\t         *\n\t         * @param {WordArray|string} messageUpdate (Optional) A final message update.\n\t         *\n\t         * @return {WordArray} The hash.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hash = hasher.finalize();\n\t         *     var hash = hasher.finalize('message');\n\t         *     var hash = hasher.finalize(wordArray);\n\t         */\n\t        finalize: function (messageUpdate) {\n\t            // Final message update\n\t            if (messageUpdate) {\n\t                this._append(messageUpdate);\n\t            }\n\n\t            // Perform concrete-hasher logic\n\t            var hash = this._doFinalize();\n\n\t            return hash;\n\t        },\n\n\t        blockSize: 512/32,\n\n\t        /**\n\t         * Creates a shortcut function to a hasher's object interface.\n\t         *\n\t         * @param {Hasher} hasher The hasher to create a helper for.\n\t         *\n\t         * @return {Function} The shortcut function.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var SHA256 = CryptoJS.lib.Hasher._createHelper(CryptoJS.algo.SHA256);\n\t         */\n\t        _createHelper: function (hasher) {\n\t            return function (message, cfg) {\n\t                return new hasher.init(cfg).finalize(message);\n\t            };\n\t        },\n\n\t        /**\n\t         * Creates a shortcut function to the HMAC's object interface.\n\t         *\n\t         * @param {Hasher} hasher The hasher to use in this HMAC helper.\n\t         *\n\t         * @return {Function} The shortcut function.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var HmacSHA256 = CryptoJS.lib.Hasher._createHmacHelper(CryptoJS.algo.SHA256);\n\t         */\n\t        _createHmacHelper: function (hasher) {\n\t            return function (message, key) {\n\t                return new C_algo.HMAC.init(hasher, key).finalize(message);\n\t            };\n\t        }\n\t    });\n\n\t    /**\n\t     * Algorithm namespace.\n\t     */\n\t    var C_algo = C.algo = {};\n\n\t    return C;\n\t}(Math));\n\n\n\treturn CryptoJS;\n\n}));",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Check if typed arrays are supported\n\t    if (typeof ArrayBuffer != 'function') {\n\t        return;\n\t    }\n\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var WordArray = C_lib.WordArray;\n\n\t    // Reference original init\n\t    var superInit = WordArray.init;\n\n\t    // Augment WordArray.init to handle typed arrays\n\t    var subInit = WordArray.init = function (typedArray) {\n\t        // Convert buffers to uint8\n\t        if (typedArray instanceof ArrayBuffer) {\n\t            typedArray = new Uint8Array(typedArray);\n\t        }\n\n\t        // Convert other array views to uint8\n\t        if (\n\t            typedArray instanceof Int8Array ||\n\t            (typeof Uint8ClampedArray !== \"undefined\" && typedArray instanceof Uint8ClampedArray) ||\n\t            typedArray instanceof Int16Array ||\n\t            typedArray instanceof Uint16Array ||\n\t            typedArray instanceof Int32Array ||\n\t            typedArray instanceof Uint32Array ||\n\t            typedArray instanceof Float32Array ||\n\t            typedArray instanceof Float64Array\n\t        ) {\n\t            typedArray = new Uint8Array(typedArray.buffer, typedArray.byteOffset, typedArray.byteLength);\n\t        }\n\n\t        // Handle Uint8Array\n\t        if (typedArray instanceof Uint8Array) {\n\t            // Shortcut\n\t            var typedArrayByteLength = typedArray.byteLength;\n\n\t            // Extract bytes\n\t            var words = [];\n\t            for (var i = 0; i < typedArrayByteLength; i++) {\n\t                words[i >>> 2] |= typedArray[i] << (24 - (i % 4) * 8);\n\t            }\n\n\t            // Initialize this word array\n\t            superInit.call(this, words, typedArrayByteLength);\n\t        } else {\n\t            // Else call normal init\n\t            superInit.apply(this, arguments);\n\t        }\n\t    };\n\n\t    subInit.prototype = WordArray;\n\t}());\n\n\n\treturn CryptoJS.lib.WordArray;\n\n}));",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function (Math) {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var WordArray = C_lib.WordArray;\n\t    var Hasher = C_lib.Hasher;\n\t    var C_algo = C.algo;\n\n\t    // Initialization and round constants tables\n\t    var H = [];\n\t    var K = [];\n\n\t    // Compute constants\n\t    (function () {\n\t        function isPrime(n) {\n\t            var sqrtN = Math.sqrt(n);\n\t            for (var factor = 2; factor <= sqrtN; factor++) {\n\t                if (!(n % factor)) {\n\t                    return false;\n\t                }\n\t            }\n\n\t            return true;\n\t        }\n\n\t        function getFractionalBits(n) {\n\t            return ((n - (n | 0)) * 0x100000000) | 0;\n\t        }\n\n\t        var n = 2;\n\t        var nPrime = 0;\n\t        while (nPrime < 64) {\n\t            if (isPrime(n)) {\n\t                if (nPrime < 8) {\n\t                    H[nPrime] = getFractionalBits(Math.pow(n, 1 / 2));\n\t                }\n\t                K[nPrime] = getFractionalBits(Math.pow(n, 1 / 3));\n\n\t                nPrime++;\n\t            }\n\n\t            n++;\n\t        }\n\t    }());\n\n\t    // Reusable object\n\t    var W = [];\n\n\t    /**\n\t     * SHA-256 hash algorithm.\n\t     */\n\t    var SHA256 = C_algo.SHA256 = Hasher.extend({\n\t        _doReset: function () {\n\t            this._hash = new WordArray.init(H.slice(0));\n\t        },\n\n\t        _doProcessBlock: function (M, offset) {\n\t            // Shortcut\n\t            var H = this._hash.words;\n\n\t            // Working variables\n\t            var a = H[0];\n\t            var b = H[1];\n\t            var c = H[2];\n\t            var d = H[3];\n\t            var e = H[4];\n\t            var f = H[5];\n\t            var g = H[6];\n\t            var h = H[7];\n\n\t            // Computation\n\t            for (var i = 0; i < 64; i++) {\n\t                if (i < 16) {\n\t                    W[i] = M[offset + i] | 0;\n\t                } else {\n\t                    var gamma0x = W[i - 15];\n\t                    var gamma0  = ((gamma0x << 25) | (gamma0x >>> 7))  ^\n\t                                  ((gamma0x << 14) | (gamma0x >>> 18)) ^\n\t                                   (gamma0x >>> 3);\n\n\t                    var gamma1x = W[i - 2];\n\t                    var gamma1  = ((gamma1x << 15) | (gamma1x >>> 17)) ^\n\t                                  ((gamma1x << 13) | (gamma1x >>> 19)) ^\n\t                                   (gamma1x >>> 10);\n\n\t                    W[i] = gamma0 + W[i - 7] + gamma1 + W[i - 16];\n\t                }\n\n\t                var ch  = (e & f) ^ (~e & g);\n\t                var maj = (a & b) ^ (a & c) ^ (b & c);\n\n\t                var sigma0 = ((a << 30) | (a >>> 2)) ^ ((a << 19) | (a >>> 13)) ^ ((a << 10) | (a >>> 22));\n\t                var sigma1 = ((e << 26) | (e >>> 6)) ^ ((e << 21) | (e >>> 11)) ^ ((e << 7)  | (e >>> 25));\n\n\t                var t1 = h + sigma1 + ch + K[i] + W[i];\n\t                var t2 = sigma0 + maj;\n\n\t                h = g;\n\t                g = f;\n\t                f = e;\n\t                e = (d + t1) | 0;\n\t                d = c;\n\t                c = b;\n\t                b = a;\n\t                a = (t1 + t2) | 0;\n\t            }\n\n\t            // Intermediate hash value\n\t            H[0] = (H[0] + a) | 0;\n\t            H[1] = (H[1] + b) | 0;\n\t            H[2] = (H[2] + c) | 0;\n\t            H[3] = (H[3] + d) | 0;\n\t            H[4] = (H[4] + e) | 0;\n\t            H[5] = (H[5] + f) | 0;\n\t            H[6] = (H[6] + g) | 0;\n\t            H[7] = (H[7] + h) | 0;\n\t        },\n\n\t        _doFinalize: function () {\n\t            // Shortcuts\n\t            var data = this._data;\n\t            var dataWords = data.words;\n\n\t            var nBitsTotal = this._nDataBytes * 8;\n\t            var nBitsLeft = data.sigBytes * 8;\n\n\t            // Add padding\n\t            dataWords[nBitsLeft >>> 5] |= 0x80 << (24 - nBitsLeft % 32);\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 14] = Math.floor(nBitsTotal / 0x100000000);\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 15] = nBitsTotal;\n\t            data.sigBytes = dataWords.length * 4;\n\n\t            // Hash final blocks\n\t            this._process();\n\n\t            // Return final computed hash\n\t            return this._hash;\n\t        },\n\n\t        clone: function () {\n\t            var clone = Hasher.clone.call(this);\n\t            clone._hash = this._hash.clone();\n\n\t            return clone;\n\t        }\n\t    });\n\n\t    /**\n\t     * Shortcut function to the hasher's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     *\n\t     * @return {WordArray} The hash.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hash = CryptoJS.SHA256('message');\n\t     *     var hash = CryptoJS.SHA256(wordArray);\n\t     */\n\t    C.SHA256 = Hasher._createHelper(SHA256);\n\n\t    /**\n\t     * Shortcut function to the HMAC's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     * @param {WordArray|string} key The secret key.\n\t     *\n\t     * @return {WordArray} The HMAC.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hmac = CryptoJS.HmacSHA256(message, key);\n\t     */\n\t    C.HmacSHA256 = Hasher._createHmacHelper(SHA256);\n\t}(Math));\n\n\n\treturn CryptoJS.SHA256;\n\n}));",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var WordArray = C_lib.WordArray;\n\t    var C_enc = C.enc;\n\n\t    /**\n\t     * Base64url encoding strategy.\n\t     */\n\t    var Base64url = C_enc.Base64url = {\n\t        /**\n\t         * Converts a word array to a Base64url string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @param {boolean} urlSafe Whether to use url safe\n\t         *\n\t         * @return {string} The Base64url string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var base64String = CryptoJS.enc.Base64url.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray, urlSafe) {\n\t            if (urlSafe === undefined) {\n\t                urlSafe = true\n\t            }\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\t            var map = urlSafe ? this._safe_map : this._map;\n\n\t            // Clamp excess bits\n\t            wordArray.clamp();\n\n\t            // Convert\n\t            var base64Chars = [];\n\t            for (var i = 0; i < sigBytes; i += 3) {\n\t                var byte1 = (words[i >>> 2]       >>> (24 - (i % 4) * 8))       & 0xff;\n\t                var byte2 = (words[(i + 1) >>> 2] >>> (24 - ((i + 1) % 4) * 8)) & 0xff;\n\t                var byte3 = (words[(i + 2) >>> 2] >>> (24 - ((i + 2) % 4) * 8)) & 0xff;\n\n\t                var triplet = (byte1 << 16) | (byte2 << 8) | byte3;\n\n\t                for (var j = 0; (j < 4) && (i + j * 0.75 < sigBytes); j++) {\n\t                    base64Chars.push(map.charAt((triplet >>> (6 * (3 - j))) & 0x3f));\n\t                }\n\t            }\n\n\t            // Add padding\n\t            var paddingChar = map.charAt(64);\n\t            if (paddingChar) {\n\t                while (base64Chars.length % 4) {\n\t                    base64Chars.push(paddingChar);\n\t                }\n\t            }\n\n\t            return base64Chars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a Base64url string to a word array.\n\t         *\n\t         * @param {string} base64Str The Base64url string.\n\t         *\n\t         * @param {boolean} urlSafe Whether to use url safe\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Base64url.parse(base64String);\n\t         */\n\t        parse: function (base64Str, urlSafe) {\n\t            if (urlSafe === undefined) {\n\t                urlSafe = true\n\t            }\n\n\t            // Shortcuts\n\t            var base64StrLength = base64Str.length;\n\t            var map = urlSafe ? this._safe_map : this._map;\n\t            var reverseMap = this._reverseMap;\n\n\t            if (!reverseMap) {\n\t                reverseMap = this._reverseMap = [];\n\t                for (var j = 0; j < map.length; j++) {\n\t                    reverseMap[map.charCodeAt(j)] = j;\n\t                }\n\t            }\n\n\t            // Ignore padding\n\t            var paddingChar = map.charAt(64);\n\t            if (paddingChar) {\n\t                var paddingIndex = base64Str.indexOf(paddingChar);\n\t                if (paddingIndex !== -1) {\n\t                    base64StrLength = paddingIndex;\n\t                }\n\t            }\n\n\t            // Convert\n\t            return parseLoop(base64Str, base64StrLength, reverseMap);\n\n\t        },\n\n\t        _map: 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=',\n\t        _safe_map: 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_',\n\t    };\n\n\t    function parseLoop(base64Str, base64StrLength, reverseMap) {\n\t        var words = [];\n\t        var nBytes = 0;\n\t        for (var i = 0; i < base64StrLength; i++) {\n\t            if (i % 4) {\n\t                var bits1 = reverseMap[base64Str.charCodeAt(i - 1)] << ((i % 4) * 2);\n\t                var bits2 = reverseMap[base64Str.charCodeAt(i)] >>> (6 - (i % 4) * 2);\n\t                var bitsCombined = bits1 | bits2;\n\t                words[nBytes >>> 2] |= bitsCombined << (24 - (nBytes % 4) * 8);\n\t                nBytes++;\n\t            }\n\t        }\n\t        return WordArray.create(words, nBytes);\n\t    }\n\t}());\n\n\n\treturn CryptoJS.enc.Base64url;\n\n}));","import $fU9C9$cryptojslibtypedarrays from \"crypto-js/lib-typedarrays\";\nimport $fU9C9$cryptojssha256 from \"crypto-js/sha256\";\nimport $fU9C9$cryptojsencbase64url from \"crypto-js/enc-base64url\";\n\n\n\n\n/**\n * Thanks to @SEIAROTg on stackoverflow:\n * \"Convert a 32bit integer into 4 bytes of data in javascript\"\n * @param num The 32bit integer\n * @returns An ArrayBuffer representing 4 bytes of binary data\n */ function $d415641d0cfd8c85$var$toBytesInt32(num) {\n    const arr = new ArrayBuffer(4); // an Int32 takes 4 bytes\n    const view = new DataView(arr);\n    view.setUint32(0, num, false); // byteOffset = 0; litteEndian = false\n    return arr;\n}\n/**\n * Creates an array of length `size` of random bytes\n * @param size\n * @returns Array of random ints (0 to 255)\n */ function $d415641d0cfd8c85$var$getRandomValues(size) {\n    const randoms = $fU9C9$cryptojslibtypedarrays.random(size);\n    const randoms1byte = [];\n    randoms.words.forEach((word)=>{\n        const arr = $d415641d0cfd8c85$var$toBytesInt32(word);\n        const fourByteWord = new Uint8Array(arr);\n        for(let i = 0; i < 4; i++)randoms1byte.push(fourByteWord[i]);\n    });\n    return randoms1byte;\n}\n/** Generate cryptographically strong random string\n * @param size The desired length of the string\n * @returns The random string\n */ function $d415641d0cfd8c85$var$random(size) {\n    const mask = \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-._~\";\n    let result = \"\";\n    const randomUints = $d415641d0cfd8c85$var$getRandomValues(size);\n    for(let i = 0; i < size; i++){\n        // cap the value of the randomIndex to mask.length - 1\n        const randomIndex = randomUints[i] % mask.length;\n        result += mask[randomIndex];\n    }\n    return result;\n}\n/** Generate a PKCE challenge verifier\n * @param length Length of the verifier\n * @returns A random verifier `length` characters long\n */ function $d415641d0cfd8c85$var$generateVerifier(length) {\n    return $d415641d0cfd8c85$var$random(length);\n}\nfunction $d415641d0cfd8c85$export$6a61b14641fe7480(code_verifier) {\n    return $fU9C9$cryptojssha256(code_verifier).toString($fU9C9$cryptojsencbase64url);\n}\nfunction $d415641d0cfd8c85$export$2e2bcd8739ae039(length) {\n    if (!length) length = 43;\n    if (length < 43 || length > 128) throw `Expected a length between 43 and 128. Received ${length}.`;\n    const verifier = $d415641d0cfd8c85$var$generateVerifier(length);\n    const challenge = $d415641d0cfd8c85$export$6a61b14641fe7480(verifier);\n    return {\n        code_verifier: verifier,\n        code_challenge: challenge\n    };\n}\nfunction $d415641d0cfd8c85$export$4faf58fdf1185e54(code_verifier, expectedChallenge) {\n    const actualChallenge = $d415641d0cfd8c85$export$6a61b14641fe7480(code_verifier);\n    return actualChallenge === expectedChallenge;\n}\n\n\nexport {$d415641d0cfd8c85$export$6a61b14641fe7480 as generateChallenge, $d415641d0cfd8c85$export$2e2bcd8739ae039 as default, $d415641d0cfd8c85$export$4faf58fdf1185e54 as verifyChallenge};\n","import pkceChallenge from 'pkce-challenge';\nimport { supabase } from '../lib/supabase';\n\nconst TEAMSNAP_AUTH_URL = 'https://auth.teamsnap.com/oauth/authorize';\nconst TEAMSNAP_TOKEN_URL = 'https://auth.teamsnap.com/oauth/token';\nconst TEAMSNAP_API_URL = 'https://api.teamsnap.com/v3';\n\nexport interface TeamSnapConfig {\n  clientId: string;\n  redirectUri: string;\n}\n\nexport class TeamSnapService {\n  private clientId: string;\n  private redirectUri: string;\n  private accessToken: string | null = null;\n  private readonly clientSecret = 'osTEt8nG9LVNoqEHX5GBw2FwxjBCYUijCLfo-H-ihaA';\n\n  constructor(config: TeamSnapConfig) {\n    this.clientId = config.clientId;\n    this.redirectUri = config.redirectUri;\n  }\n\n  async initiateOAuth(): Promise<string> {\n    try {\n      // Generate PKCE challenge\n      const challenge = pkceChallenge();\n      \n      // Store code verifier in localStorage\n      localStorage.setItem('teamsnap_code_verifier', challenge.code_verifier);\n      \n      // Build authorization URL\n      const params = new URLSearchParams({\n        client_id: this.clientId,\n        redirect_uri: this.redirectUri,\n        response_type: 'code',\n        code_challenge: challenge.code_challenge,\n        code_challenge_method: 'S256',\n        scope: 'read write'\n      });\n\n      const authUrl = `${TEAMSNAP_AUTH_URL}?${params.toString()}`;\n      console.log('Authorization URL:', authUrl);\n\n      return authUrl;\n    } catch (error) {\n      console.error('Error initiating OAuth:', error);\n      throw new Error('Failed to initiate OAuth flow');\n    }\n  }\n\n  async handleCallback(code: string): Promise<void> {\n    try {\n      // Retrieve stored code verifier\n      const codeVerifier = localStorage.getItem('teamsnap_code_verifier');\n      if (!codeVerifier) {\n        throw new Error('Code verifier not found');\n      }\n\n      // Prepare the request body\n      const body = new URLSearchParams({\n        grant_type: 'authorization_code',\n        code,\n        client_id: this.clientId,\n        client_secret: this.clientSecret,\n        redirect_uri: this.redirectUri\n      }).toString();\n\n      console.log('Token exchange request to:', TEAMSNAP_TOKEN_URL);\n      \n      // Exchange code for token\n      const tokenResponse = await fetch(TEAMSNAP_TOKEN_URL, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded',\n          'Accept': 'application/json',\n          'Content-Length': body.length.toString()\n        },\n        body\n      });\n\n      if (!tokenResponse.ok) {\n        const errorData = await tokenResponse.json();\n        console.error('Token exchange error:', {\n          status: tokenResponse.status,\n          statusText: tokenResponse.statusText,\n          error: errorData\n        });\n        throw new Error(`Token exchange failed: ${errorData.error_description || errorData.error || 'Unknown error'}`);\n      }\n\n      const tokenData = await tokenResponse.json();\n      this.accessToken = tokenData.access_token;\n\n      console.log('Token exchange successful');\n\n      // Store the access token securely for later use\n      await this.storeAccessToken(tokenData.access_token, tokenData.refresh_token);\n\n      // Clean up\n      localStorage.removeItem('teamsnap_code_verifier');\n\n      // Sync data using the proper API sequence\n      await this.syncTeamsAndEvents();\n    } catch (error) {\n      console.error('Error in handleCallback:', error);\n      throw error;\n    }\n  }\n\n  private async storeAccessToken(accessToken: string, refreshToken?: string): Promise<void> {\n    try {\n      const { data: { user }, error: userError } = await supabase.auth.getUser();\n      if (userError) throw userError;\n      if (!user) throw new Error('No authenticated user');\n\n      // Store tokens in user_settings table (you might want a separate tokens table for better security)\n      const { error } = await supabase\n        .from('user_settings')\n        .upsert({\n          user_id: user.id,\n          teamsnap_access_token: accessToken,\n          teamsnap_refresh_token: refreshToken,\n          updated_at: new Date().toISOString()\n        }, {\n          onConflict: 'user_id'\n        });\n\n      if (error) {\n        console.error('Error storing access token:', error);\n        // Don't throw here, continue with sync\n      }\n    } catch (error) {\n      console.error('Error storing access token:', error);\n    }\n  }\n\n  private async getStoredAccessToken(): Promise<string | null> {\n    try {\n      const { data: { user }, error: userError } = await supabase.auth.getUser();\n      if (userError) throw userError;\n      if (!user) throw new Error('No authenticated user');\n\n      const { data: settings, error } = await supabase\n        .from('user_settings')\n        .select('teamsnap_access_token')\n        .eq('user_id', user.id)\n        .single();\n\n      if (error || !settings?.teamsnap_access_token) {\n        return null;\n      }\n\n      return settings.teamsnap_access_token;\n    } catch (error) {\n      console.error('Error retrieving access token:', error);\n      return null;\n    }\n  }\n\n  private async request(endpoint: string, options: RequestInit = {}): Promise<any> {\n    // Try to use stored access token if current one is null\n    if (!this.accessToken) {\n      this.accessToken = await this.getStoredAccessToken();\n    }\n\n    if (!this.accessToken) {\n      throw new Error('Not authenticated - please reconnect to TeamSnap');\n    }\n\n    const url = endpoint.startsWith('http') ? endpoint : `${TEAMSNAP_API_URL}${endpoint}`;\n    console.log('Making API request to:', url);\n\n    const response = await fetch(url, {\n      ...options,\n      headers: {\n        'Authorization': `Bearer ${this.accessToken}`,\n        'Accept': 'application/json',\n        'Content-Type': 'application/json',\n        ...options.headers,\n      }\n    });\n\n    if (!response.ok) {\n      const errorText = await response.text();\n      console.error('API request failed:', {\n        url,\n        status: response.status,\n        statusText: response.statusText,\n        response: errorText\n      });\n      \n      // If unauthorized, clear the stored token\n      if (response.status === 401) {\n        this.accessToken = null;\n        await this.clearStoredTokens();\n        throw new Error('Authentication expired - please reconnect to TeamSnap');\n      }\n      \n      throw new Error(`API request failed: ${response.status} ${response.statusText}`);\n    }\n\n    const data = await response.json();\n    console.log(`API response from ${url}:`, data);\n    return data;\n  }\n\n  private async clearStoredTokens(): Promise<void> {\n    try {\n      const { data: { user }, error: userError } = await supabase.auth.getUser();\n      if (userError) throw userError;\n      if (!user) return;\n\n      await supabase\n        .from('user_settings')\n        .update({\n          teamsnap_access_token: null,\n          teamsnap_refresh_token: null,\n          updated_at: new Date().toISOString()\n        })\n        .eq('user_id', user.id);\n    } catch (error) {\n      console.error('Error clearing stored tokens:', error);\n    }\n  }\n\n  async getUserId(): Promise<string> {\n    try {\n      console.log('Step 1: Fetching user ID from /me endpoint');\n      const meResponse = await this.request('/me');\n\n      console.log('The meResponse is: ', meResponse);\n      \n      // Handle different possible response structures\n      let userId: string | null = null;\n\n      // Check if response has a direct id field\n      if (meResponse.id) {\n        userId = meResponse.id.toString();\n      }\n      // Check if response has data array structure\n      else if (meResponse.data && Array.isArray(meResponse.data)) {\n        const idField = meResponse.data.find((field: any) => field.name === 'id');\n        if (idField && idField.value) {\n          userId = idField.value.toString();\n        }\n      }\n      // Check if response has collection structure\n      else if (meResponse.collection && meResponse.collection.items && Array.isArray(meResponse.collection.items)) {\n        const userItem = meResponse.collection.items[0];\n        if (userItem && userItem.data) {\n          const idField = userItem.data.find((field: any) => field.name === 'id');\n          if (idField && idField.value) {\n            userId = idField.value.toString();\n          }\n        }\n      }\n      // Check if response is an array directly\n      else if (Array.isArray(meResponse)) {\n        const idField = meResponse.find((field: any) => field.name === 'id');\n        if (idField && idField.value) {\n          userId = idField.value.toString();\n        }\n      }\n\n      if (!userId) {\n        console.error('Could not extract user ID from response:', meResponse);\n        throw new Error('User ID not found in /me response. Response structure may have changed.');\n      }\n\n      console.log('User ID obtained:', userId);\n      return userId;\n    } catch (error) {\n      console.error('Error fetching user ID:', error);\n      throw error;\n    }\n  }\n\n  async getActiveTeams(userId: string): Promise<any[]> {\n    try {\n      console.log(`Step 2: Fetching active teams for user ID: ${userId}`);\n      const teamsResponse = await this.request(`/teams/active?user_id=${userId}`);\n      \n      // Handle different possible response structures\n      let teams: any[] = [];\n\n      if (Array.isArray(teamsResponse)) {\n        teams = teamsResponse;\n      } else if (teamsResponse.collection && Array.isArray(teamsResponse.collection.items)) {\n        teams = teamsResponse.collection.items.map((item: any) => {\n          // Extract team data from the item structure\n          if (item.data && Array.isArray(item.data)) {\n            const teamObj: any = {};\n            item.data.forEach((field: any) => {\n              if (field.name && field.value !== undefined) {\n                teamObj[field.name] = field.value;\n              }\n            });\n            return teamObj;\n          }\n          return item;\n        });\n      } else if (teamsResponse.data && Array.isArray(teamsResponse.data)) {\n        teams = teamsResponse.data;\n      }\n\n      console.log(`Found ${teams.length} active teams`);\n      return teams;\n    } catch (error) {\n      console.error('Error fetching active teams:', error);\n      throw error;\n    }\n  }\n\n  async getTeamEvents(teamId: string): Promise<any[]> {\n    try {\n      console.log(`Step 3: Fetching events for team ID: ${teamId}`);\n      const eventsResponse = await this.request(`/events/search?team_id=${teamId}`);\n      \n      // Handle different possible response structures\n      let events: any[] = [];\n\n      if (Array.isArray(eventsResponse)) {\n        events = eventsResponse;\n      } else if (eventsResponse.collection && Array.isArray(eventsResponse.collection.items)) {\n        events = eventsResponse.collection.items.map((item: any) => {\n          // Extract event data from the item structure\n          if (item.data && Array.isArray(item.data)) {\n            const eventObj: any = {};\n            item.data.forEach((field: any) => {\n              if (field.name && field.value !== undefined) {\n                eventObj[field.name] = field.value;\n              }\n            });\n            return eventObj;\n          }\n          return item;\n        });\n      } else if (eventsResponse.data && Array.isArray(eventsResponse.data)) {\n        events = eventsResponse.data;\n      }\n\n      console.log(`Found ${events.length} events for team ${teamId}`);\n      return events;\n    } catch (error) {\n      console.error('Error fetching team events:', error);\n      throw error;\n    }\n  }\n\n  private async syncTeamsAndEvents(): Promise<void> {\n    try {\n      console.log('Starting TeamSnap sync process...');\n      \n      // Get current user\n      const { data: { user }, error: userError } = await supabase.auth.getUser();\n      if (userError) throw userError;\n      if (!user) throw new Error('No authenticated user');\n\n      // Step 1: Get user ID\n      const userId = await this.getUserId();\n      \n      // Step 2: Get active teams\n      const activeTeams = await this.getActiveTeams(userId);\n      \n      if (activeTeams.length === 0) {\n        console.log('No active teams found for user');\n        return;\n      }\n\n      // Step 3: For each team, store it (but don't store events yet)\n      for (const team of activeTeams) {\n        console.log(`Processing team: ${team.name} (ID: ${team.id})`);\n        \n        // Store team in platform_teams table\n        const { data: platformTeam, error: teamError } = await supabase\n          .from('platform_teams')\n          .upsert({\n            platform: 'TeamSnap',\n            team_id: team.id.toString(),\n            team_name: team.name,\n            sport: team.sport || 'Unknown',\n            sync_status: 'success',\n            last_synced: new Date().toISOString(),\n            user_id: user.id\n          }, {\n            onConflict: 'platform,team_id'\n          })\n          .select()\n          .single();\n\n        if (teamError) {\n          console.error('Error storing team:', teamError);\n          continue;\n        }\n\n        console.log(`Successfully stored team: ${team.name}`);\n\n        // Note: We don't sync events here anymore since they need to be mapped to profiles first\n        // Events will be synced when the user maps teams to profiles and manually refreshes\n      }\n\n      console.log('TeamSnap team sync process completed successfully');\n      console.log('Note: Events will be synced when teams are mapped to profiles');\n    } catch (error) {\n      console.error('Error in syncTeamsAndEvents:', error);\n      throw error;\n    }\n  }\n\n  // New method to sync events for a specific team and profile\n  async syncEventsForTeamAndProfile(teamId: string, profileId: string): Promise<number> {\n    try {\n      console.log(`Syncing events for team ${teamId} and profile ${profileId}`);\n      \n      // Get the platform team record\n      const { data: platformTeam, error: teamError } = await supabase\n        .from('platform_teams')\n        .select('*')\n        .eq('id', teamId)\n        .eq('platform', 'TeamSnap')\n        .single();\n\n      if (teamError || !platformTeam) {\n        throw new Error('Platform team not found');\n      }\n\n      // Fetch events from TeamSnap API\n      const teamEvents = await this.getTeamEvents(platformTeam.team_id);\n      \n      if (teamEvents.length === 0) {\n        console.log('No events found for this team');\n        return 0;\n      }\n\n      // Transform and store events for the specific profile\n      const eventsToInsert = teamEvents.map(event => ({\n        title: event.name || 'TeamSnap Event',\n        description: event.notes || '',\n        start_time: event.start_date,\n        end_time: event.end_date || event.start_date,\n        location: event.location_name || '',\n        sport: platformTeam.sport || 'Unknown',\n        color: '#7C3AED', // TeamSnap purple\n        platform: 'TeamSnap',\n        platform_color: '#7C3AED',\n        platform_team_id: teamId,\n        profile_id: profileId // This is the key - we now have a valid profile_id\n      })).filter(event => event.start_time); // Only include events with valid start times\n\n      if (eventsToInsert.length === 0) {\n        console.log('No valid events to insert');\n        return 0;\n      }\n\n      // Delete existing events for this profile and team to avoid duplicates\n      await supabase\n        .from('events')\n        .delete()\n        .eq('platform_team_id', teamId)\n        .eq('profile_id', profileId)\n        .eq('platform', 'TeamSnap');\n\n      // Insert new events\n      const { error: eventsError } = await supabase\n        .from('events')\n        .insert(eventsToInsert);\n\n      if (eventsError) {\n        console.error('Error storing events:', eventsError);\n        throw eventsError;\n      }\n\n      console.log(`Successfully stored ${eventsToInsert.length} events for profile ${profileId}`);\n      return eventsToInsert.length;\n    } catch (error) {\n      console.error('Error syncing events for team and profile:', error);\n      throw error;\n    }\n  }\n\n  // Method to sync events for all mapped profiles of a team\n  async syncEventsForTeam(teamId: string): Promise<number> {\n    try {\n      console.log(`Syncing events for team ${teamId}`);\n      \n      // Get all profile mappings for this team\n      const { data: profileMappings, error: mappingError } = await supabase\n        .from('profile_teams')\n        .select('profile_id')\n        .eq('platform_team_id', teamId);\n\n      if (mappingError) {\n        throw mappingError;\n      }\n\n      if (!profileMappings || profileMappings.length === 0) {\n        throw new Error('No profiles mapped to this team');\n      }\n\n      let totalEvents = 0;\n      \n      // Sync events for each mapped profile\n      for (const mapping of profileMappings) {\n        const eventCount = await this.syncEventsForTeamAndProfile(teamId, mapping.profile_id);\n        totalEvents += eventCount;\n      }\n\n      // Update team sync status\n      await supabase\n        .from('platform_teams')\n        .update({\n          sync_status: 'success',\n          last_synced: new Date().toISOString()\n        })\n        .eq('id', teamId);\n\n      return totalEvents;\n    } catch (error) {\n      console.error('Error syncing events for team:', error);\n      \n      // Update team sync status to error\n      await supabase\n        .from('platform_teams')\n        .update({\n          sync_status: 'error',\n          last_synced: new Date().toISOString()\n        })\n        .eq('id', teamId);\n      \n      throw error;\n    }\n  }\n\n  // Legacy methods for backward compatibility\n  async getTeams(): Promise<any> {\n    const userId = await this.getUserId();\n    const activeTeams = await this.getActiveTeams(userId);\n    \n    return {\n      collection: {\n        items: activeTeams.map(team => ({\n          data: {\n            id: team.id,\n            name: team.name,\n            sport_name: team.sport,\n            active: true\n          }\n        }))\n      }\n    };\n  }\n}\n\nexport default TeamSnapService;","import React, { useState, useEffect } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { \n  Users, \n  AlertCircle, \n  CheckCircle, \n  X, \n  Calendar, \n  MessageSquare, \n  Trophy, \n  ArrowLeft,\n  RefreshCw,\n  Trash2,\n  Edit2,\n  Save,\n  UserPlus\n} from 'lucide-react';\nimport { TeamSnapService } from '../../services/teamsnap';\nimport { supabase } from '../../lib/supabase';\nimport { useProfiles } from '../../context/ProfilesContext';\n\ninterface TeamSnapTeam {\n  id: string;\n  team_name: string;\n  sport: string;\n  last_synced: string | null;\n  sync_status: 'pending' | 'success' | 'error';\n  mapped_profiles?: { id: string; name: string; color: string }[];\n  event_count?: number;\n}\n\nconst TeamSnapConnection: React.FC = () => {\n  const [isConnecting, setIsConnecting] = useState(false);\n  const [isConnected, setIsConnected] = useState(false);\n  const [teams, setTeams] = useState<TeamSnapTeam[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [success, setSuccess] = useState<string | null>(null);\n  const [editingTeam, setEditingTeam] = useState<string | null>(null);\n  const [editingName, setEditingName] = useState('');\n  const [showMappingModal, setShowMappingModal] = useState<string | null>(null);\n  const [selectedProfiles, setSelectedProfiles] = useState<string[]>([]);\n  const [refreshingTeam, setRefreshingTeam] = useState<string | null>(null);\n  const navigate = useNavigate();\n  const location = useLocation();\n  const { profiles } = useProfiles();\n\n  const teamSnap = new TeamSnapService({\n    clientId: import.meta.env.VITE_TEAMSNAP_CLIENT_ID,\n    redirectUri: `${window.location.origin}/connections/teamsnap/callback`\n  });\n\n  const features = [\n    {\n      icon: Calendar,\n      title: 'Automatic Schedule Sync',\n      description: 'Keep your calendar up to date with automatic syncing of games, practices, and events'\n    },\n    {\n      icon: MessageSquare,\n      title: 'Team Communication',\n      description: 'Stay connected with coaches and team members through integrated messaging'\n    },\n    {\n      icon: Trophy,\n      title: 'Game Statistics',\n      description: 'Track performance metrics and game statistics in real-time'\n    }\n  ];\n\n  useEffect(() => {\n    checkConnectionStatus();\n    \n    // Show success message if redirected from callback\n    if (location.state?.teamSnapConnected) {\n      setSuccess('TeamSnap connected successfully! Your teams have been imported.');\n      // Clear the state\n      window.history.replaceState({}, document.title);\n      // Hide the message after 5 seconds\n      setTimeout(() => setSuccess(null), 5000);\n    }\n  }, [location]);\n\n  const checkConnectionStatus = async () => {\n    try {\n      // Check if we have any TeamSnap teams\n      const { data: teamsData, error: teamsError } = await supabase\n        .from('platform_teams')\n        .select('*')\n        .eq('platform', 'TeamSnap')\n        .order('created_at', { ascending: false });\n\n      if (teamsError) throw teamsError;\n\n      if (teamsData && teamsData.length > 0) {\n        setIsConnected(true);\n        await fetchTeams();\n      } else {\n        setIsConnected(false);\n      }\n    } catch (err) {\n      console.error('Error checking connection status:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchTeams = async () => {\n    try {\n      const { data: teamsData, error: teamsError } = await supabase\n        .from('platform_teams')\n        .select('*')\n        .eq('platform', 'TeamSnap')\n        .order('created_at', { ascending: false });\n\n      if (teamsError) throw teamsError;\n\n      // Fetch profile mappings and event counts for each team\n      const teamsWithMappings = await Promise.all(\n        (teamsData || []).map(async (team) => {\n          // Get profile mappings\n          const { data: profileTeams, error: profileError } = await supabase\n            .from('profile_teams')\n            .select(`\n              profile_id,\n              profiles!inner(id, name, color)\n            `)\n            .eq('platform_team_id', team.id);\n\n          if (profileError) {\n            console.error('Error fetching profile mappings:', profileError);\n          }\n\n          // Get event count for this team\n          const { count: eventCount, error: eventError } = await supabase\n            .from('events')\n            .select('*', { count: 'exact', head: true })\n            .eq('platform_team_id', team.id);\n\n          if (eventError) {\n            console.error('Error fetching event count:', eventError);\n          }\n\n          const mapped_profiles = profileTeams?.map(pt => pt.profiles) || [];\n          return { \n            ...team, \n            mapped_profiles,\n            event_count: eventCount || 0\n          };\n        })\n      );\n\n      setTeams(teamsWithMappings);\n    } catch (err) {\n      console.error('Error fetching teams:', err);\n      setError('Failed to fetch teams');\n    }\n  };\n\n  const handleConnect = async () => {\n    try {\n      setIsConnecting(true);\n      setError(null);\n      const authUrl = await teamSnap.initiateOAuth();\n      window.location.href = authUrl;\n    } catch (error) {\n      console.error('Failed to initiate OAuth:', error);\n      setError('Failed to initiate connection');\n      setIsConnecting(false);\n    }\n  };\n\n  const handleDisconnect = async () => {\n    try {\n      setError(null);\n      setSuccess(null);\n\n      // Delete all TeamSnap teams and their associated data\n      const { error: deleteError } = await supabase\n        .from('platform_teams')\n        .delete()\n        .eq('platform', 'TeamSnap');\n\n      if (deleteError) throw deleteError;\n\n      setIsConnected(false);\n      setTeams([]);\n      setSuccess('TeamSnap disconnected successfully');\n    } catch (err) {\n      console.error('Error disconnecting TeamSnap:', err);\n      setError('Failed to disconnect TeamSnap');\n    }\n  };\n\n  const handleRefresh = async (teamId: string) => {\n    try {\n      setError(null);\n      setSuccess(null);\n      setRefreshingTeam(teamId);\n      \n      const team = teams.find(t => t.id === teamId);\n      if (!team) return;\n\n      if (!team.mapped_profiles || team.mapped_profiles.length === 0) {\n        setError('Please map this team to at least one child profile before syncing events.');\n        return;\n      }\n\n      // Update team status to pending\n      await supabase\n        .from('platform_teams')\n        .update({ sync_status: 'pending' })\n        .eq('id', teamId);\n\n      // Sync events using the TeamSnap service\n      const totalEvents = await teamSnap.syncEventsForTeam(teamId);\n\n      setSuccess(`Team refreshed successfully! Synced ${totalEvents} events for ${team.mapped_profiles.length} profile(s).`);\n      fetchTeams();\n    } catch (err) {\n      console.error('Error refreshing team:', err);\n      const errorMessage = err instanceof Error ? err.message : 'Failed to refresh team';\n      setError(errorMessage);\n      \n      // Update team sync status to error\n      if (teamId) {\n        await supabase\n          .from('platform_teams')\n          .update({\n            sync_status: 'error',\n            last_synced: new Date().toISOString()\n          })\n          .eq('id', teamId);\n      }\n    } finally {\n      setRefreshingTeam(null);\n    }\n  };\n\n  const handleDelete = async (teamId: string) => {\n    try {\n      setError(null);\n      setSuccess(null);\n\n      const { error: deleteError } = await supabase\n        .from('platform_teams')\n        .delete()\n        .eq('id', teamId);\n\n      if (deleteError) throw deleteError;\n\n      setTeams(teams.filter(team => team.id !== teamId));\n      setSuccess('Team removed successfully');\n      \n      // If no teams left, set as disconnected\n      if (teams.length === 1) {\n        setIsConnected(false);\n      }\n    } catch (err) {\n      console.error('Error deleting team:', err);\n      setError('Failed to remove team');\n    }\n  };\n\n  const handleEditTeamName = (teamId: string, currentName: string) => {\n    setEditingTeam(teamId);\n    setEditingName(currentName);\n  };\n\n  const handleSaveTeamName = async (teamId: string) => {\n    try {\n      setError(null);\n      setSuccess(null);\n\n      if (!editingName.trim()) {\n        setError('Team name cannot be empty');\n        return;\n      }\n\n      const { error: updateError } = await supabase\n        .from('platform_teams')\n        .update({ team_name: editingName.trim() })\n        .eq('id', teamId);\n\n      if (updateError) throw updateError;\n\n      setTeams(teams.map(team => \n        team.id === teamId \n          ? { ...team, team_name: editingName.trim() }\n          : team\n      ));\n\n      setEditingTeam(null);\n      setEditingName('');\n      setSuccess('Team name updated successfully');\n    } catch (err) {\n      console.error('Error updating team name:', err);\n      setError('Failed to update team name');\n    }\n  };\n\n  const handleCancelEdit = () => {\n    setEditingTeam(null);\n    setEditingName('');\n  };\n\n  const handleOpenMapping = (teamId: string) => {\n    const team = teams.find(t => t.id === teamId);\n    if (team) {\n      setSelectedProfiles(team.mapped_profiles?.map(p => p.id) || []);\n      setShowMappingModal(teamId);\n    }\n  };\n\n  const handleSaveMapping = async () => {\n    if (!showMappingModal) return;\n\n    try {\n      setError(null);\n      setSuccess(null);\n\n      // Delete existing mappings\n      await supabase\n        .from('profile_teams')\n        .delete()\n        .eq('platform_team_id', showMappingModal);\n\n      // Insert new mappings\n      if (selectedProfiles.length > 0) {\n        const { error } = await supabase\n          .from('profile_teams')\n          .insert(\n            selectedProfiles.map(profileId => ({\n              profile_id: profileId,\n              platform_team_id: showMappingModal\n            }))\n          );\n\n        if (error) throw error;\n\n        // Auto-sync events for the newly mapped profiles\n        try {\n          const totalEvents = await teamSnap.syncEventsForTeam(showMappingModal);\n          setSuccess(`Team mapping updated successfully! Synced ${totalEvents} events for ${selectedProfiles.length} profile(s).`);\n        } catch (syncError) {\n          console.error('Error syncing events after mapping:', syncError);\n          setSuccess('Team mapping updated successfully. Use the refresh button to sync events.');\n        }\n      } else {\n        setSuccess('Team mapping updated successfully.');\n      }\n\n      setShowMappingModal(null);\n      setSelectedProfiles([]);\n      fetchTeams();\n    } catch (err) {\n      console.error('Error saving team mapping:', err);\n      setError('Failed to update team mapping');\n    }\n  };\n\n  const handleCancelMapping = () => {\n    setShowMappingModal(null);\n    setSelectedProfiles([]);\n  };\n\n  const toggleProfileSelection = (profileId: string) => {\n    setSelectedProfiles(prev =>\n      prev.includes(profileId)\n        ? prev.filter(id => id !== profileId)\n        : [...prev, profileId]\n    );\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <div className=\"max-w-4xl mx-auto px-4 py-8\">\n        <button\n          onClick={() => navigate('/connections')}\n          className=\"flex items-center text-gray-600 hover:text-gray-900 mb-6\"\n        >\n          <ArrowLeft className=\"h-4 w-4 mr-2\" />\n          Back to Connections\n        </button>\n\n        <div className=\"bg-white rounded-lg shadow-sm overflow-hidden\">\n          <div className=\"px-6 py-8 border-b border-gray-200\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center\">\n                <div className=\"h-12 w-12 flex-shrink-0 bg-purple-100 rounded-lg flex items-center justify-center\">\n                  <Users className=\"h-6 w-6 text-purple-600\" />\n                </div>\n                <div className=\"ml-4\">\n                  <h1 className=\"text-2xl font-bold text-gray-900\">TeamSnap</h1>\n                  <p className=\"mt-1 text-gray-500\">\n                    {isConnected ? 'Connected - Manage your teams and schedules' : 'Connect to sync your TeamSnap schedules, events, and team information'}\n                  </p>\n                </div>\n              </div>\n              {isConnected && (\n                <div className=\"flex items-center space-x-2\">\n                  <CheckCircle className=\"h-5 w-5 text-green-500\" />\n                  <span className=\"text-sm text-green-600 font-medium\">Connected</span>\n                </div>\n              )}\n            </div>\n          </div>\n\n          {error && (\n            <div className=\"px-6 py-4 bg-red-50 border-b border-red-200\">\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center text-red-700\">\n                  <AlertCircle className=\"h-5 w-5 mr-2\" />\n                  {error}\n                </div>\n                <button \n                  onClick={() => setError(null)}\n                  className=\"text-red-400 hover:text-red-500\"\n                >\n                  <X className=\"h-5 w-5\" />\n                </button>\n              </div>\n            </div>\n          )}\n\n          {success && (\n            <div className=\"px-6 py-4 bg-green-50 border-b border-green-200\">\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center text-green-700\">\n                  <CheckCircle className=\"h-5 w-5 mr-2\" />\n                  {success}\n                </div>\n                <button \n                  onClick={() => setSuccess(null)}\n                  className=\"text-green-400 hover:text-green-500\"\n                >\n                  <X className=\"h-5 w-5\" />\n                </button>\n              </div>\n            </div>\n          )}\n\n          {!isConnected ? (\n            <div className=\"px-6 py-8\">\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\">\n                {features.map((feature, index) => (\n                  <div key={index} className=\"bg-gray-50 rounded-lg p-6\">\n                    <div className=\"h-12 w-12 rounded-lg bg-purple-100 text-purple-600 flex items-center justify-center mb-4\">\n                      <feature.icon className=\"h-6 w-6\" />\n                    </div>\n                    <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\n                      {feature.title}\n                    </h3>\n                    <p className=\"text-gray-600\">\n                      {feature.description}\n                    </p>\n                  </div>\n                ))}\n              </div>\n\n              <div className=\"bg-purple-50 rounded-lg p-6 mb-8\">\n                <h3 className=\"text-lg font-medium text-purple-900 mb-4\">\n                  Before you connect\n                </h3>\n                <ul className=\"space-y-3\">\n                  <li className=\"flex items-start\">\n                    <div className=\"flex-shrink-0 h-5 w-5 rounded-full bg-purple-200 text-purple-600 flex items-center justify-center text-sm mr-3 mt-0.5\">\n                      1\n                    </div>\n                    <p className=\"text-purple-800\">\n                      Make sure you have an active TeamSnap account\n                    </p>\n                  </li>\n                  <li className=\"flex items-start\">\n                    <div className=\"flex-shrink-0 h-5 w-5 rounded-full bg-purple-200 text-purple-600 flex items-center justify-center text-sm mr-3 mt-0.5\">\n                      2\n                    </div>\n                    <p className=\"text-purple-800\">\n                      Have your TeamSnap login credentials ready\n                    </p>\n                  </li>\n                  <li className=\"flex items-start\">\n                    <div className=\"flex-shrink-0 h-5 w-5 rounded-full bg-purple-200 text-purple-600 flex items-center justify-center text-sm mr-3 mt-0.5\">\n                      3\n                    </div>\n                    <p className=\"text-purple-800\">\n                      Ensure you have permission to access team data\n                    </p>\n                  </li>\n                </ul>\n              </div>\n\n              <div className=\"flex justify-center\">\n                <button\n                  onClick={handleConnect}\n                  disabled={isConnecting}\n                  className=\"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center\"\n                >\n                  {isConnecting ? (\n                    <>\n                      <RefreshCw className=\"animate-spin h-4 w-4 mr-2\" />\n                      Connecting...\n                    </>\n                  ) : (\n                    <>\n                      <Users className=\"h-5 w-5 mr-2\" />\n                      Connect TeamSnap Account\n                    </>\n                  )}\n                </button>\n              </div>\n            </div>\n          ) : (\n            <div className=\"p-6\">\n              <div className=\"flex items-center justify-between mb-6\">\n                <h2 className=\"text-lg font-medium text-gray-900\">Connected Teams</h2>\n                <button\n                  onClick={handleDisconnect}\n                  className=\"px-4 py-2 border border-red-300 text-red-600 rounded-md hover:bg-red-50 text-sm font-medium\"\n                >\n                  Disconnect TeamSnap\n                </button>\n              </div>\n\n              <div className=\"space-y-4\">\n                {teams.length > 0 ? (\n                  teams.map((team) => (\n                    <div\n                      key={team.id}\n                      className=\"border border-gray-200 rounded-lg p-4 hover:bg-gray-50\"\n                    >\n                      <div className=\"flex items-center justify-between\">\n                        <div className=\"flex items-center flex-1\">\n                          <Calendar className=\"h-5 w-5 text-gray-400 mr-3\" />\n                          <div className=\"flex-1\">\n                            {editingTeam === team.id ? (\n                              <div className=\"flex items-center space-x-2\">\n                                <input\n                                  type=\"text\"\n                                  value={editingName}\n                                  onChange={(e) => setEditingName(e.target.value)}\n                                  className=\"flex-1 text-sm font-medium border-gray-300 rounded-md focus:border-purple-500 focus:ring-purple-500\"\n                                  onKeyDown={(e) => {\n                                    if (e.key === 'Enter') {\n                                      handleSaveTeamName(team.id);\n                                    } else if (e.key === 'Escape') {\n                                      handleCancelEdit();\n                                    }\n                                  }}\n                                  autoFocus\n                                />\n                                <button\n                                  onClick={() => handleSaveTeamName(team.id)}\n                                  className=\"p-1 text-purple-600 hover:text-purple-700\"\n                                  title=\"Save\"\n                                >\n                                  <Save className=\"h-4 w-4\" />\n                                </button>\n                                <button\n                                  onClick={handleCancelEdit}\n                                  className=\"p-1 text-gray-400 hover:text-gray-500\"\n                                  title=\"Cancel\"\n                                >\n                                  <X className=\"h-4 w-4\" />\n                                </button>\n                              </div>\n                            ) : (\n                              <div className=\"flex items-center space-x-2\">\n                                <h3 className=\"text-sm font-medium text-gray-900\">\n                                  {team.team_name}\n                                </h3>\n                                <button\n                                  onClick={() => handleEditTeamName(team.id, team.team_name)}\n                                  className=\"p-1 text-gray-400 hover:text-gray-500\"\n                                  title=\"Edit team name\"\n                                >\n                                  <Edit2 className=\"h-3 w-3\" />\n                                </button>\n                              </div>\n                            )}\n                            \n                            {/* Event count and profile mappings */}\n                            <div className=\"mt-2 space-y-1\">\n                              <div className=\"flex items-center space-x-2\">\n                                <span className=\"text-xs text-gray-500\">\n                                  {team.event_count || 0} events imported\n                                </span>\n                                {team.mapped_profiles && team.mapped_profiles.length > 0 && (\n                                  <>\n                                    <span className=\"text-xs text-gray-300\">•</span>\n                                    <span className=\"text-xs text-gray-500\">\n                                      Mapped to {team.mapped_profiles.length} profile(s)\n                                    </span>\n                                  </>\n                                )}\n                              </div>\n                              \n                              {team.mapped_profiles && team.mapped_profiles.length > 0 ? (\n                                <div className=\"flex items-center space-x-2\">\n                                  {team.mapped_profiles.map(profile => (\n                                    <span\n                                      key={profile.id}\n                                      className=\"inline-flex items-center px-2 py-1 rounded-full text-xs\"\n                                      style={{ \n                                        backgroundColor: profile.color + '20',\n                                        color: profile.color\n                                      }}\n                                    >\n                                      {profile.name}\n                                    </span>\n                                  ))}\n                                </div>\n                              ) : (\n                                <span className=\"text-xs text-amber-600 bg-amber-50 px-2 py-1 rounded-full\">\n                                  Not mapped to any profiles - events won't appear in calendars\n                                </span>\n                              )}\n                            </div>\n\n                            <div className=\"flex items-center mt-1\">\n                              {team.sync_status === 'success' ? (\n                                <CheckCircle className=\"h-4 w-4 text-green-500 mr-1\" />\n                              ) : team.sync_status === 'error' ? (\n                                <AlertTriangle className=\"h-4 w-4 text-red-500 mr-1\" />\n                              ) : (\n                                <RefreshCw className=\"h-4 w-4 text-yellow-500 mr-1\" />\n                              )}\n                              <span className=\"text-xs text-gray-500\">\n                                {team.last_synced\n                                  ? `Last synced ${new Date(team.last_synced).toLocaleString()}`\n                                  : 'Never synced'}\n                              </span>\n                            </div>\n                          </div>\n                        </div>\n                        <div className=\"flex items-center space-x-2\">\n                          <button\n                            onClick={() => handleOpenMapping(team.id)}\n                            className=\"p-2 text-gray-400 hover:text-purple-500\"\n                            title=\"Map to profiles\"\n                          >\n                            <Users className=\"h-4 w-4\" />\n                          </button>\n                          <button\n                            onClick={() => handleRefresh(team.id)}\n                            disabled={refreshingTeam === team.id || !team.mapped_profiles || team.mapped_profiles.length === 0}\n                            className=\"p-2 text-gray-400 hover:text-gray-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n                            title=\"Refresh team events\"\n                          >\n                            <RefreshCw className={`h-4 w-4 ${refreshingTeam === team.id ? 'animate-spin' : ''}`} />\n                          </button>\n                          <button\n                            onClick={() => handleDelete(team.id)}\n                            className=\"p-2 text-gray-400 hover:text-red-500\"\n                            title=\"Remove team\"\n                          >\n                            <Trash2 className=\"h-4 w-4\" />\n                          </button>\n                        </div>\n                      </div>\n                    </div>\n                  ))\n                ) : (\n                  <div className=\"text-center py-6 bg-gray-50 rounded-lg\">\n                    <Calendar className=\"h-8 w-8 text-gray-400 mx-auto mb-2\" />\n                    <p className=\"text-gray-500\">No teams found</p>\n                    <p className=\"text-sm text-gray-400 mt-1\">Teams will appear here after connecting to TeamSnap</p>\n                  </div>\n                )}\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Profile Mapping Modal */}\n      {showMappingModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-lg shadow-xl max-w-md w-full\">\n            <div className=\"px-6 py-4 border-b border-gray-200 flex justify-between items-center\">\n              <h3 className=\"text-lg font-medium text-gray-900\">Map Team to Profiles</h3>\n              <button\n                onClick={handleCancelMapping}\n                className=\"text-gray-400 hover:text-gray-500\"\n              >\n                <X className=\"h-6 w-6\" />\n              </button>\n            </div>\n\n            <div className=\"p-6\">\n              <p className=\"text-sm text-gray-600 mb-4\">\n                Select which children's profiles this team should be associated with. Events will be automatically synced for mapped profiles.\n              </p>\n\n              {profiles && profiles.length > 0 ? (\n                <div className=\"space-y-3\">\n                  {profiles.map(profile => (\n                    <label\n                      key={profile.id}\n                      className={`flex items-center p-3 rounded-lg border cursor-pointer transition-colors ${\n                        selectedProfiles.includes(profile.id)\n                          ? 'border-purple-500 bg-purple-50'\n                          : 'border-gray-200 hover:bg-gray-50'\n                      }`}\n                    >\n                      <input\n                        type=\"checkbox\"\n                        className=\"sr-only\"\n                        checked={selectedProfiles.includes(profile.id)}\n                        onChange={() => toggleProfileSelection(profile.id)}\n                      />\n                      <div className=\"flex items-center flex-1\">\n                        <div\n                          className=\"w-8 h-8 rounded-full flex items-center justify-center text-white text-sm font-bold mr-3\"\n                          style={{ backgroundColor: profile.color }}\n                        >\n                          {profile.name.charAt(0)}\n                        </div>\n                        <div>\n                          <div className=\"text-sm font-medium text-gray-900\">{profile.name}</div>\n                          <div className=\"text-xs text-gray-500\">Age: {profile.age}</div>\n                        </div>\n                      </div>\n                      {selectedProfiles.includes(profile.id) && (\n                        <CheckCircle className=\"h-5 w-5 text-purple-500\" />\n                      )}\n                    </label>\n                  ))}\n                </div>\n              ) : (\n                <div className=\"text-center py-4\">\n                  <UserPlus className=\"h-8 w-8 text-gray-400 mx-auto mb-2\" />\n                  <p className=\"text-gray-500\">No profiles available</p>\n                  <button\n                    onClick={() => navigate('/profiles')}\n                    className=\"mt-2 text-sm text-purple-600 hover:text-purple-700\"\n                  >\n                    Create a profile first\n                  </button>\n                </div>\n              )}\n            </div>\n\n            <div className=\"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end space-x-3\">\n              <button\n                onClick={handleCancelMapping}\n                className=\"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={handleSaveMapping}\n                className=\"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-purple-600 hover:bg-purple-700\"\n              >\n                Save & Sync Events\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default TeamSnapConnection;","import React, { useEffect, useState } from 'react';\nimport { useNavigate, useSearchParams } from 'react-router-dom';\nimport { Loader2, CheckCircle } from 'lucide-react';\nimport { TeamSnapService } from '../../services/teamsnap';\n\nconst TeamSnapCallback: React.FC = () => {\n  const [searchParams] = useSearchParams();\n  const navigate = useNavigate();\n  const [status, setStatus] = useState<'loading' | 'syncing' | 'success' | 'error'>('loading');\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    const handleCallback = async () => {\n      const code = searchParams.get('code');\n      if (!code) {\n        setError('No authorization code received');\n        setStatus('error');\n        return;\n      }\n\n      try {\n        const teamSnap = new TeamSnapService({\n          clientId: import.meta.env.VITE_TEAMSNAP_CLIENT_ID,\n          redirectUri: `${window.location.origin}/connections/teamsnap/callback`\n        });\n\n        // Handle OAuth callback and get access token\n        await teamSnap.handleCallback(code);\n        setStatus('syncing');\n        \n        // Wait a moment to show success message before redirecting\n        setTimeout(() => {\n          setStatus('success');\n          // Redirect to TeamSnap connections page instead of general connections\n          setTimeout(() => {\n            navigate('/connections/teamsnap', { \n              state: { \n                teamSnapConnected: true,\n                showSuccessMessage: true \n              }\n            });\n          }, 1500);\n        }, 2000);\n      } catch (err) {\n        setError('Failed to complete authentication');\n        setStatus('error');\n      }\n    };\n\n    handleCallback();\n  }, [searchParams, navigate]);\n\n  if (error) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n        <div className=\"max-w-md w-full mx-auto p-6\">\n          <div className=\"bg-white rounded-lg shadow-md p-6 text-center\">\n            <h2 className=\"text-xl font-semibold text-red-600 mb-2\">Authentication Error</h2>\n            <p className=\"text-gray-600 mb-4\">{error}</p>\n            <button\n              onClick={() => navigate('/connections/teamsnap')}\n              className=\"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-purple-600 hover:bg-purple-700\"\n            >\n              Return to TeamSnap\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n      <div className=\"max-w-md w-full mx-auto p-6\">\n        <div className=\"bg-white rounded-lg shadow-md p-6 text-center\">\n          {status === 'loading' ? (\n            <>\n              <Loader2 className=\"h-8 w-8 animate-spin text-purple-600 mx-auto mb-4\" />\n              <h2 className=\"text-xl font-semibold text-gray-900 mb-2\">Connecting to TeamSnap</h2>\n              <p className=\"text-gray-600\">Please wait while we complete the connection...</p>\n            </>\n          ) : status === 'syncing' ? (\n            <>\n              <CheckCircle className=\"h-12 w-12 text-green-500 mx-auto mb-4\" />\n              <h2 className=\"text-xl font-semibold text-gray-900 mb-2\">Successfully Connected!</h2>\n              <p className=\"text-gray-600 mb-2\">Your TeamSnap account has been connected.</p>\n              <div className=\"flex items-center justify-center\">\n                <div className=\"animate-pulse flex items-center text-sm text-gray-500\">\n                  <Loader2 className=\"h-4 w-4 animate-spin mr-2\" />\n                  Syncing your teams...\n                </div>\n              </div>\n            </>\n          ) : (\n            <>\n              <CheckCircle className=\"h-12 w-12 text-green-500 mx-auto mb-4\" />\n              <h2 className=\"text-xl font-semibold text-gray-900 mb-2\">Teams Synced Successfully!</h2>\n              <p className=\"text-gray-600\">Redirecting to manage your teams...</p>\n            </>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default TeamSnapCallback;","import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { \n  BarChart, \n  ArrowLeft, \n  Plus, \n  Calendar, \n  Trash2, \n  CheckCircle, \n  XCircle, \n  AlertTriangle,\n  RefreshCw,\n  UserPlus,\n  Edit2,\n  Save,\n  X,\n  Users\n} from 'lucide-react';\nimport { supabase } from '../../lib/supabase';\nimport { useProfiles } from '../../context/ProfilesContext';\n\ninterface PlaymetricsTeam {\n  id: string;\n  team_name: string;\n  ics_url: string;\n  last_synced: string | null;\n  sync_status: 'pending' | 'success' | 'error';\n  mapped_profiles?: { id: string; name: string; color: string }[];\n  event_count?: number;\n}\n\nconst Playmetrics: React.FC = () => {\n  const navigate = useNavigate();\n  const { profiles } = useProfiles();\n  const [teams, setTeams] = useState<PlaymetricsTeam[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [icsUrl, setIcsUrl] = useState('');\n  const [submitting, setSubmitting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [success, setSuccess] = useState<string | null>(null);\n  const [editingTeam, setEditingTeam] = useState<string | null>(null);\n  const [editingName, setEditingName] = useState('');\n  const [showMappingModal, setShowMappingModal] = useState<string | null>(null);\n  const [selectedProfiles, setSelectedProfiles] = useState<string[]>([]);\n\n  useEffect(() => {\n    fetchTeams();\n  }, []);\n\n  const fetchTeams = async () => {\n    try {\n      const { data: teamsData, error: teamsError } = await supabase\n        .from('platform_teams')\n        .select('*')\n        .eq('platform', 'Playmetrics')\n        .order('created_at', { ascending: false });\n\n      if (teamsError) throw teamsError;\n\n      // Fetch profile mappings and event counts for each team\n      const teamsWithMappings = await Promise.all(\n        (teamsData || []).map(async (team) => {\n          // Get profile mappings\n          const { data: profileTeams, error: profileError } = await supabase\n            .from('profile_teams')\n            .select(`\n              profile_id,\n              profiles!inner(id, name, color)\n            `)\n            .eq('platform_team_id', team.id);\n\n          if (profileError) {\n            console.error('Error fetching profile mappings:', profileError);\n          }\n\n          // Get event count for this team\n          const { count: eventCount, error: eventError } = await supabase\n            .from('events')\n            .select('*', { count: 'exact', head: true })\n            .eq('platform_team_id', team.id);\n\n          if (eventError) {\n            console.error('Error fetching event count:', eventError);\n          }\n\n          const mapped_profiles = profileTeams?.map(pt => pt.profiles) || [];\n          return { \n            ...team, \n            mapped_profiles,\n            event_count: eventCount || 0\n          };\n        })\n      );\n\n      setTeams(teamsWithMappings);\n    } catch (err) {\n      console.error('Error fetching teams:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const validateIcsUrl = (url: string): boolean => {\n    try {\n      const parsedUrl = new URL(url);\n      return (\n        parsedUrl.protocol === 'https:' &&\n        parsedUrl.hostname === 'api.playmetrics.com' &&\n        parsedUrl.pathname.includes('/calendar/') &&\n        url.endsWith('.ics')\n      );\n    } catch {\n      return false;\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError(null);\n    setSuccess(null);\n\n    if (!validateIcsUrl(icsUrl)) {\n      setError('Please enter a valid Playmetrics calendar URL');\n      return;\n    }\n\n    setSubmitting(true);\n\n    try {\n      // Get the current user and session\n      const { data: { session }, error: sessionError } = await supabase.auth.getSession();\n      if (sessionError) throw sessionError;\n      if (!session) throw new Error('No authenticated session');\n\n      // Extract team name from URL\n      const teamId = icsUrl.split('/team/')[1]?.split('-')[0];\n      const teamName = `Team ${teamId}`;\n\n      // Add or update team in platform_teams using upsert\n      const { data: team, error: teamError } = await supabase\n        .from('platform_teams')\n        .upsert({\n          platform: 'Playmetrics',\n          team_id: teamId,\n          team_name: teamName,\n          sport: 'Soccer',\n          ics_url: icsUrl,\n          sync_status: 'pending',\n          user_id: session.user.id\n        }, {\n          onConflict: 'platform,team_id'\n        })\n        .select()\n        .single();\n\n      if (teamError) throw teamError;\n      if (!team) throw new Error('Failed to create or update team');\n\n      // Immediately sync the calendar to get events and team name\n      try {\n        const response = await fetch(`${import.meta.env.VITE_SUPABASE_URL}/functions/v1/sync-playmetrics-calendar`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${session.access_token}`,\n          },\n          body: JSON.stringify({\n            icsUrl: icsUrl,\n            teamId: team.id,\n            profileId: null // No profile mapping yet\n          })\n        });\n\n        if (!response.ok) {\n          const errorData = await response.json();\n          throw new Error(errorData.error || 'Failed to sync calendar');\n        }\n\n        const syncResult = await response.json();\n        \n        setSuccess(`Team calendar added successfully! Found ${syncResult.eventCount || 0} events. You can now map it to your children's profiles.`);\n      } catch (syncError) {\n        console.error('Error syncing calendar:', syncError);\n        setSuccess('Team calendar added successfully! You can now map it to your children\\'s profiles and sync events.');\n      }\n\n      setIcsUrl('');\n      fetchTeams();\n    } catch (err) {\n      console.error('Error adding team:', err);\n      setError(err instanceof Error ? err.message : 'Failed to add team calendar. Please try again.');\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  const handleDelete = async (teamId: string) => {\n    try {\n      setError(null);\n      setSuccess(null);\n\n      const { error: deleteError } = await supabase\n        .from('platform_teams')\n        .delete()\n        .eq('id', teamId);\n\n      if (deleteError) throw deleteError;\n\n      setTeams(teams.filter(team => team.id !== teamId));\n      setSuccess('Team removed successfully');\n    } catch (err) {\n      console.error('Error deleting team:', err);\n      setError('Failed to remove team. Please try again.');\n    }\n  };\n\n  const handleRefresh = async (teamId: string) => {\n    try {\n      setError(null);\n      setSuccess(null);\n      \n      const team = teams.find(t => t.id === teamId);\n      if (!team) return;\n\n      if (!team.mapped_profiles || team.mapped_profiles.length === 0) {\n        setError('Please map this team to at least one child profile before syncing events.');\n        return;\n      }\n\n      // Get the current session\n      const { data: { session }, error: sessionError } = await supabase.auth.getSession();\n      if (sessionError) throw sessionError;\n      if (!session) throw new Error('No authenticated session');\n\n      // Update team status to pending\n      await supabase\n        .from('platform_teams')\n        .update({ sync_status: 'pending' })\n        .eq('id', teamId);\n\n      // Sync events for each mapped profile\n      let totalEvents = 0;\n      for (const profile of team.mapped_profiles) {\n        const response = await fetch(`${import.meta.env.VITE_SUPABASE_URL}/functions/v1/sync-playmetrics-calendar`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${session.access_token}`,\n          },\n          body: JSON.stringify({\n            icsUrl: team.ics_url,\n            teamId: team.id,\n            profileId: profile.id\n          })\n        });\n\n        if (!response.ok) {\n          const errorData = await response.json();\n          throw new Error(errorData.error || 'Failed to sync calendar');\n        }\n\n        const syncResult = await response.json();\n        totalEvents += syncResult.eventCount || 0;\n      }\n\n      setSuccess(`Calendar refreshed successfully! Synced ${totalEvents} events for ${team.mapped_profiles.length} profile(s).`);\n      fetchTeams();\n    } catch (err) {\n      console.error('Error refreshing calendar:', err);\n      setError(err instanceof Error ? err.message : 'Failed to refresh calendar. Please try again.');\n      \n      // Update team sync status to error\n      if (teamId) {\n        await supabase\n          .from('platform_teams')\n          .update({\n            sync_status: 'error',\n            last_synced: new Date().toISOString()\n          })\n          .eq('id', teamId);\n      }\n    }\n  };\n\n  const handleEditTeamName = (teamId: string, currentName: string) => {\n    setEditingTeam(teamId);\n    setEditingName(currentName);\n  };\n\n  const handleSaveTeamName = async (teamId: string) => {\n    try {\n      setError(null);\n      setSuccess(null);\n\n      if (!editingName.trim()) {\n        setError('Team name cannot be empty');\n        return;\n      }\n\n      const { error: updateError } = await supabase\n        .from('platform_teams')\n        .update({ team_name: editingName.trim() })\n        .eq('id', teamId);\n\n      if (updateError) throw updateError;\n\n      setTeams(teams.map(team => \n        team.id === teamId \n          ? { ...team, team_name: editingName.trim() }\n          : team\n      ));\n\n      setEditingTeam(null);\n      setEditingName('');\n      setSuccess('Team name updated successfully');\n    } catch (err) {\n      console.error('Error updating team name:', err);\n      setError('Failed to update team name. Please try again.');\n    }\n  };\n\n  const handleCancelEdit = () => {\n    setEditingTeam(null);\n    setEditingName('');\n  };\n\n  const handleOpenMapping = (teamId: string) => {\n    const team = teams.find(t => t.id === teamId);\n    if (team) {\n      setSelectedProfiles(team.mapped_profiles?.map(p => p.id) || []);\n      setShowMappingModal(teamId);\n    }\n  };\n\n  const handleSaveMapping = async () => {\n    if (!showMappingModal) return;\n\n    try {\n      setError(null);\n      setSuccess(null);\n\n      // Delete existing mappings\n      await supabase\n        .from('profile_teams')\n        .delete()\n        .eq('platform_team_id', showMappingModal);\n\n      // Insert new mappings\n      if (selectedProfiles.length > 0) {\n        const { error } = await supabase\n          .from('profile_teams')\n          .insert(\n            selectedProfiles.map(profileId => ({\n              profile_id: profileId,\n              platform_team_id: showMappingModal\n            }))\n          );\n\n        if (error) throw error;\n      }\n\n      setShowMappingModal(null);\n      setSelectedProfiles([]);\n      setSuccess('Team mapping updated successfully. Use the refresh button to sync events for the mapped profiles.');\n      fetchTeams();\n    } catch (err) {\n      console.error('Error saving team mapping:', err);\n      setError('Failed to update team mapping. Please try again.');\n    }\n  };\n\n  const handleCancelMapping = () => {\n    setShowMappingModal(null);\n    setSelectedProfiles([]);\n  };\n\n  const toggleProfileSelection = (profileId: string) => {\n    setSelectedProfiles(prev =>\n      prev.includes(profileId)\n        ? prev.filter(id => id !== profileId)\n        : [...prev, profileId]\n    );\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <div className=\"max-w-4xl mx-auto px-4 py-8\">\n        <button\n          onClick={() => navigate('/connections')}\n          className=\"flex items-center text-gray-600 hover:text-gray-900 mb-6\"\n        >\n          <ArrowLeft className=\"h-4 w-4 mr-2\" />\n          Back to Connections\n        </button>\n\n        <div className=\"bg-white rounded-lg shadow-sm overflow-hidden\">\n          <div className=\"px-6 py-8 border-b border-gray-200\">\n            <div className=\"flex items-center\">\n              <div \n                className=\"h-12 w-12 rounded-lg flex items-center justify-center\"\n                style={{ backgroundColor: '#10B981' + '20', color: '#10B981' }}\n              >\n                <BarChart className=\"h-6 w-6\" />\n              </div>\n              <div className=\"ml-4\">\n                <h1 className=\"text-2xl font-bold text-gray-900\">Connect to Playmetrics</h1>\n                <p className=\"mt-1 text-gray-500\">\n                  Import your team schedules from Playmetrics calendars\n                </p>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"p-6\">\n            <div className=\"mb-8\">\n              <h2 className=\"text-lg font-medium text-gray-900 mb-4\">Add Team Calendar</h2>\n              <form onSubmit={handleSubmit} className=\"space-y-4\">\n                <div>\n                  <label htmlFor=\"ics-url\" className=\"block text-sm font-medium text-gray-700\">\n                    Calendar URL\n                  </label>\n                  <div className=\"mt-1\">\n                    <input\n                      type=\"url\"\n                      id=\"ics-url\"\n                      value={icsUrl}\n                      onChange={(e) => setIcsUrl(e.target.value)}\n                      placeholder=\"https://api.playmetrics.com/calendar/1079/team/220548-46283CA0.ics\"\n                      className=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500\"\n                      required\n                    />\n                  </div>\n                  <p className=\"mt-2 text-sm text-gray-500\">\n                    Enter the Playmetrics calendar URL for your team. Events will be imported immediately, then you can map the team to your children's profiles.\n                  </p>\n                </div>\n\n                {error && (\n                  <div className=\"bg-red-50 border border-red-200 rounded-md p-4 text-red-700\">\n                    {error}\n                  </div>\n                )}\n\n                {success && (\n                  <div className=\"bg-green-50 border border-green-200 rounded-md p-4 text-green-700\">\n                    {success}\n                  </div>\n                )}\n\n                <button\n                  type=\"submit\"\n                  disabled={submitting}\n                  className=\"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n                >\n                  {submitting ? (\n                    <>\n                      <RefreshCw className=\"animate-spin h-4 w-4 mr-2\" />\n                      Adding & Syncing Team...\n                    </>\n                  ) : (\n                    <>\n                      <Plus className=\"h-4 w-4 mr-2\" />\n                      Add Team Calendar\n                    </>\n                  )}\n                </button>\n              </form>\n            </div>\n\n            <div>\n              <h2 className=\"text-lg font-medium text-gray-900 mb-4\">Connected Teams</h2>\n              <div className=\"space-y-4\">\n                {loading ? (\n                  <div className=\"text-center py-4\">\n                    <RefreshCw className=\"animate-spin h-6 w-6 text-gray-400 mx-auto\" />\n                  </div>\n                ) : teams.length > 0 ? (\n                  teams.map((team) => (\n                    <div\n                      key={team.id}\n                      className=\"border border-gray-200 rounded-lg p-4 hover:bg-gray-50\"\n                    >\n                      <div className=\"flex items-center justify-between\">\n                        <div className=\"flex items-center flex-1\">\n                          <Calendar className=\"h-5 w-5 text-gray-400 mr-3\" />\n                          <div className=\"flex-1\">\n                            {editingTeam === team.id ? (\n                              <div className=\"flex items-center space-x-2\">\n                                <input\n                                  type=\"text\"\n                                  value={editingName}\n                                  onChange={(e) => setEditingName(e.target.value)}\n                                  className=\"flex-1 text-sm font-medium border-gray-300 rounded-md focus:border-green-500 focus:ring-green-500\"\n                                  onKeyDown={(e) => {\n                                    if (e.key === 'Enter') {\n                                      handleSaveTeamName(team.id);\n                                    } else if (e.key === 'Escape') {\n                                      handleCancelEdit();\n                                    }\n                                  }}\n                                  autoFocus\n                                />\n                                <button\n                                  onClick={() => handleSaveTeamName(team.id)}\n                                  className=\"p-1 text-green-600 hover:text-green-700\"\n                                  title=\"Save\"\n                                >\n                                  <Save className=\"h-4 w-4\" />\n                                </button>\n                                <button\n                                  onClick={handleCancelEdit}\n                                  className=\"p-1 text-gray-400 hover:text-gray-500\"\n                                  title=\"Cancel\"\n                                >\n                                  <X className=\"h-4 w-4\" />\n                                </button>\n                              </div>\n                            ) : (\n                              <div className=\"flex items-center space-x-2\">\n                                <h3 className=\"text-sm font-medium text-gray-900\">\n                                  {team.team_name}\n                                </h3>\n                                <button\n                                  onClick={() => handleEditTeamName(team.id, team.team_name)}\n                                  className=\"p-1 text-gray-400 hover:text-gray-500\"\n                                  title=\"Edit team name\"\n                                >\n                                  <Edit2 className=\"h-3 w-3\" />\n                                </button>\n                              </div>\n                            )}\n                            \n                            {/* Event count and profile mappings */}\n                            <div className=\"mt-2 space-y-1\">\n                              <div className=\"flex items-center space-x-2\">\n                                <span className=\"text-xs text-gray-500\">\n                                  {team.event_count || 0} events imported\n                                </span>\n                                {team.mapped_profiles && team.mapped_profiles.length > 0 && (\n                                  <>\n                                    <span className=\"text-xs text-gray-300\">•</span>\n                                    <span className=\"text-xs text-gray-500\">\n                                      Mapped to {team.mapped_profiles.length} profile(s)\n                                    </span>\n                                  </>\n                                )}\n                              </div>\n                              \n                              {team.mapped_profiles && team.mapped_profiles.length > 0 ? (\n                                <div className=\"flex items-center space-x-2\">\n                                  {team.mapped_profiles.map(profile => (\n                                    <span\n                                      key={profile.id}\n                                      className=\"inline-flex items-center px-2 py-1 rounded-full text-xs\"\n                                      style={{ \n                                        backgroundColor: profile.color + '20',\n                                        color: profile.color\n                                      }}\n                                    >\n                                      {profile.name}\n                                    </span>\n                                  ))}\n                                </div>\n                              ) : (\n                                <span className=\"text-xs text-amber-600 bg-amber-50 px-2 py-1 rounded-full\">\n                                  Not mapped to any profiles - events won't appear in calendars\n                                </span>\n                              )}\n                            </div>\n\n                            <div className=\"flex items-center mt-1\">\n                              {team.sync_status === 'success' ? (\n                                <CheckCircle className=\"h-4 w-4 text-green-500 mr-1\" />\n                              ) : team.sync_status === 'error' ? (\n                                <AlertTriangle className=\"h-4 w-4 text-red-500 mr-1\" />\n                              ) : (\n                                <RefreshCw className=\"h-4 w-4 text-yellow-500 mr-1\" />\n                              )}\n                              <span className=\"text-xs text-gray-500\">\n                                {team.last_synced\n                                  ? `Last synced ${new Date(team.last_synced).toLocaleString()}`\n                                  : 'Never synced'}\n                              </span>\n                            </div>\n                          </div>\n                        </div>\n                        <div className=\"flex items-center space-x-2\">\n                          <button\n                            onClick={() => handleOpenMapping(team.id)}\n                            className=\"p-2 text-gray-400 hover:text-blue-500\"\n                            title=\"Map to profiles\"\n                          >\n                            <Users className=\"h-4 w-4\" />\n                          </button>\n                          <button\n                            onClick={() => handleRefresh(team.id)}\n                            className=\"p-2 text-gray-400 hover:text-gray-500\"\n                            title=\"Refresh calendar\"\n                            disabled={!team.mapped_profiles || team.mapped_profiles.length === 0}\n                          >\n                            <RefreshCw className=\"h-4 w-4\" />\n                          </button>\n                          <button\n                            onClick={() => handleDelete(team.id)}\n                            className=\"p-2 text-gray-400 hover:text-red-500\"\n                            title=\"Remove team\"\n                          >\n                            <Trash2 className=\"h-4 w-4\" />\n                          </button>\n                        </div>\n                      </div>\n                    </div>\n                  ))\n                ) : (\n                  <div className=\"text-center py-6 bg-gray-50 rounded-lg\">\n                    <Calendar className=\"h-8 w-8 text-gray-400 mx-auto mb-2\" />\n                    <p className=\"text-gray-500\">No teams connected yet</p>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Profile Mapping Modal */}\n      {showMappingModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-lg shadow-xl max-w-md w-full\">\n            <div className=\"px-6 py-4 border-b border-gray-200 flex justify-between items-center\">\n              <h3 className=\"text-lg font-medium text-gray-900\">Map Team to Profiles</h3>\n              <button\n                onClick={handleCancelMapping}\n                className=\"text-gray-400 hover:text-gray-500\"\n              >\n                <X className=\"h-6 w-6\" />\n              </button>\n            </div>\n\n            <div className=\"p-6\">\n              <p className=\"text-sm text-gray-600 mb-4\">\n                Select which children's profiles this team calendar should be associated with. Events will only appear in the calendars of mapped profiles.\n              </p>\n\n              {profiles && profiles.length > 0 ? (\n                <div className=\"space-y-3\">\n                  {profiles.map(profile => (\n                    <label\n                      key={profile.id}\n                      className={`flex items-center p-3 rounded-lg border cursor-pointer transition-colors ${\n                        selectedProfiles.includes(profile.id)\n                          ? 'border-green-500 bg-green-50'\n                          : 'border-gray-200 hover:bg-gray-50'\n                      }`}\n                    >\n                      <input\n                        type=\"checkbox\"\n                        className=\"sr-only\"\n                        checked={selectedProfiles.includes(profile.id)}\n                        onChange={() => toggleProfileSelection(profile.id)}\n                      />\n                      <div className=\"flex items-center flex-1\">\n                        <div\n                          className=\"w-8 h-8 rounded-full flex items-center justify-center text-white text-sm font-bold mr-3\"\n                          style={{ backgroundColor: profile.color }}\n                        >\n                          {profile.name.charAt(0)}\n                        </div>\n                        <div>\n                          <div className=\"text-sm font-medium text-gray-900\">{profile.name}</div>\n                          <div className=\"text-xs text-gray-500\">Age: {profile.age}</div>\n                        </div>\n                      </div>\n                      {selectedProfiles.includes(profile.id) && (\n                        <CheckCircle className=\"h-5 w-5 text-green-500\" />\n                      )}\n                    </label>\n                  ))}\n                </div>\n              ) : (\n                <div className=\"text-center py-4\">\n                  <UserPlus className=\"h-8 w-8 text-gray-400 mx-auto mb-2\" />\n                  <p className=\"text-gray-500\">No profiles available</p>\n                  <button\n                    onClick={() => navigate('/profiles')}\n                    className=\"mt-2 text-sm text-green-600 hover:text-green-700\"\n                  >\n                    Create a profile first\n                  </button>\n                </div>\n              )}\n            </div>\n\n            <div className=\"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end space-x-3\">\n              <button\n                onClick={handleCancelMapping}\n                className=\"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={handleSaveMapping}\n                className=\"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700\"\n              >\n                Save Mapping\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Playmetrics;","import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Plus, X, Upload, Crown } from 'lucide-react';\nimport { useProfiles } from '../context/ProfilesContext';\nimport { supabase } from '../lib/supabase';\n\nconst Profiles: React.FC = () => {\n  const navigate = useNavigate();\n  const { profiles, friendsProfiles, addProfile, loading, error } = useProfiles();\n  const [showAddForm, setShowAddForm] = useState(false);\n  const [selectedSports, setSelectedSports] = useState<string[]>([]);\n  const [photoFile, setPhotoFile] = useState<File | null>(null);\n  const [photoPreview, setPhotoPreview] = useState<string | null>(null);\n  const [formData, setFormData] = useState({\n    name: '',\n    age: '',\n    color: '#3B82F6',\n    notes: ''\n  });\n  \n  const colorOptions = [\n    { name: 'Blue', value: '#3B82F6' },\n    { name: 'Red', value: '#EF4444' },\n    { name: 'Green', value: '#10B981' },\n    { name: 'Yellow', value: '#F59E0B' },\n    { name: 'Purple', value: '#8B5CF6' },\n    { name: 'Pink', value: '#EC4899' },\n    { name: 'Indigo', value: '#6366F1' },\n    { name: 'Teal', value: '#14B8A6' },\n    { name: 'Orange', value: '#F97316' },\n    { name: 'Cyan', value: '#06B6D4' },\n    { name: 'Lime', value: '#84CC16' },\n    { name: 'Rose', value: '#F43F5E' }\n  ];\n\n  const availableSports = [\n    { name: 'Soccer', color: '#10B981' },\n    { name: 'Baseball', color: '#F59E0B' },\n    { name: 'Basketball', color: '#EF4444' },\n    { name: 'Swimming', color: '#3B82F6' },\n    { name: 'Tennis', color: '#8B5CF6' },\n    { name: 'Volleyball', color: '#EC4899' },\n  ];\n\n  const handlePhotoChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      setPhotoFile(file);\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        setPhotoPreview(reader.result as string);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    try {\n      let photoUrl = null;\n      if (photoFile) {\n        const fileExt = photoFile.name.split('.').pop();\n        const fileName = `${Math.random()}.${fileExt}`;\n        const { data: uploadData, error: uploadError } = await supabase.storage\n          .from('profile-photos')\n          .upload(fileName, photoFile);\n\n        if (uploadError) throw uploadError;\n\n        const { data: { publicUrl } } = supabase.storage\n          .from('profile-photos')\n          .getPublicUrl(fileName);\n\n        photoUrl = publicUrl;\n      }\n\n      await addProfile({\n        name: formData.name,\n        age: parseInt(formData.age),\n        color: formData.color,\n        notes: formData.notes,\n        photo_url: photoUrl,\n        sports: selectedSports.map(sport => {\n          const sportData = availableSports.find(s => s.name === sport);\n          return {\n            name: sport,\n            color: sportData?.color || '#000000'\n          };\n        }),\n        eventCount: 0,\n        isOwnProfile: true\n      });\n\n      setShowAddForm(false);\n      setFormData({\n        name: '',\n        age: '',\n        color: '#3B82F6',\n        notes: ''\n      });\n      setSelectedSports([]);\n      setPhotoFile(null);\n      setPhotoPreview(null);\n    } catch (err) {\n      console.error('Failed to add profile:', err);\n    }\n  };\n\n  const handleViewProfile = (childId: string) => {\n    navigate(`/profiles/${childId}`);\n  };\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-full\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"text-center text-red-600\">\n        <p>Error loading profiles: {error}</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <h1 className=\"text-2xl font-bold text-gray-900 dark:text-white\">Children Profiles</h1>\n        <button\n          onClick={() => setShowAddForm(true)}\n          className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center\"\n        >\n          <Plus className=\"h-5 w-5 mr-2\" />\n          Add Child\n        </button>\n      </div>\n\n      {/* Your Children */}\n      {profiles.length > 0 && (\n        <div>\n          <h2 className=\"text-lg font-medium text-gray-900 dark:text-white mb-4\">Your Children</h2>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {profiles.map(child => (\n              <div key={child.id} className=\"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden\">\n                <div className=\"p-6\">\n                  <div className=\"flex items-center mb-4\">\n                    <div className=\"h-12 w-12 rounded-full overflow-hidden flex items-center justify-center\">\n                      {child.photo_url ? (\n                        <img \n                          src={child.photo_url} \n                          alt={child.name}\n                          className=\"h-full w-full object-cover\"\n                        />\n                      ) : (\n                        <div\n                          className=\"h-full w-full flex items-center justify-center text-white text-xl font-bold\"\n                          style={{ backgroundColor: child.color }}\n                        >\n                          {child.name.charAt(0)}\n                        </div>\n                      )}\n                    </div>\n                    <div className=\"ml-4\">\n                      <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">{child.name}</h3>\n                      <p className=\"text-sm text-gray-500 dark:text-gray-400\">Age: {child.age}</p>\n                    </div>\n                  </div>\n\n                  <div className=\"space-y-4\">\n                    <div>\n                      <h4 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">Sports</h4>\n                      <div className=\"flex flex-wrap gap-2\">\n                        {child.sports.map((sport, index) => (\n                          <span\n                            key={index}\n                            className=\"px-3 py-1 rounded-full text-sm\"\n                            style={{ \n                              backgroundColor: sport.color + '20',\n                              color: sport.color\n                            }}\n                          >\n                            {sport.name}\n                          </span>\n                        ))}\n                      </div>\n                    </div>\n\n                    <div>\n                      <h4 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">Activity Summary</h4>\n                      <div className=\"text-sm text-gray-600 dark:text-gray-400\">\n                        <p>{child.eventCount} events this week</p>\n                      </div>\n                    </div>\n\n                    <button\n                      onClick={() => handleViewProfile(child.id)}\n                      className=\"w-full mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700\"\n                    >\n                      View Profile\n                    </button>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Friends' Children (Administrator Access) */}\n      {friendsProfiles.length > 0 && (\n        <div>\n          <h2 className=\"text-lg font-medium text-gray-900 dark:text-white mb-4 flex items-center\">\n            <Crown className=\"h-5 w-5 text-yellow-500 mr-2\" />\n            Friends' Children (Administrator Access)\n          </h2>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {friendsProfiles.map(child => (\n              <div key={child.id} className=\"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden border-l-4 border-yellow-500\">\n                <div className=\"p-6\">\n                  <div className=\"flex items-center mb-4\">\n                    <div className=\"h-12 w-12 rounded-full overflow-hidden flex items-center justify-center relative\">\n                      {child.photo_url ? (\n                        <img \n                          src={child.photo_url} \n                          alt={child.name}\n                          className=\"h-full w-full object-cover\"\n                        />\n                      ) : (\n                        <div\n                          className=\"h-full w-full flex items-center justify-center text-white text-xl font-bold\"\n                          style={{ backgroundColor: child.color }}\n                        >\n                          {child.name.charAt(0)}\n                        </div>\n                      )}\n                      <div className=\"absolute -top-1 -right-1 w-4 h-4 bg-yellow-500 rounded-full flex items-center justify-center\">\n                        <Crown className=\"h-2.5 w-2.5 text-white\" />\n                      </div>\n                    </div>\n                    <div className=\"ml-4\">\n                      <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">{child.name}</h3>\n                      <p className=\"text-sm text-gray-500 dark:text-gray-400\">Age: {child.age}</p>\n                      <p className=\"text-xs text-blue-600 dark:text-blue-400 font-medium\">\n                        {child.ownerName}'s child\n                      </p>\n                    </div>\n                  </div>\n\n                  <div className=\"space-y-4\">\n                    <div>\n                      <h4 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">Sports</h4>\n                      <div className=\"flex flex-wrap gap-2\">\n                        {child.sports.map((sport, index) => (\n                          <span\n                            key={index}\n                            className=\"px-3 py-1 rounded-full text-sm\"\n                            style={{ \n                              backgroundColor: sport.color + '20',\n                              color: sport.color\n                            }}\n                          >\n                            {sport.name}\n                          </span>\n                        ))}\n                      </div>\n                    </div>\n\n                    <div>\n                      <h4 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">Activity Summary</h4>\n                      <div className=\"text-sm text-gray-600 dark:text-gray-400\">\n                        <p>{child.eventCount} events this week</p>\n                      </div>\n                    </div>\n\n                    <div className=\"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-3\">\n                      <div className=\"flex items-center text-yellow-800 dark:text-yellow-200\">\n                        <Crown className=\"h-4 w-4 mr-2\" />\n                        <span className=\"text-xs font-medium\">Administrator Access</span>\n                      </div>\n                      <p className=\"text-xs text-yellow-700 dark:text-yellow-300 mt-1\">\n                        You can view and manage all aspects of this profile\n                      </p>\n                    </div>\n\n                    <button\n                      onClick={() => handleViewProfile(child.id)}\n                      className=\"w-full mt-4 px-4 py-2 bg-yellow-600 text-white rounded-md hover:bg-yellow-700\"\n                    >\n                      Manage Profile\n                    </button>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Empty State */}\n      {profiles.length === 0 && friendsProfiles.length === 0 && (\n        <div className=\"text-center py-12\">\n          <div className=\"text-gray-400 mb-4\">\n            <Plus className=\"h-12 w-12 mx-auto\" />\n          </div>\n          <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-2\">No profiles yet</h3>\n          <p className=\"text-gray-500 dark:text-gray-400 mb-6\">\n            Get started by adding your first child's profile\n          </p>\n          <button\n            onClick={() => setShowAddForm(true)}\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700\"\n          >\n            Add Your First Child\n          </button>\n        </div>\n      )}\n\n      {showAddForm && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-auto\">\n            <form onSubmit={handleSubmit}>\n              <div className=\"px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center\">\n                <h3 className=\"text-xl font-semibold text-gray-900 dark:text-white\">Add New Child</h3>\n                <button\n                  type=\"button\"\n                  onClick={() => setShowAddForm(false)}\n                  className=\"text-gray-400 hover:text-gray-500 dark:text-gray-300 dark:hover:text-gray-200\"\n                >\n                  <X className=\"h-6 w-6\" />\n                </button>\n              </div>\n\n              <div className=\"p-6 space-y-6\">\n                <div className=\"flex items-center space-x-6\">\n                  <div className=\"flex-shrink-0\">\n                    <div className=\"relative\">\n                      <div className=\"h-32 w-32 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center overflow-hidden\">\n                        {photoPreview ? (\n                          <img \n                            src={photoPreview} \n                            alt=\"Preview\" \n                            className=\"h-full w-full object-cover\"\n                          />\n                        ) : (\n                          <Upload className=\"h-8 w-8 text-gray-400 dark:text-gray-500\" />\n                        )}\n                      </div>\n                      <label\n                        htmlFor=\"photo\"\n                        className=\"absolute bottom-0 right-0 bg-white dark:bg-gray-700 rounded-full p-2 shadow-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-600\"\n                      >\n                        <Plus className=\"h-4 w-4 text-gray-600 dark:text-gray-300\" />\n                        <input \n                          type=\"file\" \n                          id=\"photo\" \n                          className=\"hidden\" \n                          accept=\"image/*\"\n                          onChange={handlePhotoChange}\n                        />\n                      </label>\n                    </div>\n                    <p className=\"mt-2 text-xs text-gray-500 dark:text-gray-400 text-center\">\n                      Click to upload photo\n                    </p>\n                  </div>\n\n                  <div className=\"flex-1 space-y-4\">\n                    <div>\n                      <label htmlFor=\"name\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                        Name\n                      </label>\n                      <input\n                        type=\"text\"\n                        id=\"name\"\n                        name=\"name\"\n                        value={formData.name}\n                        onChange={handleInputChange}\n                        placeholder=\"Enter child's name\"\n                        className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n                        required\n                        autoComplete=\"off\"\n                      />\n                    </div>\n\n                    <div>\n                      <label htmlFor=\"age\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                        Age\n                      </label>\n                      <input\n                        type=\"number\"\n                        id=\"age\"\n                        name=\"age\"\n                        value={formData.age}\n                        onChange={handleInputChange}\n                        min=\"1\"\n                        max=\"18\"\n                        placeholder=\"Enter age\"\n                        className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n                        required\n                        autoComplete=\"off\"\n                      />\n                    </div>\n\n                    <div>\n                      <label htmlFor=\"color\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                        Profile Color\n                      </label>\n                      <div className=\"relative mt-1\">\n                        <select\n                          id=\"color\"\n                          name=\"color\"\n                          value={formData.color}\n                          onChange={handleInputChange}\n                          className=\"block w-full pl-8 pr-10 py-2 text-base border-gray-300 dark:border-gray-600 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md dark:bg-gray-700 dark:text-white\"\n                        >\n                          {colorOptions.map(color => (\n                            <option key={color.value} value={color.value} className=\"flex items-center\">\n                              {color.name}\n                            </option>\n                          ))}\n                        </select>\n                        <div \n                          className=\"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 rounded-full pointer-events-none\"\n                          style={{ backgroundColor: formData.color }}\n                        ></div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                    Sports & Activities\n                  </label>\n                  <div className=\"grid grid-cols-2 sm:grid-cols-3 gap-3\">\n                    {availableSports.map((sport) => (\n                      <label\n                        key={sport.name}\n                        className={`flex items-center p-3 rounded-lg border dark:border-gray-600 cursor-pointer transition-colors ${\n                          selectedSports.includes(sport.name)\n                            ? 'border-blue-500 bg-blue-50 dark:bg-blue-900/50'\n                            : 'border-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700'\n                        }`}\n                      >\n                        <input\n                          type=\"checkbox\"\n                          className=\"hidden\"\n                          checked={selectedSports.includes(sport.name)}\n                          onChange={(e) => {\n                            if (e.target.checked) {\n                              setSelectedSports([...selectedSports, sport.name]);\n                            } else {\n                              setSelectedSports(selectedSports.filter((s) => s !== sport.name));\n                            }\n                          }}\n                        />\n                        <span\n                          className=\"w-3 h-3 rounded-full mr-2\"\n                          style={{ backgroundColor: sport.color }}\n                        ></span>\n                        <span className=\"text-sm text-gray-700 dark:text-gray-300\">{sport.name}</span>\n                      </label>\n                    ))}\n                  </div>\n                </div>\n\n                <div>\n                  <label htmlFor=\"notes\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                    Additional Notes\n                  </label>\n                  <textarea\n                    id=\"notes\"\n                    name=\"notes\"\n                    value={formData.notes}\n                    onChange={handleInputChange}\n                    rows={3}\n                    placeholder=\"Enter any important information about your child...\"\n                    className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n                  ></textarea>\n                </div>\n              </div>\n\n              <div className=\"px-6 py-4 bg-gray-50 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-600 flex justify-end space-x-3\">\n                <button\n                  type=\"button\"\n                  onClick={() => setShowAddForm(false)}\n                  className=\"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700\"\n                >\n                  Cancel\n                </button>\n                <button\n                  type=\"submit\"\n                  className=\"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n                >\n                  Add Child\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Profiles;","import React, { useState, useEffect, useCallback } from 'react';\nimport { \n  Users, \n  UserPlus, \n  Check, \n  X, \n  Search, \n  Mail, \n  Shield, \n  Eye,\n  Trash2,\n  Clock,\n  AlertCircle,\n  Edit2,\n  Save,\n  MessageCircle\n} from 'lucide-react';\nimport { supabase } from '../../lib/supabase';\n\ninterface User {\n  id: string;\n  email: string;\n  full_name?: string;\n  profile_photo_url?: string;\n}\n\ninterface Friend {\n  id: string;\n  friend_id: string;\n  role: 'none' | 'viewer' | 'administrator';\n  created_at: string;\n  friend: User;\n}\n\ninterface FriendRequest {\n  id: string;\n  requester_id: string;\n  requested_id: string;\n  status: 'pending' | 'accepted' | 'declined';\n  role: 'none' | 'viewer' | 'administrator';\n  message?: string;\n  created_at: string;\n  requester?: User;\n  requested?: User;\n}\n\nconst FriendsManager: React.FC = () => {\n  const [friends, setFriends] = useState<Friend[]>([]);\n  const [incomingRequests, setIncomingRequests] = useState<FriendRequest[]>([]);\n  const [outgoingRequests, setOutgoingRequests] = useState<FriendRequest[]>([]);\n  const [searchEmail, setSearchEmail] = useState('');\n  const [searchResults, setSearchResults] = useState<User[]>([]);\n  const [requestMessage, setRequestMessage] = useState('');\n  const [loading, setLoading] = useState(true);\n  const [searching, setSearching] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [success, setSuccess] = useState<string | null>(null);\n  const [currentUserId, setCurrentUserId] = useState<string | null>(null);\n  const [searchDebugInfo, setSearchDebugInfo] = useState<string>('');\n  const [editingFriend, setEditingFriend] = useState<string | null>(null);\n  const [editingRole, setEditingRole] = useState<'none' | 'viewer' | 'administrator'>('none');\n\n  const searchUsers = useCallback(async () => {\n    if (!searchEmail.trim() || searchEmail.trim().length < 2) {\n      setSearchResults([]);\n      setSearchDebugInfo('');\n      return;\n    }\n\n    setSearching(true);\n    setError(null);\n    setSearchDebugInfo('');\n\n    try {\n      if (!currentUserId) {\n        setError('User not authenticated');\n        return;\n      }\n\n      const searchTerm = searchEmail.trim();\n      console.log('🔍 STARTING SEARCH');\n      console.log('Search term:', searchTerm);\n      console.log('Current user ID:', currentUserId);\n\n      // Search for users by looking in user_settings table where we can match name patterns\n      // Search by full_name only since we can't access auth.users table\n      const { data: userSettings, error: settingsError } = await supabase\n        .from('user_settings')\n        .select('user_id, full_name, profile_photo_url')\n        .ilike('full_name', `%${searchTerm}%`)\n        .limit(10);\n\n      console.log('📊 DATABASE RESPONSE');\n      console.log('Error:', settingsError);\n      console.log('Data:', userSettings);\n      console.log('Data length:', userSettings?.length || 0);\n\n      if (settingsError) {\n        console.error('❌ Search error:', settingsError);\n        setSearchDebugInfo(`Database error: ${settingsError.message}`);\n        throw settingsError;\n      }\n\n      if (!userSettings) {\n        console.log('❌ No data returned from database');\n        setSearchDebugInfo('No data returned from database');\n        setSearchResults([]);\n        return;\n      }\n\n      if (userSettings.length === 0) {\n        console.log('❌ Empty results from database');\n        setSearchDebugInfo(`No users found in database with name containing \"${searchTerm}\"`);\n        setSearchResults([]);\n        return;\n      }\n\n      console.log('✅ Found users in database:', userSettings.length);\n      setSearchDebugInfo(`Found ${userSettings.length} users in database`);\n\n      // Get current user's existing connections to filter them out\n      const existingFriendIds = friends.map(f => f.friend_id);\n      const pendingIncomingIds = incomingRequests.map(r => r.requester_id);\n      const pendingOutgoingIds = outgoingRequests.map(r => r.requested_id);\n      \n      console.log('🔍 FILTERING LOGIC');\n      console.log('Existing friend IDs:', existingFriendIds);\n      console.log('Pending incoming request IDs:', pendingIncomingIds);\n      console.log('Pending outgoing request IDs:', pendingOutgoingIds);\n\n      // Filter out existing friends and pending requests, but keep current user for now to see if they appear\n      const filteredUsers = userSettings.filter(u => {\n        const isCurrentUser = u.user_id === currentUserId;\n        const isExistingFriend = existingFriendIds.includes(u.user_id);\n        const hasPendingIncoming = pendingIncomingIds.includes(u.user_id);\n        const hasPendingOutgoing = pendingOutgoingIds.includes(u.user_id);\n        \n        console.log(`--- Checking user: ${u.full_name} (${u.user_id}) ---`);\n        console.log(`  Is current user: ${isCurrentUser}`);\n        console.log(`  Is existing friend: ${isExistingFriend}`);\n        console.log(`  Has pending incoming: ${hasPendingIncoming}`);\n        console.log(`  Has pending outgoing: ${hasPendingOutgoing}`);\n        \n        // Only exclude current user, existing friends, and pending requests\n        const shouldInclude = !isCurrentUser && !isExistingFriend && !hasPendingIncoming && !hasPendingOutgoing;\n        console.log(`  ✅ Should include: ${shouldInclude}`);\n        \n        return shouldInclude;\n      });\n\n      console.log('🎯 FINAL FILTERING RESULTS');\n      console.log('Filtered users count:', filteredUsers.length);\n      console.log('Filtered users:', filteredUsers);\n\n      // Transform users for display\n      const transformedUsers = filteredUsers.map((settings) => ({\n        id: settings.user_id,\n        email: 'Search by name only', // Can't get email from auth.users\n        full_name: settings.full_name,\n        profile_photo_url: settings.profile_photo_url\n      }));\n\n      console.log('📋 FINAL RESULTS FOR UI');\n      console.log('Transformed users:', transformedUsers);\n      console.log('Setting search results...');\n\n      setSearchResults(transformedUsers);\n\n      // Update debug info\n      if (transformedUsers.length > 0) {\n        setSearchDebugInfo(`✅ Found ${transformedUsers.length} available user(s) for \"${searchTerm}\"`);\n        console.log(`✅ SUCCESS: Found ${transformedUsers.length} user(s) matching \"${searchTerm}\"`);\n      } else {\n        setSearchDebugInfo(`❌ No available users found for \"${searchTerm}\" after filtering (found ${userSettings.length} in database but all were filtered out)`);\n        console.log(`❌ NO RESULTS: Found ${userSettings.length} users in database but all were filtered out`);\n      }\n\n    } catch (err) {\n      console.error('💥 Error searching users:', err);\n      const errorMessage = err instanceof Error ? err.message : 'Unknown error';\n      setError(`Failed to search users: ${errorMessage}`);\n      setSearchDebugInfo(`Error: ${errorMessage}`);\n    } finally {\n      setSearching(false);\n      console.log('🏁 SEARCH COMPLETE');\n    }\n  }, [searchEmail, currentUserId, friends, incomingRequests, outgoingRequests]);\n\n  useEffect(() => {\n    fetchFriendsData();\n  }, []);\n\n  // Debounced search effect\n  useEffect(() => {\n    const timeoutId = setTimeout(() => {\n      if (searchEmail.trim().length >= 2) {\n        searchUsers();\n      } else {\n        setSearchResults([]);\n        setSearchDebugInfo('');\n      }\n    }, 300);\n\n    return () => clearTimeout(timeoutId);\n  }, [searchEmail, searchUsers]);\n\n  const fetchFriendsData = async () => {\n    try {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) return;\n\n      setCurrentUserId(user.id);\n\n      // Fetch friends\n      const { data: friendsData, error: friendsError } = await supabase\n        .from('friendships')\n        .select('id, friend_id, role, created_at')\n        .eq('user_id', user.id);\n\n      if (friendsError) throw friendsError;\n\n      // Get user details for friends from user_settings table\n      const friendIds = friendsData?.map(f => f.friend_id) || [];\n      let friendUsers: any[] = [];\n      \n      if (friendIds.length > 0) {\n        const { data: userSettings, error: settingsError } = await supabase\n          .from('user_settings')\n          .select('user_id, full_name, profile_photo_url')\n          .in('user_id', friendIds);\n\n        if (settingsError) throw settingsError;\n\n        friendUsers = friendIds.map(friendId => {\n          const settings = userSettings?.find(s => s.user_id === friendId);\n          \n          return {\n            id: friendId,\n            email: 'Email not available', // We can't get email without admin access\n            full_name: settings?.full_name,\n            profile_photo_url: settings?.profile_photo_url\n          };\n        });\n      }\n\n      // Transform friends data\n      const transformedFriends = friendsData?.map(friendship => ({\n        ...friendship,\n        friend: friendUsers.find(u => u.id === friendship.friend_id) || {\n          id: friendship.friend_id,\n          email: 'Email not available',\n          full_name: undefined,\n          profile_photo_url: undefined\n        }\n      })) || [];\n\n      setFriends(transformedFriends);\n\n      // Fetch incoming friend requests\n      const { data: incomingData, error: incomingError } = await supabase\n        .from('friend_requests')\n        .select('id, requester_id, requested_id, status, role, message, created_at')\n        .eq('requested_id', user.id)\n        .eq('status', 'pending');\n\n      if (incomingError) throw incomingError;\n\n      // Get user details for incoming requests\n      const requesterIds = incomingData?.map(r => r.requester_id) || [];\n      let requesterUsers: any[] = [];\n\n      if (requesterIds.length > 0) {\n        const { data: userSettings, error: settingsError } = await supabase\n          .from('user_settings')\n          .select('user_id, full_name, profile_photo_url')\n          .in('user_id', requesterIds);\n\n        if (settingsError) throw settingsError;\n\n        requesterUsers = requesterIds.map(requesterId => {\n          const settings = userSettings?.find(s => s.user_id === requesterId);\n          \n          return {\n            id: requesterId,\n            email: 'Email not available',\n            full_name: settings?.full_name,\n            profile_photo_url: settings?.profile_photo_url\n          };\n        });\n      }\n\n      const transformedIncoming = incomingData?.map(request => ({\n        ...request,\n        requester: requesterUsers.find(u => u.id === request.requester_id)\n      })) || [];\n\n      setIncomingRequests(transformedIncoming);\n\n      // Fetch outgoing friend requests\n      const { data: outgoingData, error: outgoingError } = await supabase\n        .from('friend_requests')\n        .select('id, requester_id, requested_id, status, role, message, created_at')\n        .eq('requester_id', user.id)\n        .eq('status', 'pending');\n\n      if (outgoingError) throw outgoingError;\n\n      // Get user details for outgoing requests\n      const requestedIds = outgoingData?.map(r => r.requested_id) || [];\n      let requestedUsers: any[] = [];\n\n      if (requestedIds.length > 0) {\n        const { data: userSettings, error: settingsError } = await supabase\n          .from('user_settings')\n          .select('user_id, full_name, profile_photo_url')\n          .in('user_id', requestedIds);\n\n        if (settingsError) throw settingsError;\n\n        requestedUsers = requestedIds.map(requestedId => {\n          const settings = userSettings?.find(s => s.user_id === requestedId);\n          \n          return {\n            id: requestedId,\n            email: 'Email not available',\n            full_name: settings?.full_name,\n            profile_photo_url: settings?.profile_photo_url\n          };\n        });\n      }\n\n      const transformedOutgoing = outgoingData?.map(request => ({\n        ...request,\n        requested: requestedUsers.find(u => u.id === request.requested_id)\n      })) || [];\n\n      setOutgoingRequests(transformedOutgoing);\n\n    } catch (err) {\n      console.error('Error fetching friends data:', err);\n      setError('Failed to load friends data');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const sendFriendRequest = async (userId: string) => {\n    try {\n      setError(null);\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) return;\n\n      // Check if a request already exists before attempting to insert\n      let existingRequest = null;\n      try {\n        const { data, error: checkError } = await supabase\n          .from('friend_requests')\n          .select('id')\n          .eq('requester_id', user.id)\n          .eq('requested_id', userId)\n          .single();\n\n        if (checkError && checkError.code !== 'PGRST116') {\n          // PGRST116 means no rows found, which is expected when no duplicate exists\n          throw checkError;\n        }\n\n        existingRequest = data;\n      } catch (innerError: any) {\n        // Only re-throw if it's not the expected \"no rows found\" error\n        if (innerError.code !== 'PGRST116') {\n          throw innerError;\n        }\n        // PGRST116 means no existing request found, which is what we want\n      }\n\n      if (existingRequest) {\n        setError('Friend request already exists');\n        return;\n      }\n\n      const { error } = await supabase\n        .from('friend_requests')\n        .insert({\n          requester_id: user.id,\n          requested_id: userId,\n          role: 'none', // Default to none - basic friendship\n          message: requestMessage.trim() || null\n        });\n\n      if (error) throw error;\n\n      setSuccess('Friend request sent successfully!');\n      setSearchResults([]);\n      setSearchEmail('');\n      setRequestMessage('');\n      setSearchDebugInfo('');\n      fetchFriendsData();\n    } catch (err) {\n      console.error('Error sending friend request:', err);\n      const errorMessage = err instanceof Error ? err.message : 'Unknown error';\n      if (errorMessage.includes('duplicate key value violates unique constraint')) {\n        setError('Friend request already exists');\n      } else {\n        setError('Failed to send friend request');\n      }\n    }\n  };\n\n  const respondToRequest = async (requestId: string, status: 'accepted' | 'declined') => {\n    try {\n      setError(null);\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) return;\n\n      // Update the friend request status\n      const { data: requestData, error: updateError } = await supabase\n        .from('friend_requests')\n        .update({ status })\n        .eq('id', requestId)\n        .select()\n        .single();\n\n      if (updateError) throw updateError;\n\n      if (status === 'accepted') {\n        // Create friendship records for both users with 'none' role (basic friendship)\n        const { error: friendshipError } = await supabase\n          .from('friendships')\n          .insert([\n            {\n              user_id: requestData.requested_id,\n              friend_id: requestData.requester_id,\n              role: 'none' // Default role for the friend\n            },\n            {\n              user_id: requestData.requester_id,\n              friend_id: requestData.requested_id,\n              role: 'none' // Default role for the requester\n            }\n          ]);\n\n        if (friendshipError) throw friendshipError;\n        setSuccess('Friend request accepted!');\n      } else {\n        setSuccess('Friend request declined');\n      }\n\n      fetchFriendsData();\n    } catch (err) {\n      console.error('Error responding to friend request:', err);\n      setError('Failed to respond to friend request');\n    }\n  };\n\n  const removeFriend = async (friendshipId: string) => {\n    try {\n      setError(null);\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) return;\n\n      // Get the friendship to find the reciprocal one\n      const { data: friendship, error: fetchError } = await supabase\n        .from('friendships')\n        .select('friend_id')\n        .eq('id', friendshipId)\n        .single();\n\n      if (fetchError) throw fetchError;\n\n      // Remove both friendship records\n      const { error: deleteError } = await supabase\n        .from('friendships')\n        .delete()\n        .or(`and(user_id.eq.${user.id},friend_id.eq.${friendship.friend_id}),and(user_id.eq.${friendship.friend_id},friend_id.eq.${user.id})`);\n\n      if (deleteError) throw deleteError;\n\n      setSuccess('Friend removed successfully');\n      fetchFriendsData();\n    } catch (err) {\n      console.error('Error removing friend:', err);\n      setError('Failed to remove friend');\n    }\n  };\n\n  const cancelRequest = async (requestId: string) => {\n    try {\n      setError(null);\n      const { error } = await supabase\n        .from('friend_requests')\n        .delete()\n        .eq('id', requestId);\n\n      if (error) throw error;\n\n      setSuccess('Friend request cancelled');\n      fetchFriendsData();\n    } catch (err) {\n      console.error('Error cancelling request:', err);\n      setError('Failed to cancel request');\n    }\n  };\n\n  const updateFriendRole = async (friendshipId: string, newRole: 'none' | 'viewer' | 'administrator') => {\n    try {\n      setError(null);\n      const { error } = await supabase\n        .from('friendships')\n        .update({ role: newRole })\n        .eq('id', friendshipId);\n\n      if (error) throw error;\n\n      setSuccess(`Friend access level updated to ${getRoleLabel(newRole)}`);\n      setEditingFriend(null);\n      fetchFriendsData();\n    } catch (err) {\n      console.error('Error updating friend role:', err);\n      setError('Failed to update friend access level');\n    }\n  };\n\n  const startEditingRole = (friendshipId: string, currentRole: 'none' | 'viewer' | 'administrator') => {\n    setEditingFriend(friendshipId);\n    setEditingRole(currentRole);\n  };\n\n  const cancelEditingRole = () => {\n    setEditingFriend(null);\n    setEditingRole('none');\n  };\n\n  const getRoleIcon = (role: string) => {\n    switch (role) {\n      case 'administrator':\n        return <Shield className=\"h-4 w-4 text-red-500\" />;\n      case 'viewer':\n        return <Eye className=\"h-4 w-4 text-blue-500\" />;\n      case 'none':\n      default:\n        return <MessageCircle className=\"h-4 w-4 text-green-500\" />;\n    }\n  };\n\n  const getRoleLabel = (role: string) => {\n    switch (role) {\n      case 'administrator':\n        return 'Administrator';\n      case 'viewer':\n        return 'Viewer';\n      case 'none':\n      default:\n        return 'Friend';\n    }\n  };\n\n  const getAccessLevelDescription = (role: string) => {\n    switch (role) {\n      case 'administrator':\n        return 'Can view and manage all schedules, events, and profiles';\n      case 'viewer':\n        return 'Can view schedules and events in dashboard and calendar';\n      case 'none':\n      default:\n        return 'Can chat and send messages only';\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center py-8\">\n        <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {error && (\n        <div className=\"bg-red-50 border border-red-200 rounded-md p-4 text-red-700 flex items-center\">\n          <AlertCircle className=\"h-5 w-5 mr-2\" />\n          {error}\n        </div>\n      )}\n\n      {success && (\n        <div className=\"bg-green-50 border border-green-200 rounded-md p-4 text-green-700 flex items-center\">\n          <Check className=\"h-5 w-5 mr-2\" />\n          {success}\n        </div>\n      )}\n\n      {/* Add Friend Section */}\n      <div className=\"bg-gray-50 dark:bg-gray-700 rounded-lg p-4\">\n        <h4 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3 flex items-center\">\n          <UserPlus className=\"h-4 w-4 mr-2\" />\n          Add Friend\n        </h4>\n        \n        <div className=\"space-y-3\">\n          <div className=\"relative\">\n            <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n              <Search className=\"h-4 w-4 text-gray-400\" />\n            </div>\n            <input\n              type=\"text\"\n              value={searchEmail}\n              onChange={(e) => setSearchEmail(e.target.value)}\n              placeholder=\"Start typing a user's name...\"\n              className=\"w-full pl-10 pr-4 py-2 rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-600 dark:text-white text-sm\"\n            />\n            {searching && (\n              <div className=\"absolute inset-y-0 right-0 pr-3 flex items-center\">\n                <div className=\"animate-spin rounded-full h-4 w-4 border-2 border-blue-600 border-t-transparent\" />\n              </div>\n            )}\n          </div>\n\n          {/* Debug Information */}\n          {searchDebugInfo && (\n            <div className=\"text-xs p-2 bg-blue-50 dark:bg-blue-900/50 border border-blue-200 dark:border-blue-800 rounded\">\n              <strong>Debug:</strong> {searchDebugInfo}\n            </div>\n          )}\n\n          <div className=\"text-xs text-gray-500 dark:text-gray-400\">\n            Search results will appear as you type (minimum 2 characters). Search is by user name only.\n          </div>\n\n          {searchResults.length > 0 && (\n            <div className=\"space-y-2\">\n              <div>\n                <input\n                  type=\"text\"\n                  value={requestMessage}\n                  onChange={(e) => setRequestMessage(e.target.value)}\n                  placeholder=\"Optional message with your friend request\"\n                  className=\"w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-600 dark:text-white text-sm\"\n                />\n              </div>\n\n              <div className=\"bg-white dark:bg-gray-600 rounded-md border border-gray-200 dark:border-gray-500 max-h-60 overflow-y-auto\">\n                <div className=\"p-2 bg-green-50 dark:bg-green-900/50 border-b border-green-200 dark:border-green-800\">\n                  <p className=\"text-xs text-green-700 dark:text-green-300\">\n                    ✅ Found {searchResults.length} user(s) matching \"{searchEmail.trim()}\"\n                  </p>\n                </div>\n                {searchResults.map(user => (\n                  <div key={user.id} className=\"flex items-center justify-between p-3 border-b border-gray-100 dark:border-gray-500 last:border-b-0\">\n                    <div className=\"flex items-center flex-1\">\n                      <div className=\"w-8 h-8 rounded-full bg-gray-300 dark:bg-gray-500 flex items-center justify-center mr-3\">\n                        {user.profile_photo_url ? (\n                          <img src={user.profile_photo_url} alt=\"\" className=\"w-8 h-8 rounded-full object-cover\" />\n                        ) : (\n                          <span className=\"text-sm font-medium text-gray-600 dark:text-gray-300\">\n                            {(user.full_name || 'U').charAt(0).toUpperCase()}\n                          </span>\n                        )}\n                      </div>\n                      <div>\n                        <div className=\"text-sm font-medium text-gray-900 dark:text-white\">\n                          {user.full_name || 'No name set'}\n                        </div>\n                        <div className=\"text-xs text-gray-500 dark:text-gray-400\">{user.email}</div>\n                      </div>\n                    </div>\n                    <button\n                      onClick={() => sendFriendRequest(user.id)}\n                      className=\"px-3 py-1 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm flex items-center\"\n                    >\n                      <UserPlus className=\"h-3 w-3 mr-1\" />\n                      Send Request\n                    </button>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {searchEmail.trim().length >= 2 && !searching && searchResults.length === 0 && (\n            <div className=\"text-center py-4 text-gray-500 dark:text-gray-400 bg-white dark:bg-gray-600 rounded-md border border-gray-200 dark:border-gray-500\">\n              <Search className=\"h-6 w-6 mx-auto mb-2 opacity-50\" />\n              <p className=\"text-sm\">No available users found for \"{searchEmail.trim()}\"</p>\n              <p className=\"text-xs\">They may already be your friend, have a pending request, or don't exist</p>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Incoming Friend Requests */}\n      {incomingRequests.length > 0 && (\n        <div>\n          <h4 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3 flex items-center\">\n            <Mail className=\"h-4 w-4 mr-2\" />\n            Incoming Requests ({incomingRequests.length})\n          </h4>\n          <div className=\"space-y-2\">\n            {incomingRequests.map(request => (\n              <div key={request.id} className=\"flex items-center justify-between p-3 bg-blue-50 dark:bg-blue-900/50 rounded-md border border-blue-200 dark:border-blue-800\">\n                <div className=\"flex items-center flex-1\">\n                  <div className=\"w-8 h-8 rounded-full bg-gray-300 dark:bg-gray-500 flex items-center justify-center mr-3\">\n                    {request.requester?.profile_photo_url ? (\n                      <img src={request.requester.profile_photo_url} alt=\"\" className=\"w-8 h-8 rounded-full object-cover\" />\n                    ) : (\n                      <span className=\"text-sm font-medium text-gray-600 dark:text-gray-300\">\n                        {(request.requester?.full_name || 'U').charAt(0).toUpperCase()}\n                      </span>\n                    )}\n                  </div>\n                  <div className=\"flex-1\">\n                    <div className=\"text-sm font-medium text-gray-900 dark:text-white\">\n                      {request.requester?.full_name || 'No name set'}\n                    </div>\n                    <div className=\"text-xs text-gray-500 dark:text-gray-400\">{request.requester?.email || `ID: ${request.requester_id.slice(0, 8)}...`}</div>\n                    <div className=\"text-xs text-gray-600 dark:text-gray-400 mt-1\">\n                      Wants to be your friend\n                    </div>\n                    {request.message && (\n                      <div className=\"text-xs text-gray-600 dark:text-gray-400 mt-1 italic bg-white dark:bg-gray-700 p-2 rounded\">\n                        \"{request.message}\"\n                      </div>\n                    )}\n                  </div>\n                </div>\n                <div className=\"flex space-x-2\">\n                  <button\n                    onClick={() => respondToRequest(request.id, 'accepted')}\n                    className=\"p-1 text-green-600 hover:text-green-700\"\n                    title=\"Accept\"\n                  >\n                    <Check className=\"h-4 w-4\" />\n                  </button>\n                  <button\n                    onClick={() => respondToRequest(request.id, 'declined')}\n                    className=\"p-1 text-red-600 hover:text-red-700\"\n                    title=\"Decline\"\n                  >\n                    <X className=\"h-4 w-4\" />\n                  </button>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Outgoing Friend Requests */}\n      {outgoingRequests.length > 0 && (\n        <div>\n          <h4 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3 flex items-center\">\n            <Clock className=\"h-4 w-4 mr-2\" />\n            Pending Requests ({outgoingRequests.length})\n          </h4>\n          <div className=\"space-y-2\">\n            {outgoingRequests.map(request => (\n              <div key={request.id} className=\"flex items-center justify-between p-3 bg-yellow-50 dark:bg-yellow-900/50 rounded-md border border-yellow-200 dark:border-yellow-800\">\n                <div className=\"flex items-center flex-1\">\n                  <div className=\"w-8 h-8 rounded-full bg-gray-300 dark:bg-gray-500 flex items-center justify-center mr-3\">\n                    {request.requested?.profile_photo_url ? (\n                      <img src={request.requested.profile_photo_url} alt=\"\" className=\"w-8 h-8 rounded-full object-cover\" />\n                    ) : (\n                      <span className=\"text-sm font-medium text-gray-600 dark:text-gray-300\">\n                        {(request.requested?.full_name || 'U').charAt(0).toUpperCase()}\n                      </span>\n                    )}\n                  </div>\n                  <div className=\"flex-1\">\n                    <div className=\"text-sm font-medium text-gray-900 dark:text-white\">\n                      {request.requested?.full_name || 'No name set'}\n                    </div>\n                    <div className=\"text-xs text-gray-500 dark:text-gray-400\">{request.requested?.email || `ID: ${request.requested_id.slice(0, 8)}...`}</div>\n                    <div className=\"text-xs text-gray-600 dark:text-gray-400 mt-1\">\n                      Friend request sent\n                    </div>\n                  </div>\n                </div>\n                <button\n                  onClick={() => cancelRequest(request.id)}\n                  className=\"p-1 text-red-600 hover:text-red-700\"\n                  title=\"Cancel request\"\n                >\n                  <X className=\"h-4 w-4\" />\n                </button>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Friends List with Access Level Management */}\n      <div>\n        <h4 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3 flex items-center\">\n          <Users className=\"h-4 w-4 mr-2\" />\n          Friends ({friends.length})\n        </h4>\n        {friends.length > 0 ? (\n          <div className=\"space-y-2\">\n            {friends.map(friend => (\n              <div key={friend.id} className=\"flex items-center justify-between p-3 bg-white dark:bg-gray-700 rounded-md border border-gray-200 dark:border-gray-600\">\n                <div className=\"flex items-center flex-1\">\n                  <div className=\"w-8 h-8 rounded-full bg-gray-300 dark:bg-gray-500 flex items-center justify-center mr-3\">\n                    {friend.friend.profile_photo_url ? (\n                      <img src={friend.friend.profile_photo_url} alt=\"\" className=\"w-8 h-8 rounded-full object-cover\" />\n                    ) : (\n                      <span className=\"text-sm font-medium text-gray-600 dark:text-gray-300\">\n                        {(friend.friend.full_name || 'U').charAt(0).toUpperCase()}\n                      </span>\n                    )}\n                  </div>\n                  <div className=\"flex-1\">\n                    <div className=\"text-sm font-medium text-gray-900 dark:text-white\">\n                      {friend.friend.full_name || 'No name set'}\n                    </div>\n                    <div className=\"text-xs text-gray-500 dark:text-gray-400\">{friend.friend.email || `ID: ${friend.friend_id.slice(0, 8)}...`}</div>\n                    \n                    {/* Access Level Management */}\n                    {editingFriend === friend.id ? (\n                      <div className=\"mt-2 flex items-center space-x-2\">\n                        <select\n                          value={editingRole}\n                          onChange={(e) => setEditingRole(e.target.value as 'none' | 'viewer' | 'administrator')}\n                          className=\"text-xs border border-gray-300 dark:border-gray-600 rounded px-2 py-1 dark:bg-gray-600 dark:text-white\"\n                        >\n                          <option value=\"none\">Friend (Chat only)</option>\n                          <option value=\"viewer\">Viewer (View schedules)</option>\n                          <option value=\"administrator\">Administrator (Full access)</option>\n                        </select>\n                        <button\n                          onClick={() => updateFriendRole(friend.id, editingRole)}\n                          className=\"p-1 text-green-600 hover:text-green-700\"\n                          title=\"Save\"\n                        >\n                          <Save className=\"h-3 w-3\" />\n                        </button>\n                        <button\n                          onClick={cancelEditingRole}\n                          className=\"p-1 text-gray-400 hover:text-gray-500\"\n                          title=\"Cancel\"\n                        >\n                          <X className=\"h-3 w-3\" />\n                        </button>\n                      </div>\n                    ) : (\n                      <div className=\"mt-1 flex items-center justify-between\">\n                        <div className=\"flex items-center\">\n                          {getRoleIcon(friend.role)}\n                          <div className=\"ml-1\">\n                            <span className=\"text-xs text-gray-600 dark:text-gray-400\">\n                              {getRoleLabel(friend.role)}\n                            </span>\n                            <div className=\"text-xs text-gray-500 dark:text-gray-500\">\n                              {getAccessLevelDescription(friend.role)}\n                            </div>\n                          </div>\n                        </div>\n                        <button\n                          onClick={() => startEditingRole(friend.id, friend.role)}\n                          className=\"p-1 text-gray-400 hover:text-blue-500\"\n                          title=\"Edit access level\"\n                        >\n                          <Edit2 className=\"h-3 w-3\" />\n                        </button>\n                      </div>\n                    )}\n                  </div>\n                </div>\n                <button\n                  onClick={() => removeFriend(friend.id)}\n                  className=\"p-1 text-red-600 hover:text-red-700\"\n                  title=\"Remove friend\"\n                >\n                  <Trash2 className=\"h-4 w-4\" />\n                </button>\n              </div>\n            ))}\n          </div>\n        ) : (\n          <div className=\"text-center py-6 text-gray-500 dark:text-gray-400\">\n            <Users className=\"h-8 w-8 mx-auto mb-2 opacity-50\" />\n            <p className=\"text-sm\">No friends added yet</p>\n            <p className=\"text-xs\">Search for users by name to send friend requests</p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default FriendsManager;","import React from 'react';\nimport { Users } from 'lucide-react';\nimport FriendsManager from '../components/friends/FriendsManager';\n\nconst Friends: React.FC = () => {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center\">\n          <Users className=\"h-8 w-8 text-blue-600 mr-3\" />\n          <div>\n            <h1 className=\"text-2xl font-bold text-gray-900 dark:text-white\">Friends</h1>\n            <p className=\"text-gray-600 dark:text-gray-400 mt-1\">\n              Manage your friends and share your children's schedules and events\n            </p>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"bg-white dark:bg-gray-800 shadow rounded-lg\">\n        <div className=\"p-6\">\n          <div className=\"mb-6\">\n            <h2 className=\"text-lg font-medium text-gray-900 dark:text-white mb-2\">\n              Friends & Sharing\n            </h2>\n            <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n              Add friends to share your children's schedules and events. You can give them viewer or administrator access to control what they can see and do.\n            </p>\n          </div>\n\n          <div className=\"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-6\">\n            <h3 className=\"text-sm font-medium text-blue-800 dark:text-blue-200 mb-2\">\n              Access Levels Explained\n            </h3>\n            <div className=\"space-y-2 text-sm text-blue-700 dark:text-blue-300\">\n              <div className=\"flex items-start\">\n                <span className=\"font-medium mr-2\">💬 Friend:</span>\n                <span>Can chat and send messages only</span>\n              </div>\n              <div className=\"flex items-start\">\n                <span className=\"font-medium mr-2\">👁️ Viewer:</span>\n                <span>Can view schedules and events in dashboard and calendar</span>\n              </div>\n              <div className=\"flex items-start\">\n                <span className=\"font-medium mr-2\">👑 Administrator:</span>\n                <span>Can view and manage all schedules, events, and profiles</span>\n              </div>\n            </div>\n          </div>\n\n          <FriendsManager />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Friends;","/*! Capacitor: https://capacitorjs.com/ - MIT License */\nconst createCapacitorPlatforms = (win) => {\n    const defaultPlatformMap = new Map();\n    defaultPlatformMap.set('web', { name: 'web' });\n    const capPlatforms = win.CapacitorPlatforms || {\n        currentPlatform: { name: 'web' },\n        platforms: defaultPlatformMap,\n    };\n    const addPlatform = (name, platform) => {\n        capPlatforms.platforms.set(name, platform);\n    };\n    const setPlatform = (name) => {\n        if (capPlatforms.platforms.has(name)) {\n            capPlatforms.currentPlatform = capPlatforms.platforms.get(name);\n        }\n    };\n    capPlatforms.addPlatform = addPlatform;\n    capPlatforms.setPlatform = setPlatform;\n    return capPlatforms;\n};\nconst initPlatforms = (win) => (win.CapacitorPlatforms = createCapacitorPlatforms(win));\n/**\n * @deprecated Set `CapacitorCustomPlatform` on the window object prior to runtime executing in the web app instead\n */\nconst CapacitorPlatforms = /*#__PURE__*/ initPlatforms((typeof globalThis !== 'undefined'\n    ? globalThis\n    : typeof self !== 'undefined'\n        ? self\n        : typeof window !== 'undefined'\n            ? window\n            : typeof global !== 'undefined'\n                ? global\n                : {}));\n/**\n * @deprecated Set `CapacitorCustomPlatform` on the window object prior to runtime executing in the web app instead\n */\nconst addPlatform = CapacitorPlatforms.addPlatform;\n/**\n * @deprecated Set `CapacitorCustomPlatform` on the window object prior to runtime executing in the web app instead\n */\nconst setPlatform = CapacitorPlatforms.setPlatform;\n\nconst legacyRegisterWebPlugin = (cap, webPlugin) => {\n    var _a;\n    const config = webPlugin.config;\n    const Plugins = cap.Plugins;\n    if (!(config === null || config === void 0 ? void 0 : config.name)) {\n        // TODO: add link to upgrade guide\n        throw new Error(`Capacitor WebPlugin is using the deprecated \"registerWebPlugin()\" function, but without the config. Please use \"registerPlugin()\" instead to register this web plugin.\"`);\n    }\n    // TODO: add link to upgrade guide\n    console.warn(`Capacitor plugin \"${config.name}\" is using the deprecated \"registerWebPlugin()\" function`);\n    if (!Plugins[config.name] || ((_a = config === null || config === void 0 ? void 0 : config.platforms) === null || _a === void 0 ? void 0 : _a.includes(cap.getPlatform()))) {\n        // Add the web plugin into the plugins registry if there already isn't\n        // an existing one. If it doesn't already exist, that means\n        // there's no existing native implementation for it.\n        // - OR -\n        // If we already have a plugin registered (meaning it was defined in the native layer),\n        // then we should only overwrite it if the corresponding web plugin activates on\n        // a certain platform. For example: Geolocation uses the WebPlugin on Android but not iOS\n        Plugins[config.name] = webPlugin;\n    }\n};\n\nvar ExceptionCode;\n(function (ExceptionCode) {\n    /**\n     * API is not implemented.\n     *\n     * This usually means the API can't be used because it is not implemented for\n     * the current platform.\n     */\n    ExceptionCode[\"Unimplemented\"] = \"UNIMPLEMENTED\";\n    /**\n     * API is not available.\n     *\n     * This means the API can't be used right now because:\n     *   - it is currently missing a prerequisite, such as network connectivity\n     *   - it requires a particular platform or browser version\n     */\n    ExceptionCode[\"Unavailable\"] = \"UNAVAILABLE\";\n})(ExceptionCode || (ExceptionCode = {}));\nclass CapacitorException extends Error {\n    constructor(message, code, data) {\n        super(message);\n        this.message = message;\n        this.code = code;\n        this.data = data;\n    }\n}\nconst getPlatformId = (win) => {\n    var _a, _b;\n    if (win === null || win === void 0 ? void 0 : win.androidBridge) {\n        return 'android';\n    }\n    else if ((_b = (_a = win === null || win === void 0 ? void 0 : win.webkit) === null || _a === void 0 ? void 0 : _a.messageHandlers) === null || _b === void 0 ? void 0 : _b.bridge) {\n        return 'ios';\n    }\n    else {\n        return 'web';\n    }\n};\n\nconst createCapacitor = (win) => {\n    var _a, _b, _c, _d, _e;\n    const capCustomPlatform = win.CapacitorCustomPlatform || null;\n    const cap = win.Capacitor || {};\n    const Plugins = (cap.Plugins = cap.Plugins || {});\n    /**\n     * @deprecated Use `capCustomPlatform` instead, default functions like registerPlugin will function with the new object.\n     */\n    const capPlatforms = win.CapacitorPlatforms;\n    const defaultGetPlatform = () => {\n        return capCustomPlatform !== null\n            ? capCustomPlatform.name\n            : getPlatformId(win);\n    };\n    const getPlatform = ((_a = capPlatforms === null || capPlatforms === void 0 ? void 0 : capPlatforms.currentPlatform) === null || _a === void 0 ? void 0 : _a.getPlatform) || defaultGetPlatform;\n    const defaultIsNativePlatform = () => getPlatform() !== 'web';\n    const isNativePlatform = ((_b = capPlatforms === null || capPlatforms === void 0 ? void 0 : capPlatforms.currentPlatform) === null || _b === void 0 ? void 0 : _b.isNativePlatform) || defaultIsNativePlatform;\n    const defaultIsPluginAvailable = (pluginName) => {\n        const plugin = registeredPlugins.get(pluginName);\n        if (plugin === null || plugin === void 0 ? void 0 : plugin.platforms.has(getPlatform())) {\n            // JS implementation available for the current platform.\n            return true;\n        }\n        if (getPluginHeader(pluginName)) {\n            // Native implementation available.\n            return true;\n        }\n        return false;\n    };\n    const isPluginAvailable = ((_c = capPlatforms === null || capPlatforms === void 0 ? void 0 : capPlatforms.currentPlatform) === null || _c === void 0 ? void 0 : _c.isPluginAvailable) ||\n        defaultIsPluginAvailable;\n    const defaultGetPluginHeader = (pluginName) => { var _a; return (_a = cap.PluginHeaders) === null || _a === void 0 ? void 0 : _a.find(h => h.name === pluginName); };\n    const getPluginHeader = ((_d = capPlatforms === null || capPlatforms === void 0 ? void 0 : capPlatforms.currentPlatform) === null || _d === void 0 ? void 0 : _d.getPluginHeader) || defaultGetPluginHeader;\n    const handleError = (err) => win.console.error(err);\n    const pluginMethodNoop = (_target, prop, pluginName) => {\n        return Promise.reject(`${pluginName} does not have an implementation of \"${prop}\".`);\n    };\n    const registeredPlugins = new Map();\n    const defaultRegisterPlugin = (pluginName, jsImplementations = {}) => {\n        const registeredPlugin = registeredPlugins.get(pluginName);\n        if (registeredPlugin) {\n            console.warn(`Capacitor plugin \"${pluginName}\" already registered. Cannot register plugins twice.`);\n            return registeredPlugin.proxy;\n        }\n        const platform = getPlatform();\n        const pluginHeader = getPluginHeader(pluginName);\n        let jsImplementation;\n        const loadPluginImplementation = async () => {\n            if (!jsImplementation && platform in jsImplementations) {\n                jsImplementation =\n                    typeof jsImplementations[platform] === 'function'\n                        ? (jsImplementation = await jsImplementations[platform]())\n                        : (jsImplementation = jsImplementations[platform]);\n            }\n            else if (capCustomPlatform !== null &&\n                !jsImplementation &&\n                'web' in jsImplementations) {\n                jsImplementation =\n                    typeof jsImplementations['web'] === 'function'\n                        ? (jsImplementation = await jsImplementations['web']())\n                        : (jsImplementation = jsImplementations['web']);\n            }\n            return jsImplementation;\n        };\n        const createPluginMethod = (impl, prop) => {\n            var _a, _b;\n            if (pluginHeader) {\n                const methodHeader = pluginHeader === null || pluginHeader === void 0 ? void 0 : pluginHeader.methods.find(m => prop === m.name);\n                if (methodHeader) {\n                    if (methodHeader.rtype === 'promise') {\n                        return (options) => cap.nativePromise(pluginName, prop.toString(), options);\n                    }\n                    else {\n                        return (options, callback) => cap.nativeCallback(pluginName, prop.toString(), options, callback);\n                    }\n                }\n                else if (impl) {\n                    return (_a = impl[prop]) === null || _a === void 0 ? void 0 : _a.bind(impl);\n                }\n            }\n            else if (impl) {\n                return (_b = impl[prop]) === null || _b === void 0 ? void 0 : _b.bind(impl);\n            }\n            else {\n                throw new CapacitorException(`\"${pluginName}\" plugin is not implemented on ${platform}`, ExceptionCode.Unimplemented);\n            }\n        };\n        const createPluginMethodWrapper = (prop) => {\n            let remove;\n            const wrapper = (...args) => {\n                const p = loadPluginImplementation().then(impl => {\n                    const fn = createPluginMethod(impl, prop);\n                    if (fn) {\n                        const p = fn(...args);\n                        remove = p === null || p === void 0 ? void 0 : p.remove;\n                        return p;\n                    }\n                    else {\n                        throw new CapacitorException(`\"${pluginName}.${prop}()\" is not implemented on ${platform}`, ExceptionCode.Unimplemented);\n                    }\n                });\n                if (prop === 'addListener') {\n                    p.remove = async () => remove();\n                }\n                return p;\n            };\n            // Some flair ✨\n            wrapper.toString = () => `${prop.toString()}() { [capacitor code] }`;\n            Object.defineProperty(wrapper, 'name', {\n                value: prop,\n                writable: false,\n                configurable: false,\n            });\n            return wrapper;\n        };\n        const addListener = createPluginMethodWrapper('addListener');\n        const removeListener = createPluginMethodWrapper('removeListener');\n        const addListenerNative = (eventName, callback) => {\n            const call = addListener({ eventName }, callback);\n            const remove = async () => {\n                const callbackId = await call;\n                removeListener({\n                    eventName,\n                    callbackId,\n                }, callback);\n            };\n            const p = new Promise(resolve => call.then(() => resolve({ remove })));\n            p.remove = async () => {\n                console.warn(`Using addListener() without 'await' is deprecated.`);\n                await remove();\n            };\n            return p;\n        };\n        const proxy = new Proxy({}, {\n            get(_, prop) {\n                switch (prop) {\n                    // https://github.com/facebook/react/issues/20030\n                    case '$$typeof':\n                        return undefined;\n                    case 'toJSON':\n                        return () => ({});\n                    case 'addListener':\n                        return pluginHeader ? addListenerNative : addListener;\n                    case 'removeListener':\n                        return removeListener;\n                    default:\n                        return createPluginMethodWrapper(prop);\n                }\n            },\n        });\n        Plugins[pluginName] = proxy;\n        registeredPlugins.set(pluginName, {\n            name: pluginName,\n            proxy,\n            platforms: new Set([\n                ...Object.keys(jsImplementations),\n                ...(pluginHeader ? [platform] : []),\n            ]),\n        });\n        return proxy;\n    };\n    const registerPlugin = ((_e = capPlatforms === null || capPlatforms === void 0 ? void 0 : capPlatforms.currentPlatform) === null || _e === void 0 ? void 0 : _e.registerPlugin) || defaultRegisterPlugin;\n    // Add in convertFileSrc for web, it will already be available in native context\n    if (!cap.convertFileSrc) {\n        cap.convertFileSrc = filePath => filePath;\n    }\n    cap.getPlatform = getPlatform;\n    cap.handleError = handleError;\n    cap.isNativePlatform = isNativePlatform;\n    cap.isPluginAvailable = isPluginAvailable;\n    cap.pluginMethodNoop = pluginMethodNoop;\n    cap.registerPlugin = registerPlugin;\n    cap.Exception = CapacitorException;\n    cap.DEBUG = !!cap.DEBUG;\n    cap.isLoggingEnabled = !!cap.isLoggingEnabled;\n    // Deprecated props\n    cap.platform = cap.getPlatform();\n    cap.isNative = cap.isNativePlatform();\n    return cap;\n};\nconst initCapacitorGlobal = (win) => (win.Capacitor = createCapacitor(win));\n\nconst Capacitor = /*#__PURE__*/ initCapacitorGlobal(typeof globalThis !== 'undefined'\n    ? globalThis\n    : typeof self !== 'undefined'\n        ? self\n        : typeof window !== 'undefined'\n            ? window\n            : typeof global !== 'undefined'\n                ? global\n                : {});\nconst registerPlugin = Capacitor.registerPlugin;\n/**\n * @deprecated Provided for backwards compatibility for Capacitor v2 plugins.\n * Capacitor v3 plugins should import the plugin directly. This \"Plugins\"\n * export is deprecated in v3, and will be removed in v4.\n */\nconst Plugins = Capacitor.Plugins;\n/**\n * Provided for backwards compatibility. Use the registerPlugin() API\n * instead, and provide the web plugin as the \"web\" implmenetation.\n * For example\n *\n * export const Example = registerPlugin('Example', {\n *   web: () => import('./web').then(m => new m.Example())\n * })\n *\n * @deprecated Deprecated in v3, will be removed from v4.\n */\nconst registerWebPlugin = (plugin) => legacyRegisterWebPlugin(Capacitor, plugin);\n\n/**\n * Base class web plugins should extend.\n */\nclass WebPlugin {\n    constructor(config) {\n        this.listeners = {};\n        this.windowListeners = {};\n        if (config) {\n            // TODO: add link to upgrade guide\n            console.warn(`Capacitor WebPlugin \"${config.name}\" config object was deprecated in v3 and will be removed in v4.`);\n            this.config = config;\n        }\n    }\n    addListener(eventName, listenerFunc) {\n        const listeners = this.listeners[eventName];\n        if (!listeners) {\n            this.listeners[eventName] = [];\n        }\n        this.listeners[eventName].push(listenerFunc);\n        // If we haven't added a window listener for this event and it requires one,\n        // go ahead and add it\n        const windowListener = this.windowListeners[eventName];\n        if (windowListener && !windowListener.registered) {\n            this.addWindowListener(windowListener);\n        }\n        const remove = async () => this.removeListener(eventName, listenerFunc);\n        const p = Promise.resolve({ remove });\n        Object.defineProperty(p, 'remove', {\n            value: async () => {\n                console.warn(`Using addListener() without 'await' is deprecated.`);\n                await remove();\n            },\n        });\n        return p;\n    }\n    async removeAllListeners() {\n        this.listeners = {};\n        for (const listener in this.windowListeners) {\n            this.removeWindowListener(this.windowListeners[listener]);\n        }\n        this.windowListeners = {};\n    }\n    notifyListeners(eventName, data) {\n        const listeners = this.listeners[eventName];\n        if (listeners) {\n            listeners.forEach(listener => listener(data));\n        }\n    }\n    hasListeners(eventName) {\n        return !!this.listeners[eventName].length;\n    }\n    registerWindowListener(windowEventName, pluginEventName) {\n        this.windowListeners[pluginEventName] = {\n            registered: false,\n            windowEventName,\n            pluginEventName,\n            handler: event => {\n                this.notifyListeners(pluginEventName, event);\n            },\n        };\n    }\n    unimplemented(msg = 'not implemented') {\n        return new Capacitor.Exception(msg, ExceptionCode.Unimplemented);\n    }\n    unavailable(msg = 'not available') {\n        return new Capacitor.Exception(msg, ExceptionCode.Unavailable);\n    }\n    async removeListener(eventName, listenerFunc) {\n        const listeners = this.listeners[eventName];\n        if (!listeners) {\n            return;\n        }\n        const index = listeners.indexOf(listenerFunc);\n        this.listeners[eventName].splice(index, 1);\n        // If there are no more listeners for this type of event,\n        // remove the window listener\n        if (!this.listeners[eventName].length) {\n            this.removeWindowListener(this.windowListeners[eventName]);\n        }\n    }\n    addWindowListener(handle) {\n        window.addEventListener(handle.windowEventName, handle.handler);\n        handle.registered = true;\n    }\n    removeWindowListener(handle) {\n        if (!handle) {\n            return;\n        }\n        window.removeEventListener(handle.windowEventName, handle.handler);\n        handle.registered = false;\n    }\n}\n\nconst WebView = /*#__PURE__*/ registerPlugin('WebView');\n/******** END WEB VIEW PLUGIN ********/\n/******** COOKIES PLUGIN ********/\n/**\n * Safely web encode a string value (inspired by js-cookie)\n * @param str The string value to encode\n */\nconst encode = (str) => encodeURIComponent(str)\n    .replace(/%(2[346B]|5E|60|7C)/g, decodeURIComponent)\n    .replace(/[()]/g, escape);\n/**\n * Safely web decode a string value (inspired by js-cookie)\n * @param str The string value to decode\n */\nconst decode = (str) => str.replace(/(%[\\dA-F]{2})+/gi, decodeURIComponent);\nclass CapacitorCookiesPluginWeb extends WebPlugin {\n    async getCookies() {\n        const cookies = document.cookie;\n        const cookieMap = {};\n        cookies.split(';').forEach(cookie => {\n            if (cookie.length <= 0)\n                return;\n            // Replace first \"=\" with CAP_COOKIE to prevent splitting on additional \"=\"\n            let [key, value] = cookie.replace(/=/, 'CAP_COOKIE').split('CAP_COOKIE');\n            key = decode(key).trim();\n            value = decode(value).trim();\n            cookieMap[key] = value;\n        });\n        return cookieMap;\n    }\n    async setCookie(options) {\n        try {\n            // Safely Encoded Key/Value\n            const encodedKey = encode(options.key);\n            const encodedValue = encode(options.value);\n            // Clean & sanitize options\n            const expires = `; expires=${(options.expires || '').replace('expires=', '')}`; // Default is \"; expires=\"\n            const path = (options.path || '/').replace('path=', ''); // Default is \"path=/\"\n            const domain = options.url != null && options.url.length > 0\n                ? `domain=${options.url}`\n                : '';\n            document.cookie = `${encodedKey}=${encodedValue || ''}${expires}; path=${path}; ${domain};`;\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n    }\n    async deleteCookie(options) {\n        try {\n            document.cookie = `${options.key}=; Max-Age=0`;\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n    }\n    async clearCookies() {\n        try {\n            const cookies = document.cookie.split(';') || [];\n            for (const cookie of cookies) {\n                document.cookie = cookie\n                    .replace(/^ +/, '')\n                    .replace(/=.*/, `=;expires=${new Date().toUTCString()};path=/`);\n            }\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n    }\n    async clearAllCookies() {\n        try {\n            await this.clearCookies();\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n    }\n}\nconst CapacitorCookies = registerPlugin('CapacitorCookies', {\n    web: () => new CapacitorCookiesPluginWeb(),\n});\n// UTILITY FUNCTIONS\n/**\n * Read in a Blob value and return it as a base64 string\n * @param blob The blob value to convert to a base64 string\n */\nconst readBlobAsBase64 = async (blob) => new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.onload = () => {\n        const base64String = reader.result;\n        // remove prefix \"data:application/pdf;base64,\"\n        resolve(base64String.indexOf(',') >= 0\n            ? base64String.split(',')[1]\n            : base64String);\n    };\n    reader.onerror = (error) => reject(error);\n    reader.readAsDataURL(blob);\n});\n/**\n * Normalize an HttpHeaders map by lowercasing all of the values\n * @param headers The HttpHeaders object to normalize\n */\nconst normalizeHttpHeaders = (headers = {}) => {\n    const originalKeys = Object.keys(headers);\n    const loweredKeys = Object.keys(headers).map(k => k.toLocaleLowerCase());\n    const normalized = loweredKeys.reduce((acc, key, index) => {\n        acc[key] = headers[originalKeys[index]];\n        return acc;\n    }, {});\n    return normalized;\n};\n/**\n * Builds a string of url parameters that\n * @param params A map of url parameters\n * @param shouldEncode true if you should encodeURIComponent() the values (true by default)\n */\nconst buildUrlParams = (params, shouldEncode = true) => {\n    if (!params)\n        return null;\n    const output = Object.entries(params).reduce((accumulator, entry) => {\n        const [key, value] = entry;\n        let encodedValue;\n        let item;\n        if (Array.isArray(value)) {\n            item = '';\n            value.forEach(str => {\n                encodedValue = shouldEncode ? encodeURIComponent(str) : str;\n                item += `${key}=${encodedValue}&`;\n            });\n            // last character will always be \"&\" so slice it off\n            item.slice(0, -1);\n        }\n        else {\n            encodedValue = shouldEncode ? encodeURIComponent(value) : value;\n            item = `${key}=${encodedValue}`;\n        }\n        return `${accumulator}&${item}`;\n    }, '');\n    // Remove initial \"&\" from the reduce\n    return output.substr(1);\n};\n/**\n * Build the RequestInit object based on the options passed into the initial request\n * @param options The Http plugin options\n * @param extra Any extra RequestInit values\n */\nconst buildRequestInit = (options, extra = {}) => {\n    const output = Object.assign({ method: options.method || 'GET', headers: options.headers }, extra);\n    // Get the content-type\n    const headers = normalizeHttpHeaders(options.headers);\n    const type = headers['content-type'] || '';\n    // If body is already a string, then pass it through as-is.\n    if (typeof options.data === 'string') {\n        output.body = options.data;\n    }\n    // Build request initializers based off of content-type\n    else if (type.includes('application/x-www-form-urlencoded')) {\n        const params = new URLSearchParams();\n        for (const [key, value] of Object.entries(options.data || {})) {\n            params.set(key, value);\n        }\n        output.body = params.toString();\n    }\n    else if (type.includes('multipart/form-data') ||\n        options.data instanceof FormData) {\n        const form = new FormData();\n        if (options.data instanceof FormData) {\n            options.data.forEach((value, key) => {\n                form.append(key, value);\n            });\n        }\n        else {\n            for (const key of Object.keys(options.data)) {\n                form.append(key, options.data[key]);\n            }\n        }\n        output.body = form;\n        const headers = new Headers(output.headers);\n        headers.delete('content-type'); // content-type will be set by `window.fetch` to includy boundary\n        output.headers = headers;\n    }\n    else if (type.includes('application/json') ||\n        typeof options.data === 'object') {\n        output.body = JSON.stringify(options.data);\n    }\n    return output;\n};\n// WEB IMPLEMENTATION\nclass CapacitorHttpPluginWeb extends WebPlugin {\n    /**\n     * Perform an Http request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async request(options) {\n        const requestInit = buildRequestInit(options, options.webFetchExtra);\n        const urlParams = buildUrlParams(options.params, options.shouldEncodeUrlParams);\n        const url = urlParams ? `${options.url}?${urlParams}` : options.url;\n        const response = await fetch(url, requestInit);\n        const contentType = response.headers.get('content-type') || '';\n        // Default to 'text' responseType so no parsing happens\n        let { responseType = 'text' } = response.ok ? options : {};\n        // If the response content-type is json, force the response to be json\n        if (contentType.includes('application/json')) {\n            responseType = 'json';\n        }\n        let data;\n        let blob;\n        switch (responseType) {\n            case 'arraybuffer':\n            case 'blob':\n                blob = await response.blob();\n                data = await readBlobAsBase64(blob);\n                break;\n            case 'json':\n                data = await response.json();\n                break;\n            case 'document':\n            case 'text':\n            default:\n                data = await response.text();\n        }\n        // Convert fetch headers to Capacitor HttpHeaders\n        const headers = {};\n        response.headers.forEach((value, key) => {\n            headers[key] = value;\n        });\n        return {\n            data,\n            headers,\n            status: response.status,\n            url: response.url,\n        };\n    }\n    /**\n     * Perform an Http GET request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async get(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'GET' }));\n    }\n    /**\n     * Perform an Http POST request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async post(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'POST' }));\n    }\n    /**\n     * Perform an Http PUT request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async put(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'PUT' }));\n    }\n    /**\n     * Perform an Http PATCH request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async patch(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'PATCH' }));\n    }\n    /**\n     * Perform an Http DELETE request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async delete(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'DELETE' }));\n    }\n}\nconst CapacitorHttp = registerPlugin('CapacitorHttp', {\n    web: () => new CapacitorHttpPluginWeb(),\n});\n/******** END HTTP PLUGIN ********/\n\nexport { Capacitor, CapacitorCookies, CapacitorException, CapacitorHttp, CapacitorPlatforms, ExceptionCode, Plugins, WebPlugin, WebView, addPlatform, buildRequestInit, registerPlugin, registerWebPlugin, setPlatform };\n//# sourceMappingURL=index.js.map\n","import { registerPlugin } from '@capacitor/core';\nconst App = registerPlugin('App', {\n    web: () => import('./web').then(m => new m.AppWeb()),\n});\nexport * from './definitions';\nexport { App };\n//# sourceMappingURL=index.js.map","export var Style;\n(function (Style) {\n    /**\n     * Light text for dark backgrounds.\n     *\n     * @since 1.0.0\n     */\n    Style[\"Dark\"] = \"DARK\";\n    /**\n     * Dark text for light backgrounds.\n     *\n     * @since 1.0.0\n     */\n    Style[\"Light\"] = \"LIGHT\";\n    /**\n     * The style is based on the device appearance.\n     * If the device is using Dark mode, the statusbar text will be light.\n     * If the device is using Light mode, the statusbar text will be dark.\n     * On Android the default will be the one the app was launched with.\n     *\n     * @since 1.0.0\n     */\n    Style[\"Default\"] = \"DEFAULT\";\n})(Style || (Style = {}));\nexport var Animation;\n(function (Animation) {\n    /**\n     * No animation during show/hide.\n     *\n     * @since 1.0.0\n     */\n    Animation[\"None\"] = \"NONE\";\n    /**\n     * Slide animation during show/hide.\n     * It doesn't work on iOS 15+.\n     *\n     * @deprecated Use Animation.Fade or Animation.None instead.\n     *\n     * @since 1.0.0\n     */\n    Animation[\"Slide\"] = \"SLIDE\";\n    /**\n     * Fade animation during show/hide.\n     *\n     * @since 1.0.0\n     */\n    Animation[\"Fade\"] = \"FADE\";\n})(Animation || (Animation = {}));\n/**\n * @deprecated Use `Animation`.\n * @since 1.0.0\n */\nexport const StatusBarAnimation = Animation;\n/**\n * @deprecated Use `Style`.\n * @since 1.0.0\n */\nexport const StatusBarStyle = Style;\n//# sourceMappingURL=definitions.js.map","import { registerPlugin } from '@capacitor/core';\nconst StatusBar = registerPlugin('StatusBar');\nexport * from './definitions';\nexport { StatusBar };\n//# sourceMappingURL=index.js.map","import { registerPlugin } from '@capacitor/core';\nconst SplashScreen = registerPlugin('SplashScreen', {\n    web: () => import('./web').then(m => new m.SplashScreenWeb()),\n});\nexport * from './definitions';\nexport { SplashScreen };\n//# sourceMappingURL=index.js.map","/// <reference types=\"@capacitor/cli\" />\nexport var KeyboardStyle;\n(function (KeyboardStyle) {\n    /**\n     * Dark keyboard.\n     *\n     * @since 1.0.0\n     */\n    KeyboardStyle[\"Dark\"] = \"DARK\";\n    /**\n     * Light keyboard.\n     *\n     * @since 1.0.0\n     */\n    KeyboardStyle[\"Light\"] = \"LIGHT\";\n    /**\n     * On iOS 13 and newer the keyboard style is based on the device appearance.\n     * If the device is using Dark mode, the keyboard will be dark.\n     * If the device is using Light mode, the keyboard will be light.\n     * On iOS 12 the keyboard will be light.\n     *\n     * @since 1.0.0\n     */\n    KeyboardStyle[\"Default\"] = \"DEFAULT\";\n})(KeyboardStyle || (KeyboardStyle = {}));\nexport var KeyboardResize;\n(function (KeyboardResize) {\n    /**\n     * Only the `body` HTML element will be resized.\n     * Relative units are not affected, because the viewport does not change.\n     *\n     * @since 1.0.0\n     */\n    KeyboardResize[\"Body\"] = \"body\";\n    /**\n     * Only the `ion-app` HTML element will be resized.\n     * Use it only for Ionic Framework apps.\n     *\n     * @since 1.0.0\n     */\n    KeyboardResize[\"Ionic\"] = \"ionic\";\n    /**\n     * The whole native Web View will be resized when the keyboard shows/hides.\n     * This affects the `vh` relative unit.\n     *\n     * @since 1.0.0\n     */\n    KeyboardResize[\"Native\"] = \"native\";\n    /**\n     * Neither the app nor the Web View are resized.\n     *\n     * @since 1.0.0\n     */\n    KeyboardResize[\"None\"] = \"none\";\n})(KeyboardResize || (KeyboardResize = {}));\n//# sourceMappingURL=definitions.js.map","import { registerPlugin } from '@capacitor/core';\nconst Keyboard = registerPlugin('Keyboard');\nexport * from './definitions';\nexport { Keyboard };\n//# sourceMappingURL=index.js.map","import { useEffect, useState } from 'react';\nimport { Capacitor } from '@capacitor/core';\nimport { App } from '@capacitor/app';\nimport { StatusBar, Style } from '@capacitor/status-bar';\nimport { SplashScreen } from '@capacitor/splash-screen';\nimport { Keyboard } from '@capacitor/keyboard';\n\nexport const useCapacitor = () => {\n  const [isNative, setIsNative] = useState(false);\n  const [platform, setPlatform] = useState<string>('web');\n\n  useEffect(() => {\n    const initializeCapacitor = async () => {\n      const native = Capacitor.isNativePlatform();\n      const currentPlatform = Capacitor.getPlatform();\n      \n      setIsNative(native);\n      setPlatform(currentPlatform);\n\n      if (native) {\n        // Configure status bar\n        try {\n          await StatusBar.setStyle({ style: Style.Light });\n          await StatusBar.setBackgroundColor({ color: '#2563eb' });\n        } catch (error) {\n          console.log('StatusBar not available:', error);\n        }\n\n        // Hide splash screen\n        try {\n          await SplashScreen.hide();\n        } catch (error) {\n          console.log('SplashScreen not available:', error);\n        }\n\n        // Handle app state changes\n        App.addListener('appStateChange', ({ isActive }) => {\n          console.log('App state changed. Is active?', isActive);\n        });\n\n        // Handle back button on Android\n        App.addListener('backButton', ({ canGoBack }) => {\n          if (!canGoBack) {\n            App.exitApp();\n          } else {\n            window.history.back();\n          }\n        });\n\n        // Handle keyboard events\n        Keyboard.addListener('keyboardWillShow', info => {\n          console.log('Keyboard will show with height:', info.keyboardHeight);\n        });\n\n        Keyboard.addListener('keyboardDidShow', info => {\n          console.log('Keyboard did show with height:', info.keyboardHeight);\n        });\n\n        Keyboard.addListener('keyboardWillHide', () => {\n          console.log('Keyboard will hide');\n        });\n\n        Keyboard.addListener('keyboardDidHide', () => {\n          console.log('Keyboard did hide');\n        });\n      }\n    };\n\n    initializeCapacitor();\n\n    return () => {\n      if (isNative) {\n        App.removeAllListeners();\n        Keyboard.removeAllListeners();\n      }\n    };\n  }, [isNative]);\n\n  return {\n    isNative,\n    platform,\n    isIOS: platform === 'ios',\n    isAndroid: platform === 'android',\n    isWeb: platform === 'web'\n  };\n};","export var CameraSource;\n(function (CameraSource) {\n    /**\n     * Prompts the user to select either the photo album or take a photo.\n     */\n    CameraSource[\"Prompt\"] = \"PROMPT\";\n    /**\n     * Take a new photo using the camera.\n     */\n    CameraSource[\"Camera\"] = \"CAMERA\";\n    /**\n     * Pick an existing photo from the gallery or photo album.\n     */\n    CameraSource[\"Photos\"] = \"PHOTOS\";\n})(CameraSource || (CameraSource = {}));\nexport var CameraDirection;\n(function (CameraDirection) {\n    CameraDirection[\"Rear\"] = \"REAR\";\n    CameraDirection[\"Front\"] = \"FRONT\";\n})(CameraDirection || (CameraDirection = {}));\nexport var CameraResultType;\n(function (CameraResultType) {\n    CameraResultType[\"Uri\"] = \"uri\";\n    CameraResultType[\"Base64\"] = \"base64\";\n    CameraResultType[\"DataUrl\"] = \"dataUrl\";\n})(CameraResultType || (CameraResultType = {}));\n//# sourceMappingURL=definitions.js.map","import { registerPlugin } from '@capacitor/core';\nconst Camera = registerPlugin('Camera', {\n    web: () => import('./web').then(m => new m.CameraWeb()),\n});\nexport * from './definitions';\nexport { Camera };\n//# sourceMappingURL=index.js.map","import { useState } from 'react';\nimport { Capacitor } from '@capacitor/core';\nimport { Camera, CameraResultType, CameraSource, Photo } from '@capacitor/camera';\n\nexport const useCamera = () => {\n  const [isLoading, setIsLoading] = useState(false);\n\n  const takePhoto = async (): Promise<string | null> => {\n    if (!Capacitor.isNativePlatform()) {\n      // Fallback to web file input\n      return null;\n    }\n\n    setIsLoading(true);\n    try {\n      const photo: Photo = await Camera.getPhoto({\n        quality: 90,\n        allowEditing: true,\n        resultType: CameraResultType.DataUrl,\n        source: CameraSource.Prompt, // Allows user to choose camera or gallery\n        width: 300,\n        height: 300\n      });\n\n      return photo.dataUrl || null;\n    } catch (error) {\n      console.error('Error taking photo:', error);\n      return null;\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const selectFromGallery = async (): Promise<string | null> => {\n    if (!Capacitor.isNativePlatform()) {\n      return null;\n    }\n\n    setIsLoading(true);\n    try {\n      const photo: Photo = await Camera.getPhoto({\n        quality: 90,\n        allowEditing: true,\n        resultType: CameraResultType.DataUrl,\n        source: CameraSource.Photos,\n        width: 300,\n        height: 300\n      });\n\n      return photo.dataUrl || null;\n    } catch (error) {\n      console.error('Error selecting from gallery:', error);\n      return null;\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return {\n    takePhoto,\n    selectFromGallery,\n    isLoading\n  };\n};","import React, { useState } from 'react';\nimport { Camera, Upload, Image } from 'lucide-react';\nimport { useCamera } from '../../hooks/useCamera';\nimport { useCapacitor } from '../../hooks/useCapacitor';\n\ninterface MobilePhotoUploadProps {\n  currentPhotoUrl?: string | null;\n  onPhotoChange: (file: File | string) => void;\n}\n\nconst MobilePhotoUpload: React.FC<MobilePhotoUploadProps> = ({ \n  currentPhotoUrl, \n  onPhotoChange \n}) => {\n  const { takePhoto, selectFromGallery, isLoading } = useCamera();\n  const { isNative } = useCapacitor();\n  const [showOptions, setShowOptions] = useState(false);\n\n  const handleTakePhoto = async () => {\n    const photoDataUrl = await takePhoto();\n    if (photoDataUrl) {\n      onPhotoChange(photoDataUrl);\n    }\n    setShowOptions(false);\n  };\n\n  const handleSelectFromGallery = async () => {\n    const photoDataUrl = await selectFromGallery();\n    if (photoDataUrl) {\n      onPhotoChange(photoDataUrl);\n    }\n    setShowOptions(false);\n  };\n\n  const handleWebUpload = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      onPhotoChange(file);\n    }\n  };\n\n  if (!isNative) {\n    // Web fallback\n    return (\n      <div className=\"relative\">\n        <div className=\"h-32 w-32 rounded-full overflow-hidden bg-gray-100 dark:bg-gray-700\">\n          {currentPhotoUrl ? (\n            <img\n              src={currentPhotoUrl}\n              alt=\"Profile\"\n              className=\"h-full w-full object-cover\"\n            />\n          ) : (\n            <div className=\"h-full w-full flex items-center justify-center text-gray-400 dark:text-gray-500\">\n              <Upload className=\"h-8 w-8\" />\n            </div>\n          )}\n        </div>\n        <label\n          htmlFor=\"photo-upload\"\n          className=\"absolute bottom-0 right-0 bg-white dark:bg-gray-700 rounded-full p-2 shadow-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-600\"\n        >\n          <Camera className=\"h-4 w-4 text-gray-600 dark:text-gray-300\" />\n          <input\n            id=\"photo-upload\"\n            type=\"file\"\n            className=\"hidden\"\n            accept=\"image/*\"\n            onChange={handleWebUpload}\n          />\n        </label>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"relative\">\n      <div className=\"h-32 w-32 rounded-full overflow-hidden bg-gray-100 dark:bg-gray-700\">\n        {currentPhotoUrl ? (\n          <img\n            src={typeof currentPhotoUrl === 'string' && currentPhotoUrl.startsWith('data:') \n              ? currentPhotoUrl \n              : currentPhotoUrl}\n            alt=\"Profile\"\n            className=\"h-full w-full object-cover\"\n          />\n        ) : (\n          <div className=\"h-full w-full flex items-center justify-center text-gray-400 dark:text-gray-500\">\n            <Upload className=\"h-8 w-8\" />\n          </div>\n        )}\n      </div>\n      \n      <button\n        onClick={() => setShowOptions(true)}\n        disabled={isLoading}\n        className=\"absolute bottom-0 right-0 bg-white dark:bg-gray-700 rounded-full p-2 shadow-lg hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50\"\n      >\n        {isLoading ? (\n          <div className=\"animate-spin rounded-full h-4 w-4 border-2 border-blue-600 border-t-transparent\" />\n        ) : (\n          <Camera className=\"h-4 w-4 text-gray-600 dark:text-gray-300\" />\n        )}\n      </button>\n\n      {showOptions && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-end justify-center z-50\">\n          <div className=\"bg-white dark:bg-gray-800 rounded-t-lg w-full max-w-md p-6 space-y-4\">\n            <h3 className=\"text-lg font-medium text-gray-900 dark:text-white text-center\">\n              Choose Photo\n            </h3>\n            \n            <div className=\"space-y-3\">\n              <button\n                onClick={handleTakePhoto}\n                className=\"w-full flex items-center justify-center px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700\"\n              >\n                <Camera className=\"h-5 w-5 mr-2\" />\n                Take Photo\n              </button>\n              \n              <button\n                onClick={handleSelectFromGallery}\n                className=\"w-full flex items-center justify-center px-4 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700\"\n              >\n                <Image className=\"h-5 w-5 mr-2\" />\n                Choose from Gallery\n              </button>\n              \n              <button\n                onClick={() => setShowOptions(false)}\n                className=\"w-full flex items-center justify-center px-4 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700\"\n              >\n                Cancel\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default MobilePhotoUpload;","import React, { useRef, useState, useEffect } from 'react';\nimport { Plus, Upload } from 'lucide-react';\nimport { useCapacitor } from '../hooks/useCapacitor';\nimport MobilePhotoUpload from './mobile/MobilePhotoUpload';\n\ninterface ProfilePhotoUploadProps {\n  currentPhotoUrl?: string | null;\n  onPhotoChange: (file: File | string) => void;\n}\n\nconst ProfilePhotoUpload: React.FC<ProfilePhotoUploadProps> = ({ currentPhotoUrl, onPhotoChange }) => {\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const [previewUrl, setPreviewUrl] = useState<string | undefined>(currentPhotoUrl || undefined);\n  const { isNative } = useCapacitor();\n\n  useEffect(() => {\n    setPreviewUrl(currentPhotoUrl || undefined);\n  }, [currentPhotoUrl]);\n\n  const handleFileChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        setPreviewUrl(reader.result as string);\n      };\n      reader.readAsDataURL(file);\n      onPhotoChange(file);\n    }\n  };\n\n  const handleMobilePhotoChange = (fileOrDataUrl: File | string) => {\n    if (typeof fileOrDataUrl === 'string') {\n      setPreviewUrl(fileOrDataUrl);\n    } else {\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        setPreviewUrl(reader.result as string);\n      };\n      reader.readAsDataURL(fileOrDataUrl);\n    }\n    onPhotoChange(fileOrDataUrl);\n  };\n\n  // Use mobile component for native apps\n  if (isNative) {\n    return (\n      <MobilePhotoUpload \n        currentPhotoUrl={previewUrl}\n        onPhotoChange={handleMobilePhotoChange}\n      />\n    );\n  }\n\n  // Web version\n  return (\n    <div className=\"relative\">\n      <div className=\"h-32 w-32 rounded-full overflow-hidden bg-gray-100 dark:bg-gray-700\">\n        {previewUrl ? (\n          <img\n            src={previewUrl}\n            alt=\"Profile\"\n            className=\"h-full w-full object-cover\"\n          />\n        ) : (\n          <div className=\"h-full w-full flex items-center justify-center text-gray-400 dark:text-gray-500\">\n            <Upload className=\"h-8 w-8\" />\n          </div>\n        )}\n      </div>\n      <label\n        htmlFor=\"photo-upload\"\n        className=\"absolute bottom-0 right-0 bg-white dark:bg-gray-700 rounded-full p-2 shadow-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-600\"\n      >\n        <Plus className=\"h-4 w-4 text-gray-600 dark:text-gray-300\" />\n        <input\n          ref={fileInputRef}\n          id=\"photo-upload\"\n          type=\"file\"\n          className=\"hidden\"\n          accept=\"image/*\"\n          onChange={handleFileChange}\n        />\n      </label>\n      <p className=\"mt-2 text-xs text-gray-500 dark:text-gray-400 text-center\">\n        Click to upload photo\n      </p>\n    </div>\n  );\n};\n\nexport default ProfilePhotoUpload;","import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Bell, Globe, Lock, Mail, Moon, Sun, User, Phone, Calendar as CalendarIcon, Plus, Trash2, Save } from 'lucide-react';\nimport { useTheme } from '../context/ThemeContext';\nimport ProfilePhotoUpload from '../components/ProfilePhotoUpload';\nimport { saveSettings, supabase } from '../lib/supabase';\n\ninterface AdditionalEmail {\n  id: string;\n  email: string;\n}\n\nconst defaultSettings = {\n  full_name: '',\n  phone_number: '',\n  profile_photo_url: null,\n  email_notifications: true,\n  sms_notifications: false,\n  in_app_notifications: true,\n  schedule_updates: true,\n  team_communications: true,\n  all_notifications: true,\n  language: 'en',\n  theme: 'light',\n  additional_emails: [] as string[]\n};\n\nconst Settings: React.FC = () => {\n  const navigate = useNavigate();\n  const { theme, toggleTheme } = useTheme();\n  const [additionalEmails, setAdditionalEmails] = useState<AdditionalEmail[]>([]);\n  const [newEmail, setNewEmail] = useState('');\n  const [hasUnsavedChanges, setHasUnsavedChanges] = useState(false);\n  const [userEmail, setUserEmail] = useState('');\n  const [settings, setSettings] = useState(defaultSettings);\n  const [isSaving, setIsSaving] = useState(false);\n  const [photoFile, setPhotoFile] = useState<File | null>(null);\n\n  useEffect(() => {\n    checkAuth();\n    loadUserData();\n  }, []);\n\n  const checkAuth = async () => {\n    const { data: { session } } = await supabase.auth.getSession();\n    if (!session) {\n      navigate('/auth/signin', { state: { returnTo: '/settings' } });\n    }\n  };\n\n  const loadUserData = async () => {\n    try {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (user?.email) {\n        setUserEmail(user.email);\n      }\n\n      // Load existing settings\n      const { data: settingsData, error } = await supabase\n        .from('user_settings')\n        .select('*')\n        .eq('user_id', user?.id)\n        .maybeSingle();\n\n      if (error && error.code !== 'PGRST116') {\n        console.error('Error loading settings:', error);\n        return;\n      }\n\n      if (settingsData) {\n        setSettings(settingsData);\n        if (settingsData.additional_emails) {\n          setAdditionalEmails(\n            settingsData.additional_emails.map((email: string) => ({\n              id: Math.random().toString(),\n              email\n            }))\n          );\n        }\n      }\n    } catch (error) {\n      console.error('Error loading user data:', error);\n    }\n  };\n  \n  const addEmail = () => {\n    if (newEmail && newEmail.includes('@')) {\n      setAdditionalEmails([...additionalEmails, { id: Date.now().toString(), email: newEmail }]);\n      setNewEmail('');\n      setHasUnsavedChanges(true);\n    }\n  };\n\n  const removeEmail = (id: string) => {\n    setAdditionalEmails(additionalEmails.filter(email => email.id !== id));\n    setHasUnsavedChanges(true);\n  };\n\n  const handlePhotoChange = (file: File) => {\n    setPhotoFile(file);\n    setHasUnsavedChanges(true);\n  };\n\n  const handleSave = async () => {\n    try {\n      setIsSaving(true);\n      const { data: { session } } = await supabase.auth.getSession();\n      if (!session) {\n        navigate('/auth/signin', { state: { returnTo: '/settings' } });\n        return;\n      }\n\n      await saveSettings({\n        ...settings,\n        photo_file: photoFile,\n        additional_emails: additionalEmails.map(email => email.email)\n      });\n      setHasUnsavedChanges(false);\n    } catch (error) {\n      console.error('Failed to save settings:', error);\n      // Here you would typically show an error message to the user\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  const handleInputChange = (field: string, value: any) => {\n    setSettings(prev => ({\n      ...prev,\n      [field]: value\n    }));\n    setHasUnsavedChanges(true);\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <h1 className=\"text-2xl font-bold text-gray-900\">Settings</h1>\n        {hasUnsavedChanges && (\n          <button\n            onClick={handleSave}\n            disabled={isSaving}\n            className=\"flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed\"\n          >\n            <Save className=\"h-4 w-4 mr-2\" />\n            {isSaving ? 'Saving...' : 'Save Changes'}\n          </button>\n        )}\n      </div>\n\n      <div className=\"bg-white dark:bg-gray-800 shadow rounded-lg\">\n        <div className=\"p-6 space-y-6\">\n          <div>\n            <h2 className=\"text-lg font-medium text-gray-900 dark:text-white mb-4\">Account Settings</h2>\n            <div className=\"space-y-4\">\n              <div className=\"flex items-start space-x-4\">\n                <ProfilePhotoUpload \n                  currentPhotoUrl={settings.profile_photo_url} \n                  onPhotoChange={handlePhotoChange} \n                />\n                <div className=\"flex-1\">\n                  <div className=\"space-y-4\">\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">Full Name</label>\n                      <input\n                        type=\"text\"\n                        value={settings.full_name || ''}\n                        onChange={(e) => handleInputChange('full_name', e.target.value)}\n                        className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n                      />\n                    </div>\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">Email</label>\n                      <input\n                        type=\"email\"\n                        value={userEmail}\n                        disabled\n                        className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm bg-gray-50 dark:bg-gray-600 text-gray-500 dark:text-gray-400\"\n                      />\n                      <p className=\"mt-1 text-sm text-gray-500\">This is your primary email address used for authentication.</p>\n                    </div>\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">Phone Number</label>\n                      <input\n                        type=\"tel\"\n                        value={settings.phone_number || ''}\n                        onChange={(e) => handleInputChange('phone_number', e.target.value)}\n                        className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n                      />\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"border-t border-gray-200 dark:border-gray-700 pt-6\">\n                <h2 className=\"text-lg font-medium text-gray-900 dark:text-white mb-4\">Notifications</h2>\n                <div className=\"space-y-4\">\n                  <div>\n                    <h3 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">Notification Methods</h3>\n                    <div className=\"space-y-2\">\n                      <label className=\"flex items-center\">\n                        <input \n                          type=\"checkbox\" \n                          checked={settings.email_notifications}\n                          onChange={(e) => handleInputChange('email_notifications', e.target.checked)}\n                          className=\"rounded text-blue-600 focus:ring-blue-500 dark:bg-gray-700\" \n                        />\n                        <span className=\"ml-2 text-sm text-gray-700 dark:text-gray-300\">Email notifications</span>\n                      </label>\n                      <label className=\"flex items-center\">\n                        <input \n                          type=\"checkbox\" \n                          checked={settings.sms_notifications}\n                          onChange={(e) => handleInputChange('sms_notifications', e.target.checked)}\n                          className=\"rounded text-blue-600 focus:ring-blue-500 dark:bg-gray-700\" \n                        />\n                        <span className=\"ml-2 text-sm text-gray-700 dark:text-gray-300\">SMS notifications</span>\n                      </label>\n                      <label className=\"flex items-center\">\n                        <input \n                          type=\"checkbox\" \n                          checked={settings.in_app_notifications}\n                          onChange={(e) => handleInputChange('in_app_notifications', e.target.checked)}\n                          className=\"rounded text-blue-600 focus:ring-blue-500 dark:bg-gray-700\" \n                        />\n                        <span className=\"ml-2 text-sm text-gray-700 dark:text-gray-300\">In-app notifications</span>\n                      </label>\n                    </div>\n                  </div>\n\n                  <div>\n                    <h3 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">Notification Types</h3>\n                    <div className=\"space-y-2\">\n                      <label className=\"flex items-center\">\n                        <input \n                          type=\"checkbox\" \n                          checked={settings.schedule_updates}\n                          onChange={(e) => handleInputChange('schedule_updates', e.target.checked)}\n                          className=\"rounded text-blue-600 focus:ring-blue-500 dark:bg-gray-700\" \n                        />\n                        <span className=\"ml-2 text-sm text-gray-700 dark:text-gray-300\">Schedule updates</span>\n                      </label>\n                      <label className=\"flex items-center\">\n                        <input \n                          type=\"checkbox\" \n                          checked={settings.team_communications}\n                          onChange={(e) => handleInputChange('team_communications', e.target.checked)}\n                          className=\"rounded text-blue-600 focus:ring-blue-500 dark:bg-gray-700\" \n                        />\n                        <span className=\"ml-2 text-sm text-gray-700 dark:text-gray-300\">Team communications</span>\n                      </label>\n                      <label className=\"flex items-center\">\n                        <input \n                          type=\"checkbox\" \n                          checked={settings.all_notifications}\n                          onChange={(e) => handleInputChange('all_notifications', e.target.checked)}\n                          className=\"rounded text-blue-600 focus:ring-blue-500 dark:bg-gray-700\" \n                        />\n                        <span className=\"ml-2 text-sm text-gray-700 dark:text-gray-300\">All notifications</span>\n                      </label>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"border-t border-gray-200 dark:border-gray-700 pt-4\">\n                <h3 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">Additional Email Addresses</h3>\n                <div className=\"space-y-2\">\n                  {additionalEmails.map(email => (\n                    <div key={email.id} className=\"flex items-center space-x-2\">\n                      <input\n                        type=\"email\"\n                        value={email.email}\n                        readOnly\n                        className=\"flex-1 rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n                      />\n                      <button\n                        onClick={() => removeEmail(email.id)}\n                        className=\"p-2 text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300\"\n                      >\n                        <Trash2 className=\"h-4 w-4\" />\n                      </button>\n                    </div>\n                  ))}\n                  <div className=\"flex items-center space-x-2\">\n                    <input\n                      type=\"email\"\n                      value={newEmail}\n                      onChange={(e) => setNewEmail(e.target.value)}\n                      placeholder=\"Add another email\"\n                      className=\"flex-1 rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n                    />\n                    <button\n                      onClick={addEmail}\n                      className=\"px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600\"\n                    >\n                      Add\n                    </button>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"border-t border-gray-200 dark:border-gray-700 pt-4\">\n                <h3 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">Calendar Sync</h3>\n                <div className=\"space-y-2\">\n                  <button className=\"w-full flex items-center justify-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600\">\n                    <CalendarIcon className=\"h-5 w-5 mr-2 text-red-600 dark:text-red-400\" />\n                    Sync with Google Calendar\n                  </button>\n                  <button className=\"w-full flex items-center justify-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600\">\n                    <CalendarIcon className=\"h-5 w-5 mr-2\" />\n                    Sync with Apple Calendar\n                  </button>\n                </div>\n              </div>\n\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center\">\n                  <Lock className=\"h-5 w-5 text-gray-400 mr-3\" />\n                  <div>\n                    <p className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">Password</p>\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">Update your password</p>\n                  </div>\n                </div>\n                <button \n                  onClick={() => setHasUnsavedChanges(true)}\n                  className=\"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-500\"\n                >\n                  Change\n                </button>\n              </div>\n\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center\">\n                  <Globe className=\"h-5 w-5 text-gray-400 mr-3\" />\n                  <div>\n                    <p className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">Language</p>\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">Choose your preferred language</p>\n                  </div>\n                </div>\n                <select \n                  value={settings.language}\n                  onChange={(e) => handleInputChange('language', e.target.value)}\n                  className=\"text-sm text-gray-700 dark:text-gray-300 border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700\"\n                >\n                  <option value=\"en\">English</option>\n                  <option value=\"es\">Spanish</option>\n                  <option value=\"fr\">French</option>\n                </select>\n              </div>\n\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center\">\n                  <Sun className=\"h-5 w-5 text-gray-400 mr-3\" />\n                  <div>\n                    <p className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">Theme</p>\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">Choose light or dark theme</p>\n                  </div>\n                </div>\n                <div className=\"flex items-center space-x-2\">\n                  <button\n                    onClick={toggleTheme}\n                    className={`p-2 rounded-md ${\n                      theme === 'light'\n                        ? 'bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-300'\n                        : 'text-gray-600 dark:text-gray-300'\n                    }`}\n                  >\n                    <Sun className=\"h-5 w-5\" />\n                  </button>\n                  <button\n                    onClick={toggleTheme}\n                    className={`p-2 rounded-md ${\n                      theme === 'dark'\n                        ? 'bg-gray-700 text-gray-300'\n                        : 'text-gray-600 dark:text-gray-300'\n                    }`}\n                  >\n                    <Moon className=\"h-5 w-5\" />\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Settings;","import React, { useState, useEffect, useRef } from 'react';\nimport { X, Calendar as CalendarIcon } from 'lucide-react';\nimport { supabase } from '../../lib/supabase';\nimport { useLoadScript, Autocomplete } from '@react-google-maps/api';\n\ninterface AddEventModalProps {\n  profileId: string;\n  onClose: () => void;\n  onEventAdded: () => void;\n  sports: { name: string; color: string }[];\n}\n\nconst AddEventModal: React.FC<AddEventModalProps> = ({ profileId, onClose, onEventAdded, sports }) => {\n  const [formData, setFormData] = useState({\n    title: '',\n    description: '',\n    date: '',\n    time: '',\n    duration: '60', // Default duration in minutes\n    location: ''\n  });\n\n  const { isLoaded } = useLoadScript({\n    googleMapsApiKey: import.meta.env.VITE_GOOGLE_MAPS_API_KEY,\n    libraries: ['places']\n  });\n\n  const autocompleteRef = useRef<google.maps.places.Autocomplete | null>(null);\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n\n  const onPlaceSelected = () => {\n    const place = autocompleteRef.current?.getPlace();\n    if (place?.formatted_address) {\n      setFormData(prev => ({\n        ...prev,\n        location: place.formatted_address\n      }));\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    try {\n      const startDateTime = new Date(`${formData.date}T${formData.time}`);\n      const endDateTime = new Date(startDateTime.getTime() + parseInt(formData.duration) * 60000);\n\n      const { error } = await supabase\n        .from('events')\n        .insert({\n          profile_id: profileId,\n          title: formData.title,\n          description: formData.description,\n          start_time: startDateTime.toISOString(),\n          end_time: endDateTime.toISOString(),\n          location: formData.location,\n          sport: sports[0]?.name || 'General',\n          color: sports[0]?.color || '#3B82F6'\n        });\n\n      if (error) throw error;\n\n      onEventAdded();\n      onClose();\n    } catch (err) {\n      console.error('Failed to add event:', err);\n      alert('Failed to add event. Please try again.');\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-auto\">\n        <form onSubmit={handleSubmit}>\n          <div className=\"px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center\">\n            <div className=\"flex items-center\">\n              <CalendarIcon className=\"h-6 w-6 text-blue-600 mr-2\" />\n              <h3 className=\"text-xl font-semibold text-gray-900 dark:text-white\">Add New Event</h3>\n            </div>\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"text-gray-400 hover:text-gray-500 dark:text-gray-300 dark:hover:text-gray-200\"\n            >\n              <X className=\"h-6 w-6\" />\n            </button>\n          </div>\n\n          <div className=\"p-6 space-y-6\">\n            <div>\n              <label htmlFor=\"title\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                Event Title\n              </label>\n              <input\n                type=\"text\"\n                id=\"title\"\n                name=\"title\"\n                value={formData.title}\n                onChange={handleInputChange}\n                required\n                className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n              />\n            </div>\n\n            <div>\n              <label htmlFor=\"description\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                Description\n              </label>\n              <textarea\n                id=\"description\"\n                name=\"description\"\n                value={formData.description}\n                onChange={handleInputChange}\n                rows={3}\n                className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n              />\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div>\n                <label htmlFor=\"date\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                  Date\n                </label>\n                <input\n                  type=\"date\"\n                  id=\"date\"\n                  name=\"date\"\n                  value={formData.date}\n                  onChange={handleInputChange}\n                  required\n                  className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n                />\n              </div>\n\n              <div>\n                <label htmlFor=\"time\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                  Start Time\n                </label>\n                <input\n                  type=\"time\"\n                  id=\"time\"\n                  name=\"time\"\n                  value={formData.time}\n                  onChange={handleInputChange}\n                  required\n                  className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n                />\n              </div>\n            </div>\n\n            <div>\n              <label htmlFor=\"duration\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                Duration (minutes)\n              </label>\n              <select\n                id=\"duration\"\n                name=\"duration\"\n                value={formData.duration}\n                onChange={handleInputChange}\n                className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n              >\n                <option value=\"30\">30 minutes</option>\n                <option value=\"45\">45 minutes</option>\n                <option value=\"60\">1 hour</option>\n                <option value=\"90\">1.5 hours</option>\n                <option value=\"120\">2 hours</option>\n                <option value=\"180\">3 hours</option>\n              </select>\n            </div>\n\n            <div>\n              <label htmlFor=\"location\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                Location\n              </label>\n              {isLoaded ? (\n                <Autocomplete\n                  onLoad={autocomplete => {\n                    autocompleteRef.current = autocomplete;\n                  }}\n                  onPlaceChanged={onPlaceSelected}\n                  options={{ types: ['establishment', 'geocode'] }}\n                >\n                  <input\n                    type=\"text\"\n                    id=\"location\"\n                    name=\"location\"\n                    value={formData.location}\n                    onChange={handleInputChange}\n                    placeholder=\"Start typing to search locations...\"\n                    className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n                  />\n                </Autocomplete>\n              ) : (\n                <input\n                  type=\"text\"\n                  id=\"location\"\n                  name=\"location\"\n                  value={formData.location}\n                  onChange={handleInputChange}\n                  placeholder=\"Loading places search...\"\n                  className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n                  disabled\n                />\n              )}\n            </div>\n          </div>\n\n          <div className=\"px-6 py-4 bg-gray-50 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-600 flex justify-end space-x-3\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700\"\n            >\n              Cancel\n            </button>\n            <button\n              type=\"submit\"\n              className=\"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n            >\n              Add Event\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default AddEventModal;","import React, { useState, useEffect } from 'react';\nimport { supabase } from '../../lib/supabase';\nimport { Check, X, RefreshCw } from 'lucide-react';\nimport { TeamSnapService } from '../../services/teamsnap';\n\ninterface Team {\n  id: string;\n  platform: string;\n  team_id: string;\n  team_name: string;\n  sport: string;\n}\n\ninterface TeamMappingProps {\n  profileId: string;\n  onClose: () => void;\n}\n\nconst TeamMapping: React.FC<TeamMappingProps> = ({ profileId, onClose }) => {\n  const [teams, setTeams] = useState<Team[]>([]);\n  const [selectedTeams, setSelectedTeams] = useState<string[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [syncing, setSyncing] = useState<string | null>(null);\n\n  useEffect(() => {\n    const fetchTeams = async () => {\n      try {\n        // Get all platform teams\n        const { data: platformTeams, error: platformError } = await supabase\n          .from('platform_teams')\n          .select('*');\n\n        if (platformError) throw platformError;\n\n        // Get currently mapped teams for this profile\n        const { data: profileTeams, error: profileError } = await supabase\n          .from('profile_teams')\n          .select('platform_team_id')\n          .eq('profile_id', profileId);\n\n        if (profileError) throw profileError;\n\n        setTeams(platformTeams);\n        setSelectedTeams(profileTeams.map(pt => pt.platform_team_id));\n      } catch (error) {\n        console.error('Error fetching teams:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchTeams();\n  }, [profileId]);\n\n  const handleSave = async () => {\n    try {\n      setSaving(true);\n\n      // Delete existing mappings\n      await supabase\n        .from('profile_teams')\n        .delete()\n        .eq('profile_id', profileId);\n\n      // Insert new mappings\n      if (selectedTeams.length > 0) {\n        const { error } = await supabase\n          .from('profile_teams')\n          .insert(\n            selectedTeams.map(teamId => ({\n              profile_id: profileId,\n              platform_team_id: teamId\n            }))\n          );\n\n        if (error) throw error;\n      }\n\n      // Now sync events for TeamSnap teams\n      for (const teamId of selectedTeams) {\n        const team = teams.find(t => t.id === teamId);\n        if (team && team.platform === 'TeamSnap') {\n          try {\n            setSyncing(teamId);\n            \n            // We need to create a TeamSnap service instance, but we don't have the access token\n            // For now, we'll just show a message that events will be synced when the user refreshes\n            console.log(`TeamSnap team ${team.team_name} mapped. Events will be synced on next refresh.`);\n          } catch (syncError) {\n            console.error(`Error syncing events for team ${team.team_name}:`, syncError);\n          }\n        }\n      }\n\n      setSyncing(null);\n      onClose();\n    } catch (error) {\n      console.error('Error saving team mappings:', error);\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const toggleTeam = (teamId: string) => {\n    setSelectedTeams(prev =>\n      prev.includes(teamId)\n        ? prev.filter(id => id !== teamId)\n        : [...prev, teamId]\n    );\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-48\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  const groupedTeams = teams.reduce((acc, team) => {\n    if (!acc[team.platform]) {\n      acc[team.platform] = [];\n    }\n    acc[team.platform].push(team);\n    return acc;\n  }, {} as Record<string, Team[]>);\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-auto\">\n        <div className=\"px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center\">\n          <h3 className=\"text-xl font-semibold text-gray-900 dark:text-white\">Map Teams</h3>\n          <button\n            onClick={onClose}\n            className=\"text-gray-400 hover:text-gray-500 dark:text-gray-300 dark:hover:text-gray-200\"\n          >\n            <X className=\"h-6 w-6\" />\n          </button>\n        </div>\n\n        <div className=\"p-6 space-y-6\">\n          {Object.entries(groupedTeams).map(([platform, platformTeams]) => (\n            <div key={platform}>\n              <h4 className=\"text-lg font-medium text-gray-900 dark:text-white mb-4\">{platform}</h4>\n              <div className=\"space-y-3\">\n                {platformTeams.map(team => (\n                  <label\n                    key={team.id}\n                    className={`flex items-center p-4 rounded-lg border ${\n                      selectedTeams.includes(team.id)\n                        ? 'border-blue-500 bg-blue-50 dark:bg-blue-900/50'\n                        : 'border-gray-200 dark:border-gray-700'\n                    } cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 relative`}\n                  >\n                    <input\n                      type=\"checkbox\"\n                      className=\"sr-only\"\n                      checked={selectedTeams.includes(team.id)}\n                      onChange={() => toggleTeam(team.id)}\n                    />\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center justify-between\">\n                        <div>\n                          <h5 className=\"text-sm font-medium text-gray-900 dark:text-white\">\n                            {team.team_name}\n                          </h5>\n                          <p className=\"text-sm text-gray-500 dark:text-gray-400\">\n                            {team.sport}\n                          </p>\n                        </div>\n                        <div className=\"flex items-center space-x-2\">\n                          {syncing === team.id && (\n                            <RefreshCw className=\"h-4 w-4 text-blue-600 animate-spin\" />\n                          )}\n                          {selectedTeams.includes(team.id) && (\n                            <Check className=\"h-5 w-5 text-blue-600\" />\n                          )}\n                        </div>\n                      </div>\n                    </div>\n                  </label>\n                ))}\n              </div>\n            </div>\n          ))}\n\n          {teams.length === 0 && (\n            <div className=\"text-center py-8\">\n              <p className=\"text-gray-500 dark:text-gray-400\">\n                No teams available. Connect to platforms to import teams.\n              </p>\n            </div>\n          )}\n        </div>\n\n        <div className=\"px-6 py-4 bg-gray-50 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-600 flex justify-end space-x-3\">\n          <button\n            onClick={onClose}\n            className=\"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700\"\n          >\n            Cancel\n          </button>\n          <button\n            onClick={handleSave}\n            disabled={saving || syncing !== null}\n            className=\"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center\"\n          >\n            {saving ? (\n              <>\n                <RefreshCw className=\"h-4 w-4 mr-2 animate-spin\" />\n                Saving...\n              </>\n            ) : (\n              'Save Changes'\n            )}\n          </button>\n        </div>\n\n        {selectedTeams.some(teamId => teams.find(t => t.id === teamId)?.platform === 'TeamSnap') && (\n          <div className=\"px-6 py-3 bg-blue-50 dark:bg-blue-900/50 border-t border-blue-200 dark:border-blue-800\">\n            <p className=\"text-sm text-blue-800 dark:text-blue-200\">\n              <strong>Note:</strong> TeamSnap events will be synced when you refresh the team connection or manually sync events.\n            </p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default TeamMapping;","import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport AddEventModal from '../components/events/AddEventModal';\nimport EventModal from '../components/events/EventModal';\nimport { Filter, Calendar, LayoutList, Plus, Share2, MapPin, Clock, Pencil, Trash2, AlertTriangle, X, Upload, Users, ChevronLeft, ChevronRight, Crown } from 'lucide-react';\nimport { useProfiles } from '../context/ProfilesContext';\nimport { Child, Event } from '../types';\nimport { supabase } from '../lib/supabase';\nimport TeamMapping from '../components/teams/TeamMapping';\nimport MonthView from '../components/calendar/MonthView';\nimport WeekView from '../components/calendar/WeekView';\nimport DayView from '../components/calendar/DayView';\nimport AgendaView from '../components/calendar/AgendaView';\n\nconst ChildProfile: React.FC = () => {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const { getProfile, deleteProfile, updateProfile } = useProfiles();\n  const [child, setChild] = useState<Child | null>(null);\n  const [events, setEvents] = useState<Event[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [showAddEventModal, setShowAddEventModal] = useState(false);\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\n  const [showEditModal, setShowEditModal] = useState(false);\n  const [showTeamMapping, setShowTeamMapping] = useState(false);\n  const [filterOpen, setFilterOpen] = useState(false);\n  const [view, setView] = useState('month');\n  const [selectedSports, setSelectedSports] = useState<string[]>([]);\n  const [photoFile, setPhotoFile] = useState<File | null>(null);\n  const [photoPreview, setPhotoPreview] = useState<string | null>(null);\n  const [currentDate, setCurrentDate] = useState(new Date());\n  const [selectedEvent, setSelectedEvent] = useState<Event | null>(null);\n  const [formData, setFormData] = useState({\n    name: '',\n    age: '',\n    color: '#3B82F6',\n    notes: ''\n  });\n\n  const colorOptions = [\n    { name: 'Blue', value: '#3B82F6' },\n    { name: 'Red', value: '#EF4444' },\n    { name: 'Green', value: '#10B981' },\n    { name: 'Yellow', value: '#F59E0B' },\n    { name: 'Purple', value: '#8B5CF6' },\n    { name: 'Pink', value: '#EC4899' },\n    { name: 'Indigo', value: '#6366F1' },\n    { name: 'Teal', value: '#14B8A6' },\n    { name: 'Orange', value: '#F97316' },\n    { name: 'Cyan', value: '#06B6D4' },\n    { name: 'Lime', value: '#84CC16' },\n    { name: 'Rose', value: '#F43F5E' }\n  ];\n\n  const availableSports = [\n    { name: 'Soccer', color: '#10B981' },\n    { name: 'Baseball', color: '#F59E0B' },\n    { name: 'Basketball', color: '#EF4444' },\n    { name: 'Swimming', color: '#3B82F6' },\n    { name: 'Tennis', color: '#8B5CF6' },\n    { name: 'Volleyball', color: '#EC4899' },\n  ];\n\n  useEffect(() => {\n    const fetchProfile = async () => {\n      if (id) {\n        try {\n          const profile = await getProfile(id);\n          setChild(profile);\n          setFormData({\n            name: profile.name,\n            age: profile.age.toString(),\n            color: profile.color,\n            notes: profile.notes || ''\n          });\n          setSelectedSports(profile.sports.map(sport => sport.name));\n          setPhotoPreview(profile.photo_url || null);\n\n          // Fetch events for this profile\n          const { data: eventData, error: eventError } = await supabase\n            .from('events')\n            .select('*')\n            .eq('profile_id', id)\n            .order('start_time', { ascending: true });\n\n          if (eventError) throw eventError;\n\n          const formattedEvents = eventData.map(event => ({\n            ...event,\n            startTime: new Date(event.start_time),\n            endTime: new Date(event.end_time),\n            child: profile,\n            platformIcon: Calendar\n          }));\n\n          setEvents(formattedEvents);\n        } catch (error) {\n          console.error('Error fetching profile:', error);\n        } finally {\n          setLoading(false);\n        }\n      }\n    };\n\n    fetchProfile();\n  }, [id, getProfile]);\n\n  const handleEventAdded = () => {\n    window.location.reload();\n  };\n\n  const handleEdit = () => {\n    setShowEditModal(true);\n  };\n\n  const handleDelete = async () => {\n    try {\n      if (id) {\n        await deleteProfile(id);\n        navigate('/profiles');\n      }\n    } catch (error) {\n      console.error('Error deleting profile:', error);\n    }\n  };\n\n  const handlePhotoChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      setPhotoFile(file);\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        setPhotoPreview(reader.result as string);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n\n  const handleEditSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!id || !child) return;\n\n    try {\n      let photoUrl = child.photo_url;\n      if (photoFile) {\n        const fileExt = photoFile.name.split('.').pop();\n        const fileName = `${Math.random()}.${fileExt}`;\n        const { data: uploadData, error: uploadError } = await supabase.storage\n          .from('profile-photos')\n          .upload(fileName, photoFile);\n\n        if (uploadError) throw uploadError;\n\n        const { data: { publicUrl } } = supabase.storage\n          .from('profile-photos')\n          .getPublicUrl(fileName);\n\n        photoUrl = publicUrl;\n      }\n\n      await updateProfile(id, {\n        name: formData.name,\n        age: parseInt(formData.age),\n        color: formData.color,\n        notes: formData.notes,\n        photo_url: photoUrl,\n        sports: selectedSports.map(sport => {\n          const sportData = availableSports.find(s => s.name === sport);\n          return {\n            name: sport,\n            color: sportData?.color || '#000000'\n          };\n        })\n      });\n\n      // Refresh the profile data\n      const updatedProfile = await getProfile(id);\n      setChild(updatedProfile);\n      setShowEditModal(false);\n    } catch (err) {\n      console.error('Failed to update profile:', err);\n    }\n  };\n\n  // Calendar navigation functions\n  const navigatePrevious = () => {\n    const newDate = new Date(currentDate);\n    switch (view) {\n      case 'month':\n        newDate.setMonth(newDate.getMonth() - 1);\n        break;\n      case 'week':\n        newDate.setDate(newDate.getDate() - 7);\n        break;\n      case 'day':\n        newDate.setDate(newDate.getDate() - 1);\n        break;\n    }\n    setCurrentDate(newDate);\n  };\n  \n  const navigateNext = () => {\n    const newDate = new Date(currentDate);\n    switch (view) {\n      case 'month':\n        newDate.setMonth(newDate.getMonth() + 1);\n        break;\n      case 'week':\n        newDate.setDate(newDate.getDate() + 7);\n        break;\n      case 'day':\n        newDate.setDate(newDate.getDate() + 1);\n        break;\n    }\n    setCurrentDate(newDate);\n  };\n  \n  const navigateToday = () => {\n    setCurrentDate(new Date());\n  };\n\n  const renderTitle = () => {\n    const options: Intl.DateTimeFormatOptions = { \n      year: 'numeric', \n    };\n    \n    switch (view) {\n      case 'month':\n        options.month = 'long';\n        break;\n      case 'week':\n        options.month = 'short';\n        options.day = 'numeric';\n        // Add end of week date\n        const endOfWeek = new Date(currentDate);\n        endOfWeek.setDate(currentDate.getDate() + 6);\n        return `${currentDate.toLocaleDateString('en-US', { month: 'short', day: 'numeric' })} - ${endOfWeek.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })}`;\n      case 'day':\n        options.weekday = 'long';\n        options.month = 'long';\n        options.day = 'numeric';\n        break;\n    }\n    \n    return currentDate.toLocaleDateString('en-US', options);\n  };\n\n  const renderCalendarView = () => {\n    switch (view) {\n      case 'month':\n        return <MonthView currentDate={currentDate} events={events} />;\n      case 'week':\n        return <WeekView currentDate={currentDate} events={events} />;\n      case 'day':\n        return <DayView currentDate={currentDate} events={events} />;\n      case 'agenda':\n        return <AgendaView currentDate={currentDate} events={events} />;\n      default:\n        return <MonthView currentDate={currentDate} events={events} />;\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  if (!child) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <p className=\"text-gray-500 dark:text-gray-400\">Profile not found</p>\n      </div>\n    );\n  }\n\n  const upcomingEvents = events\n    .filter(event => event.startTime >= new Date())\n    .sort((a, b) => a.startTime.getTime() - b.startTime.getTime())\n    .slice(0, 5);\n\n  const isFriendProfile = !child.isOwnProfile;\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Profile Header */}\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center\">\n            <div className=\"h-20 w-20 rounded-full overflow-hidden flex items-center justify-center relative\">\n              {child.photo_url ? (\n                <img \n                  src={child.photo_url} \n                  alt={child.name}\n                  className=\"h-full w-full object-cover\"\n                />\n              ) : (\n                <div\n                  className=\"h-full w-full flex items-center justify-center text-white text-3xl font-bold\"\n                  style={{ backgroundColor: child.color }}\n                >\n                  {child.name.charAt(0)}\n                </div>\n              )}\n              {isFriendProfile && (\n                <div className=\"absolute -top-1 -right-1 w-6 h-6 bg-yellow-500 rounded-full flex items-center justify-center\">\n                  <Crown className=\"h-3 w-3 text-white\" />\n                </div>\n              )}\n            </div>\n            <div className=\"ml-6\">\n              <div className=\"flex items-center space-x-2\">\n                <h1 className=\"text-2xl font-bold text-gray-900 dark:text-white\">{child.name}</h1>\n                {isFriendProfile && (\n                  <span className=\"bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded-full font-medium\">\n                    {child.ownerName}'s child\n                  </span>\n                )}\n              </div>\n              <div className=\"flex items-center mt-2 space-x-2\">\n                {child.sports.map((sport, index) => (\n                  <span\n                    key={index}\n                    className=\"px-3 py-1 rounded-full text-sm\"\n                    style={{ \n                      backgroundColor: sport.color + '20',\n                      color: sport.color\n                    }}\n                  >\n                    {sport.name}\n                  </span>\n                ))}\n              </div>\n              {isFriendProfile && (\n                <div className=\"mt-2 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-2\">\n                  <div className=\"flex items-center text-yellow-800 dark:text-yellow-200\">\n                    <Crown className=\"h-4 w-4 mr-2\" />\n                    <span className=\"text-xs font-medium\">Administrator Access</span>\n                  </div>\n                  <p className=\"text-xs text-yellow-700 dark:text-yellow-300 mt-1\">\n                    You have full management access to this profile\n                  </p>\n                </div>\n              )}\n            </div>\n          </div>\n          <div className=\"flex space-x-2\">\n            <button\n              onClick={() => setShowTeamMapping(true)}\n              className=\"p-2 text-gray-400 hover:text-blue-500 dark:text-gray-500 dark:hover:text-blue-400 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700\"\n              title=\"Map teams\"\n            >\n              <Users className=\"h-5 w-5\" />\n            </button>\n            <button\n              onClick={handleEdit}\n              className=\"p-2 text-gray-400 hover:text-blue-500 dark:text-gray-500 dark:hover:text-blue-400 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700\"\n              title=\"Edit profile\"\n            >\n              <Pencil className=\"h-5 w-5\" />\n            </button>\n            <button\n              onClick={() => setShowDeleteModal(true)}\n              className=\"p-2 text-gray-400 hover:text-red-500 dark:text-gray-500 dark:hover:text-red-400 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700\"\n              title=\"Delete profile\"\n            >\n              <Trash2 className=\"h-5 w-5\" />\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Upcoming Events */}\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm\">\n        <div className=\"px-6 py-4 border-b border-gray-200 dark:border-gray-700\">\n          <h2 className=\"text-lg font-medium text-gray-900 dark:text-white\">Upcoming Events</h2>\n        </div>\n        <div className=\"divide-y divide-gray-200 dark:divide-gray-700\">\n          {upcomingEvents.map((event) => (\n            <div \n              key={event.id} \n              className=\"p-4 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer\"\n              onClick={() => setSelectedEvent(event)}\n            >\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center space-x-2\">\n                    <span \n                      className=\"w-2 h-2 rounded-full\"\n                      style={{ backgroundColor: event.color }}\n                    ></span>\n                    <span className=\"text-sm text-gray-500 dark:text-gray-400\">{event.sport}</span>\n                  </div>\n                  <h3 className=\"text-base font-medium text-gray-900 dark:text-white mt-1\">{event.title}</h3>\n                  <div className=\"mt-1 space-y-1\">\n                    <div className=\"flex items-center text-sm text-gray-500 dark:text-gray-400\">\n                      <Clock className=\"h-4 w-4 mr-1\" />\n                      {event.startTime.toLocaleString()} - {event.endTime.toLocaleTimeString()}\n                    </div>\n                    {event.location && (\n                      <div className=\"flex items-center text-sm text-gray-500 dark:text-gray-400\">\n                        <MapPin className=\"h-4 w-4 mr-1\" />\n                        {event.location}\n                      </div>\n                    )}\n                  </div>\n                </div>\n                <button\n                  className=\"p-2 text-gray-400 hover:text-gray-500 dark:text-gray-500 dark:hover:text-gray-400\"\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    // Share functionality\n                  }}\n                >\n                  <Share2 className=\"h-5 w-5\" />\n                </button>\n              </div>\n            </div>\n          ))}\n          {upcomingEvents.length === 0 && (\n            <div className=\"p-6 text-center\">\n              <p className=\"text-gray-500 dark:text-gray-400\">No upcoming events</p>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Calendar Section */}\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm\">\n        <div className=\"p-4 border-b border-gray-200 dark:border-gray-700\">\n          <div className=\"flex items-center justify-between flex-wrap gap-4\">\n            <div className=\"flex items-center space-x-4\">\n              {/* Calendar Navigation */}\n              <div className=\"flex items-center space-x-2\">\n                <button\n                  onClick={navigatePrevious}\n                  className=\"p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700\"\n                >\n                  <ChevronLeft className=\"h-5 w-5 text-gray-500 dark:text-gray-400\" />\n                </button>\n                <button\n                  onClick={navigateToday}\n                  className=\"px-3 py-1 text-sm bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600\"\n                >\n                  Today\n                </button>\n                <button\n                  onClick={navigateNext}\n                  className=\"p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700\"\n                >\n                  <ChevronRight className=\"h-5 w-5 text-gray-500 dark:text-gray-400\" />\n                </button>\n                <h2 className=\"text-lg font-semibold text-gray-700 dark:text-gray-300 ml-2\">\n                  {renderTitle()}\n                </h2>\n              </div>\n\n              <button\n                onClick={() => setFilterOpen(!filterOpen)}\n                className=\"flex items-center px-3 py-1.5 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600 text-sm\"\n              >\n                <Filter className=\"h-4 w-4 mr-1\" />\n                Filter\n              </button>\n              <div className=\"bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md p-1 flex\">\n                <button\n                  onClick={() => setView('month')}\n                  className={`p-1 rounded ${\n                    view === 'month' \n                      ? 'bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-400' \n                      : 'text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-600'\n                  }`}\n                  title=\"Month view\"\n                >\n                  <Calendar className=\"h-5 w-5\" />\n                </button>\n                <button\n                  onClick={() => setView('agenda')}\n                  className={`p-1 rounded ${\n                    view === 'agenda' \n                      ? 'bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-400' \n                      : 'text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-600'\n                  }`}\n                  title=\"List view\"\n                >\n                  <LayoutList className=\"h-5 w-5\" />\n                </button>\n              </div>\n            </div>\n            <button\n              onClick={() => setShowAddEventModal(true)}\n              className={`px-4 py-2 text-white rounded-md hover:opacity-90 flex items-center ${\n                isFriendProfile ? 'bg-yellow-600 hover:bg-yellow-700' : 'bg-blue-600 hover:bg-blue-700'\n              }`}\n            >\n              <Plus className=\"h-5 w-5 mr-2\" />\n              Add Event\n            </button>\n          </div>\n        </div>\n        \n        <div className=\"h-[600px] overflow-auto\">\n          {renderCalendarView()}\n        </div>\n      </div>\n\n      {/* Modals */}\n      {showAddEventModal && (\n        <AddEventModal\n          profileId={child.id}\n          onClose={() => setShowAddEventModal(false)}\n          onEventAdded={handleEventAdded}\n          sports={child.sports}\n        />\n      )}\n\n      {selectedEvent && (\n        <EventModal \n          event={selectedEvent} \n          onClose={() => setSelectedEvent(null)} \n        />\n      )}\n\n      {showDeleteModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4\">\n            <div className=\"flex items-center justify-center text-red-600 dark:text-red-400 mb-4\">\n              <AlertTriangle className=\"h-12 w-12\" />\n            </div>\n            <h3 className=\"text-lg font-medium text-center text-gray-900 dark:text-white mb-2\">Delete Profile</h3>\n            <p className=\"text-center text-gray-500 dark:text-gray-400 mb-6\">\n              Are you sure you want to delete {child.name}'s profile? This action cannot be undone.\n            </p>\n            <div className=\"flex justify-center space-x-3\">\n              <button\n                onClick={() => setShowDeleteModal(false)}\n                className=\"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={handleDelete}\n                className=\"px-4 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-red-600 hover:bg-red-700\"\n              >\n                Delete Profile\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {showEditModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-auto\">\n            <form onSubmit={handleEditSubmit}>\n              <div className=\"px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center\">\n                <h3 className=\"text-xl font-semibold text-gray-900 dark:text-white\">\n                  {isFriendProfile ? (\n                    <div className=\"flex items-center\">\n                      <span>Edit Profile</span>\n                      <span className=\"ml-2 bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded-full font-medium\">\n                        {child.ownerName}'s child\n                      </span>\n                    </div>\n                  ) : (\n                    \"Edit Profile\"\n                  )}\n                </h3>\n                <button\n                  type=\"button\"\n                  onClick={() => setShowEditModal(false)}\n                  className=\"text-gray-400 hover:text-gray-500 dark:text-gray-300 dark:hover:text-gray-200\"\n                >\n                  <X className=\"h-6 w-6\" />\n                </button>\n              </div>\n\n              <div className=\"p-6 space-y-6\">\n                <div className=\"flex items-center space-x-6\">\n                  <div className=\"flex-shrink-0\">\n                    <div className=\"relative\">\n                      <div className=\"h-32 w-32 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center overflow-hidden\">\n                        {photoPreview ? (\n                          <img \n                            src={photoPreview} \n                            alt=\"Preview\" \n                            className=\"h-full w-full object-cover\"\n                          />\n                        ) : (\n                          <Upload className=\"h-8 w-8 text-gray-400 dark:text-gray-500\" />\n                        )}\n                      </div>\n                      <label\n                        htmlFor=\"photo\"\n                        className=\"absolute bottom-0 right-0 bg-white dark:bg-gray-700 rounded-full p-2 shadow-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-600\"\n                      >\n                        <Plus className=\"h-4 w-4 text-gray-600 dark:text-gray-300\" />\n                        <input \n                          type=\"file\" \n                          id=\"photo\" \n                          className=\"hidden\" \n                          accept=\"image/*\"\n                          onChange={handlePhotoChange}\n                        />\n                      </label>\n                    </div>\n                    <p className=\"mt-2 text-xs text-gray-500 dark:text-gray-400 text-center\">\n                      Click to upload photo\n                    </p>\n                  </div>\n\n                  <div className=\"flex-1 space-y-4\">\n                    <div>\n                      <label htmlFor=\"name\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                        Name\n                      </label>\n                      <input\n                        type=\"text\"\n                        id=\"name\"\n                        name=\"name\"\n                        value={formData.name}\n                        onChange={handleInputChange}\n                        placeholder=\"Enter child's name\"\n                        className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n                        required\n                        autoComplete=\"off\"\n                      />\n                    </div>\n\n                    <div>\n                      <label htmlFor=\"age\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                        Age\n                      </label>\n                      <input\n                        type=\"number\"\n                        id=\"age\"\n                        name=\"age\"\n                        value={formData.age}\n                        onChange={handleInputChange}\n                        min=\"1\"\n                        max=\"18\"\n                        placeholder=\"Enter age\"\n                        className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n                        required\n                        autoComplete=\"off\"\n                      />\n                    </div>\n\n                    <div>\n                      <label htmlFor=\"color\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                        Profile Color\n                      </label>\n                      <div className=\"relative mt-1\">\n                        <select\n                          id=\"color\"\n                          name=\"color\"\n                          value={formData.color}\n                          onChange={handleInputChange}\n                          className=\"block w-full pl-8 pr-10 py-2 text-base border-gray-300 dark:border-gray-600 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md dark:bg-gray-700 dark:text-white\"\n                        >\n                          {colorOptions.map(color => (\n                            <option key={color.value} value={color.value} className=\"flex items-center\">\n                              {color.name}\n                            </option>\n                          ))}\n                        </select>\n                        <div \n                          className=\"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 rounded-full pointer-events-none\"\n                          style={{ backgroundColor: formData.color }}\n                        ></div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                    Sports & Activities\n                  </label>\n                  <div className=\"grid grid-cols-2 sm:grid-cols-3 gap-3\">\n                    {availableSports.map((sport) => (\n                      <label\n                        key={sport.name}\n                        className={`flex items-center p-3 rounded-lg border dark:border-gray-600 cursor-pointer transition-colors ${\n                          selectedSports.includes(sport.name)\n                            ? 'border-blue-500 bg-blue-50 dark:bg-blue-900/50'\n                            : 'border-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700'\n                        }`}\n                      >\n                        <input\n                          type=\"checkbox\"\n                          className=\"hidden\"\n                          checked={selectedSports.includes(sport.name)}\n                          onChange={(e) => {\n                            if (e.target.checked) {\n                              setSelectedSports([...selectedSports, sport.name]);\n                            } else {\n                              setSelectedSports(selectedSports.filter((s) => s !== sport.name));\n                            }\n                          }}\n                        />\n                        <span\n                          className=\"w-3 h-3 rounded-full mr-2\"\n                          style={{ backgroundColor: sport.color }}\n                        ></span>\n                        <span className=\"text-sm text-gray-700 dark:text-gray-300\">{sport.name}</span>\n                      </label>\n                    ))}\n                  </div>\n                </div>\n\n                <div>\n                  <label htmlFor=\"notes\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                    Additional Notes\n                  </label>\n                  <textarea\n                    id=\"notes\"\n                    name=\"notes\"\n                    value={formData.notes}\n                    onChange={handleInputChange}\n                    rows={3}\n                    placeholder=\"Enter any important information about your child...\"\n                    className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n                  ></textarea>\n                </div>\n\n                {isFriendProfile && (\n                  <div className=\"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4\">\n                    <div className=\"flex items-center text-yellow-800 dark:text-yellow-200 mb-2\">\n                      <Crown className=\"h-5 w-5 mr-2\" />\n                      <span className=\"font-medium\">Administrator Access</span>\n                    </div>\n                    <p className=\"text-sm text-yellow-700 dark:text-yellow-300\">\n                      You are editing {child.ownerName}'s child profile. Any changes you make will be visible to them.\n                    </p>\n                  </div>\n                )}\n              </div>\n\n              <div className=\"px-6 py-4 bg-gray-50 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-600 flex justify-end space-x-3\">\n                <button\n                  type=\"button\"\n                  onClick={() => setShowEditModal(false)}\n                  className=\"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700\"\n                >\n                  Cancel\n                </button>\n                <button\n                  type=\"submit\"\n                  className={`px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white focus:outline-none focus:ring-2 focus:ring-offset-2 ${\n                    isFriendProfile \n                      ? 'bg-yellow-600 hover:bg-yellow-700 focus:ring-yellow-500' \n                      : 'bg-blue-600 hover:bg-blue-700 focus:ring-blue-500'\n                  }`}\n                >\n                  Save Changes\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      )}\n\n      {showTeamMapping && (\n        <TeamMapping\n          profileId={child.id}\n          onClose={() => setShowTeamMapping(false)}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default ChildProfile;","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { Home } from 'lucide-react';\n\nconst NotFound: React.FC = () => {\n  return (\n    <div className=\"min-h-[80vh] flex items-center justify-center\">\n      <div className=\"text-center\">\n        <h1 className=\"text-6xl font-bold text-gray-900 mb-4\">404</h1>\n        <p className=\"text-xl text-gray-600 mb-8\">Page not found</p>\n        <Link \n          to=\"/\" \n          className=\"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700\"\n        >\n          <Home className=\"h-5 w-5 mr-2\" />\n          Back to Dashboard\n        </Link>\n      </div>\n    </div>\n  );\n};\n\nexport default NotFound;","import { supabase } from './supabase';\n\nexport async function testSupabaseConnection() {\n  try {\n    // Test 1: Basic connection test with timeout\n    const timeoutPromise = new Promise((_, reject) => \n      setTimeout(() => reject(new Error('Connection timeout')), 10000)\n    );\n\n    const connectionPromise = supabase\n      .from('profiles')\n      .select('count')\n      .limit(0)\n      .throwOnError();\n\n    const { data, error } = await Promise.race([connectionPromise, timeoutPromise]) as any;\n    \n    if (error) {\n      console.error('Database connection test failed:', error);\n      return {\n        success: false,\n        error: 'Database connection failed',\n        details: {\n          message: error.message,\n          code: error.code,\n          hint: error.hint\n        }\n      };\n    }\n\n    // Test 2: Auth service test\n    const { data: authData, error: authError } = await supabase.auth.getSession();\n    \n    if (authError) {\n      console.error('Auth service test failed:', authError);\n      return {\n        success: false,\n        error: 'Authentication service failed',\n        details: {\n          message: authError.message,\n          name: authError.name\n        }\n      };\n    }\n\n    return {\n      success: true,\n      message: 'Connection successful',\n      details: {\n        dbConnected: true,\n        authConnected: true\n      }\n    };\n  } catch (error) {\n    console.error('Connection test failed:', error);\n    return {\n      success: false,\n      error: 'Connection test failed',\n      details: error instanceof Error ? {\n        message: error.message,\n        name: error.name\n      } : {\n        message: 'Unknown error occurred'\n      }\n    };\n  }\n}","import React, { useEffect, useState } from 'react';\nimport { useNavigate, useLocation, Link } from 'react-router-dom';\nimport { Auth } from '@supabase/auth-ui-react';\nimport { ThemeSupa } from '@supabase/auth-ui-shared';\nimport { supabase } from '../../lib/supabase';\nimport { testSupabaseConnection } from '../../lib/testConnection';\nimport { AlertCircle } from 'lucide-react';\n\nconst SignIn: React.FC = () => {\n  const navigate = useNavigate();\n  const location = useLocation();\n  const returnTo = location.state?.returnTo || '/';\n  const [error, setError] = useState<string | null>(null);\n  const [connectionStatus, setConnectionStatus] = useState<any>(null);\n\n  useEffect(() => {\n    const checkConnection = async () => {\n      const status = await testSupabaseConnection();\n      setConnectionStatus(status);\n    };\n\n    checkConnection();\n\n    const { data: { subscription } } = supabase.auth.onAuthStateChange((event, session) => {\n      if (event === 'SIGNED_IN' && session) {\n        navigate(returnTo);\n      }\n      setError(null);\n    });\n\n    return () => subscription.unsubscribe();\n  }, [navigate, returnTo]);\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8\">\n      <div className=\"sm:mx-auto sm:w-full sm:max-w-md\">\n        <h2 className=\"mt-6 text-center text-3xl font-extrabold text-gray-900\">Sign in to TeamSync</h2>\n        <p className=\"mt-2 text-center text-sm text-gray-600\">\n          Or{' '}\n          <Link to=\"/auth/signup\" className=\"font-medium text-blue-600 hover:text-blue-500\">\n            create a new account\n          </Link>\n        </p>\n      </div>\n\n      <div className=\"mt-8 sm:mx-auto sm:w-full sm:max-w-md\">\n        <div className=\"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10\">\n          {connectionStatus && !connectionStatus.success && (\n            <div className=\"mb-4 bg-red-50 border border-red-200 rounded-md p-4\">\n              <div className=\"flex\">\n                <AlertCircle className=\"h-5 w-5 text-red-400\" />\n                <div className=\"ml-3\">\n                  <h3 className=\"text-sm font-medium text-red-800\">Connection Error</h3>\n                  <div className=\"mt-2 text-sm text-red-700\">\n                    <p>{connectionStatus.error}</p>\n                    {connectionStatus.details && (\n                      <pre className=\"mt-2 text-xs bg-red-100 p-2 rounded overflow-auto\">\n                        {JSON.stringify(connectionStatus.details, null, 2)}\n                      </pre>\n                    )}\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {error && (\n            <div className=\"mb-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded relative\" role=\"alert\">\n              <p className=\"text-sm\">{error}</p>\n            </div>\n          )}\n\n          <Auth\n            supabaseClient={supabase}\n            appearance={{ \n              theme: ThemeSupa,\n              style: {\n                message: {\n                  color: 'red'\n                }\n              }\n            }}\n            providers={['google', 'apple', 'facebook']}\n            redirectTo={`${window.location.origin}/auth/callback`}\n            view=\"sign_in\"\n            onError={(error) => {\n              setError(error.message);\n            }}\n          />\n          <div className=\"mt-4 text-center\">\n            <Link \n              to=\"/auth/forgot-password\" \n              className=\"text-sm font-medium text-blue-600 hover:text-blue-500\"\n            >\n              Forgot your password?\n            </Link>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default SignIn;","import React, { useEffect } from 'react';\nimport { useNavigate, Link } from 'react-router-dom';\nimport { Auth } from '@supabase/auth-ui-react';\nimport { ThemeSupa } from '@supabase/auth-ui-shared';\nimport { supabase } from '../../lib/supabase';\n\nconst SignUp: React.FC = () => {\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const { data: { subscription } } = supabase.auth.onAuthStateChange((event) => {\n      if (event === 'SIGNED_IN') {\n        navigate('/settings');\n      }\n    });\n\n    return () => subscription.unsubscribe();\n  }, [navigate]);\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8\">\n      <div className=\"sm:mx-auto sm:w-full sm:max-w-md\">\n        <h2 className=\"mt-6 text-center text-3xl font-extrabold text-gray-900\">Create your account</h2>\n        <p className=\"mt-2 text-center text-sm text-gray-600\">\n          Already have an account?{' '}\n          <Link to=\"/auth/signin\" className=\"font-medium text-blue-600 hover:text-blue-500\">\n            Sign in here\n          </Link>\n        </p>\n      </div>\n\n      <div className=\"mt-8 sm:mx-auto sm:w-full sm:max-w-md\">\n        <div className=\"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10\">\n          <Auth\n            supabaseClient={supabase}\n            appearance={{ theme: ThemeSupa }}\n            providers={[]}\n            redirectTo={`${window.location.origin}/auth/callback`}\n            view=\"sign_up\"\n          />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default SignUp;","import React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { ArrowLeft, Mail, CheckCircle, AlertCircle } from 'lucide-react';\nimport { supabase } from '../../lib/supabase';\n\nconst ForgotPassword: React.FC = () => {\n  const [email, setEmail] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [success, setSuccess] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    setError(null);\n\n    try {\n      // Use the current origin, which will be the Netlify URL in production\n      const redirectUrl = `${window.location.origin}/auth/reset-password`;\n      \n      const { error } = await supabase.auth.resetPasswordForEmail(email, {\n        redirectTo: redirectUrl,\n      });\n\n      if (error) throw error;\n\n      setSuccess(true);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'An error occurred');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (success) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8\">\n        <div className=\"sm:mx-auto sm:w-full sm:max-w-md\">\n          <div className=\"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10\">\n            <div className=\"text-center\">\n              <div className=\"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 mb-4\">\n                <CheckCircle className=\"h-6 w-6 text-green-600\" />\n              </div>\n              <h2 className=\"text-2xl font-bold text-gray-900 mb-2\">Check your email</h2>\n              <p className=\"text-gray-600 mb-6\">\n                We've sent a password reset link to <strong>{email}</strong>\n              </p>\n              <p className=\"text-sm text-gray-500 mb-6\">\n                Didn't receive the email? Check your spam folder or try again.\n              </p>\n              <div className=\"space-y-3\">\n                <button\n                  onClick={() => {\n                    setSuccess(false);\n                    setEmail('');\n                  }}\n                  className=\"w-full flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n                >\n                  Try again\n                </button>\n                <Link\n                  to=\"/auth/signin\"\n                  className=\"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n                >\n                  Back to sign in\n                </Link>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8\">\n      <div className=\"sm:mx-auto sm:w-full sm:max-w-md\">\n        <div className=\"text-center\">\n          <h2 className=\"mt-6 text-3xl font-extrabold text-gray-900\">Forgot your password?</h2>\n          <p className=\"mt-2 text-sm text-gray-600\">\n            Enter your email address and we'll send you a link to reset your password.\n          </p>\n        </div>\n      </div>\n\n      <div className=\"mt-8 sm:mx-auto sm:w-full sm:max-w-md\">\n        <div className=\"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10\">\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\n            <div>\n              <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700\">\n                Email address\n              </label>\n              <div className=\"mt-1 relative rounded-md shadow-sm\">\n                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                  <Mail className=\"h-5 w-5 text-gray-400\" />\n                </div>\n                <input\n                  id=\"email\"\n                  name=\"email\"\n                  type=\"email\"\n                  autoComplete=\"email\"\n                  required\n                  value={email}\n                  onChange={(e) => setEmail(e.target.value)}\n                  className=\"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm\"\n                  placeholder=\"Enter your email address\"\n                />\n              </div>\n            </div>\n\n            {error && (\n              <div className=\"bg-red-50 border border-red-200 rounded-md p-4\">\n                <div className=\"flex\">\n                  <AlertCircle className=\"h-5 w-5 text-red-400\" />\n                  <div className=\"ml-3\">\n                    <p className=\"text-sm text-red-700\">{error}</p>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            <div>\n              <button\n                type=\"submit\"\n                disabled={loading || !email}\n                className=\"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                {loading ? (\n                  <>\n                    <div className=\"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent mr-2\" />\n                    Sending...\n                  </>\n                ) : (\n                  'Send reset link'\n                )}\n              </button>\n            </div>\n          </form>\n\n          <div className=\"mt-6\">\n            <Link\n              to=\"/auth/signin\"\n              className=\"flex items-center justify-center text-sm font-medium text-blue-600 hover:text-blue-500\"\n            >\n              <ArrowLeft className=\"h-4 w-4 mr-2\" />\n              Back to sign in\n            </Link>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ForgotPassword;","import React, { useState, useEffect } from 'react';\nimport { useNavigate, useSearchParams } from 'react-router-dom';\nimport { Lock, Eye, EyeOff, CheckCircle, AlertCircle } from 'lucide-react';\nimport { supabase } from '../../lib/supabase';\n\nconst ResetPassword: React.FC = () => {\n  const navigate = useNavigate();\n  const [searchParams] = useSearchParams();\n  const [password, setPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [showPassword, setShowPassword] = useState(false);\n  const [showConfirmPassword, setShowConfirmPassword] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [success, setSuccess] = useState(false);\n\n  useEffect(() => {\n    // Check if we have the required tokens from the URL\n    const accessToken = searchParams.get('access_token');\n    const refreshToken = searchParams.get('refresh_token');\n    \n    if (!accessToken || !refreshToken) {\n      setError('Invalid or expired reset link. Please request a new password reset.');\n      return;\n    }\n\n    // Set the session with the tokens from the URL\n    supabase.auth.setSession({\n      access_token: accessToken,\n      refresh_token: refreshToken,\n    });\n  }, [searchParams]);\n\n  const validatePassword = (pwd: string): string | null => {\n    if (pwd.length < 8) {\n      return 'Password must be at least 8 characters long';\n    }\n    if (!/(?=.*[a-z])/.test(pwd)) {\n      return 'Password must contain at least one lowercase letter';\n    }\n    if (!/(?=.*[A-Z])/.test(pwd)) {\n      return 'Password must contain at least one uppercase letter';\n    }\n    if (!/(?=.*\\d)/.test(pwd)) {\n      return 'Password must contain at least one number';\n    }\n    return null;\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError(null);\n\n    // Validate passwords match\n    if (password !== confirmPassword) {\n      setError('Passwords do not match');\n      return;\n    }\n\n    // Validate password strength\n    const passwordError = validatePassword(password);\n    if (passwordError) {\n      setError(passwordError);\n      return;\n    }\n\n    setLoading(true);\n\n    try {\n      const { error } = await supabase.auth.updateUser({\n        password: password\n      });\n\n      if (error) throw error;\n\n      setSuccess(true);\n      \n      // Redirect to login after 3 seconds\n      setTimeout(() => {\n        navigate('/auth/signin', { \n          state: { \n            message: 'Password updated successfully. Please sign in with your new password.' \n          } \n        });\n      }, 3000);\n\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'An error occurred while updating your password');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (success) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8\">\n        <div className=\"sm:mx-auto sm:w-full sm:max-w-md\">\n          <div className=\"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10\">\n            <div className=\"text-center\">\n              <div className=\"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 mb-4\">\n                <CheckCircle className=\"h-6 w-6 text-green-600\" />\n              </div>\n              <h2 className=\"text-2xl font-bold text-gray-900 mb-2\">Password updated!</h2>\n              <p className=\"text-gray-600 mb-4\">\n                Your password has been successfully updated.\n              </p>\n              <p className=\"text-sm text-gray-500\">\n                Redirecting you to the sign in page...\n              </p>\n              <div className=\"mt-4\">\n                <div className=\"animate-spin rounded-full h-6 w-6 border-2 border-blue-600 border-t-transparent mx-auto\"></div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8\">\n      <div className=\"sm:mx-auto sm:w-full sm:max-w-md\">\n        <div className=\"text-center\">\n          <h2 className=\"mt-6 text-3xl font-extrabold text-gray-900\">Reset your password</h2>\n          <p className=\"mt-2 text-sm text-gray-600\">\n            Enter your new password below\n          </p>\n        </div>\n      </div>\n\n      <div className=\"mt-8 sm:mx-auto sm:w-full sm:max-w-md\">\n        <div className=\"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10\">\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\n            <div>\n              <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-700\">\n                New Password\n              </label>\n              <div className=\"mt-1 relative rounded-md shadow-sm\">\n                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                  <Lock className=\"h-5 w-5 text-gray-400\" />\n                </div>\n                <input\n                  id=\"password\"\n                  name=\"password\"\n                  type={showPassword ? 'text' : 'password'}\n                  required\n                  value={password}\n                  onChange={(e) => setPassword(e.target.value)}\n                  className=\"block w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm\"\n                  placeholder=\"Enter your new password\"\n                />\n                <div className=\"absolute inset-y-0 right-0 pr-3 flex items-center\">\n                  <button\n                    type=\"button\"\n                    onClick={() => setShowPassword(!showPassword)}\n                    className=\"text-gray-400 hover:text-gray-500 focus:outline-none\"\n                  >\n                    {showPassword ? (\n                      <EyeOff className=\"h-5 w-5\" />\n                    ) : (\n                      <Eye className=\"h-5 w-5\" />\n                    )}\n                  </button>\n                </div>\n              </div>\n              <div className=\"mt-2 text-xs text-gray-500\">\n                Password must be at least 8 characters with uppercase, lowercase, and number\n              </div>\n            </div>\n\n            <div>\n              <label htmlFor=\"confirmPassword\" className=\"block text-sm font-medium text-gray-700\">\n                Confirm New Password\n              </label>\n              <div className=\"mt-1 relative rounded-md shadow-sm\">\n                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                  <Lock className=\"h-5 w-5 text-gray-400\" />\n                </div>\n                <input\n                  id=\"confirmPassword\"\n                  name=\"confirmPassword\"\n                  type={showConfirmPassword ? 'text' : 'password'}\n                  required\n                  value={confirmPassword}\n                  onChange={(e) => setConfirmPassword(e.target.value)}\n                  className=\"block w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm\"\n                  placeholder=\"Confirm your new password\"\n                />\n                <div className=\"absolute inset-y-0 right-0 pr-3 flex items-center\">\n                  <button\n                    type=\"button\"\n                    onClick={() => setShowConfirmPassword(!showConfirmPassword)}\n                    className=\"text-gray-400 hover:text-gray-500 focus:outline-none\"\n                  >\n                    {showConfirmPassword ? (\n                      <EyeOff className=\"h-5 w-5\" />\n                    ) : (\n                      <Eye className=\"h-5 w-5\" />\n                    )}\n                  </button>\n                </div>\n              </div>\n            </div>\n\n            {error && (\n              <div className=\"bg-red-50 border border-red-200 rounded-md p-4\">\n                <div className=\"flex\">\n                  <AlertCircle className=\"h-5 w-5 text-red-400\" />\n                  <div className=\"ml-3\">\n                    <p className=\"text-sm text-red-700\">{error}</p>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            <div>\n              <button\n                type=\"submit\"\n                disabled={loading || !password || !confirmPassword}\n                className=\"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                {loading ? (\n                  <>\n                    <div className=\"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent mr-2\" />\n                    Updating password...\n                  </>\n                ) : (\n                  'Update password'\n                )}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ResetPassword;","import { useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { supabase } from '../../lib/supabase';\n\nconst AuthCallback = () => {\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    supabase.auth.onAuthStateChange((event) => {\n      if (event === 'SIGNED_IN') {\n        navigate('/');\n      }\n    });\n  }, [navigate]);\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center\">\n      <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n    </div>\n  );\n};\n\nexport default AuthCallback;","import { registerPlugin } from '@capacitor/core';\nconst PushNotifications = registerPlugin('PushNotifications', {});\nexport * from './definitions';\nexport { PushNotifications };\n//# sourceMappingURL=index.js.map","import { useEffect, useState } from 'react';\nimport { Capacitor } from '@capacitor/core';\nimport { \n  PushNotifications, \n  PushNotificationSchema, \n  ActionPerformed,\n  Token \n} from '@capacitor/push-notifications';\n\nexport const usePushNotifications = () => {\n  const [token, setToken] = useState<string | null>(null);\n  const [isRegistered, setIsRegistered] = useState(false);\n\n  useEffect(() => {\n    if (!Capacitor.isNativePlatform()) {\n      return;\n    }\n\n    const initializePushNotifications = async () => {\n      try {\n        // Request permission\n        const permission = await PushNotifications.requestPermissions();\n        \n        if (permission.receive === 'granted') {\n          // Register for push notifications\n          await PushNotifications.register();\n          setIsRegistered(true);\n        }\n\n        // Listen for registration\n        PushNotifications.addListener('registration', (token: Token) => {\n          console.log('Push registration success, token: ' + token.value);\n          setToken(token.value);\n          // TODO: Send token to your backend\n        });\n\n        // Listen for registration errors\n        PushNotifications.addListener('registrationError', (error: any) => {\n          console.error('Error on registration: ' + JSON.stringify(error));\n        });\n\n        // Listen for push notifications received\n        PushNotifications.addListener(\n          'pushNotificationReceived',\n          (notification: PushNotificationSchema) => {\n            console.log('Push notification received: ', notification);\n            // Handle notification when app is in foreground\n          },\n        );\n\n        // Listen for push notification actions\n        PushNotifications.addListener(\n          'pushNotificationActionPerformed',\n          (notification: ActionPerformed) => {\n            console.log('Push notification action performed', notification);\n            // Handle notification tap\n            const data = notification.notification.data;\n            \n            // Navigate based on notification type\n            if (data?.type === 'message') {\n              // Navigate to chat\n              window.location.href = '/friends';\n            } else if (data?.type === 'friend_request') {\n              // Navigate to friends\n              window.location.href = '/friends';\n            } else if (data?.type === 'schedule_change') {\n              // Navigate to calendar\n              window.location.href = '/calendar';\n            }\n          },\n        );\n\n      } catch (error) {\n        console.error('Error initializing push notifications:', error);\n      }\n    };\n\n    initializePushNotifications();\n\n    return () => {\n      PushNotifications.removeAllListeners();\n    };\n  }, []);\n\n  const sendLocalNotification = async (title: string, body: string, data?: any) => {\n    if (!Capacitor.isNativePlatform()) {\n      return;\n    }\n\n    try {\n      const { LocalNotifications } = await import('@capacitor/local-notifications');\n      \n      await LocalNotifications.schedule({\n        notifications: [\n          {\n            title,\n            body,\n            id: Date.now(),\n            extra: data,\n            schedule: { at: new Date(Date.now() + 1000) }, // 1 second from now\n          }\n        ]\n      });\n    } catch (error) {\n      console.error('Error sending local notification:', error);\n    }\n  };\n\n  return {\n    token,\n    isRegistered,\n    sendLocalNotification\n  };\n};","import React, { useEffect } from 'react';\nimport { useCapacitor } from '../../hooks/useCapacitor';\nimport { usePushNotifications } from '../../hooks/usePushNotifications';\n\ninterface MobileOptimizationsProps {\n  children: React.ReactNode;\n}\n\nconst MobileOptimizations: React.FC<MobileOptimizationsProps> = ({ children }) => {\n  const { isNative, isIOS, isAndroid } = useCapacitor();\n  const { sendLocalNotification } = usePushNotifications();\n\n  useEffect(() => {\n    if (isNative) {\n      // Add mobile-specific CSS classes\n      document.body.classList.add('mobile-app');\n      \n      if (isIOS) {\n        document.body.classList.add('ios');\n        // Add iOS-specific safe area handling\n        document.documentElement.style.setProperty('--safe-area-inset-top', 'env(safe-area-inset-top)');\n        document.documentElement.style.setProperty('--safe-area-inset-bottom', 'env(safe-area-inset-bottom)');\n      }\n      \n      if (isAndroid) {\n        document.body.classList.add('android');\n      }\n\n      // Prevent zoom on input focus\n      const viewport = document.querySelector('meta[name=viewport]');\n      if (viewport) {\n        viewport.setAttribute('content', 'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no');\n      }\n\n      // Handle touch events for better mobile experience\n      document.addEventListener('touchstart', () => {}, { passive: true });\n      document.addEventListener('touchmove', () => {}, { passive: true });\n    }\n\n    return () => {\n      if (isNative) {\n        document.body.classList.remove('mobile-app', 'ios', 'android');\n      }\n    };\n  }, [isNative, isIOS, isAndroid]);\n\n  // Add mobile-specific styles\n  useEffect(() => {\n    if (isNative) {\n      const style = document.createElement('style');\n      style.textContent = `\n        .mobile-app {\n          -webkit-touch-callout: none;\n          -webkit-user-select: none;\n          -webkit-tap-highlight-color: transparent;\n          overscroll-behavior: none;\n        }\n        \n        .ios {\n          padding-top: var(--safe-area-inset-top, 0);\n          padding-bottom: var(--safe-area-inset-bottom, 0);\n        }\n        \n        .mobile-app input,\n        .mobile-app textarea {\n          font-size: 16px !important; /* Prevent zoom on iOS */\n        }\n        \n        .mobile-app .scroll-container {\n          -webkit-overflow-scrolling: touch;\n        }\n        \n        /* Better touch targets */\n        .mobile-app button,\n        .mobile-app a {\n          min-height: 44px;\n          min-width: 44px;\n        }\n        \n        /* Smooth scrolling */\n        .mobile-app {\n          scroll-behavior: smooth;\n        }\n      `;\n      document.head.appendChild(style);\n\n      return () => {\n        document.head.removeChild(style);\n      };\n    }\n  }, [isNative]);\n\n  return <>{children}</>;\n};\n\nexport default MobileOptimizations;","import { useState, useEffect } from 'react';\nimport { supabase } from '../lib/supabase';\nimport { User } from '@supabase/supabase-js';\n\nexport function useAuth() {\n  const [user, setUser] = useState<User | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    // Get initial session\n    supabase.auth.getSession().then(({ data: { session } }) => {\n      setUser(session?.user ?? null);\n      setLoading(false);\n    });\n\n    // Listen for auth changes\n    const { data: { subscription } } = supabase.auth.onAuthStateChange((_event, session) => {\n      setUser(session?.user ?? null);\n      setLoading(false);\n    });\n\n    return () => subscription.unsubscribe();\n  }, []);\n\n  return { user, loading };\n}","import React, { Suspense, useEffect } from 'react';\nimport { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\nimport Layout from './components/layout/Layout';\nimport Dashboard from './pages/Dashboard';\nimport Calendar from './pages/Calendar';\nimport Connections from './pages/Connections';\nimport TeamSnapConnection from './pages/connections/TeamSnapConnection';\nimport TeamSnapCallback from './pages/connections/TeamSnapCallback';\nimport Playmetrics from './pages/connections/Playmetrics';\nimport Profiles from './pages/Profiles';\nimport Friends from './pages/Friends';\nimport Settings from './pages/Settings';\nimport ChildProfile from './pages/ChildProfile';\nimport NotFound from './pages/NotFound';\nimport SignIn from './pages/auth/SignIn';\nimport SignUp from './pages/auth/SignUp';\nimport ForgotPassword from './pages/auth/ForgotPassword';\nimport ResetPassword from './pages/auth/ResetPassword';\nimport AuthCallback from './pages/auth/AuthCallback';\nimport MobileOptimizations from './components/mobile/MobileOptimizations';\nimport { AppProvider } from './context/AppContext';\nimport { ThemeProvider } from './context/ThemeContext';\nimport { ProfilesProvider } from './context/ProfilesContext';\nimport { useAuth } from './hooks/useAuth';\nimport { useCapacitor } from './hooks/useCapacitor';\nimport { supabase, testConnection } from './lib/supabase';\n\nconst LoadingSpinner = () => (\n  <div className=\"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900\">\n    <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n  </div>\n);\n\nconst ErrorBoundary: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n  const [hasError, setHasError] = React.useState(false);\n  const [errorMessage, setErrorMessage] = React.useState<string>('');\n\n  React.useEffect(() => {\n    const handleError = (event: ErrorEvent) => {\n      setHasError(true);\n      setErrorMessage(event.message);\n    };\n    window.addEventListener('error', handleError);\n    return () => window.removeEventListener('error', handleError);\n  }, []);\n\n  if (hasError) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900\">\n        <div className=\"text-center\">\n          <h1 className=\"text-xl font-bold text-red-600 mb-2\">Something went wrong</h1>\n          <p className=\"text-sm text-gray-600 mb-4\">{errorMessage}</p>\n          <button \n            onClick={() => window.location.reload()} \n            className=\"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700\"\n          >\n            Reload Page\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return <>{children}</>;\n};\n\nconst ProtectedRoute = ({ children }: { children: React.ReactNode }) => {\n  const { user, loading } = useAuth();\n\n  if (loading) {\n    return <LoadingSpinner />;\n  }\n\n  if (!user) {\n    return <Navigate to=\"/auth/signin\" replace />;\n  }\n\n  return <>{children}</>;\n};\n\nconst AppContent = () => {\n  const [initialized, setInitialized] = React.useState(false);\n  const [error, setError] = React.useState<string | null>(null);\n  const { isNative } = useCapacitor();\n\n  useEffect(() => {\n    const initializeApp = async () => {\n      try {\n        const isConnected = await testConnection();\n        if (!isConnected) {\n          throw new Error('Failed to connect to the backend services');\n        }\n        setInitialized(true);\n      } catch (err) {\n        setError(err instanceof Error ? err.message : 'Failed to initialize application');\n      }\n    };\n\n    initializeApp();\n  }, []);\n\n  if (error) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900\">\n        <div className=\"text-center\">\n          <h1 className=\"text-xl font-bold text-red-600 mb-2\">Connection Error</h1>\n          <p className=\"text-sm text-gray-600 mb-4\">{error}</p>\n          <button \n            onClick={() => window.location.reload()} \n            className=\"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700\"\n          >\n            Retry Connection\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  if (!initialized) {\n    return <LoadingSpinner />;\n  }\n\n  return (\n    <Router>\n      <Routes>\n        <Route path=\"/auth/signin\" element={<SignIn />} />\n        <Route path=\"/auth/signup\" element={<SignUp />} />\n        <Route path=\"/auth/forgot-password\" element={<ForgotPassword />} />\n        <Route path=\"/auth/reset-password\" element={<ResetPassword />} />\n        <Route path=\"/auth/callback\" element={<AuthCallback />} />\n        <Route path=\"/connections/teamsnap/callback\" element={<TeamSnapCallback />} />\n        <Route path=\"/\" element={\n          <ProtectedRoute>\n            <Layout />\n          </ProtectedRoute>\n        }>\n          <Route index element={<Dashboard />} />\n          <Route path=\"calendar\" element={<Calendar />} />\n          <Route path=\"connections\" element={<Connections />} />\n          <Route path=\"connections/teamsnap\" element={<TeamSnapConnection />} />\n          <Route path=\"connections/playmetrics\" element={<Playmetrics />} />\n          <Route path=\"profiles\" element={<Profiles />} />\n          <Route path=\"profiles/:id\" element={<ChildProfile />} />\n          <Route path=\"friends\" element={<Friends />} />\n          <Route path=\"settings\" element={<Settings />} />\n          <Route path=\"*\" element={<NotFound />} />\n        </Route>\n      </Routes>\n    </Router>\n  );\n};\n\nexport default function App() {\n  return (\n    <ErrorBoundary>\n      <div className=\"min-h-screen min-w-full bg-gray-50 dark:bg-gray-900\">\n        <ThemeProvider>\n          <AppProvider>\n            <ProfilesProvider>\n              <MobileOptimizations>\n                <Suspense fallback={<LoadingSpinner />}>\n                  <AppContent />\n                </Suspense>\n              </MobileOptimizations>\n            </ProfilesProvider>\n          </AppProvider>\n        </ThemeProvider>\n      </div>\n    </ErrorBoundary>\n  );\n}","import { StrictMode } from 'react';\nimport { createRoot } from 'react-dom/client';\nimport App from './App';\nimport './index.css';\nimport { supabase } from './lib/supabase';\n\nconst root = document.getElementById('root');\n\nif (!root) {\n  throw new Error('Root element not found');\n}\n\nconst reactRoot = createRoot(root);\n\n// Initialize Supabase auth state\nsupabase.auth.onAuthStateChange((event, session) => {\n  if (event === 'SIGNED_OUT' || event === 'USER_DELETED') {\n    // Delete any existing auth data\n    window.localStorage.removeItem('supabase.auth.token');\n  }\n});\n\nreactRoot.render(\n  <StrictMode>\n    <App />\n  </StrictMode>\n);"],"file":"assets/index.BLLJjg3v.js"}